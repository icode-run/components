"use strict";
(self["webpackChunkicode_run"] = self["webpackChunkicode_run"] || []).push([["vendors-my-cli_node_modules_monaco-editor_esm_vs_editor_common_diff_diffComputer_js-my-cli_no-c92950"],{

/***/ 38850:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "g": () => (/* binding */ DiffComputer)
/* harmony export */ });
/* harmony import */ var _base_common_diff_diff_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(94657);
/* harmony import */ var _base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41712);
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var MINIMUM_MATCHING_CHARACTER_LENGTH=3;function _computeDiff(originalSequence,modifiedSequence,continueProcessingPredicate,pretty){var diffAlgo=new _base_common_diff_diff_js__WEBPACK_IMPORTED_MODULE_0__/* .LcsDiff */ .Hs(originalSequence,modifiedSequence,continueProcessingPredicate);return diffAlgo.ComputeDiff(pretty);}var LineSequence=/*#__PURE__*/function(){function LineSequence(lines){_classCallCheck(this,LineSequence);var startColumns=[];var endColumns=[];for(var i=0,length=lines.length;i<length;i++){startColumns[i]=getFirstNonBlankColumn(lines[i],1);endColumns[i]=getLastNonBlankColumn(lines[i],1);}this.lines=lines;this._startColumns=startColumns;this._endColumns=endColumns;}_createClass(LineSequence,[{key:"getElements",value:function getElements(){var elements=[];for(var i=0,len=this.lines.length;i<len;i++){elements[i]=this.lines[i].substring(this._startColumns[i]-1,this._endColumns[i]-1);}return elements;}},{key:"getStrictElement",value:function getStrictElement(index){return this.lines[index];}},{key:"getStartLineNumber",value:function getStartLineNumber(i){return i+1;}},{key:"getEndLineNumber",value:function getEndLineNumber(i){return i+1;}},{key:"createCharSequence",value:function createCharSequence(shouldIgnoreTrimWhitespace,startIndex,endIndex){var charCodes=[];var lineNumbers=[];var columns=[];var len=0;for(var index=startIndex;index<=endIndex;index++){var lineContent=this.lines[index];var startColumn=shouldIgnoreTrimWhitespace?this._startColumns[index]:1;var endColumn=shouldIgnoreTrimWhitespace?this._endColumns[index]:lineContent.length+1;for(var col=startColumn;col<endColumn;col++){charCodes[len]=lineContent.charCodeAt(col-1);lineNumbers[len]=index+1;columns[len]=col;len++;}}return new CharSequence(charCodes,lineNumbers,columns);}}]);return LineSequence;}();var CharSequence=/*#__PURE__*/function(){function CharSequence(charCodes,lineNumbers,columns){_classCallCheck(this,CharSequence);this._charCodes=charCodes;this._lineNumbers=lineNumbers;this._columns=columns;}_createClass(CharSequence,[{key:"getElements",value:function getElements(){return this._charCodes;}},{key:"getStartLineNumber",value:function getStartLineNumber(i){return this._lineNumbers[i];}},{key:"getStartColumn",value:function getStartColumn(i){return this._columns[i];}},{key:"getEndLineNumber",value:function getEndLineNumber(i){return this._lineNumbers[i];}},{key:"getEndColumn",value:function getEndColumn(i){return this._columns[i]+1;}}]);return CharSequence;}();var CharChange=/*#__PURE__*/function(){function CharChange(originalStartLineNumber,originalStartColumn,originalEndLineNumber,originalEndColumn,modifiedStartLineNumber,modifiedStartColumn,modifiedEndLineNumber,modifiedEndColumn){_classCallCheck(this,CharChange);this.originalStartLineNumber=originalStartLineNumber;this.originalStartColumn=originalStartColumn;this.originalEndLineNumber=originalEndLineNumber;this.originalEndColumn=originalEndColumn;this.modifiedStartLineNumber=modifiedStartLineNumber;this.modifiedStartColumn=modifiedStartColumn;this.modifiedEndLineNumber=modifiedEndLineNumber;this.modifiedEndColumn=modifiedEndColumn;}_createClass(CharChange,null,[{key:"createFromDiffChange",value:function createFromDiffChange(diffChange,originalCharSequence,modifiedCharSequence){var originalStartLineNumber;var originalStartColumn;var originalEndLineNumber;var originalEndColumn;var modifiedStartLineNumber;var modifiedStartColumn;var modifiedEndLineNumber;var modifiedEndColumn;if(diffChange.originalLength===0){originalStartLineNumber=0;originalStartColumn=0;originalEndLineNumber=0;originalEndColumn=0;}else{originalStartLineNumber=originalCharSequence.getStartLineNumber(diffChange.originalStart);originalStartColumn=originalCharSequence.getStartColumn(diffChange.originalStart);originalEndLineNumber=originalCharSequence.getEndLineNumber(diffChange.originalStart+diffChange.originalLength-1);originalEndColumn=originalCharSequence.getEndColumn(diffChange.originalStart+diffChange.originalLength-1);}if(diffChange.modifiedLength===0){modifiedStartLineNumber=0;modifiedStartColumn=0;modifiedEndLineNumber=0;modifiedEndColumn=0;}else{modifiedStartLineNumber=modifiedCharSequence.getStartLineNumber(diffChange.modifiedStart);modifiedStartColumn=modifiedCharSequence.getStartColumn(diffChange.modifiedStart);modifiedEndLineNumber=modifiedCharSequence.getEndLineNumber(diffChange.modifiedStart+diffChange.modifiedLength-1);modifiedEndColumn=modifiedCharSequence.getEndColumn(diffChange.modifiedStart+diffChange.modifiedLength-1);}return new CharChange(originalStartLineNumber,originalStartColumn,originalEndLineNumber,originalEndColumn,modifiedStartLineNumber,modifiedStartColumn,modifiedEndLineNumber,modifiedEndColumn);}}]);return CharChange;}();function postProcessCharChanges(rawChanges){if(rawChanges.length<=1){return rawChanges;}var result=[rawChanges[0]];var prevChange=result[0];for(var i=1,len=rawChanges.length;i<len;i++){var currChange=rawChanges[i];var originalMatchingLength=currChange.originalStart-(prevChange.originalStart+prevChange.originalLength);var modifiedMatchingLength=currChange.modifiedStart-(prevChange.modifiedStart+prevChange.modifiedLength);// Both of the above should be equal, but the continueProcessingPredicate may prevent this from being true
var matchingLength=Math.min(originalMatchingLength,modifiedMatchingLength);if(matchingLength<MINIMUM_MATCHING_CHARACTER_LENGTH){// Merge the current change into the previous one
prevChange.originalLength=currChange.originalStart+currChange.originalLength-prevChange.originalStart;prevChange.modifiedLength=currChange.modifiedStart+currChange.modifiedLength-prevChange.modifiedStart;}else{// Add the current change
result.push(currChange);prevChange=currChange;}}return result;}var LineChange=/*#__PURE__*/function(){function LineChange(originalStartLineNumber,originalEndLineNumber,modifiedStartLineNumber,modifiedEndLineNumber,charChanges){_classCallCheck(this,LineChange);this.originalStartLineNumber=originalStartLineNumber;this.originalEndLineNumber=originalEndLineNumber;this.modifiedStartLineNumber=modifiedStartLineNumber;this.modifiedEndLineNumber=modifiedEndLineNumber;this.charChanges=charChanges;}_createClass(LineChange,null,[{key:"createFromDiffResult",value:function createFromDiffResult(shouldIgnoreTrimWhitespace,diffChange,originalLineSequence,modifiedLineSequence,continueCharDiff,shouldComputeCharChanges,shouldPostProcessCharChanges){var originalStartLineNumber;var originalEndLineNumber;var modifiedStartLineNumber;var modifiedEndLineNumber;var charChanges=undefined;if(diffChange.originalLength===0){originalStartLineNumber=originalLineSequence.getStartLineNumber(diffChange.originalStart)-1;originalEndLineNumber=0;}else{originalStartLineNumber=originalLineSequence.getStartLineNumber(diffChange.originalStart);originalEndLineNumber=originalLineSequence.getEndLineNumber(diffChange.originalStart+diffChange.originalLength-1);}if(diffChange.modifiedLength===0){modifiedStartLineNumber=modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart)-1;modifiedEndLineNumber=0;}else{modifiedStartLineNumber=modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart);modifiedEndLineNumber=modifiedLineSequence.getEndLineNumber(diffChange.modifiedStart+diffChange.modifiedLength-1);}if(shouldComputeCharChanges&&diffChange.originalLength>0&&diffChange.originalLength<20&&diffChange.modifiedLength>0&&diffChange.modifiedLength<20&&continueCharDiff()){// Compute character changes for diff chunks of at most 20 lines...
var originalCharSequence=originalLineSequence.createCharSequence(shouldIgnoreTrimWhitespace,diffChange.originalStart,diffChange.originalStart+diffChange.originalLength-1);var modifiedCharSequence=modifiedLineSequence.createCharSequence(shouldIgnoreTrimWhitespace,diffChange.modifiedStart,diffChange.modifiedStart+diffChange.modifiedLength-1);var rawChanges=_computeDiff(originalCharSequence,modifiedCharSequence,continueCharDiff,true).changes;if(shouldPostProcessCharChanges){rawChanges=postProcessCharChanges(rawChanges);}charChanges=[];for(var i=0,length=rawChanges.length;i<length;i++){charChanges.push(CharChange.createFromDiffChange(rawChanges[i],originalCharSequence,modifiedCharSequence));}}return new LineChange(originalStartLineNumber,originalEndLineNumber,modifiedStartLineNumber,modifiedEndLineNumber,charChanges);}}]);return LineChange;}();var DiffComputer=/*#__PURE__*/function(){function DiffComputer(originalLines,modifiedLines,opts){_classCallCheck(this,DiffComputer);this.shouldComputeCharChanges=opts.shouldComputeCharChanges;this.shouldPostProcessCharChanges=opts.shouldPostProcessCharChanges;this.shouldIgnoreTrimWhitespace=opts.shouldIgnoreTrimWhitespace;this.shouldMakePrettyDiff=opts.shouldMakePrettyDiff;this.originalLines=originalLines;this.modifiedLines=modifiedLines;this.original=new LineSequence(originalLines);this.modified=new LineSequence(modifiedLines);this.continueLineDiff=createContinueProcessingPredicate(opts.maxComputationTime);this.continueCharDiff=createContinueProcessingPredicate(opts.maxComputationTime===0?0:Math.min(opts.maxComputationTime,5000));// never run after 5s for character changes...
}_createClass(DiffComputer,[{key:"computeDiff",value:function computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0){// empty original => fast path
if(this.modified.lines.length===1&&this.modified.lines[0].length===0){return{quitEarly:false,changes:[]};}return{quitEarly:false,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};}if(this.modified.lines.length===1&&this.modified.lines[0].length===0){// empty modified => fast path
return{quitEarly:false,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};}var diffResult=_computeDiff(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff);var rawChanges=diffResult.changes;var quitEarly=diffResult.quitEarly;// The diff is always computed with ignoring trim whitespace
// This ensures we get the prettiest diff
if(this.shouldIgnoreTrimWhitespace){var lineChanges=[];for(var i=0,length=rawChanges.length;i<length;i++){lineChanges.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace,rawChanges[i],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));}return{quitEarly:quitEarly,changes:lineChanges};}// Need to post-process and introduce changes where the trim whitespace is different
// Note that we are looping starting at -1 to also cover the lines before the first change
var result=[];var originalLineIndex=0;var modifiedLineIndex=0;for(var _i=-1/* !!!! */,len=rawChanges.length;_i<len;_i++){var nextChange=_i+1<len?rawChanges[_i+1]:null;var originalStop=nextChange?nextChange.originalStart:this.originalLines.length;var modifiedStop=nextChange?nextChange.modifiedStart:this.modifiedLines.length;while(originalLineIndex<originalStop&&modifiedLineIndex<modifiedStop){var originalLine=this.originalLines[originalLineIndex];var modifiedLine=this.modifiedLines[modifiedLineIndex];if(originalLine!==modifiedLine){// These lines differ only in trim whitespace
// Check the leading whitespace
{var originalStartColumn=getFirstNonBlankColumn(originalLine,1);var modifiedStartColumn=getFirstNonBlankColumn(modifiedLine,1);while(originalStartColumn>1&&modifiedStartColumn>1){var originalChar=originalLine.charCodeAt(originalStartColumn-2);var modifiedChar=modifiedLine.charCodeAt(modifiedStartColumn-2);if(originalChar!==modifiedChar){break;}originalStartColumn--;modifiedStartColumn--;}if(originalStartColumn>1||modifiedStartColumn>1){this._pushTrimWhitespaceCharChange(result,originalLineIndex+1,1,originalStartColumn,modifiedLineIndex+1,1,modifiedStartColumn);}}// Check the trailing whitespace
{var originalEndColumn=getLastNonBlankColumn(originalLine,1);var modifiedEndColumn=getLastNonBlankColumn(modifiedLine,1);var originalMaxColumn=originalLine.length+1;var modifiedMaxColumn=modifiedLine.length+1;while(originalEndColumn<originalMaxColumn&&modifiedEndColumn<modifiedMaxColumn){var _originalChar=originalLine.charCodeAt(originalEndColumn-1);var _modifiedChar=originalLine.charCodeAt(modifiedEndColumn-1);if(_originalChar!==_modifiedChar){break;}originalEndColumn++;modifiedEndColumn++;}if(originalEndColumn<originalMaxColumn||modifiedEndColumn<modifiedMaxColumn){this._pushTrimWhitespaceCharChange(result,originalLineIndex+1,originalEndColumn,originalMaxColumn,modifiedLineIndex+1,modifiedEndColumn,modifiedMaxColumn);}}}originalLineIndex++;modifiedLineIndex++;}if(nextChange){// Emit the actual change
result.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace,nextChange,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));originalLineIndex+=nextChange.originalLength;modifiedLineIndex+=nextChange.modifiedLength;}}return{quitEarly:quitEarly,changes:result};}},{key:"_pushTrimWhitespaceCharChange",value:function _pushTrimWhitespaceCharChange(result,originalLineNumber,originalStartColumn,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedEndColumn){if(this._mergeTrimWhitespaceCharChange(result,originalLineNumber,originalStartColumn,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedEndColumn)){// Merged into previous
return;}var charChanges=undefined;if(this.shouldComputeCharChanges){charChanges=[new CharChange(originalLineNumber,originalStartColumn,originalLineNumber,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedLineNumber,modifiedEndColumn)];}result.push(new LineChange(originalLineNumber,originalLineNumber,modifiedLineNumber,modifiedLineNumber,charChanges));}},{key:"_mergeTrimWhitespaceCharChange",value:function _mergeTrimWhitespaceCharChange(result,originalLineNumber,originalStartColumn,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedEndColumn){var len=result.length;if(len===0){return false;}var prevChange=result[len-1];if(prevChange.originalEndLineNumber===0||prevChange.modifiedEndLineNumber===0){// Don't merge with inserts/deletes
return false;}if(prevChange.originalEndLineNumber+1===originalLineNumber&&prevChange.modifiedEndLineNumber+1===modifiedLineNumber){prevChange.originalEndLineNumber=originalLineNumber;prevChange.modifiedEndLineNumber=modifiedLineNumber;if(this.shouldComputeCharChanges&&prevChange.charChanges){prevChange.charChanges.push(new CharChange(originalLineNumber,originalStartColumn,originalLineNumber,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedLineNumber,modifiedEndColumn));}return true;}return false;}}]);return DiffComputer;}();function getFirstNonBlankColumn(txt,defaultValue){var r=_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .firstNonWhitespaceIndex */ .LC(txt);if(r===-1){return defaultValue;}return r+1;}function getLastNonBlankColumn(txt,defaultValue){var r=_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .lastNonWhitespaceIndex */ .ow(txt);if(r===-1){return defaultValue;}return r+2;}function createContinueProcessingPredicate(maximumRuntime){if(maximumRuntime===0){return function(){return true;};}var startTime=Date.now();return function(){return Date.now()-startTime<maximumRuntime;};}

/***/ }),

/***/ 23596:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "p": () => (/* binding */ InternalEditorAction)
/* harmony export */ });
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var InternalEditorAction=/*#__PURE__*/function(){function InternalEditorAction(id,label,alias,precondition,run,contextKeyService){_classCallCheck(this,InternalEditorAction);this.id=id;this.label=label;this.alias=alias;this._precondition=precondition;this._run=run;this._contextKeyService=contextKeyService;}_createClass(InternalEditorAction,[{key:"isSupported",value:function isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition);}},{key:"run",value:function run(){if(!this.isSupported()){return Promise.resolve(undefined);}return this._run();}}]);return InternalEditorAction;}();

/***/ }),

/***/ 69400:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "g": () => (/* binding */ EditorType)
/* harmony export */ });
/**
 * The type of the `IEditor`.
 */var EditorType={ICodeEditor:'vs.editor.ICodeEditor',IDiffEditor:'vs.editor.IDiffEditor'};

/***/ }),

/***/ 48919:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "u": () => (/* binding */ EditorContextKeys)
/* harmony export */ });
/* harmony import */ var _nls_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(71453);
/* harmony import */ var _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11703);
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var EditorContextKeys;(function(EditorContextKeys){EditorContextKeys.editorSimpleInput=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorSimpleInput',false,true);/**
     * A context key that is set when the editor's text has focus (cursor is blinking).
     * Is false when focus is in simple editor widgets (repl input, scm commit input).
     */EditorContextKeys.editorTextFocus=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorTextFocus',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorTextFocus',"Whether the editor text has focus (cursor is blinking)"));/**
     * A context key that is set when the editor's text or an editor's widget has focus.
     */EditorContextKeys.focus=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorFocus',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorFocus',"Whether the editor or an editor widget has focus (e.g. focus is in the find widget)"));/**
     * A context key that is set when any editor input has focus (regular editor, repl input...).
     */EditorContextKeys.textInputFocus=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('textInputFocus',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('textInputFocus',"Whether an editor or a rich text input has focus (cursor is blinking)"));EditorContextKeys.readOnly=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorReadonly',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorReadonly',"Whether the editor is read only"));EditorContextKeys.inDiffEditor=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('inDiffEditor',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('inDiffEditor',"Whether the context is a diff editor"));EditorContextKeys.columnSelection=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorColumnSelection',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorColumnSelection',"Whether `editor.columnSelection` is enabled"));EditorContextKeys.writable=EditorContextKeys.readOnly.toNegated();EditorContextKeys.hasNonEmptySelection=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasSelection',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasSelection',"Whether the editor has text selected"));EditorContextKeys.hasOnlyEmptySelection=EditorContextKeys.hasNonEmptySelection.toNegated();EditorContextKeys.hasMultipleSelections=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasMultipleSelections',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasMultipleSelections',"Whether the editor has multiple selections"));EditorContextKeys.hasSingleSelection=EditorContextKeys.hasMultipleSelections.toNegated();EditorContextKeys.tabMovesFocus=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorTabMovesFocus',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorTabMovesFocus',"Whether `Tab` will move focus out of the editor"));EditorContextKeys.tabDoesNotMoveFocus=EditorContextKeys.tabMovesFocus.toNegated();EditorContextKeys.isInWalkThroughSnippet=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('isInEmbeddedEditor',false,true);EditorContextKeys.canUndo=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('canUndo',false,true);EditorContextKeys.canRedo=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('canRedo',false,true);EditorContextKeys.hoverVisible=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHoverVisible',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHoverVisible',"Whether the editor hover is visible"));/**
     * A context key that is set when an editor is part of a larger editor, like notebooks or
     * (future) a diff editor
     */EditorContextKeys.inCompositeEditor=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('inCompositeEditor',undefined,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('inCompositeEditor',"Whether the editor is part of a larger editor (e.g. notebooks)"));EditorContextKeys.notInCompositeEditor=EditorContextKeys.inCompositeEditor.toNegated();// -- mode context keys
EditorContextKeys.languageId=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorLangId','',_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorLangId',"The language identifier of the editor"));EditorContextKeys.hasCompletionItemProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasCompletionItemProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasCompletionItemProvider',"Whether the editor has a completion item provider"));EditorContextKeys.hasCodeActionsProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasCodeActionsProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasCodeActionsProvider',"Whether the editor has a code actions provider"));EditorContextKeys.hasCodeLensProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasCodeLensProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasCodeLensProvider',"Whether the editor has a code lens provider"));EditorContextKeys.hasDefinitionProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasDefinitionProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasDefinitionProvider',"Whether the editor has a definition provider"));EditorContextKeys.hasDeclarationProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasDeclarationProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasDeclarationProvider',"Whether the editor has a declaration provider"));EditorContextKeys.hasImplementationProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasImplementationProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasImplementationProvider',"Whether the editor has an implementation provider"));EditorContextKeys.hasTypeDefinitionProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasTypeDefinitionProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasTypeDefinitionProvider',"Whether the editor has a type definition provider"));EditorContextKeys.hasHoverProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasHoverProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasHoverProvider',"Whether the editor has a hover provider"));EditorContextKeys.hasDocumentHighlightProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasDocumentHighlightProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasDocumentHighlightProvider',"Whether the editor has a document highlight provider"));EditorContextKeys.hasDocumentSymbolProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasDocumentSymbolProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasDocumentSymbolProvider',"Whether the editor has a document symbol provider"));EditorContextKeys.hasReferenceProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasReferenceProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasReferenceProvider',"Whether the editor has a reference provider"));EditorContextKeys.hasRenameProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasRenameProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasRenameProvider',"Whether the editor has a rename provider"));EditorContextKeys.hasSignatureHelpProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasSignatureHelpProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasSignatureHelpProvider',"Whether the editor has a signature help provider"));EditorContextKeys.hasInlayHintsProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasInlayHintsProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasInlayHintsProvider',"Whether the editor has an inline hints provider"));// -- mode context keys: formatting
EditorContextKeys.hasDocumentFormattingProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasDocumentFormattingProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasDocumentFormattingProvider',"Whether the editor has a document formatting provider"));EditorContextKeys.hasDocumentSelectionFormattingProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasDocumentSelectionFormattingProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasDocumentSelectionFormattingProvider',"Whether the editor has a document selection formatting provider"));EditorContextKeys.hasMultipleDocumentFormattingProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasMultipleDocumentFormattingProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasMultipleDocumentFormattingProvider',"Whether the editor has multiple document formatting providers"));EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider=new _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_0__/* .RawContextKey */ .uy('editorHasMultipleDocumentSelectionFormattingProvider',false,_nls_js__WEBPACK_IMPORTED_MODULE_1__/* .localize */ .N('editorHasMultipleDocumentSelectionFormattingProvider',"Whether the editor has multiple document selection formatting providers"));})(EditorContextKeys||(EditorContextKeys={}));

/***/ }),

/***/ 98480:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "H9": () => (/* binding */ CodeActionProviderRegistry),
  "He": () => (/* binding */ CodeLensProviderRegistry),
  "OH": () => (/* binding */ ColorProviderRegistry),
  "mY": () => (/* binding */ Command),
  "gX": () => (/* binding */ CompletionItemKinds),
  "KZ": () => (/* binding */ CompletionProviderRegistry),
  "RN": () => (/* binding */ DeclarationProviderRegistry),
  "Ct": () => (/* binding */ DefinitionProviderRegistry),
  "Az": () => (/* binding */ DocumentFormattingEditProviderRegistry),
  "MY": () => (/* binding */ DocumentHighlightKind),
  "vH": () => (/* binding */ DocumentHighlightProviderRegistry),
  "vN": () => (/* binding */ DocumentRangeFormattingEditProviderRegistry),
  "K7": () => (/* binding */ DocumentRangeSemanticTokensProviderRegistry),
  "wT": () => (/* binding */ DocumentSemanticTokensProviderRegistry),
  "vJ": () => (/* binding */ DocumentSymbolProviderRegistry),
  "DI": () => (/* binding */ EncodedTokenizationResult),
  "AD": () => (/* binding */ FoldingRangeKind),
  "aC": () => (/* binding */ FoldingRangeProviderRegistry),
  "xp": () => (/* binding */ HoverProviderRegistry),
  "vI": () => (/* binding */ ImplementationProviderRegistry),
  "gl": () => (/* binding */ InlayHintKind),
  "mX": () => (/* binding */ InlayHintsProviderRegistry),
  "bw": () => (/* binding */ InlineCompletionTriggerKind),
  "zu": () => (/* binding */ InlineCompletionsProviderRegistry),
  "pM": () => (/* binding */ LinkProviderRegistry),
  "id": () => (/* binding */ LinkedEditingRangeProviderRegistry),
  "ln": () => (/* binding */ OnTypeFormattingEditProviderRegistry),
  "FL": () => (/* binding */ ReferenceProviderRegistry),
  "G0": () => (/* binding */ RenameProviderRegistry),
  "AC": () => (/* binding */ SelectionRangeRegistry),
  "nD": () => (/* binding */ SignatureHelpProviderRegistry),
  "WW": () => (/* binding */ SignatureHelpTriggerKind),
  "uZ": () => (/* binding */ SymbolKinds),
  "WU": () => (/* binding */ Token),
  "NX": () => (/* binding */ TokenMetadata),
  "RW": () => (/* binding */ TokenizationRegistry),
  "hG": () => (/* binding */ TokenizationResult),
  "tA": () => (/* binding */ TypeDefinitionProviderRegistry),
  "vx": () => (/* binding */ isLocationLink)
});

// UNUSED EXPORTS: EvaluatableExpressionProviderRegistry, InlineValuesProviderRegistry

// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/uri.js
var uri = __webpack_require__(91134);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/range.js
var range = __webpack_require__(96844);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/event.js
var common_event = __webpack_require__(36223);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js
var lifecycle = __webpack_require__(19860);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model.js
var common_model = __webpack_require__(16227);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/glob.js
var glob = __webpack_require__(86748);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/path.js + 1 modules
var path = __webpack_require__(25993);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languageSelector.js
function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/function score(selector,candidateUri,candidateLanguage,candidateIsSynchronized){if(Array.isArray(selector)){// array -> take max individual value
var ret=0;var _iterator=_createForOfIteratorHelper(selector),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var filter=_step.value;var value=score(filter,candidateUri,candidateLanguage,candidateIsSynchronized);if(value===10){return value;// already at the highest
}if(value>ret){ret=value;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return ret;}else if(typeof selector==='string'){if(!candidateIsSynchronized){return 0;}// short-hand notion, desugars to
// 'fooLang' -> { language: 'fooLang'}
// '*' -> { language: '*' }
if(selector==='*'){return 5;}else if(selector===candidateLanguage){return 10;}else{return 0;}}else if(selector){// filter -> select accordingly, use defaults for scheme
var language=selector.language,pattern=selector.pattern,scheme=selector.scheme,hasAccessToAllModels=selector.hasAccessToAllModels;// TODO: microsoft/TypeScript#42768
if(!candidateIsSynchronized&&!hasAccessToAllModels){return 0;}var _ret=0;if(scheme){if(scheme===candidateUri.scheme){_ret=10;}else if(scheme==='*'){_ret=5;}else{return 0;}}if(language){if(language===candidateLanguage){_ret=10;}else if(language==='*'){_ret=Math.max(_ret,5);}else{return 0;}}if(pattern){var normalizedPattern;if(typeof pattern==='string'){normalizedPattern=pattern;}else{// Since this pattern has a `base` property, we need
// to normalize this path first before passing it on
// because we will compare it against `Uri.fsPath`
// which uses platform specific separators.
// Refs: https://github.com/microsoft/vscode/issues/99938
normalizedPattern=_extends(_extends({},pattern),{base:(0,path/* normalize */.Fv)(pattern.base)});}if(normalizedPattern===candidateUri.fsPath||(0,glob/* match */.EQ)(normalizedPattern,candidateUri.fsPath)){_ret=10;}else{return 0;}}return _ret;}else{return 0;}}
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languageFeatureRegistry.js
function languageFeatureRegistry_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=languageFeatureRegistry_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function languageFeatureRegistry_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return languageFeatureRegistry_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return languageFeatureRegistry_arrayLikeToArray(o,minLen);}function languageFeatureRegistry_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/function isExclusive(selector){if(typeof selector==='string'){return false;}else if(Array.isArray(selector)){return selector.every(isExclusive);}else{return!!selector.exclusive;// TODO: microsoft/TypeScript#42768
}}var LanguageFeatureRegistry=/*#__PURE__*/function(){function LanguageFeatureRegistry(){_classCallCheck(this,LanguageFeatureRegistry);this._clock=0;this._entries=[];this._onDidChange=new common_event/* Emitter */.Q5();}_createClass(LanguageFeatureRegistry,[{key:"onDidChange",get:function get(){return this._onDidChange.event;}},{key:"register",value:function register(selector,provider){var _this=this;var entry={selector:selector,provider:provider,_score:-1,_time:this._clock++};this._entries.push(entry);this._lastCandidate=undefined;this._onDidChange.fire(this._entries.length);return (0,lifecycle/* toDisposable */.OF)(function(){if(entry){var idx=_this._entries.indexOf(entry);if(idx>=0){_this._entries.splice(idx,1);_this._lastCandidate=undefined;_this._onDidChange.fire(_this._entries.length);entry=undefined;}}});}},{key:"has",value:function has(model){return this.all(model).length>0;}},{key:"all",value:function all(model){if(!model){return[];}this._updateScores(model);var result=[];// from registry
var _iterator=languageFeatureRegistry_createForOfIteratorHelper(this._entries),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var entry=_step.value;if(entry._score>0){result.push(entry.provider);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return result;}},{key:"ordered",value:function ordered(model){var result=[];this._orderedForEach(model,function(entry){return result.push(entry.provider);});return result;}},{key:"orderedGroups",value:function orderedGroups(model){var result=[];var lastBucket;var lastBucketScore;this._orderedForEach(model,function(entry){if(lastBucket&&lastBucketScore===entry._score){lastBucket.push(entry.provider);}else{lastBucketScore=entry._score;lastBucket=[entry.provider];result.push(lastBucket);}});return result;}},{key:"_orderedForEach",value:function _orderedForEach(model,callback){if(!model){return;}this._updateScores(model);var _iterator2=languageFeatureRegistry_createForOfIteratorHelper(this._entries),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var entry=_step2.value;if(entry._score>0){callback(entry);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}},{key:"_updateScores",value:function _updateScores(model){var candidate={uri:model.uri.toString(),language:model.getLanguageId()};if(this._lastCandidate&&this._lastCandidate.language===candidate.language&&this._lastCandidate.uri===candidate.uri){// nothing has changed
return;}this._lastCandidate=candidate;var _iterator3=languageFeatureRegistry_createForOfIteratorHelper(this._entries),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var entry=_step3.value;entry._score=score(entry.selector,model.uri,model.getLanguageId(),(0,common_model/* shouldSynchronizeModel */.pt)(model));if(isExclusive(entry.selector)&&entry._score>0){// support for one exclusive selector that overwrites
// any other selector
var _iterator4=languageFeatureRegistry_createForOfIteratorHelper(this._entries),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _entry=_step4.value;_entry._score=0;}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}entry._score=1000;break;}}// needs sorting
}catch(err){_iterator3.e(err);}finally{_iterator3.f();}this._entries.sort(LanguageFeatureRegistry._compareByScoreAndTime);}}],[{key:"_compareByScoreAndTime",value:function _compareByScoreAndTime(a,b){if(a._score<b._score){return 1;}else if(a._score>b._score){return-1;}else if(a._time<b._time){return 1;}else if(a._time>b._time){return-1;}else{return 0;}}}]);return LanguageFeatureRegistry;}();
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/tokenizationRegistry.js
var tokenizationRegistry = __webpack_require__(25851);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/codicons.js
var codicons = __webpack_require__(62202);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages.js
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function languages_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function languages_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function languages_createClass(Constructor,protoProps,staticProps){if(protoProps)languages_defineProperties(Constructor.prototype,protoProps);if(staticProps)languages_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*//**
 * @internal
 */var TokenMetadata=/*#__PURE__*/function(){function TokenMetadata(){languages_classCallCheck(this,TokenMetadata);}languages_createClass(TokenMetadata,null,[{key:"getLanguageId",value:function getLanguageId(metadata){return(metadata&255/* LANGUAGEID_MASK */)>>>0/* LANGUAGEID_OFFSET */;}},{key:"getTokenType",value:function getTokenType(metadata){return(metadata&768/* TOKEN_TYPE_MASK */)>>>8/* TOKEN_TYPE_OFFSET */;}},{key:"getFontStyle",value:function getFontStyle(metadata){return(metadata&15360/* FONT_STYLE_MASK */)>>>10/* FONT_STYLE_OFFSET */;}},{key:"getForeground",value:function getForeground(metadata){return(metadata&8372224/* FOREGROUND_MASK */)>>>14/* FOREGROUND_OFFSET */;}},{key:"getBackground",value:function getBackground(metadata){return(metadata&4286578688/* BACKGROUND_MASK */)>>>23/* BACKGROUND_OFFSET */;}},{key:"getClassNameFromMetadata",value:function getClassNameFromMetadata(metadata){var foreground=this.getForeground(metadata);var className='mtk'+foreground;var fontStyle=this.getFontStyle(metadata);if(fontStyle&1/* Italic */){className+=' mtki';}if(fontStyle&2/* Bold */){className+=' mtkb';}if(fontStyle&4/* Underline */){className+=' mtku';}if(fontStyle&8/* Strikethrough */){className+=' mtks';}return className;}},{key:"getInlineStyleFromMetadata",value:function getInlineStyleFromMetadata(metadata,colorMap){var foreground=this.getForeground(metadata);var fontStyle=this.getFontStyle(metadata);var result="color: ".concat(colorMap[foreground],";");if(fontStyle&1/* Italic */){result+='font-style: italic;';}if(fontStyle&2/* Bold */){result+='font-weight: bold;';}var textDecoration='';if(fontStyle&4/* Underline */){textDecoration+=' underline';}if(fontStyle&8/* Strikethrough */){textDecoration+=' line-through';}if(textDecoration){result+="text-decoration:".concat(textDecoration,";");}return result;}},{key:"getPresentationFromMetadata",value:function getPresentationFromMetadata(metadata){var foreground=this.getForeground(metadata);var fontStyle=this.getFontStyle(metadata);return{foreground:foreground,italic:Boolean(fontStyle&1/* Italic */),bold:Boolean(fontStyle&2/* Bold */),underline:Boolean(fontStyle&4/* Underline */),strikethrough:Boolean(fontStyle&8/* Strikethrough */)};}}]);return TokenMetadata;}();var Token=/*#__PURE__*/function(){function Token(offset,type,language){languages_classCallCheck(this,Token);this._tokenBrand=undefined;this.offset=offset;this.type=type;this.language=language;}languages_createClass(Token,[{key:"toString",value:function toString(){return'('+this.offset+', '+this.type+')';}}]);return Token;}();/**
 * @internal
 */var TokenizationResult=function TokenizationResult(tokens,endState){languages_classCallCheck(this,TokenizationResult);this._tokenizationResultBrand=undefined;this.tokens=tokens;this.endState=endState;};/**
 * @internal
 */var EncodedTokenizationResult=function EncodedTokenizationResult(tokens,endState){languages_classCallCheck(this,EncodedTokenizationResult);this._encodedTokenizationResultBrand=undefined;this.tokens=tokens;this.endState=endState;};/**
 * @internal
 */var CompletionItemKinds;(function(CompletionItemKinds){var byKind=new Map();byKind.set(0/* Method */,codicons/* Codicon.symbolMethod */.lA.symbolMethod);byKind.set(1/* Function */,codicons/* Codicon.symbolFunction */.lA.symbolFunction);byKind.set(2/* Constructor */,codicons/* Codicon.symbolConstructor */.lA.symbolConstructor);byKind.set(3/* Field */,codicons/* Codicon.symbolField */.lA.symbolField);byKind.set(4/* Variable */,codicons/* Codicon.symbolVariable */.lA.symbolVariable);byKind.set(5/* Class */,codicons/* Codicon.symbolClass */.lA.symbolClass);byKind.set(6/* Struct */,codicons/* Codicon.symbolStruct */.lA.symbolStruct);byKind.set(7/* Interface */,codicons/* Codicon.symbolInterface */.lA.symbolInterface);byKind.set(8/* Module */,codicons/* Codicon.symbolModule */.lA.symbolModule);byKind.set(9/* Property */,codicons/* Codicon.symbolProperty */.lA.symbolProperty);byKind.set(10/* Event */,codicons/* Codicon.symbolEvent */.lA.symbolEvent);byKind.set(11/* Operator */,codicons/* Codicon.symbolOperator */.lA.symbolOperator);byKind.set(12/* Unit */,codicons/* Codicon.symbolUnit */.lA.symbolUnit);byKind.set(13/* Value */,codicons/* Codicon.symbolValue */.lA.symbolValue);byKind.set(15/* Enum */,codicons/* Codicon.symbolEnum */.lA.symbolEnum);byKind.set(14/* Constant */,codicons/* Codicon.symbolConstant */.lA.symbolConstant);byKind.set(15/* Enum */,codicons/* Codicon.symbolEnum */.lA.symbolEnum);byKind.set(16/* EnumMember */,codicons/* Codicon.symbolEnumMember */.lA.symbolEnumMember);byKind.set(17/* Keyword */,codicons/* Codicon.symbolKeyword */.lA.symbolKeyword);byKind.set(27/* Snippet */,codicons/* Codicon.symbolSnippet */.lA.symbolSnippet);byKind.set(18/* Text */,codicons/* Codicon.symbolText */.lA.symbolText);byKind.set(19/* Color */,codicons/* Codicon.symbolColor */.lA.symbolColor);byKind.set(20/* File */,codicons/* Codicon.symbolFile */.lA.symbolFile);byKind.set(21/* Reference */,codicons/* Codicon.symbolReference */.lA.symbolReference);byKind.set(22/* Customcolor */,codicons/* Codicon.symbolCustomColor */.lA.symbolCustomColor);byKind.set(23/* Folder */,codicons/* Codicon.symbolFolder */.lA.symbolFolder);byKind.set(24/* TypeParameter */,codicons/* Codicon.symbolTypeParameter */.lA.symbolTypeParameter);byKind.set(25/* User */,codicons/* Codicon.account */.lA.account);byKind.set(26/* Issue */,codicons/* Codicon.issues */.lA.issues);/**
     * @internal
     */function toIcon(kind){var codicon=byKind.get(kind);if(!codicon){console.info('No codicon found for CompletionItemKind '+kind);codicon=codicons/* Codicon.symbolProperty */.lA.symbolProperty;}return codicon;}CompletionItemKinds.toIcon=toIcon;var data=new Map();data.set('method',0/* Method */);data.set('function',1/* Function */);data.set('constructor',2/* Constructor */);data.set('field',3/* Field */);data.set('variable',4/* Variable */);data.set('class',5/* Class */);data.set('struct',6/* Struct */);data.set('interface',7/* Interface */);data.set('module',8/* Module */);data.set('property',9/* Property */);data.set('event',10/* Event */);data.set('operator',11/* Operator */);data.set('unit',12/* Unit */);data.set('value',13/* Value */);data.set('constant',14/* Constant */);data.set('enum',15/* Enum */);data.set('enum-member',16/* EnumMember */);data.set('enumMember',16/* EnumMember */);data.set('keyword',17/* Keyword */);data.set('snippet',27/* Snippet */);data.set('text',18/* Text */);data.set('color',19/* Color */);data.set('file',20/* File */);data.set('reference',21/* Reference */);data.set('customcolor',22/* Customcolor */);data.set('folder',23/* Folder */);data.set('type-parameter',24/* TypeParameter */);data.set('typeParameter',24/* TypeParameter */);data.set('account',25/* User */);data.set('issue',26/* Issue */);/**
     * @internal
     */function fromString(value,strict){var res=data.get(value);if(typeof res==='undefined'&&!strict){res=9/* Property */;}return res;}CompletionItemKinds.fromString=fromString;})(CompletionItemKinds||(CompletionItemKinds={}));/**
 * How an {@link InlineCompletionsProvider inline completion provider} was triggered.
 */var InlineCompletionTriggerKind;(function(InlineCompletionTriggerKind){/**
     * Completion was triggered automatically while editing.
     * It is sufficient to return a single completion item in this case.
     */InlineCompletionTriggerKind[InlineCompletionTriggerKind["Automatic"]=0]="Automatic";/**
     * Completion was triggered explicitly by a user gesture.
     * Return multiple completion items to enable cycling through them.
     */InlineCompletionTriggerKind[InlineCompletionTriggerKind["Explicit"]=1]="Explicit";})(InlineCompletionTriggerKind||(InlineCompletionTriggerKind={}));var SignatureHelpTriggerKind;(function(SignatureHelpTriggerKind){SignatureHelpTriggerKind[SignatureHelpTriggerKind["Invoke"]=1]="Invoke";SignatureHelpTriggerKind[SignatureHelpTriggerKind["TriggerCharacter"]=2]="TriggerCharacter";SignatureHelpTriggerKind[SignatureHelpTriggerKind["ContentChange"]=3]="ContentChange";})(SignatureHelpTriggerKind||(SignatureHelpTriggerKind={}));/**
 * A document highlight kind.
 */var DocumentHighlightKind;(function(DocumentHighlightKind){/**
     * A textual occurrence.
     */DocumentHighlightKind[DocumentHighlightKind["Text"]=0]="Text";/**
     * Read-access of a symbol, like reading a variable.
     */DocumentHighlightKind[DocumentHighlightKind["Read"]=1]="Read";/**
     * Write-access of a symbol, like writing to a variable.
     */DocumentHighlightKind[DocumentHighlightKind["Write"]=2]="Write";})(DocumentHighlightKind||(DocumentHighlightKind={}));/**
 * @internal
 */function isLocationLink(thing){return thing&&uri/* URI.isUri */.o.isUri(thing.uri)&&range/* Range.isIRange */.e.isIRange(thing.range)&&(range/* Range.isIRange */.e.isIRange(thing.originSelectionRange)||range/* Range.isIRange */.e.isIRange(thing.targetSelectionRange));}/**
 * @internal
 */var SymbolKinds;(function(SymbolKinds){var byKind=new Map();byKind.set(0/* File */,codicons/* Codicon.symbolFile */.lA.symbolFile);byKind.set(1/* Module */,codicons/* Codicon.symbolModule */.lA.symbolModule);byKind.set(2/* Namespace */,codicons/* Codicon.symbolNamespace */.lA.symbolNamespace);byKind.set(3/* Package */,codicons/* Codicon.symbolPackage */.lA.symbolPackage);byKind.set(4/* Class */,codicons/* Codicon.symbolClass */.lA.symbolClass);byKind.set(5/* Method */,codicons/* Codicon.symbolMethod */.lA.symbolMethod);byKind.set(6/* Property */,codicons/* Codicon.symbolProperty */.lA.symbolProperty);byKind.set(7/* Field */,codicons/* Codicon.symbolField */.lA.symbolField);byKind.set(8/* Constructor */,codicons/* Codicon.symbolConstructor */.lA.symbolConstructor);byKind.set(9/* Enum */,codicons/* Codicon.symbolEnum */.lA.symbolEnum);byKind.set(10/* Interface */,codicons/* Codicon.symbolInterface */.lA.symbolInterface);byKind.set(11/* Function */,codicons/* Codicon.symbolFunction */.lA.symbolFunction);byKind.set(12/* Variable */,codicons/* Codicon.symbolVariable */.lA.symbolVariable);byKind.set(13/* Constant */,codicons/* Codicon.symbolConstant */.lA.symbolConstant);byKind.set(14/* String */,codicons/* Codicon.symbolString */.lA.symbolString);byKind.set(15/* Number */,codicons/* Codicon.symbolNumber */.lA.symbolNumber);byKind.set(16/* Boolean */,codicons/* Codicon.symbolBoolean */.lA.symbolBoolean);byKind.set(17/* Array */,codicons/* Codicon.symbolArray */.lA.symbolArray);byKind.set(18/* Object */,codicons/* Codicon.symbolObject */.lA.symbolObject);byKind.set(19/* Key */,codicons/* Codicon.symbolKey */.lA.symbolKey);byKind.set(20/* Null */,codicons/* Codicon.symbolNull */.lA.symbolNull);byKind.set(21/* EnumMember */,codicons/* Codicon.symbolEnumMember */.lA.symbolEnumMember);byKind.set(22/* Struct */,codicons/* Codicon.symbolStruct */.lA.symbolStruct);byKind.set(23/* Event */,codicons/* Codicon.symbolEvent */.lA.symbolEvent);byKind.set(24/* Operator */,codicons/* Codicon.symbolOperator */.lA.symbolOperator);byKind.set(25/* TypeParameter */,codicons/* Codicon.symbolTypeParameter */.lA.symbolTypeParameter);/**
     * @internal
     */function toIcon(kind){var icon=byKind.get(kind);if(!icon){console.info('No codicon found for SymbolKind '+kind);icon=codicons/* Codicon.symbolProperty */.lA.symbolProperty;}return icon;}SymbolKinds.toIcon=toIcon;})(SymbolKinds||(SymbolKinds={}));var FoldingRangeKind=/**
     * Creates a new {@link FoldingRangeKind}.
     *
     * @param value of the kind.
     */function FoldingRangeKind(value){languages_classCallCheck(this,FoldingRangeKind);this.value=value;};/**
 * Kind for folding range representing a comment. The value of the kind is 'comment'.
 */FoldingRangeKind.Comment=new FoldingRangeKind('comment');/**
 * Kind for folding range representing a import. The value of the kind is 'imports'.
 */FoldingRangeKind.Imports=new FoldingRangeKind('imports');/**
 * Kind for folding range representing regions (for example marked by `#region`, `#endregion`).
 * The value of the kind is 'region'.
 */FoldingRangeKind.Region=new FoldingRangeKind('region');/**
 * @internal
 */var Command;(function(Command){/**
     * @internal
     */function is(obj){if(!obj||_typeof(obj)!=='object'){return false;}return typeof obj.id==='string'&&typeof obj.title==='string';}Command.is=is;})(Command||(Command={}));var InlayHintKind;(function(InlayHintKind){InlayHintKind[InlayHintKind["Other"]=0]="Other";InlayHintKind[InlayHintKind["Type"]=1]="Type";InlayHintKind[InlayHintKind["Parameter"]=2]="Parameter";})(InlayHintKind||(InlayHintKind={}));// --- feature registries ------
/**
 * @internal
 */var ReferenceProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var RenameProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var CompletionProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var InlineCompletionsProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var SignatureHelpProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var HoverProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var EvaluatableExpressionProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var InlineValuesProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var DocumentSymbolProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var DocumentHighlightProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var LinkedEditingRangeProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var DefinitionProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var DeclarationProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var ImplementationProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var TypeDefinitionProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var CodeLensProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var InlayHintsProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var CodeActionProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var DocumentFormattingEditProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var DocumentRangeFormattingEditProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var OnTypeFormattingEditProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var LinkProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var ColorProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var SelectionRangeRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var FoldingRangeProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var DocumentSemanticTokensProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var DocumentRangeSemanticTokensProviderRegistry=new LanguageFeatureRegistry();/**
 * @internal
 */var TokenizationRegistry=new tokenizationRegistry/* TokenizationRegistry */.R();

/***/ }),

/***/ 97657:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "V6": () => (/* binding */ StandardAutoClosingPairConditional),
/* harmony export */   "c$": () => (/* binding */ AutoClosingPairs),
/* harmony export */   "wU": () => (/* binding */ IndentAction)
/* harmony export */ });
function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/ /**
 * Describes what to do with the indentation when pressing Enter.
 */var IndentAction;(function(IndentAction){/**
     * Insert new line and copy the previous line's indentation.
     */IndentAction[IndentAction["None"]=0]="None";/**
     * Insert new line and indent once (relative to the previous line's indentation).
     */IndentAction[IndentAction["Indent"]=1]="Indent";/**
     * Insert two new lines:
     *  - the first one indented which will hold the cursor
     *  - the second one at the same indentation level
     */IndentAction[IndentAction["IndentOutdent"]=2]="IndentOutdent";/**
     * Insert new line and outdent once (relative to the previous line's indentation).
     */IndentAction[IndentAction["Outdent"]=3]="Outdent";})(IndentAction||(IndentAction={}));/**
 * @internal
 */var StandardAutoClosingPairConditional=/*#__PURE__*/function(){function StandardAutoClosingPairConditional(source){_classCallCheck(this,StandardAutoClosingPairConditional);this._neutralCharacter=null;this._neutralCharacterSearched=false;this.open=source.open;this.close=source.close;// initially allowed in all tokens
this._inString=true;this._inComment=true;this._inRegEx=true;if(Array.isArray(source.notIn)){for(var i=0,len=source.notIn.length;i<len;i++){var notIn=source.notIn[i];switch(notIn){case'string':this._inString=false;break;case'comment':this._inComment=false;break;case'regex':this._inRegEx=false;break;}}}}_createClass(StandardAutoClosingPairConditional,[{key:"isOK",value:function isOK(standardToken){switch(standardToken){case 0/* Other */:return true;case 1/* Comment */:return this._inComment;case 2/* String */:return this._inString;case 3/* RegEx */:return this._inRegEx;}}},{key:"shouldAutoClose",value:function shouldAutoClose(context,column){// Always complete on empty line
if(context.getTokenCount()===0){return true;}var tokenIndex=context.findTokenIndexAtOffset(column-2);var standardTokenType=context.getStandardTokenType(tokenIndex);return this.isOK(standardTokenType);}},{key:"_findNeutralCharacterInRange",value:function _findNeutralCharacterInRange(fromCharCode,toCharCode){for(var charCode=fromCharCode;charCode<=toCharCode;charCode++){var character=String.fromCharCode(charCode);if(!this.open.includes(character)&&!this.close.includes(character)){return character;}}return null;}/**
     * Find a character in the range [0-9a-zA-Z] that does not appear in the open or close
     */},{key:"findNeutralCharacter",value:function findNeutralCharacter(){if(!this._neutralCharacterSearched){this._neutralCharacterSearched=true;if(!this._neutralCharacter){this._neutralCharacter=this._findNeutralCharacterInRange(48/* Digit0 */,57/* Digit9 */);}if(!this._neutralCharacter){this._neutralCharacter=this._findNeutralCharacterInRange(97/* a */,122/* z */);}if(!this._neutralCharacter){this._neutralCharacter=this._findNeutralCharacterInRange(65/* A */,90/* Z */);}}return this._neutralCharacter;}}]);return StandardAutoClosingPairConditional;}();/**
 * @internal
 */var AutoClosingPairs=function AutoClosingPairs(autoClosingPairs){_classCallCheck(this,AutoClosingPairs);this.autoClosingPairsOpenByStart=new Map();this.autoClosingPairsOpenByEnd=new Map();this.autoClosingPairsCloseByStart=new Map();this.autoClosingPairsCloseByEnd=new Map();this.autoClosingPairsCloseSingleChar=new Map();var _iterator=_createForOfIteratorHelper(autoClosingPairs),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var pair=_step.value;appendEntry(this.autoClosingPairsOpenByStart,pair.open.charAt(0),pair);appendEntry(this.autoClosingPairsOpenByEnd,pair.open.charAt(pair.open.length-1),pair);appendEntry(this.autoClosingPairsCloseByStart,pair.close.charAt(0),pair);appendEntry(this.autoClosingPairsCloseByEnd,pair.close.charAt(pair.close.length-1),pair);if(pair.close.length===1&&pair.open.length===1){appendEntry(this.autoClosingPairsCloseSingleChar,pair.close,pair);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}};function appendEntry(target,key,value){if(target.has(key)){target.get(key).push(value);}else{target.set(key,[value]);}}

/***/ }),

/***/ 71567:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "c_": () => (/* binding */ ILanguageConfigurationService),
  "zu": () => (/* binding */ LanguageConfigurationRegistry)
});

// UNUSED EXPORTS: LanguageConfigurationChangeEvent, LanguageConfigurationRegistryImpl, LanguageConfigurationService, LanguageConfigurationServiceChangeEvent, ResolvedLanguageConfiguration

// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/event.js
var common_event = __webpack_require__(36223);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js
var lifecycle = __webpack_require__(19860);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/strings.js
var strings = __webpack_require__(41712);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/wordHelper.js
var wordHelper = __webpack_require__(44049);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages/languageConfiguration.js
var languageConfiguration = __webpack_require__(97657);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages/supports.js
var supports = __webpack_require__(66909);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages/supports/characterPair.js
function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var CharacterPairSupport=/*#__PURE__*/function(){function CharacterPairSupport(config){_classCallCheck(this,CharacterPairSupport);if(config.autoClosingPairs){this._autoClosingPairs=config.autoClosingPairs.map(function(el){return new languageConfiguration/* StandardAutoClosingPairConditional */.V6(el);});}else if(config.brackets){this._autoClosingPairs=config.brackets.map(function(b){return new languageConfiguration/* StandardAutoClosingPairConditional */.V6({open:b[0],close:b[1]});});}else{this._autoClosingPairs=[];}if(config.colorizedBracketPairs){this._colorizedBracketPairs=filterValidBrackets(config.colorizedBracketPairs.map(function(b){return[b[0],b[1]];}));}else if(config.brackets){this._colorizedBracketPairs=filterValidBrackets(config.brackets.map(function(b){return[b[0],b[1]];})// Many languages set < ... > as bracket pair, even though they also use it as comparison operator.
// This leads to problems when colorizing this bracket, so we exclude it by default.
// Languages can still override this by configuring `colorizedBracketPairs`
// https://github.com/microsoft/vscode/issues/132476
.filter(function(p){return!(p[0]==='<'&&p[1]==='>');}));}else{this._colorizedBracketPairs=[];}if(config.__electricCharacterSupport&&config.__electricCharacterSupport.docComment){var docComment=config.__electricCharacterSupport.docComment;// IDocComment is legacy, only partially supported
this._autoClosingPairs.push(new languageConfiguration/* StandardAutoClosingPairConditional */.V6({open:docComment.open,close:docComment.close||''}));}this._autoCloseBefore=typeof config.autoCloseBefore==='string'?config.autoCloseBefore:CharacterPairSupport.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED;this._surroundingPairs=config.surroundingPairs||this._autoClosingPairs;}_createClass(CharacterPairSupport,[{key:"getAutoClosingPairs",value:function getAutoClosingPairs(){return this._autoClosingPairs;}},{key:"getAutoCloseBeforeSet",value:function getAutoCloseBeforeSet(){return this._autoCloseBefore;}},{key:"getSurroundingPairs",value:function getSurroundingPairs(){return this._surroundingPairs;}},{key:"getColorizedBrackets",value:function getColorizedBrackets(){return this._colorizedBracketPairs;}}]);return CharacterPairSupport;}();CharacterPairSupport.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=';:.,=}])> \n\t';function filterValidBrackets(bracketPairs){return bracketPairs.filter(function(_ref){var _ref2=_slicedToArray(_ref,2),open=_ref2[0],close=_ref2[1];return open!==''&&close!=='';});}
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/arrays.js
var arrays = __webpack_require__(92224);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages/supports/richEditBrackets.js
var richEditBrackets = __webpack_require__(1092);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages/supports/electricCharacter.js
function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=electricCharacter_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function electricCharacter_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return electricCharacter_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return electricCharacter_arrayLikeToArray(o,minLen);}function electricCharacter_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function electricCharacter_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function electricCharacter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function electricCharacter_createClass(Constructor,protoProps,staticProps){if(protoProps)electricCharacter_defineProperties(Constructor.prototype,protoProps);if(staticProps)electricCharacter_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var BracketElectricCharacterSupport=/*#__PURE__*/function(){function BracketElectricCharacterSupport(richEditBrackets){electricCharacter_classCallCheck(this,BracketElectricCharacterSupport);this._richEditBrackets=richEditBrackets;}electricCharacter_createClass(BracketElectricCharacterSupport,[{key:"getElectricCharacters",value:function getElectricCharacters(){var result=[];if(this._richEditBrackets){var _iterator=_createForOfIteratorHelper(this._richEditBrackets.brackets),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var bracket=_step.value;var _iterator2=_createForOfIteratorHelper(bracket.close),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var close=_step2.value;var lastChar=close.charAt(close.length-1);result.push(lastChar);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}return (0,arrays/* distinct */.EB)(result);}},{key:"onElectricCharacter",value:function onElectricCharacter(character,context,column){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0){return null;}var tokenIndex=context.findTokenIndexAtOffset(column-1);if((0,supports/* ignoreBracketsInToken */.Bu)(context.getStandardTokenType(tokenIndex))){return null;}var reversedBracketRegex=this._richEditBrackets.reversedRegex;var text=context.getLineContent().substring(0,column-1)+character;var r=richEditBrackets/* BracketsUtils.findPrevBracketInRange */.Vr.findPrevBracketInRange(reversedBracketRegex,1,text,0,text.length);if(!r){return null;}var bracketText=text.substring(r.startColumn-1,r.endColumn-1).toLowerCase();var isOpen=this._richEditBrackets.textIsOpenBracket[bracketText];if(isOpen){return null;}var textBeforeBracket=context.getActualLineContentBefore(r.startColumn-1);if(!/^\s*$/.test(textBeforeBracket)){// There is other text on the line before the bracket
return null;}return{matchOpenBracket:bracketText};}}]);return BracketElectricCharacterSupport;}();
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages/supports/indentRules.js
function indentRules_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function indentRules_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function indentRules_createClass(Constructor,protoProps,staticProps){if(protoProps)indentRules_defineProperties(Constructor.prototype,protoProps);if(staticProps)indentRules_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/function resetGlobalRegex(reg){if(reg.global){reg.lastIndex=0;}return true;}var IndentRulesSupport=/*#__PURE__*/function(){function IndentRulesSupport(indentationRules){indentRules_classCallCheck(this,IndentRulesSupport);this._indentationRules=indentationRules;}indentRules_createClass(IndentRulesSupport,[{key:"shouldIncrease",value:function shouldIncrease(text){if(this._indentationRules){if(this._indentationRules.increaseIndentPattern&&resetGlobalRegex(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(text)){return true;}// if (this._indentationRules.indentNextLinePattern && this._indentationRules.indentNextLinePattern.test(text)) {
// 	return true;
// }
}return false;}},{key:"shouldDecrease",value:function shouldDecrease(text){if(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&resetGlobalRegex(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(text)){return true;}return false;}},{key:"shouldIndentNextLine",value:function shouldIndentNextLine(text){if(this._indentationRules&&this._indentationRules.indentNextLinePattern&&resetGlobalRegex(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(text)){return true;}return false;}},{key:"shouldIgnore",value:function shouldIgnore(text){// the text matches `unIndentedLinePattern`
if(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&resetGlobalRegex(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(text)){return true;}return false;}},{key:"getIndentMetadata",value:function getIndentMetadata(text){var ret=0;if(this.shouldIncrease(text)){ret+=1/* INCREASE_MASK */;}if(this.shouldDecrease(text)){ret+=2/* DECREASE_MASK */;}if(this.shouldIndentNextLine(text)){ret+=4/* INDENT_NEXTLINE_MASK */;}if(this.shouldIgnore(text)){ret+=8/* UNINDENT_MASK */;}return ret;}}]);return IndentRulesSupport;}();
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/errors.js
var errors = __webpack_require__(32314);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages/supports/onEnter.js
function onEnter_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function onEnter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function onEnter_createClass(Constructor,protoProps,staticProps){if(protoProps)onEnter_defineProperties(Constructor.prototype,protoProps);if(staticProps)onEnter_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var OnEnterSupport=/*#__PURE__*/function(){function OnEnterSupport(opts){var _this=this;onEnter_classCallCheck(this,OnEnterSupport);opts=opts||{};opts.brackets=opts.brackets||[['(',')'],['{','}'],['[',']']];this._brackets=[];opts.brackets.forEach(function(bracket){var openRegExp=OnEnterSupport._createOpenBracketRegExp(bracket[0]);var closeRegExp=OnEnterSupport._createCloseBracketRegExp(bracket[1]);if(openRegExp&&closeRegExp){_this._brackets.push({open:bracket[0],openRegExp:openRegExp,close:bracket[1],closeRegExp:closeRegExp});}});this._regExpRules=opts.onEnterRules||[];}onEnter_createClass(OnEnterSupport,[{key:"onEnter",value:function onEnter(autoIndent,previousLineText,beforeEnterText,afterEnterText){// (1): `regExpRules`
if(autoIndent>=3/* Advanced */){for(var i=0,len=this._regExpRules.length;i<len;i++){var rule=this._regExpRules[i];var regResult=[{reg:rule.beforeText,text:beforeEnterText},{reg:rule.afterText,text:afterEnterText},{reg:rule.previousLineText,text:previousLineText}].every(function(obj){if(!obj.reg){return true;}obj.reg.lastIndex=0;// To disable the effect of the "g" flag.
return obj.reg.test(obj.text);});if(regResult){return rule.action;}}}// (2): Special indent-outdent
if(autoIndent>=2/* Brackets */){if(beforeEnterText.length>0&&afterEnterText.length>0){for(var _i=0,_len=this._brackets.length;_i<_len;_i++){var bracket=this._brackets[_i];if(bracket.openRegExp.test(beforeEnterText)&&bracket.closeRegExp.test(afterEnterText)){return{indentAction:languageConfiguration/* IndentAction.IndentOutdent */.wU.IndentOutdent};}}}}// (4): Open bracket based logic
if(autoIndent>=2/* Brackets */){if(beforeEnterText.length>0){for(var _i2=0,_len2=this._brackets.length;_i2<_len2;_i2++){var _bracket=this._brackets[_i2];if(_bracket.openRegExp.test(beforeEnterText)){return{indentAction:languageConfiguration/* IndentAction.Indent */.wU.Indent};}}}}return null;}}],[{key:"_createOpenBracketRegExp",value:function _createOpenBracketRegExp(bracket){var str=strings/* escapeRegExpCharacters */.ec(bracket);if(!/\B/.test(str.charAt(0))){str='\\b'+str;}str+='\\s*$';return OnEnterSupport._safeRegExp(str);}},{key:"_createCloseBracketRegExp",value:function _createCloseBracketRegExp(bracket){var str=strings/* escapeRegExpCharacters */.ec(bracket);if(!/\B/.test(str.charAt(str.length-1))){str=str+'\\b';}str='^\\s*'+str;return OnEnterSupport._safeRegExp(str);}},{key:"_safeRegExp",value:function _safeRegExp(def){try{return new RegExp(def);}catch(err){(0,errors/* onUnexpectedError */.dL)(err);return null;}}}]);return OnEnterSupport;}();
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/instantiation/common/instantiation.js
var instantiation = __webpack_require__(71896);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/configuration/common/configuration.js
var configuration = __webpack_require__(40800);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/services/language.js
var language = __webpack_require__(84318);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/instantiation/common/extensions.js
var extensions = __webpack_require__(74822);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages/languageConfigurationRegistry.js
function languageConfigurationRegistry_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=languageConfigurationRegistry_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function languageConfigurationRegistry_slicedToArray(arr,i){return languageConfigurationRegistry_arrayWithHoles(arr)||languageConfigurationRegistry_iterableToArrayLimit(arr,i)||languageConfigurationRegistry_unsupportedIterableToArray(arr,i)||languageConfigurationRegistry_nonIterableRest();}function languageConfigurationRegistry_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function languageConfigurationRegistry_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return languageConfigurationRegistry_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return languageConfigurationRegistry_arrayLikeToArray(o,minLen);}function languageConfigurationRegistry_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function languageConfigurationRegistry_iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function languageConfigurationRegistry_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function languageConfigurationRegistry_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function languageConfigurationRegistry_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function languageConfigurationRegistry_createClass(Constructor,protoProps,staticProps){if(protoProps)languageConfigurationRegistry_defineProperties(Constructor.prototype,protoProps);if(staticProps)languageConfigurationRegistry_defineProperties(Constructor,staticProps);return Constructor;}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect==="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;}return c>3&&r&&Object.defineProperty(target,key,r),r;};var __param=undefined&&undefined.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex);};};var LanguageConfigurationServiceChangeEvent=/*#__PURE__*/function(){function LanguageConfigurationServiceChangeEvent(languageId){languageConfigurationRegistry_classCallCheck(this,LanguageConfigurationServiceChangeEvent);this.languageId=languageId;}languageConfigurationRegistry_createClass(LanguageConfigurationServiceChangeEvent,[{key:"affects",value:function affects(languageId){return!this.languageId?true:this.languageId===languageId;}}]);return LanguageConfigurationServiceChangeEvent;}();var ILanguageConfigurationService=(0,instantiation/* createDecorator */.yh)('languageConfigurationService');var LanguageConfigurationService=/*#__PURE__*/function(_Disposable){_inherits(LanguageConfigurationService,_Disposable);var _super=_createSuper(LanguageConfigurationService);function LanguageConfigurationService(configurationService,languageService){var _this;languageConfigurationRegistry_classCallCheck(this,LanguageConfigurationService);_this=_super.call(this);_this.configurationService=configurationService;_this.languageService=languageService;_this.onDidChangeEmitter=_this._register(new common_event/* Emitter */.Q5());_this.onDidChange=_this.onDidChangeEmitter.event;_this.configurations=new Map();var languageConfigKeys=new Set(Object.values(customizedLanguageConfigKeys));_this._register(_this.configurationService.onDidChangeConfiguration(function(e){var globalConfigChanged=e.change.keys.some(function(k){return languageConfigKeys.has(k);});var localConfigChanged=e.change.overrides.filter(function(_ref){var _ref2=languageConfigurationRegistry_slicedToArray(_ref,2),overrideLangName=_ref2[0],keys=_ref2[1];return keys.some(function(k){return languageConfigKeys.has(k);});}).map(function(_ref3){var _ref4=languageConfigurationRegistry_slicedToArray(_ref3,1),overrideLangName=_ref4[0];return overrideLangName;});if(globalConfigChanged){_this.configurations.clear();_this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(undefined));}else{var _iterator=languageConfigurationRegistry_createForOfIteratorHelper(localConfigChanged),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var languageId=_step.value;if(_this.languageService.isRegisteredLanguageId(languageId)){_this.configurations.delete(languageId);_this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(languageId));}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}));_this._register(LanguageConfigurationRegistry.onDidChange(function(e){_this.configurations.delete(e.languageId);_this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(e.languageId));}));return _this;}languageConfigurationRegistry_createClass(LanguageConfigurationService,[{key:"getLanguageConfiguration",value:function getLanguageConfiguration(languageId){var result=this.configurations.get(languageId);if(!result){result=computeConfig(languageId,this.configurationService,this.languageService);this.configurations.set(languageId,result);}return result;}}]);return LanguageConfigurationService;}(lifecycle/* Disposable */.JT);LanguageConfigurationService=__decorate([__param(0,configuration/* IConfigurationService */.Ui),__param(1,language/* ILanguageService */.O)],LanguageConfigurationService);function computeConfig(languageId,configurationService,languageService){var languageConfig=LanguageConfigurationRegistry.getLanguageConfiguration(languageId);if(!languageConfig){if(!languageService.isRegisteredLanguageId(languageId)){throw new Error('Unexpected languageId');}languageConfig=new ResolvedLanguageConfiguration(languageId,{});}var customizedConfig=getCustomizedLanguageConfig(languageConfig.languageId,configurationService);var data=combineLanguageConfigurations([languageConfig.underlyingConfig,customizedConfig]);var config=new ResolvedLanguageConfiguration(languageConfig.languageId,data);return config;}var customizedLanguageConfigKeys={brackets:'editor.language.brackets',colorizedBracketPairs:'editor.language.colorizedBracketPairs'};function getCustomizedLanguageConfig(languageId,configurationService){var brackets=configurationService.getValue(customizedLanguageConfigKeys.brackets,{overrideIdentifier:languageId});var colorizedBracketPairs=configurationService.getValue(customizedLanguageConfigKeys.colorizedBracketPairs,{overrideIdentifier:languageId});return{brackets:validateBracketPairs(brackets),colorizedBracketPairs:validateBracketPairs(colorizedBracketPairs)};}function validateBracketPairs(data){if(!Array.isArray(data)){return undefined;}return data.map(function(pair){if(!Array.isArray(pair)||pair.length!==2){return undefined;}return[pair[0],pair[1]];}).filter(function(p){return!!p;});}var LanguageConfigurationChangeEvent=function LanguageConfigurationChangeEvent(languageId){languageConfigurationRegistry_classCallCheck(this,LanguageConfigurationChangeEvent);this.languageId=languageId;};var LanguageConfigurationRegistryImpl=/*#__PURE__*/function(){function LanguageConfigurationRegistryImpl(){languageConfigurationRegistry_classCallCheck(this,LanguageConfigurationRegistryImpl);this._entries=new Map();this._onDidChange=new common_event/* Emitter */.Q5();this.onDidChange=this._onDidChange.event;}/**
     * @param priority Use a higher number for higher priority
     */languageConfigurationRegistry_createClass(LanguageConfigurationRegistryImpl,[{key:"register",value:function register(languageId,configuration){var _this2=this;var priority=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var entries=this._entries.get(languageId);if(!entries){entries=new ComposedLanguageConfiguration(languageId);this._entries.set(languageId,entries);}var disposable=entries.register(configuration,priority);this._onDidChange.fire(new LanguageConfigurationChangeEvent(languageId));return (0,lifecycle/* toDisposable */.OF)(function(){disposable.dispose();_this2._onDidChange.fire(new LanguageConfigurationChangeEvent(languageId));});}},{key:"getLanguageConfiguration",value:function getLanguageConfiguration(languageId){var entries=this._entries.get(languageId);return(entries===null||entries===void 0?void 0:entries.getResolvedConfiguration())||null;}},{key:"getComments",value:function getComments(languageId){var value=this.getLanguageConfiguration(languageId);if(!value){return null;}return value.comments||null;}// begin Indent Rules
},{key:"getIndentRulesSupport",value:function getIndentRulesSupport(languageId){var value=this.getLanguageConfiguration(languageId);if(!value){return null;}return value.indentRulesSupport||null;}/**
     * Get nearest preceding line which doesn't match unIndentPattern or contains all whitespace.
     * Result:
     * -1: run into the boundary of embedded languages
     * 0: every line above are invalid
     * else: nearest preceding line of the same language
     */},{key:"getPrecedingValidLine",value:function getPrecedingValidLine(model,lineNumber,indentRulesSupport){var languageId=model.getLanguageIdAtPosition(lineNumber,0);if(lineNumber>1){var lastLineNumber;var resultLineNumber=-1;for(lastLineNumber=lineNumber-1;lastLineNumber>=1;lastLineNumber--){if(model.getLanguageIdAtPosition(lastLineNumber,0)!==languageId){return resultLineNumber;}var text=model.getLineContent(lastLineNumber);if(indentRulesSupport.shouldIgnore(text)||/^\s+$/.test(text)||text===''){resultLineNumber=lastLineNumber;continue;}return lastLineNumber;}}return-1;}/**
     * Get inherited indentation from above lines.
     * 1. Find the nearest preceding line which doesn't match unIndentedLinePattern.
     * 2. If this line matches indentNextLinePattern or increaseIndentPattern, it means that the indent level of `lineNumber` should be 1 greater than this line.
     * 3. If this line doesn't match any indent rules
     *   a. check whether the line above it matches indentNextLinePattern
     *   b. If not, the indent level of this line is the result
     *   c. If so, it means the indent of this line is *temporary*, go upward utill we find a line whose indent is not temporary (the same workflow a -> b -> c).
     * 4. Otherwise, we fail to get an inherited indent from aboves. Return null and we should not touch the indent of `lineNumber`
     *
     * This function only return the inherited indent based on above lines, it doesn't check whether current line should decrease or not.
     */},{key:"getInheritIndentForLine",value:function getInheritIndentForLine(autoIndent,model,lineNumber){var honorIntentialIndent=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(autoIndent<4/* Full */){return null;}var indentRulesSupport=this.getIndentRulesSupport(model.getLanguageId());if(!indentRulesSupport){return null;}if(lineNumber<=1){return{indentation:'',action:null};}var precedingUnIgnoredLine=this.getPrecedingValidLine(model,lineNumber,indentRulesSupport);if(precedingUnIgnoredLine<0){return null;}else if(precedingUnIgnoredLine<1){return{indentation:'',action:null};}var precedingUnIgnoredLineContent=model.getLineContent(precedingUnIgnoredLine);if(indentRulesSupport.shouldIncrease(precedingUnIgnoredLineContent)||indentRulesSupport.shouldIndentNextLine(precedingUnIgnoredLineContent)){return{indentation:strings/* getLeadingWhitespace */.V8(precedingUnIgnoredLineContent),action:languageConfiguration/* IndentAction.Indent */.wU.Indent,line:precedingUnIgnoredLine};}else if(indentRulesSupport.shouldDecrease(precedingUnIgnoredLineContent)){return{indentation:strings/* getLeadingWhitespace */.V8(precedingUnIgnoredLineContent),action:null,line:precedingUnIgnoredLine};}else{// precedingUnIgnoredLine can not be ignored.
// it doesn't increase indent of following lines
// it doesn't increase just next line
// so current line is not affect by precedingUnIgnoredLine
// and then we should get a correct inheritted indentation from above lines
if(precedingUnIgnoredLine===1){return{indentation:strings/* getLeadingWhitespace */.V8(model.getLineContent(precedingUnIgnoredLine)),action:null,line:precedingUnIgnoredLine};}var previousLine=precedingUnIgnoredLine-1;var previousLineIndentMetadata=indentRulesSupport.getIndentMetadata(model.getLineContent(previousLine));if(!(previousLineIndentMetadata&(1/* INCREASE_MASK */|2/* DECREASE_MASK */))&&previousLineIndentMetadata&4/* INDENT_NEXTLINE_MASK */){var stopLine=0;for(var i=previousLine-1;i>0;i--){if(indentRulesSupport.shouldIndentNextLine(model.getLineContent(i))){continue;}stopLine=i;break;}return{indentation:strings/* getLeadingWhitespace */.V8(model.getLineContent(stopLine+1)),action:null,line:stopLine+1};}if(honorIntentialIndent){return{indentation:strings/* getLeadingWhitespace */.V8(model.getLineContent(precedingUnIgnoredLine)),action:null,line:precedingUnIgnoredLine};}else{// search from precedingUnIgnoredLine until we find one whose indent is not temporary
for(var _i2=precedingUnIgnoredLine;_i2>0;_i2--){var lineContent=model.getLineContent(_i2);if(indentRulesSupport.shouldIncrease(lineContent)){return{indentation:strings/* getLeadingWhitespace */.V8(lineContent),action:languageConfiguration/* IndentAction.Indent */.wU.Indent,line:_i2};}else if(indentRulesSupport.shouldIndentNextLine(lineContent)){var _stopLine=0;for(var j=_i2-1;j>0;j--){if(indentRulesSupport.shouldIndentNextLine(model.getLineContent(_i2))){continue;}_stopLine=j;break;}return{indentation:strings/* getLeadingWhitespace */.V8(model.getLineContent(_stopLine+1)),action:null,line:_stopLine+1};}else if(indentRulesSupport.shouldDecrease(lineContent)){return{indentation:strings/* getLeadingWhitespace */.V8(lineContent),action:null,line:_i2};}}return{indentation:strings/* getLeadingWhitespace */.V8(model.getLineContent(1)),action:null,line:1};}}}},{key:"getGoodIndentForLine",value:function getGoodIndentForLine(autoIndent,virtualModel,languageId,lineNumber,indentConverter){if(autoIndent<4/* Full */){return null;}var richEditSupport=this.getLanguageConfiguration(languageId);if(!richEditSupport){return null;}var indentRulesSupport=this.getIndentRulesSupport(languageId);if(!indentRulesSupport){return null;}var indent=this.getInheritIndentForLine(autoIndent,virtualModel,lineNumber);var lineContent=virtualModel.getLineContent(lineNumber);if(indent){var inheritLine=indent.line;if(inheritLine!==undefined){var enterResult=richEditSupport.onEnter(autoIndent,'',virtualModel.getLineContent(inheritLine),'');if(enterResult){var indentation=strings/* getLeadingWhitespace */.V8(virtualModel.getLineContent(inheritLine));if(enterResult.removeText){indentation=indentation.substring(0,indentation.length-enterResult.removeText);}if(enterResult.indentAction===languageConfiguration/* IndentAction.Indent */.wU.Indent||enterResult.indentAction===languageConfiguration/* IndentAction.IndentOutdent */.wU.IndentOutdent){indentation=indentConverter.shiftIndent(indentation);}else if(enterResult.indentAction===languageConfiguration/* IndentAction.Outdent */.wU.Outdent){indentation=indentConverter.unshiftIndent(indentation);}if(indentRulesSupport.shouldDecrease(lineContent)){indentation=indentConverter.unshiftIndent(indentation);}if(enterResult.appendText){indentation+=enterResult.appendText;}return strings/* getLeadingWhitespace */.V8(indentation);}}if(indentRulesSupport.shouldDecrease(lineContent)){if(indent.action===languageConfiguration/* IndentAction.Indent */.wU.Indent){return indent.indentation;}else{return indentConverter.unshiftIndent(indent.indentation);}}else{if(indent.action===languageConfiguration/* IndentAction.Indent */.wU.Indent){return indentConverter.shiftIndent(indent.indentation);}else{return indent.indentation;}}}return null;}},{key:"getIndentForEnter",value:function getIndentForEnter(autoIndent,model,range,indentConverter){if(autoIndent<4/* Full */){return null;}model.forceTokenization(range.startLineNumber);var lineTokens=model.getLineTokens(range.startLineNumber);var scopedLineTokens=(0,supports/* createScopedLineTokens */.wH)(lineTokens,range.startColumn-1);var scopedLineText=scopedLineTokens.getLineContent();var embeddedLanguage=false;var beforeEnterText;if(scopedLineTokens.firstCharOffset>0&&lineTokens.getLanguageId(0)!==scopedLineTokens.languageId){// we are in the embeded language content
embeddedLanguage=true;// if embeddedLanguage is true, then we don't touch the indentation of current line
beforeEnterText=scopedLineText.substr(0,range.startColumn-1-scopedLineTokens.firstCharOffset);}else{beforeEnterText=lineTokens.getLineContent().substring(0,range.startColumn-1);}var afterEnterText;if(range.isEmpty()){afterEnterText=scopedLineText.substr(range.startColumn-1-scopedLineTokens.firstCharOffset);}else{var endScopedLineTokens=this.getScopedLineTokens(model,range.endLineNumber,range.endColumn);afterEnterText=endScopedLineTokens.getLineContent().substr(range.endColumn-1-scopedLineTokens.firstCharOffset);}var indentRulesSupport=this.getIndentRulesSupport(scopedLineTokens.languageId);if(!indentRulesSupport){return null;}var beforeEnterResult=beforeEnterText;var beforeEnterIndent=strings/* getLeadingWhitespace */.V8(beforeEnterText);var virtualModel={getLineTokens:function getLineTokens(lineNumber){return model.getLineTokens(lineNumber);},getLanguageId:function getLanguageId(){return model.getLanguageId();},getLanguageIdAtPosition:function getLanguageIdAtPosition(lineNumber,column){return model.getLanguageIdAtPosition(lineNumber,column);},getLineContent:function getLineContent(lineNumber){if(lineNumber===range.startLineNumber){return beforeEnterResult;}else{return model.getLineContent(lineNumber);}}};var currentLineIndent=strings/* getLeadingWhitespace */.V8(lineTokens.getLineContent());var afterEnterAction=this.getInheritIndentForLine(autoIndent,virtualModel,range.startLineNumber+1);if(!afterEnterAction){var beforeEnter=embeddedLanguage?currentLineIndent:beforeEnterIndent;return{beforeEnter:beforeEnter,afterEnter:beforeEnter};}var afterEnterIndent=embeddedLanguage?currentLineIndent:afterEnterAction.indentation;if(afterEnterAction.action===languageConfiguration/* IndentAction.Indent */.wU.Indent){afterEnterIndent=indentConverter.shiftIndent(afterEnterIndent);}if(indentRulesSupport.shouldDecrease(afterEnterText)){afterEnterIndent=indentConverter.unshiftIndent(afterEnterIndent);}return{beforeEnter:embeddedLanguage?currentLineIndent:beforeEnterIndent,afterEnter:afterEnterIndent};}/**
     * We should always allow intentional indentation. It means, if users change the indentation of `lineNumber` and the content of
     * this line doesn't match decreaseIndentPattern, we should not adjust the indentation.
     */},{key:"getIndentActionForType",value:function getIndentActionForType(autoIndent,model,range,ch,indentConverter){if(autoIndent<4/* Full */){return null;}var scopedLineTokens=this.getScopedLineTokens(model,range.startLineNumber,range.startColumn);if(scopedLineTokens.firstCharOffset){// this line has mixed languages and indentation rules will not work
return null;}var indentRulesSupport=this.getIndentRulesSupport(scopedLineTokens.languageId);if(!indentRulesSupport){return null;}var scopedLineText=scopedLineTokens.getLineContent();var beforeTypeText=scopedLineText.substr(0,range.startColumn-1-scopedLineTokens.firstCharOffset);// selection support
var afterTypeText;if(range.isEmpty()){afterTypeText=scopedLineText.substr(range.startColumn-1-scopedLineTokens.firstCharOffset);}else{var endScopedLineTokens=this.getScopedLineTokens(model,range.endLineNumber,range.endColumn);afterTypeText=endScopedLineTokens.getLineContent().substr(range.endColumn-1-scopedLineTokens.firstCharOffset);}// If previous content already matches decreaseIndentPattern, it means indentation of this line should already be adjusted
// Users might change the indentation by purpose and we should honor that instead of readjusting.
if(!indentRulesSupport.shouldDecrease(beforeTypeText+afterTypeText)&&indentRulesSupport.shouldDecrease(beforeTypeText+ch+afterTypeText)){// after typing `ch`, the content matches decreaseIndentPattern, we should adjust the indent to a good manner.
// 1. Get inherited indent action
var r=this.getInheritIndentForLine(autoIndent,model,range.startLineNumber,false);if(!r){return null;}var indentation=r.indentation;if(r.action!==languageConfiguration/* IndentAction.Indent */.wU.Indent){indentation=indentConverter.unshiftIndent(indentation);}return indentation;}return null;}},{key:"getIndentMetadata",value:function getIndentMetadata(model,lineNumber){var indentRulesSupport=this.getIndentRulesSupport(model.getLanguageId());if(!indentRulesSupport){return null;}if(lineNumber<1||lineNumber>model.getLineCount()){return null;}return indentRulesSupport.getIndentMetadata(model.getLineContent(lineNumber));}// end Indent Rules
// begin onEnter
},{key:"getEnterAction",value:function getEnterAction(autoIndent,model,range){var scopedLineTokens=this.getScopedLineTokens(model,range.startLineNumber,range.startColumn);var richEditSupport=this.getLanguageConfiguration(scopedLineTokens.languageId);if(!richEditSupport){return null;}var scopedLineText=scopedLineTokens.getLineContent();var beforeEnterText=scopedLineText.substr(0,range.startColumn-1-scopedLineTokens.firstCharOffset);// selection support
var afterEnterText;if(range.isEmpty()){afterEnterText=scopedLineText.substr(range.startColumn-1-scopedLineTokens.firstCharOffset);}else{var endScopedLineTokens=this.getScopedLineTokens(model,range.endLineNumber,range.endColumn);afterEnterText=endScopedLineTokens.getLineContent().substr(range.endColumn-1-scopedLineTokens.firstCharOffset);}var previousLineText='';if(range.startLineNumber>1&&scopedLineTokens.firstCharOffset===0){// This is not the first line and the entire line belongs to this mode
var oneLineAboveScopedLineTokens=this.getScopedLineTokens(model,range.startLineNumber-1);if(oneLineAboveScopedLineTokens.languageId===scopedLineTokens.languageId){// The line above ends with text belonging to the same mode
previousLineText=oneLineAboveScopedLineTokens.getLineContent();}}var enterResult=richEditSupport.onEnter(autoIndent,previousLineText,beforeEnterText,afterEnterText);if(!enterResult){return null;}var indentAction=enterResult.indentAction;var appendText=enterResult.appendText;var removeText=enterResult.removeText||0;// Here we add `\t` to appendText first because enterAction is leveraging appendText and removeText to change indentation.
if(!appendText){if(indentAction===languageConfiguration/* IndentAction.Indent */.wU.Indent||indentAction===languageConfiguration/* IndentAction.IndentOutdent */.wU.IndentOutdent){appendText='\t';}else{appendText='';}}else if(indentAction===languageConfiguration/* IndentAction.Indent */.wU.Indent){appendText='\t'+appendText;}var indentation=this.getIndentationAtPosition(model,range.startLineNumber,range.startColumn);if(removeText){indentation=indentation.substring(0,indentation.length-removeText);}return{indentAction:indentAction,appendText:appendText,removeText:removeText,indentation:indentation};}},{key:"getIndentationAtPosition",value:function getIndentationAtPosition(model,lineNumber,column){var lineText=model.getLineContent(lineNumber);var indentation=strings/* getLeadingWhitespace */.V8(lineText);if(indentation.length>column-1){indentation=indentation.substring(0,column-1);}return indentation;}},{key:"getScopedLineTokens",value:function getScopedLineTokens(model,lineNumber,columnNumber){model.forceTokenization(lineNumber);var lineTokens=model.getLineTokens(lineNumber);var column=typeof columnNumber==='undefined'?model.getLineMaxColumn(lineNumber)-1:columnNumber-1;return (0,supports/* createScopedLineTokens */.wH)(lineTokens,column);}}]);return LanguageConfigurationRegistryImpl;}();/**
 * @deprecated Use ILanguageConfigurationService instead.
*/var LanguageConfigurationRegistry=new LanguageConfigurationRegistryImpl();var ComposedLanguageConfiguration=/*#__PURE__*/function(){function ComposedLanguageConfiguration(languageId){languageConfigurationRegistry_classCallCheck(this,ComposedLanguageConfiguration);this.languageId=languageId;this._resolved=null;this._entries=[];this._order=0;this._resolved=null;}languageConfigurationRegistry_createClass(ComposedLanguageConfiguration,[{key:"register",value:function register(configuration,priority){var _this3=this;var entry=new LanguageConfigurationContribution(configuration,priority,++this._order);this._entries.push(entry);this._resolved=null;return (0,lifecycle/* toDisposable */.OF)(function(){for(var i=0;i<_this3._entries.length;i++){if(_this3._entries[i]===entry){_this3._entries.splice(i,1);_this3._resolved=null;break;}}});}},{key:"getResolvedConfiguration",value:function getResolvedConfiguration(){if(!this._resolved){var config=this._resolve();if(config){this._resolved=new ResolvedLanguageConfiguration(this.languageId,config);}}return this._resolved;}},{key:"_resolve",value:function _resolve(){if(this._entries.length===0){return null;}this._entries.sort(LanguageConfigurationContribution.cmp);return combineLanguageConfigurations(this._entries.map(function(e){return e.configuration;}));}}]);return ComposedLanguageConfiguration;}();function combineLanguageConfigurations(configs){var result={comments:undefined,brackets:undefined,wordPattern:undefined,indentationRules:undefined,onEnterRules:undefined,autoClosingPairs:undefined,surroundingPairs:undefined,autoCloseBefore:undefined,folding:undefined,colorizedBracketPairs:undefined,__electricCharacterSupport:undefined};var _iterator2=languageConfigurationRegistry_createForOfIteratorHelper(configs),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var entry=_step2.value;result={comments:entry.comments||result.comments,brackets:entry.brackets||result.brackets,wordPattern:entry.wordPattern||result.wordPattern,indentationRules:entry.indentationRules||result.indentationRules,onEnterRules:entry.onEnterRules||result.onEnterRules,autoClosingPairs:entry.autoClosingPairs||result.autoClosingPairs,surroundingPairs:entry.surroundingPairs||result.surroundingPairs,autoCloseBefore:entry.autoCloseBefore||result.autoCloseBefore,folding:entry.folding||result.folding,colorizedBracketPairs:entry.colorizedBracketPairs||result.colorizedBracketPairs,__electricCharacterSupport:entry.__electricCharacterSupport||result.__electricCharacterSupport};}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return result;}var LanguageConfigurationContribution=/*#__PURE__*/function(){function LanguageConfigurationContribution(configuration,priority,order){languageConfigurationRegistry_classCallCheck(this,LanguageConfigurationContribution);this.configuration=configuration;this.priority=priority;this.order=order;}languageConfigurationRegistry_createClass(LanguageConfigurationContribution,null,[{key:"cmp",value:function cmp(a,b){if(a.priority===b.priority){// higher order last
return a.order-b.order;}// higher priority last
return a.priority-b.priority;}}]);return LanguageConfigurationContribution;}();/**
 * Immutable.
*/var ResolvedLanguageConfiguration=/*#__PURE__*/function(){function ResolvedLanguageConfiguration(languageId,underlyingConfig){languageConfigurationRegistry_classCallCheck(this,ResolvedLanguageConfiguration);this.languageId=languageId;this.underlyingConfig=underlyingConfig;this._brackets=null;this._electricCharacter=null;this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new OnEnterSupport(this.underlyingConfig):null;this.comments=ResolvedLanguageConfiguration._handleComments(this.underlyingConfig);this.characterPair=new CharacterPairSupport(this.underlyingConfig);this.wordDefinition=this.underlyingConfig.wordPattern||wordHelper/* DEFAULT_WORD_REGEXP */.Af;this.indentationRules=this.underlyingConfig.indentationRules;if(this.underlyingConfig.indentationRules){this.indentRulesSupport=new IndentRulesSupport(this.underlyingConfig.indentationRules);}else{this.indentRulesSupport=null;}this.foldingRules=this.underlyingConfig.folding||{};}languageConfigurationRegistry_createClass(ResolvedLanguageConfiguration,[{key:"getWordDefinition",value:function getWordDefinition(){return (0,wordHelper/* ensureValidWordDefinition */.eq)(this.wordDefinition);}},{key:"brackets",get:function get(){if(!this._brackets&&this.underlyingConfig.brackets){this._brackets=new richEditBrackets/* RichEditBrackets */.EA(this.languageId,this.underlyingConfig.brackets);}return this._brackets;}},{key:"electricCharacter",get:function get(){if(!this._electricCharacter){this._electricCharacter=new BracketElectricCharacterSupport(this.brackets);}return this._electricCharacter;}},{key:"onEnter",value:function onEnter(autoIndent,previousLineText,beforeEnterText,afterEnterText){if(!this._onEnterSupport){return null;}return this._onEnterSupport.onEnter(autoIndent,previousLineText,beforeEnterText,afterEnterText);}},{key:"getAutoClosingPairs",value:function getAutoClosingPairs(){return new languageConfiguration/* AutoClosingPairs */.c$(this.characterPair.getAutoClosingPairs());}},{key:"getAutoCloseBeforeSet",value:function getAutoCloseBeforeSet(){return this.characterPair.getAutoCloseBeforeSet();}},{key:"getSurroundingPairs",value:function getSurroundingPairs(){return this.characterPair.getSurroundingPairs();}}],[{key:"_handleComments",value:function _handleComments(conf){var commentRule=conf.comments;if(!commentRule){return null;}// comment configuration
var comments={};if(commentRule.lineComment){comments.lineCommentToken=commentRule.lineComment;}if(commentRule.blockComment){var _commentRule$blockCom=languageConfigurationRegistry_slicedToArray(commentRule.blockComment,2),blockStart=_commentRule$blockCom[0],blockEnd=_commentRule$blockCom[1];comments.blockCommentStartToken=blockStart;comments.blockCommentEndToken=blockEnd;}return comments;}}]);return ResolvedLanguageConfiguration;}();(0,extensions/* registerSingleton */.z)(ILanguageConfigurationService,LanguageConfigurationService);

/***/ }),

/***/ 25091:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "E": () => (/* binding */ computeLinks)
/* harmony export */ });
/* unused harmony exports Uint8Matrix, StateMachine, LinkComputer */
/* harmony import */ var _core_characterClassifier_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(97573);
function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var Uint8Matrix=/*#__PURE__*/function(){function Uint8Matrix(rows,cols,defaultValue){_classCallCheck(this,Uint8Matrix);var data=new Uint8Array(rows*cols);for(var i=0,len=rows*cols;i<len;i++){data[i]=defaultValue;}this._data=data;this.rows=rows;this.cols=cols;}_createClass(Uint8Matrix,[{key:"get",value:function get(row,col){return this._data[row*this.cols+col];}},{key:"set",value:function set(row,col,value){this._data[row*this.cols+col]=value;}}]);return Uint8Matrix;}();var StateMachine=/*#__PURE__*/function(){function StateMachine(edges){_classCallCheck(this,StateMachine);var maxCharCode=0;var maxState=0/* Invalid */;for(var i=0,len=edges.length;i<len;i++){var _edges$i=_slicedToArray(edges[i],3),from=_edges$i[0],chCode=_edges$i[1],to=_edges$i[2];if(chCode>maxCharCode){maxCharCode=chCode;}if(from>maxState){maxState=from;}if(to>maxState){maxState=to;}}maxCharCode++;maxState++;var states=new Uint8Matrix(maxState,maxCharCode,0/* Invalid */);for(var _i2=0,_len=edges.length;_i2<_len;_i2++){var _edges$_i=_slicedToArray(edges[_i2],3),_from=_edges$_i[0],_chCode=_edges$_i[1],_to=_edges$_i[2];states.set(_from,_chCode,_to);}this._states=states;this._maxCharCode=maxCharCode;}_createClass(StateMachine,[{key:"nextState",value:function nextState(currentState,chCode){if(chCode<0||chCode>=this._maxCharCode){return 0/* Invalid */;}return this._states.get(currentState,chCode);}}]);return StateMachine;}();// State machine for http:// or https:// or file://
var _stateMachine=null;function getStateMachine(){if(_stateMachine===null){_stateMachine=new StateMachine([[1/* Start */,104/* h */,2/* H */],[1/* Start */,72/* H */,2/* H */],[1/* Start */,102/* f */,6/* F */],[1/* Start */,70/* F */,6/* F */],[2/* H */,116/* t */,3/* HT */],[2/* H */,84/* T */,3/* HT */],[3/* HT */,116/* t */,4/* HTT */],[3/* HT */,84/* T */,4/* HTT */],[4/* HTT */,112/* p */,5/* HTTP */],[4/* HTT */,80/* P */,5/* HTTP */],[5/* HTTP */,115/* s */,9/* BeforeColon */],[5/* HTTP */,83/* S */,9/* BeforeColon */],[5/* HTTP */,58/* Colon */,10/* AfterColon */],[6/* F */,105/* i */,7/* FI */],[6/* F */,73/* I */,7/* FI */],[7/* FI */,108/* l */,8/* FIL */],[7/* FI */,76/* L */,8/* FIL */],[8/* FIL */,101/* e */,9/* BeforeColon */],[8/* FIL */,69/* E */,9/* BeforeColon */],[9/* BeforeColon */,58/* Colon */,10/* AfterColon */],[10/* AfterColon */,47/* Slash */,11/* AlmostThere */],[11/* AlmostThere */,47/* Slash */,12/* End */]]);}return _stateMachine;}var _classifier=null;function getClassifier(){if(_classifier===null){_classifier=new _core_characterClassifier_js__WEBPACK_IMPORTED_MODULE_0__/* .CharacterClassifier */ .N(0/* None */);// allow-any-unicode-next-line
var FORCE_TERMINATION_CHARACTERS=' \t<>\'\"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…';for(var i=0;i<FORCE_TERMINATION_CHARACTERS.length;i++){_classifier.set(FORCE_TERMINATION_CHARACTERS.charCodeAt(i),1/* ForceTermination */);}var CANNOT_END_WITH_CHARACTERS='.,;';for(var _i3=0;_i3<CANNOT_END_WITH_CHARACTERS.length;_i3++){_classifier.set(CANNOT_END_WITH_CHARACTERS.charCodeAt(_i3),2/* CannotEndIn */);}}return _classifier;}var LinkComputer=/*#__PURE__*/function(){function LinkComputer(){_classCallCheck(this,LinkComputer);}_createClass(LinkComputer,null,[{key:"_createLink",value:function _createLink(classifier,line,lineNumber,linkBeginIndex,linkEndIndex){// Do not allow to end link in certain characters...
var lastIncludedCharIndex=linkEndIndex-1;do{var chCode=line.charCodeAt(lastIncludedCharIndex);var chClass=classifier.get(chCode);if(chClass!==2/* CannotEndIn */){break;}lastIncludedCharIndex--;}while(lastIncludedCharIndex>linkBeginIndex);// Handle links enclosed in parens, square brackets and curlys.
if(linkBeginIndex>0){var charCodeBeforeLink=line.charCodeAt(linkBeginIndex-1);var lastCharCodeInLink=line.charCodeAt(lastIncludedCharIndex);if(charCodeBeforeLink===40/* OpenParen */&&lastCharCodeInLink===41/* CloseParen */||charCodeBeforeLink===91/* OpenSquareBracket */&&lastCharCodeInLink===93/* CloseSquareBracket */||charCodeBeforeLink===123/* OpenCurlyBrace */&&lastCharCodeInLink===125/* CloseCurlyBrace */){// Do not end in ) if ( is before the link start
// Do not end in ] if [ is before the link start
// Do not end in } if { is before the link start
lastIncludedCharIndex--;}}return{range:{startLineNumber:lineNumber,startColumn:linkBeginIndex+1,endLineNumber:lineNumber,endColumn:lastIncludedCharIndex+2},url:line.substring(linkBeginIndex,lastIncludedCharIndex+1)};}},{key:"computeLinks",value:function computeLinks(model){var stateMachine=arguments.length>1&&arguments[1]!==undefined?arguments[1]:getStateMachine();var classifier=getClassifier();var result=[];for(var i=1,lineCount=model.getLineCount();i<=lineCount;i++){var line=model.getLineContent(i);var len=line.length;var j=0;var linkBeginIndex=0;var linkBeginChCode=0;var state=1/* Start */;var hasOpenParens=false;var hasOpenSquareBracket=false;var inSquareBrackets=false;var hasOpenCurlyBracket=false;while(j<len){var resetStateMachine=false;var chCode=line.charCodeAt(j);if(state===13/* Accept */){var chClass=void 0;switch(chCode){case 40/* OpenParen */:hasOpenParens=true;chClass=0/* None */;break;case 41/* CloseParen */:chClass=hasOpenParens?0/* None */:1/* ForceTermination */;break;case 91/* OpenSquareBracket */:inSquareBrackets=true;hasOpenSquareBracket=true;chClass=0/* None */;break;case 93/* CloseSquareBracket */:inSquareBrackets=false;chClass=hasOpenSquareBracket?0/* None */:1/* ForceTermination */;break;case 123/* OpenCurlyBrace */:hasOpenCurlyBracket=true;chClass=0/* None */;break;case 125/* CloseCurlyBrace */:chClass=hasOpenCurlyBracket?0/* None */:1/* ForceTermination */;break;/* The following three rules make it that ' or " or ` are allowed inside links if the link began with a different one */case 39/* SingleQuote */:chClass=linkBeginChCode===34/* DoubleQuote */||linkBeginChCode===96/* BackTick */?0/* None */:1/* ForceTermination */;break;case 34/* DoubleQuote */:chClass=linkBeginChCode===39/* SingleQuote */||linkBeginChCode===96/* BackTick */?0/* None */:1/* ForceTermination */;break;case 96/* BackTick */:chClass=linkBeginChCode===39/* SingleQuote */||linkBeginChCode===34/* DoubleQuote */?0/* None */:1/* ForceTermination */;break;case 42/* Asterisk */:// `*` terminates a link if the link began with `*`
chClass=linkBeginChCode===42/* Asterisk */?1/* ForceTermination */:0/* None */;break;case 124/* Pipe */:// `|` terminates a link if the link began with `|`
chClass=linkBeginChCode===124/* Pipe */?1/* ForceTermination */:0/* None */;break;case 32/* Space */:// ` ` allow space in between [ and ]
chClass=inSquareBrackets?0/* None */:1/* ForceTermination */;break;default:chClass=classifier.get(chCode);}// Check if character terminates link
if(chClass===1/* ForceTermination */){result.push(LinkComputer._createLink(classifier,line,i,linkBeginIndex,j));resetStateMachine=true;}}else if(state===12/* End */){var _chClass=void 0;if(chCode===91/* OpenSquareBracket */){// Allow for the authority part to contain ipv6 addresses which contain [ and ]
hasOpenSquareBracket=true;_chClass=0/* None */;}else{_chClass=classifier.get(chCode);}// Check if character terminates link
if(_chClass===1/* ForceTermination */){resetStateMachine=true;}else{state=13/* Accept */;}}else{state=stateMachine.nextState(state,chCode);if(state===0/* Invalid */){resetStateMachine=true;}}if(resetStateMachine){state=1/* Start */;hasOpenParens=false;hasOpenSquareBracket=false;hasOpenCurlyBracket=false;// Record where the link started
linkBeginIndex=j+1;linkBeginChCode=chCode;}j++;}if(state===13/* Accept */){result.push(LinkComputer._createLink(classifier,line,i,linkBeginIndex,len));}}return result;}}]);return LinkComputer;}();/**
 * Returns an array of all links contains in the provided
 * document. *Note* that this operation is computational
 * expensive and should not run in the UI thread.
 */function computeLinks(model){if(!model||typeof model.getLineCount!=='function'||typeof model.getLineContent!=='function'){// Unknown caller!
return[];}return LinkComputer.computeLinks(model);}

/***/ }),

/***/ 55403:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "bd": () => (/* binding */ PLAINTEXT_LANGUAGE_ID),
/* harmony export */   "dQ": () => (/* binding */ ModesRegistry)
/* harmony export */ });
/* unused harmony exports Extensions, EditorModesRegistry, PLAINTEXT_EXTENSION */
/* harmony import */ var _nls_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(71453);
/* harmony import */ var _base_common_event_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(36223);
/* harmony import */ var _languageConfigurationRegistry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(71567);
/* harmony import */ var _platform_registry_common_platform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(83717);
/* harmony import */ var _base_common_mime_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85996);
/* harmony import */ var _platform_configuration_common_configurationRegistry_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(53059);
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/// Define extension point ids
var Extensions={ModesRegistry:'editor.modesRegistry'};var EditorModesRegistry=/*#__PURE__*/function(){function EditorModesRegistry(){_classCallCheck(this,EditorModesRegistry);this._onDidChangeLanguages=new _base_common_event_js__WEBPACK_IMPORTED_MODULE_0__/* .Emitter */ .Q5();this.onDidChangeLanguages=this._onDidChangeLanguages.event;this._languages=[];}_createClass(EditorModesRegistry,[{key:"registerLanguage",value:function registerLanguage(def){var _this=this;this._languages.push(def);this._onDidChangeLanguages.fire(undefined);return{dispose:function dispose(){for(var i=0,len=_this._languages.length;i<len;i++){if(_this._languages[i]===def){_this._languages.splice(i,1);return;}}}};}},{key:"getLanguages",value:function getLanguages(){return this._languages;}}]);return EditorModesRegistry;}();var ModesRegistry=new EditorModesRegistry();_platform_registry_common_platform_js__WEBPACK_IMPORTED_MODULE_2__/* .Registry.add */ .B.add(Extensions.ModesRegistry,ModesRegistry);var PLAINTEXT_LANGUAGE_ID='plaintext';var PLAINTEXT_EXTENSION='.txt';ModesRegistry.registerLanguage({id:PLAINTEXT_LANGUAGE_ID,extensions:[PLAINTEXT_EXTENSION],aliases:[_nls_js__WEBPACK_IMPORTED_MODULE_5__/* .localize */ .N('plainText.alias',"Plain Text"),'text'],mimetypes:[_base_common_mime_js__WEBPACK_IMPORTED_MODULE_3__/* .Mimes.text */ .v.text]});_languageConfigurationRegistry_js__WEBPACK_IMPORTED_MODULE_1__/* .LanguageConfigurationRegistry.register */ .zu.register(PLAINTEXT_LANGUAGE_ID,{brackets:[['(',')'],['[',']'],['{','}']],surroundingPairs:[{open:'{',close:'}'},{open:'[',close:']'},{open:'(',close:')'},{open:'<',close:'>'},{open:'\"',close:'\"'},{open:'\'',close:'\''},{open:'`',close:'`'}],colorizedBracketPairs:[],folding:{offSide:true}},0);_platform_registry_common_platform_js__WEBPACK_IMPORTED_MODULE_2__/* .Registry.as */ .B.as(_platform_configuration_common_configurationRegistry_js__WEBPACK_IMPORTED_MODULE_4__/* .Extensions.Configuration */ .IP.Configuration).registerDefaultConfigurations([{overrides:{'[plaintext]':{'editor.unicodeHighlight.ambiguousCharacters':false,'editor.unicodeHighlight.invisibleCharacters':false}}}]);

/***/ }),

/***/ 57018:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Dy": () => (/* binding */ nullTokenizeEncoded),
/* harmony export */   "Ri": () => (/* binding */ nullTokenize),
/* harmony export */   "TJ": () => (/* binding */ NullState)
/* harmony export */ });
/* harmony import */ var _languages_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98480);
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var NullState=new(/*#__PURE__*/function(){function _class(){_classCallCheck(this,_class);}_createClass(_class,[{key:"clone",value:function clone(){return this;}},{key:"equals",value:function equals(other){return this===other;}}]);return _class;}())();function nullTokenize(languageId,state){return new _languages_js__WEBPACK_IMPORTED_MODULE_0__/* .TokenizationResult */ .hG([new _languages_js__WEBPACK_IMPORTED_MODULE_0__/* .Token */ .WU(0,'',languageId)],state);}function nullTokenizeEncoded(languageId,state){var tokens=new Uint32Array(2);tokens[0]=0;tokens[1]=(languageId<<0/* LANGUAGEID_OFFSET */|0/* Other */<<8/* TOKEN_TYPE_OFFSET */|0/* None */<<10/* FONT_STYLE_OFFSET */|1/* DefaultForeground */<<14/* FOREGROUND_OFFSET */|2/* DefaultBackground */<<23/* BACKGROUND_OFFSET */)>>>0;return new _languages_js__WEBPACK_IMPORTED_MODULE_0__/* .EncodedTokenizationResult */ .DI(tokens,state===null?NullState:state);}

/***/ }),

/***/ 66909:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Bu": () => (/* binding */ ignoreBracketsInToken),
/* harmony export */   "wH": () => (/* binding */ createScopedLineTokens)
/* harmony export */ });
/* unused harmony export ScopedLineTokens */
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/function createScopedLineTokens(context,offset){var tokenCount=context.getCount();var tokenIndex=context.findTokenIndexAtOffset(offset);var desiredLanguageId=context.getLanguageId(tokenIndex);var lastTokenIndex=tokenIndex;while(lastTokenIndex+1<tokenCount&&context.getLanguageId(lastTokenIndex+1)===desiredLanguageId){lastTokenIndex++;}var firstTokenIndex=tokenIndex;while(firstTokenIndex>0&&context.getLanguageId(firstTokenIndex-1)===desiredLanguageId){firstTokenIndex--;}return new ScopedLineTokens(context,desiredLanguageId,firstTokenIndex,lastTokenIndex+1,context.getStartOffset(firstTokenIndex),context.getEndOffset(lastTokenIndex));}var ScopedLineTokens=/*#__PURE__*/function(){function ScopedLineTokens(actual,languageId,firstTokenIndex,lastTokenIndex,firstCharOffset,lastCharOffset){_classCallCheck(this,ScopedLineTokens);this._scopedLineTokensBrand=undefined;this._actual=actual;this.languageId=languageId;this._firstTokenIndex=firstTokenIndex;this._lastTokenIndex=lastTokenIndex;this.firstCharOffset=firstCharOffset;this._lastCharOffset=lastCharOffset;}_createClass(ScopedLineTokens,[{key:"getLineContent",value:function getLineContent(){var actualLineContent=this._actual.getLineContent();return actualLineContent.substring(this.firstCharOffset,this._lastCharOffset);}},{key:"getActualLineContentBefore",value:function getActualLineContentBefore(offset){var actualLineContent=this._actual.getLineContent();return actualLineContent.substring(0,this.firstCharOffset+offset);}},{key:"getTokenCount",value:function getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex;}},{key:"findTokenIndexAtOffset",value:function findTokenIndexAtOffset(offset){return this._actual.findTokenIndexAtOffset(offset+this.firstCharOffset)-this._firstTokenIndex;}},{key:"getStandardTokenType",value:function getStandardTokenType(tokenIndex){return this._actual.getStandardTokenType(tokenIndex+this._firstTokenIndex);}}]);return ScopedLineTokens;}();function ignoreBracketsInToken(standardTokenType){return(standardTokenType&3/* value */)!==0;}

/***/ }),

/***/ 91142:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "J": () => (/* binding */ BasicInplaceReplace)
/* harmony export */ });
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var BasicInplaceReplace=/*#__PURE__*/function(){function BasicInplaceReplace(){_classCallCheck(this,BasicInplaceReplace);this._defaultValueSet=[['true','false'],['True','False'],['Private','Public','Friend','ReadOnly','Partial','Protected','WriteOnly'],['public','protected','private']];}_createClass(BasicInplaceReplace,[{key:"navigateValueSet",value:function navigateValueSet(range1,text1,range2,text2,up){if(range1&&text1){var result=this.doNavigateValueSet(text1,up);if(result){return{range:range1,value:result};}}if(range2&&text2){var _result=this.doNavigateValueSet(text2,up);if(_result){return{range:range2,value:_result};}}return null;}},{key:"doNavigateValueSet",value:function doNavigateValueSet(text,up){var numberResult=this.numberReplace(text,up);if(numberResult!==null){return numberResult;}return this.textReplace(text,up);}},{key:"numberReplace",value:function numberReplace(value,up){var precision=Math.pow(10,value.length-(value.lastIndexOf('.')+1));var n1=Number(value);var n2=parseFloat(value);if(!isNaN(n1)&&!isNaN(n2)&&n1===n2){if(n1===0&&!up){return null;// don't do negative
//			} else if(n1 === 9 && up) {
//				return null; // don't insert 10 into a number
}else{n1=Math.floor(n1*precision);n1+=up?precision:-precision;return String(n1/precision);}}return null;}},{key:"textReplace",value:function textReplace(value,up){return this.valueSetsReplace(this._defaultValueSet,value,up);}},{key:"valueSetsReplace",value:function valueSetsReplace(valueSets,value,up){var result=null;for(var i=0,len=valueSets.length;result===null&&i<len;i++){result=this.valueSetReplace(valueSets[i],value,up);}return result;}},{key:"valueSetReplace",value:function valueSetReplace(valueSet,value,up){var idx=valueSet.indexOf(value);if(idx>=0){idx+=up?+1:-1;if(idx<0){idx=valueSet.length-1;}else{idx%=valueSet.length;}return valueSet[idx];}return null;}}]);return BasicInplaceReplace;}();BasicInplaceReplace.INSTANCE=new BasicInplaceReplace();

/***/ }),

/***/ 1092:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "EA": () => (/* binding */ RichEditBrackets),
/* harmony export */   "Vr": () => (/* binding */ BracketsUtils)
/* harmony export */ });
/* unused harmony export RichEditBracket */
/* harmony import */ var _base_common_strings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41712);
/* harmony import */ var _core_stringBuilder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(26644);
/* harmony import */ var _core_range_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(96844);
function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*//**
 * Represents a grouping of colliding bracket pairs.
 *
 * Most of the times this contains a single bracket pair,
 * but sometimes this contains multiple bracket pairs in cases
 * where the same string appears as a closing bracket for multiple
 * bracket pairs, or the same string appears an opening bracket for
 * multiple bracket pairs.
 *
 * e.g. of a group containing a single pair:
 *   open: ['{'], close: ['}']
 *
 * e.g. of a group containing multiple pairs:
 *   open: ['if', 'for'], close: ['end', 'end']
 */var RichEditBracket=/*#__PURE__*/function(){function RichEditBracket(languageId,index,open,close,forwardRegex,reversedRegex){_classCallCheck(this,RichEditBracket);this._richEditBracketBrand=undefined;this.languageId=languageId;this.index=index;this.open=open;this.close=close;this.forwardRegex=forwardRegex;this.reversedRegex=reversedRegex;this._openSet=RichEditBracket._toSet(this.open);this._closeSet=RichEditBracket._toSet(this.close);}/**
     * Check if the provided `text` is an open bracket in this group.
     */_createClass(RichEditBracket,[{key:"isOpen",value:function isOpen(text){return this._openSet.has(text);}/**
     * Check if the provided `text` is a close bracket in this group.
     */},{key:"isClose",value:function isClose(text){return this._closeSet.has(text);}}],[{key:"_toSet",value:function _toSet(arr){var result=new Set();var _iterator=_createForOfIteratorHelper(arr),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var element=_step.value;result.add(element);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return result;}}]);return RichEditBracket;}();/**
 * Groups together brackets that have equal open or close sequences.
 *
 * For example, if the following brackets are defined:
 *   ['IF','END']
 *   ['for','end']
 *   ['{','}']
 *
 * Then the grouped brackets would be:
 *   { open: ['if', 'for'], close: ['end', 'end'] }
 *   { open: ['{'], close: ['}'] }
 *
 */function groupFuzzyBrackets(brackets){var N=brackets.length;brackets=brackets.map(function(b){return[b[0].toLowerCase(),b[1].toLowerCase()];});var group=[];for(var i=0;i<N;i++){group[i]=i;}var areOverlapping=function areOverlapping(a,b){var _a=_slicedToArray(a,2),aOpen=_a[0],aClose=_a[1];var _b=_slicedToArray(b,2),bOpen=_b[0],bClose=_b[1];return aOpen===bOpen||aOpen===bClose||aClose===bOpen||aClose===bClose;};var mergeGroups=function mergeGroups(g1,g2){var newG=Math.min(g1,g2);var oldG=Math.max(g1,g2);for(var _i2=0;_i2<N;_i2++){if(group[_i2]===oldG){group[_i2]=newG;}}};// group together brackets that have the same open or the same close sequence
for(var _i3=0;_i3<N;_i3++){var a=brackets[_i3];for(var j=_i3+1;j<N;j++){var b=brackets[j];if(areOverlapping(a,b)){mergeGroups(group[_i3],group[j]);}}}var result=[];for(var g=0;g<N;g++){var currentOpen=[];var currentClose=[];for(var _i4=0;_i4<N;_i4++){if(group[_i4]===g){var _brackets$_i=_slicedToArray(brackets[_i4],2),open=_brackets$_i[0],close=_brackets$_i[1];currentOpen.push(open);currentClose.push(close);}}if(currentOpen.length>0){result.push({open:currentOpen,close:currentClose});}}return result;}var RichEditBrackets=function RichEditBrackets(languageId,_brackets){_classCallCheck(this,RichEditBrackets);this._richEditBracketsBrand=undefined;var brackets=groupFuzzyBrackets(_brackets);this.brackets=brackets.map(function(b,index){return new RichEditBracket(languageId,index,b.open,b.close,getRegexForBracketPair(b.open,b.close,brackets,index),getReversedRegexForBracketPair(b.open,b.close,brackets,index));});this.forwardRegex=getRegexForBrackets(this.brackets);this.reversedRegex=getReversedRegexForBrackets(this.brackets);this.textIsBracket={};this.textIsOpenBracket={};this.maxBracketLength=0;var _iterator2=_createForOfIteratorHelper(this.brackets),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var bracket=_step2.value;var _iterator3=_createForOfIteratorHelper(bracket.open),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var open=_step3.value;this.textIsBracket[open]=bracket;this.textIsOpenBracket[open]=true;this.maxBracketLength=Math.max(this.maxBracketLength,open.length);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}var _iterator4=_createForOfIteratorHelper(bracket.close),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var close=_step4.value;this.textIsBracket[close]=bracket;this.textIsOpenBracket[close]=false;this.maxBracketLength=Math.max(this.maxBracketLength,close.length);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}};function collectSuperstrings(str,brackets,currentIndex,dest){for(var i=0,len=brackets.length;i<len;i++){if(i===currentIndex){continue;}var bracket=brackets[i];var _iterator5=_createForOfIteratorHelper(bracket.open),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var open=_step5.value;if(open.indexOf(str)>=0){dest.push(open);}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}var _iterator6=_createForOfIteratorHelper(bracket.close),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var close=_step6.value;if(close.indexOf(str)>=0){dest.push(close);}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}}function lengthcmp(a,b){return a.length-b.length;}function unique(arr){if(arr.length<=1){return arr;}var result=[];var seen=new Set();var _iterator7=_createForOfIteratorHelper(arr),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var element=_step7.value;if(seen.has(element)){continue;}result.push(element);seen.add(element);}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}return result;}/**
 * Create a regular expression that can be used to search forward in a piece of text
 * for a group of bracket pairs. But this regex must be built in a way in which
 * it is aware of the other bracket pairs defined for the language.
 *
 * For example, if a language contains the following bracket pairs:
 *   ['begin', 'end']
 *   ['if', 'end if']
 * The two bracket pairs do not collide because no open or close brackets are equal.
 * So the function getRegexForBracketPair is called twice, once with
 * the ['begin'], ['end'] group consisting of one bracket pair, and once with
 * the ['if'], ['end if'] group consiting of the other bracket pair.
 *
 * But there could be a situation where an occurrence of 'end if' is mistaken
 * for an occurrence of 'end'.
 *
 * Therefore, for the bracket pair ['begin', 'end'], the regex will also
 * target 'end if'. The regex will be something like:
 *   /(\bend if\b)|(\bend\b)|(\bif\b)/
 *
 * The regex also searches for "superstrings" (other brackets that might be mistaken with the current bracket).
 *
 */function getRegexForBracketPair(open,close,brackets,currentIndex){// search in all brackets for other brackets that are a superstring of these brackets
var pieces=[];pieces=pieces.concat(open);pieces=pieces.concat(close);for(var i=0,len=pieces.length;i<len;i++){collectSuperstrings(pieces[i],brackets,currentIndex,pieces);}pieces=unique(pieces);pieces.sort(lengthcmp);pieces.reverse();return createBracketOrRegExp(pieces);}/**
 * Matching a regular expression in JS can only be done "forwards". So JS offers natively only
 * methods to find the first match of a regex in a string. But sometimes, it is useful to
 * find the last match of a regex in a string. For such a situation, a nice solution is to
 * simply reverse the string and then search for a reversed regex.
 *
 * This function also has the fine details of `getRegexForBracketPair`. For the same example
 * given above, the regex produced here would look like:
 *   /(\bfi dne\b)|(\bdne\b)|(\bfi\b)/
 */function getReversedRegexForBracketPair(open,close,brackets,currentIndex){// search in all brackets for other brackets that are a superstring of these brackets
var pieces=[];pieces=pieces.concat(open);pieces=pieces.concat(close);for(var i=0,len=pieces.length;i<len;i++){collectSuperstrings(pieces[i],brackets,currentIndex,pieces);}pieces=unique(pieces);pieces.sort(lengthcmp);pieces.reverse();return createBracketOrRegExp(pieces.map(toReversedString));}/**
 * Creates a regular expression that targets all bracket pairs.
 *
 * e.g. for the bracket pairs:
 *  ['{','}']
 *  ['begin,'end']
 *  ['for','end']
 * the regex would look like:
 *  /(\{)|(\})|(\bbegin\b)|(\bend\b)|(\bfor\b)/
 */function getRegexForBrackets(brackets){var pieces=[];var _iterator8=_createForOfIteratorHelper(brackets),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var bracket=_step8.value;var _iterator9=_createForOfIteratorHelper(bracket.open),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var open=_step9.value;pieces.push(open);}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}var _iterator10=_createForOfIteratorHelper(bracket.close),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var close=_step10.value;pieces.push(close);}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}pieces=unique(pieces);return createBracketOrRegExp(pieces);}/**
 * Matching a regular expression in JS can only be done "forwards". So JS offers natively only
 * methods to find the first match of a regex in a string. But sometimes, it is useful to
 * find the last match of a regex in a string. For such a situation, a nice solution is to
 * simply reverse the string and then search for a reversed regex.
 *
 * e.g. for the bracket pairs:
 *  ['{','}']
 *  ['begin,'end']
 *  ['for','end']
 * the regex would look like:
 *  /(\{)|(\})|(\bnigeb\b)|(\bdne\b)|(\brof\b)/
 */function getReversedRegexForBrackets(brackets){var pieces=[];var _iterator11=_createForOfIteratorHelper(brackets),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var bracket=_step11.value;var _iterator12=_createForOfIteratorHelper(bracket.open),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var open=_step12.value;pieces.push(open);}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}var _iterator13=_createForOfIteratorHelper(bracket.close),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var close=_step13.value;pieces.push(close);}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}pieces=unique(pieces);return createBracketOrRegExp(pieces.map(toReversedString));}function prepareBracketForRegExp(str){// This bracket pair uses letters like e.g. "begin" - "end"
var insertWordBoundaries=/^[\w ]+$/.test(str);str=_base_common_strings_js__WEBPACK_IMPORTED_MODULE_0__/* .escapeRegExpCharacters */ .ec(str);return insertWordBoundaries?"\\b".concat(str,"\\b"):str;}function createBracketOrRegExp(pieces){var regexStr="(".concat(pieces.map(prepareBracketForRegExp).join(')|('),")");return _base_common_strings_js__WEBPACK_IMPORTED_MODULE_0__/* .createRegExp */ .GF(regexStr,true);}var toReversedString=function(){function reverse(str){if(_core_stringBuilder_js__WEBPACK_IMPORTED_MODULE_1__/* .hasTextDecoder */ .lZ){// create a Uint16Array and then use a TextDecoder to create a string
var arr=new Uint16Array(str.length);var offset=0;for(var i=str.length-1;i>=0;i--){arr[offset++]=str.charCodeAt(i);}return _core_stringBuilder_js__WEBPACK_IMPORTED_MODULE_1__/* .getPlatformTextDecoder */ .oe().decode(arr);}else{var result=[];var resultLen=0;for(var _i5=str.length-1;_i5>=0;_i5--){result[resultLen++]=str.charAt(_i5);}return result.join('');}}var lastInput=null;var lastOutput=null;return function toReversedString(str){if(lastInput!==str){lastInput=str;lastOutput=reverse(lastInput);}return lastOutput;};}();var BracketsUtils=/*#__PURE__*/function(){function BracketsUtils(){_classCallCheck(this,BracketsUtils);}_createClass(BracketsUtils,null,[{key:"_findPrevBracketInText",value:function _findPrevBracketInText(reversedBracketRegex,lineNumber,reversedText,offset){var m=reversedText.match(reversedBracketRegex);if(!m){return null;}var matchOffset=reversedText.length-(m.index||0);var matchLength=m[0].length;var absoluteMatchOffset=offset+matchOffset;return new _core_range_js__WEBPACK_IMPORTED_MODULE_2__/* .Range */ .e(lineNumber,absoluteMatchOffset-matchLength+1,lineNumber,absoluteMatchOffset+1);}},{key:"findPrevBracketInRange",value:function findPrevBracketInRange(reversedBracketRegex,lineNumber,lineText,startOffset,endOffset){// Because JS does not support backwards regex search, we search forwards in a reversed string with a reversed regex ;)
var reversedLineText=toReversedString(lineText);var reversedSubstr=reversedLineText.substring(lineText.length-endOffset,lineText.length-startOffset);return this._findPrevBracketInText(reversedBracketRegex,lineNumber,reversedSubstr,startOffset);}},{key:"findNextBracketInText",value:function findNextBracketInText(bracketRegex,lineNumber,text,offset){var m=text.match(bracketRegex);if(!m){return null;}var matchOffset=m.index||0;var matchLength=m[0].length;if(matchLength===0){return null;}var absoluteMatchOffset=offset+matchOffset;return new _core_range_js__WEBPACK_IMPORTED_MODULE_2__/* .Range */ .e(lineNumber,absoluteMatchOffset+1,lineNumber,absoluteMatchOffset+1+matchLength);}},{key:"findNextBracketInRange",value:function findNextBracketInRange(bracketRegex,lineNumber,lineText,startOffset,endOffset){var substr=lineText.substring(startOffset,endOffset);return this.findNextBracketInText(bracketRegex,lineNumber,substr,startOffset);}}]);return BracketsUtils;}();

/***/ }),

/***/ 77582:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "si": () => (/* binding */ TokenTheme),
/* harmony export */   "yr": () => (/* binding */ generateTokensCSSForColorMap)
/* harmony export */ });
/* unused harmony exports ParsedTokenThemeRule, parseTokenTheme, ColorMap, toStandardTokenType, strcmp, ThemeTrieElementRule, ThemeTrieElement */
/* harmony import */ var _base_common_color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(65142);
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var ParsedTokenThemeRule=function ParsedTokenThemeRule(token,index,fontStyle,foreground,background){_classCallCheck(this,ParsedTokenThemeRule);this._parsedThemeRuleBrand=undefined;this.token=token;this.index=index;this.fontStyle=fontStyle;this.foreground=foreground;this.background=background;};/**
 * Parse a raw theme into rules.
 */function parseTokenTheme(source){if(!source||!Array.isArray(source)){return[];}var result=[];var resultLen=0;for(var i=0,len=source.length;i<len;i++){var entry=source[i];var fontStyle=-1/* NotSet */;if(typeof entry.fontStyle==='string'){fontStyle=0/* None */;var segments=entry.fontStyle.split(' ');for(var j=0,lenJ=segments.length;j<lenJ;j++){var segment=segments[j];switch(segment){case'italic':fontStyle=fontStyle|1/* Italic */;break;case'bold':fontStyle=fontStyle|2/* Bold */;break;case'underline':fontStyle=fontStyle|4/* Underline */;break;case'strikethrough':fontStyle=fontStyle|8/* Strikethrough */;break;}}}var foreground=null;if(typeof entry.foreground==='string'){foreground=entry.foreground;}var background=null;if(typeof entry.background==='string'){background=entry.background;}result[resultLen++]=new ParsedTokenThemeRule(entry.token||'',i,fontStyle,foreground,background);}return result;}/**
 * Resolve rules (i.e. inheritance).
 */function resolveParsedTokenThemeRules(parsedThemeRules,customTokenColors){// Sort rules lexicographically, and then by index if necessary
parsedThemeRules.sort(function(a,b){var r=strcmp(a.token,b.token);if(r!==0){return r;}return a.index-b.index;});// Determine defaults
var defaultFontStyle=0/* None */;var defaultForeground='000000';var defaultBackground='ffffff';while(parsedThemeRules.length>=1&&parsedThemeRules[0].token===''){var incomingDefaults=parsedThemeRules.shift();if(incomingDefaults.fontStyle!==-1/* NotSet */){defaultFontStyle=incomingDefaults.fontStyle;}if(incomingDefaults.foreground!==null){defaultForeground=incomingDefaults.foreground;}if(incomingDefaults.background!==null){defaultBackground=incomingDefaults.background;}}var colorMap=new ColorMap();// start with token colors from custom token themes
var _iterator=_createForOfIteratorHelper(customTokenColors),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var color=_step.value;colorMap.getId(color);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var foregroundColorId=colorMap.getId(defaultForeground);var backgroundColorId=colorMap.getId(defaultBackground);var defaults=new ThemeTrieElementRule(defaultFontStyle,foregroundColorId,backgroundColorId);var root=new ThemeTrieElement(defaults);for(var i=0,len=parsedThemeRules.length;i<len;i++){var rule=parsedThemeRules[i];root.insert(rule.token,rule.fontStyle,colorMap.getId(rule.foreground),colorMap.getId(rule.background));}return new TokenTheme(colorMap,root);}var colorRegExp=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;var ColorMap=/*#__PURE__*/function(){function ColorMap(){_classCallCheck(this,ColorMap);this._lastColorId=0;this._id2color=[];this._color2id=new Map();}_createClass(ColorMap,[{key:"getId",value:function getId(color){if(color===null){return 0;}var match=color.match(colorRegExp);if(!match){throw new Error('Illegal value for token color: '+color);}color=match[1].toUpperCase();var value=this._color2id.get(color);if(value){return value;}value=++this._lastColorId;this._color2id.set(color,value);this._id2color[value]=_base_common_color_js__WEBPACK_IMPORTED_MODULE_0__/* .Color.fromHex */ .Il.fromHex('#'+color);return value;}},{key:"getColorMap",value:function getColorMap(){return this._id2color.slice(0);}}]);return ColorMap;}();var TokenTheme=/*#__PURE__*/function(){function TokenTheme(colorMap,root){_classCallCheck(this,TokenTheme);this._colorMap=colorMap;this._root=root;this._cache=new Map();}_createClass(TokenTheme,[{key:"getColorMap",value:function getColorMap(){return this._colorMap.getColorMap();}},{key:"_match",value:function _match(token){return this._root.match(token);}},{key:"match",value:function match(languageId,token){// The cache contains the metadata without the language bits set.
var result=this._cache.get(token);if(typeof result==='undefined'){var rule=this._match(token);var standardToken=toStandardTokenType(token);result=(rule.metadata|standardToken<<8/* TOKEN_TYPE_OFFSET */)>>>0;this._cache.set(token,result);}return(result|languageId<<0/* LANGUAGEID_OFFSET */)>>>0;}}],[{key:"createFromRawTokenTheme",value:function createFromRawTokenTheme(source,customTokenColors){return this.createFromParsedTokenTheme(parseTokenTheme(source),customTokenColors);}},{key:"createFromParsedTokenTheme",value:function createFromParsedTokenTheme(source,customTokenColors){return resolveParsedTokenThemeRules(source,customTokenColors);}}]);return TokenTheme;}();var STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|regexp)\b/;function toStandardTokenType(tokenType){var m=tokenType.match(STANDARD_TOKEN_TYPE_REGEXP);if(!m){return 0/* Other */;}switch(m[1]){case'comment':return 1/* Comment */;case'string':return 2/* String */;case'regex':return 3/* RegEx */;case'regexp':return 3/* RegEx */;}throw new Error('Unexpected match for standard token type!');}function strcmp(a,b){if(a<b){return-1;}if(a>b){return 1;}return 0;}var ThemeTrieElementRule=/*#__PURE__*/function(){function ThemeTrieElementRule(fontStyle,foreground,background){_classCallCheck(this,ThemeTrieElementRule);this._themeTrieElementRuleBrand=undefined;this._fontStyle=fontStyle;this._foreground=foreground;this._background=background;this.metadata=(this._fontStyle<<10/* FONT_STYLE_OFFSET */|this._foreground<<14/* FOREGROUND_OFFSET */|this._background<<23/* BACKGROUND_OFFSET */)>>>0;}_createClass(ThemeTrieElementRule,[{key:"clone",value:function clone(){return new ThemeTrieElementRule(this._fontStyle,this._foreground,this._background);}},{key:"acceptOverwrite",value:function acceptOverwrite(fontStyle,foreground,background){if(fontStyle!==-1/* NotSet */){this._fontStyle=fontStyle;}if(foreground!==0/* None */){this._foreground=foreground;}if(background!==0/* None */){this._background=background;}this.metadata=(this._fontStyle<<10/* FONT_STYLE_OFFSET */|this._foreground<<14/* FOREGROUND_OFFSET */|this._background<<23/* BACKGROUND_OFFSET */)>>>0;}}]);return ThemeTrieElementRule;}();var ThemeTrieElement=/*#__PURE__*/function(){function ThemeTrieElement(mainRule){_classCallCheck(this,ThemeTrieElement);this._themeTrieElementBrand=undefined;this._mainRule=mainRule;this._children=new Map();}_createClass(ThemeTrieElement,[{key:"match",value:function match(token){if(token===''){return this._mainRule;}var dotIndex=token.indexOf('.');var head;var tail;if(dotIndex===-1){head=token;tail='';}else{head=token.substring(0,dotIndex);tail=token.substring(dotIndex+1);}var child=this._children.get(head);if(typeof child!=='undefined'){return child.match(tail);}return this._mainRule;}},{key:"insert",value:function insert(token,fontStyle,foreground,background){if(token===''){// Merge into the main rule
this._mainRule.acceptOverwrite(fontStyle,foreground,background);return;}var dotIndex=token.indexOf('.');var head;var tail;if(dotIndex===-1){head=token;tail='';}else{head=token.substring(0,dotIndex);tail=token.substring(dotIndex+1);}var child=this._children.get(head);if(typeof child==='undefined'){child=new ThemeTrieElement(this._mainRule.clone());this._children.set(head,child);}child.insert(tail,fontStyle,foreground,background);}}]);return ThemeTrieElement;}();function generateTokensCSSForColorMap(colorMap){var rules=[];for(var i=1,len=colorMap.length;i<len;i++){var color=colorMap[i];rules[i]=".mtk".concat(i," { color: ").concat(color,"; }");}rules.push('.mtki { font-style: italic; }');rules.push('.mtkb { font-weight: bold; }');rules.push('.mtku { text-decoration: underline; text-underline-position: under; }');rules.push('.mtks { text-decoration: line-through; }');rules.push('.mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }');return rules.join('\n');}

/***/ }),

/***/ 24251:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "C2": () => (/* binding */ tokenizeToString),
/* harmony export */   "Fq": () => (/* binding */ tokenizeLineToHTML)
/* harmony export */ });
/* unused harmony export _tokenizeToString */
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92910);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41712);
/* harmony import */ var _tokens_lineTokens_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(83817);
/* harmony import */ var _languages_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(98480);
/* harmony import */ var _nullMode_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(57018);
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var __awaiter=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var fallback={getInitialState:function getInitialState(){return _nullMode_js__WEBPACK_IMPORTED_MODULE_4__/* .NullState */ .TJ;},tokenizeEncoded:function tokenizeEncoded(buffer,hasEOL,state){return (0,_nullMode_js__WEBPACK_IMPORTED_MODULE_4__/* .nullTokenizeEncoded */ .Dy)(0/* Null */,state);}};function tokenizeToString(languageService,text,languageId){return __awaiter(this,void 0,void 0,/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee(){var tokenizationSupport;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(languageId){_context.next=2;break;}return _context.abrupt("return",_tokenizeToString(text,languageService.languageIdCodec,fallback));case 2:_context.next=4;return _languages_js__WEBPACK_IMPORTED_MODULE_3__/* .TokenizationRegistry.getOrCreate */ .RW.getOrCreate(languageId);case 4:tokenizationSupport=_context.sent;return _context.abrupt("return",_tokenizeToString(text,languageService.languageIdCodec,tokenizationSupport||fallback));case 6:case"end":return _context.stop();}}},_callee);}));}function tokenizeLineToHTML(text,viewLineTokens,colorMap,startOffset,endOffset,tabSize,useNbsp){var result="<div>";var charIndex=startOffset;var tabsCharDelta=0;var prevIsSpace=true;for(var tokenIndex=0,tokenCount=viewLineTokens.getCount();tokenIndex<tokenCount;tokenIndex++){var tokenEndIndex=viewLineTokens.getEndOffset(tokenIndex);if(tokenEndIndex<=startOffset){continue;}var partContent='';for(;charIndex<tokenEndIndex&&charIndex<endOffset;charIndex++){var charCode=text.charCodeAt(charIndex);switch(charCode){case 9/* Tab */:{var insertSpacesCount=tabSize-(charIndex+tabsCharDelta)%tabSize;tabsCharDelta+=insertSpacesCount-1;while(insertSpacesCount>0){if(useNbsp&&prevIsSpace){partContent+='&#160;';prevIsSpace=false;}else{partContent+=' ';prevIsSpace=true;}insertSpacesCount--;}break;}case 60/* LessThan */:partContent+='&lt;';prevIsSpace=false;break;case 62/* GreaterThan */:partContent+='&gt;';prevIsSpace=false;break;case 38/* Ampersand */:partContent+='&amp;';prevIsSpace=false;break;case 0/* Null */:partContent+='&#00;';prevIsSpace=false;break;case 65279/* UTF8_BOM */:case 8232/* LINE_SEPARATOR */:case 8233/* PARAGRAPH_SEPARATOR */:case 133/* NEXT_LINE */:partContent+="\uFFFD";prevIsSpace=false;break;case 13/* CarriageReturn */:// zero width space, because carriage return would introduce a line break
partContent+='&#8203';prevIsSpace=false;break;case 32/* Space */:if(useNbsp&&prevIsSpace){partContent+='&#160;';prevIsSpace=false;}else{partContent+=' ';prevIsSpace=true;}break;default:partContent+=String.fromCharCode(charCode);prevIsSpace=false;}}result+="<span style=\"".concat(viewLineTokens.getInlineStyle(tokenIndex,colorMap),"\">").concat(partContent,"</span>");if(tokenEndIndex>endOffset||charIndex>=endOffset){break;}}result+="</div>";return result;}function _tokenizeToString(text,languageIdCodec,tokenizationSupport){var result="<div class=\"monaco-tokenized-source\">";var lines=_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .splitLines */ .uq(text);var currentState=tokenizationSupport.getInitialState();for(var i=0,len=lines.length;i<len;i++){var line=lines[i];if(i>0){result+="<br/>";}var tokenizationResult=tokenizationSupport.tokenizeEncoded(line,true,currentState);_tokens_lineTokens_js__WEBPACK_IMPORTED_MODULE_2__/* .LineTokens.convertToEndOffset */ .A.convertToEndOffset(tokenizationResult.tokens,line.length);var lineTokens=new _tokens_lineTokens_js__WEBPACK_IMPORTED_MODULE_2__/* .LineTokens */ .A(tokenizationResult.tokens,line,languageIdCodec);var viewLineTokens=lineTokens.inflate();var startOffset=0;for(var j=0,lenJ=viewLineTokens.getCount();j<lenJ;j++){var type=viewLineTokens.getClassName(j);var endIndex=viewLineTokens.getEndOffset(j);result+="<span class=\"".concat(type,"\">").concat(_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .escape */ .YU(line.substring(startOffset,endIndex)),"</span>");startOffset=endIndex;}currentState=tokenizationResult.endState;}result+="</div>";return result;}

/***/ }),

/***/ 22007:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "a": () => (/* binding */ UnicodeTextModelHighlighter)
/* harmony export */ });
/* harmony import */ var _core_range_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(96844);
/* harmony import */ var _model_textModelSearch_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(97886);
/* harmony import */ var _base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41712);
/* harmony import */ var _base_common_types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(918);
function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var UnicodeTextModelHighlighter=/*#__PURE__*/function(){function UnicodeTextModelHighlighter(){_classCallCheck(this,UnicodeTextModelHighlighter);}_createClass(UnicodeTextModelHighlighter,null,[{key:"computeUnicodeHighlights",value:function computeUnicodeHighlights(model,options,range){var startLine=range?range.startLineNumber:1;var endLine=range?range.endLineNumber:model.getLineCount();var codePointHighlighter=new CodePointHighlighter(options);var candidates=codePointHighlighter.getCandidateCodePoints();var regex;if(candidates==='allNonBasicAscii'){regex=new RegExp('[^\\t\\n\\r\\x20-\\x7E]','g');}else{regex=new RegExp("".concat(buildRegExpCharClassExpr(Array.from(candidates))),'g');}var searcher=new _model_textModelSearch_js__WEBPACK_IMPORTED_MODULE_0__/* .Searcher */ .sz(null,regex);var ranges=[];var hasMore=false;var m;var ambiguousCharacterCount=0;var invisibleCharacterCount=0;var nonBasicAsciiCharacterCount=0;forLoop:for(var lineNumber=startLine,lineCount=endLine;lineNumber<=lineCount;lineNumber++){var lineContent=model.getLineContent(lineNumber);var lineLength=lineContent.length;// Reset regex to search from the beginning
searcher.reset(0);do{m=searcher.next(lineContent);if(m){var startIndex=m.index;var endIndex=m.index+m[0].length;// Extend range to entire code point
if(startIndex>0){var charCodeBefore=lineContent.charCodeAt(startIndex-1);if(_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .isHighSurrogate */ .ZG(charCodeBefore)){startIndex--;}}if(endIndex+1<lineLength){var _charCodeBefore=lineContent.charCodeAt(endIndex-1);if(_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .isHighSurrogate */ .ZG(_charCodeBefore)){endIndex++;}}var str=lineContent.substring(startIndex,endIndex);var highlightReason=codePointHighlighter.shouldHighlightNonBasicASCII(str);if(highlightReason!==0/* None */){if(highlightReason===3/* Ambiguous */){ambiguousCharacterCount++;}else if(highlightReason===2/* Invisible */){invisibleCharacterCount++;}else if(highlightReason===1/* NonBasicASCII */){nonBasicAsciiCharacterCount++;}else{(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_2__/* .assertNever */ .vE)(highlightReason);}var MAX_RESULT_LENGTH=1000;if(ranges.length>=MAX_RESULT_LENGTH){hasMore=true;break forLoop;}ranges.push(new _core_range_js__WEBPACK_IMPORTED_MODULE_3__/* .Range */ .e(lineNumber,startIndex+1,lineNumber,endIndex+1));}}}while(m);}return{ranges:ranges,hasMore:hasMore,ambiguousCharacterCount:ambiguousCharacterCount,invisibleCharacterCount:invisibleCharacterCount,nonBasicAsciiCharacterCount:nonBasicAsciiCharacterCount};}},{key:"computeUnicodeHighlightReason",value:function computeUnicodeHighlightReason(char,options){var codePointHighlighter=new CodePointHighlighter(options);var reason=codePointHighlighter.shouldHighlightNonBasicASCII(char);switch(reason){case 0/* None */:return null;case 2/* Invisible */:return{kind:1/* Invisible */};case 3/* Ambiguous */:{var codePoint=char.codePointAt(0);var primaryConfusable=codePointHighlighter.ambiguousCharacters.getPrimaryConfusable(codePoint);var notAmbiguousInLocales=_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .AmbiguousCharacters.getLocales */ .ZK.getLocales().filter(function(l){return!_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .AmbiguousCharacters.getInstance */ .ZK.getInstance(new Set([].concat(_toConsumableArray(options.allowedLocales),[l]))).isAmbiguous(codePoint);});return{kind:0/* Ambiguous */,confusableWith:String.fromCodePoint(primaryConfusable),notAmbiguousInLocales:notAmbiguousInLocales};}case 1/* NonBasicASCII */:return{kind:2/* NonBasicAscii */};}}}]);return UnicodeTextModelHighlighter;}();function buildRegExpCharClassExpr(codePoints,flags){var src="[".concat(_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .escapeRegExpCharacters */ .ec(codePoints.map(function(i){return String.fromCodePoint(i);}).join('')),"]");return src;}var CodePointHighlighter=/*#__PURE__*/function(){function CodePointHighlighter(options){_classCallCheck(this,CodePointHighlighter);this.options=options;this.allowedCodePoints=new Set(options.allowedCodePoints);this.ambiguousCharacters=_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .AmbiguousCharacters.getInstance */ .ZK.getInstance(new Set(options.allowedLocales));}_createClass(CodePointHighlighter,[{key:"getCandidateCodePoints",value:function getCandidateCodePoints(){if(this.options.nonBasicASCII){return'allNonBasicAscii';}var set=new Set();if(this.options.invisibleCharacters){var _iterator=_createForOfIteratorHelper(_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .InvisibleCharacters.codePoints */ .vU.codePoints),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var cp=_step.value;set.add(cp);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}if(this.options.ambiguousCharacters){var _iterator2=_createForOfIteratorHelper(this.ambiguousCharacters.getConfusableCodePoints()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _cp=_step2.value;set.add(_cp);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}var _iterator3=_createForOfIteratorHelper(this.allowedCodePoints),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _cp2=_step3.value;set.delete(_cp2);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return set;}},{key:"shouldHighlightNonBasicASCII",value:function shouldHighlightNonBasicASCII(character){var codePoint=character.codePointAt(0);if(this.allowedCodePoints.has(codePoint)){return 0/* None */;}if(this.options.nonBasicASCII){return 1/* NonBasicASCII */;}if(this.options.invisibleCharacters){var isAllowedInvisibleCharacter=character===' '||character==='\n'||character==='\t';// TODO check for emojis
if(!isAllowedInvisibleCharacter&&_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__/* .InvisibleCharacters.isInvisibleCharacter */ .vU.isInvisibleCharacter(codePoint)){return 2/* Invisible */;}}if(this.options.ambiguousCharacters){if(this.ambiguousCharacters.isAmbiguous(codePoint)){return 3/* Ambiguous */;}}return 0/* None */;}}]);return CodePointHighlighter;}();

/***/ }),

/***/ 16227:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "F5": () => (/* binding */ MinimapPosition),
/* harmony export */   "Qi": () => (/* binding */ ValidAnnotatedEditOperation),
/* harmony export */   "RM": () => (/* binding */ InjectedTextCursorStops),
/* harmony export */   "Tx": () => (/* binding */ SearchData),
/* harmony export */   "dJ": () => (/* binding */ TextModelResolvedOptions),
/* harmony export */   "je": () => (/* binding */ ApplyEditsResult),
/* harmony export */   "pt": () => (/* binding */ shouldSynchronizeModel),
/* harmony export */   "sh": () => (/* binding */ OverviewRulerLane),
/* harmony export */   "tk": () => (/* binding */ FindMatch)
/* harmony export */ });
/* harmony import */ var _base_common_objects_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(473);
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*//**
 * Vertical Lane in the overview ruler of the editor.
 */var OverviewRulerLane;(function(OverviewRulerLane){OverviewRulerLane[OverviewRulerLane["Left"]=1]="Left";OverviewRulerLane[OverviewRulerLane["Center"]=2]="Center";OverviewRulerLane[OverviewRulerLane["Right"]=4]="Right";OverviewRulerLane[OverviewRulerLane["Full"]=7]="Full";})(OverviewRulerLane||(OverviewRulerLane={}));/**
 * Position in the minimap to render the decoration.
 */var MinimapPosition;(function(MinimapPosition){MinimapPosition[MinimapPosition["Inline"]=1]="Inline";MinimapPosition[MinimapPosition["Gutter"]=2]="Gutter";})(MinimapPosition||(MinimapPosition={}));var InjectedTextCursorStops;(function(InjectedTextCursorStops){InjectedTextCursorStops[InjectedTextCursorStops["Both"]=0]="Both";InjectedTextCursorStops[InjectedTextCursorStops["Right"]=1]="Right";InjectedTextCursorStops[InjectedTextCursorStops["Left"]=2]="Left";InjectedTextCursorStops[InjectedTextCursorStops["None"]=3]="None";})(InjectedTextCursorStops||(InjectedTextCursorStops={}));var TextModelResolvedOptions=/*#__PURE__*/function(){/**
     * @internal
     */function TextModelResolvedOptions(src){_classCallCheck(this,TextModelResolvedOptions);this._textModelResolvedOptionsBrand=undefined;this.tabSize=Math.max(1,src.tabSize|0);this.indentSize=src.tabSize|0;this.insertSpaces=Boolean(src.insertSpaces);this.defaultEOL=src.defaultEOL|0;this.trimAutoWhitespace=Boolean(src.trimAutoWhitespace);this.bracketPairColorizationOptions=src.bracketPairColorizationOptions;}/**
     * @internal
     */_createClass(TextModelResolvedOptions,[{key:"equals",value:function equals(other){return this.tabSize===other.tabSize&&this.indentSize===other.indentSize&&this.insertSpaces===other.insertSpaces&&this.defaultEOL===other.defaultEOL&&this.trimAutoWhitespace===other.trimAutoWhitespace&&(0,_base_common_objects_js__WEBPACK_IMPORTED_MODULE_0__/* .equals */ .fS)(this.bracketPairColorizationOptions,other.bracketPairColorizationOptions);}/**
     * @internal
     */},{key:"createChangeEvent",value:function createChangeEvent(newOpts){return{tabSize:this.tabSize!==newOpts.tabSize,indentSize:this.indentSize!==newOpts.indentSize,insertSpaces:this.insertSpaces!==newOpts.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==newOpts.trimAutoWhitespace};}}]);return TextModelResolvedOptions;}();var FindMatch=/**
     * @internal
     */function FindMatch(range,matches){_classCallCheck(this,FindMatch);this._findMatchBrand=undefined;this.range=range;this.matches=matches;};/**
 * @internal
 */var ValidAnnotatedEditOperation=function ValidAnnotatedEditOperation(identifier,range,text,forceMoveMarkers,isAutoWhitespaceEdit,_isTracked){_classCallCheck(this,ValidAnnotatedEditOperation);this.identifier=identifier;this.range=range;this.text=text;this.forceMoveMarkers=forceMoveMarkers;this.isAutoWhitespaceEdit=isAutoWhitespaceEdit;this._isTracked=_isTracked;};/**
 * @internal
 */var SearchData=function SearchData(regex,wordSeparators,simpleSearch){_classCallCheck(this,SearchData);this.regex=regex;this.wordSeparators=wordSeparators;this.simpleSearch=simpleSearch;};/**
 * @internal
 */var ApplyEditsResult=function ApplyEditsResult(reverseEdits,changes,trimAutoWhitespaceLineNumbers){_classCallCheck(this,ApplyEditsResult);this.reverseEdits=reverseEdits;this.changes=changes;this.trimAutoWhitespaceLineNumbers=trimAutoWhitespaceLineNumbers;};/**
 * @internal
 */function shouldSynchronizeModel(model){return!model.isTooLargeForSyncing()&&!model.isForSimpleWidget;}

/***/ }),

/***/ 96139:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BH": () => (/* binding */ TextAstNode),
/* harmony export */   "Dm": () => (/* binding */ InvalidBracketAstNode),
/* harmony export */   "Kd": () => (/* binding */ PairAstNode),
/* harmony export */   "Y0": () => (/* binding */ ListAstNode),
/* harmony export */   "n2": () => (/* binding */ BracketAstNode)
/* harmony export */ });
/* harmony import */ var _core_cursorColumns_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(44847);
/* harmony import */ var _length_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99992);
/* harmony import */ var _smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(11041);
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*//**
 * The base implementation for all AST nodes.
*/var BaseAstNode=/*#__PURE__*/function(){function BaseAstNode(length){_classCallCheck(this,BaseAstNode);this._length=length;}/**
     * The length of the entire node, which should equal the sum of lengths of all children.
    */_createClass(BaseAstNode,[{key:"length",get:function get(){return this._length;}}]);return BaseAstNode;}();/**
 * Represents a bracket pair including its child (e.g. `{ ... }`).
 * Might be unclosed.
 * Immutable, if all children are immutable.
*/var PairAstNode=/*#__PURE__*/function(_BaseAstNode){_inherits(PairAstNode,_BaseAstNode);var _super=_createSuper(PairAstNode);function PairAstNode(length,openingBracket,child,closingBracket,missingOpeningBracketIds){var _this;_classCallCheck(this,PairAstNode);_this=_super.call(this,length);_this.openingBracket=openingBracket;_this.child=child;_this.closingBracket=closingBracket;_this.missingOpeningBracketIds=missingOpeningBracketIds;return _this;}_createClass(PairAstNode,[{key:"kind",get:function get(){return 2/* Pair */;}},{key:"listHeight",get:function get(){return 0;}},{key:"childrenLength",get:function get(){return 3;}},{key:"getChild",value:function getChild(idx){switch(idx){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket;}throw new Error('Invalid child index');}/**
     * Avoid using this property, it allocates an array!
    */},{key:"children",get:function get(){var result=new Array();result.push(this.openingBracket);if(this.child){result.push(this.child);}if(this.closingBracket){result.push(this.closingBracket);}return result;}},{key:"canBeReused",value:function canBeReused(openBracketIds){if(this.closingBracket===null){// Unclosed pair ast nodes only
// end at the end of the document
// or when a parent node is closed.
// This could be improved:
// Only return false if some next token is neither "undefined" nor a bracket that closes a parent.
return false;}if(openBracketIds.intersects(this.missingOpeningBracketIds)){return false;}return true;}},{key:"deepClone",value:function deepClone(){return new PairAstNode(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds);}},{key:"computeMinIndentation",value:function computeMinIndentation(offset,textModel){return this.child?this.child.computeMinIndentation((0,_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthAdd */ .Ii)(offset,this.openingBracket.length),textModel):Number.MAX_SAFE_INTEGER;}}],[{key:"create",value:function create(openingBracket,child,closingBracket){var length=openingBracket.length;if(child){length=(0,_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthAdd */ .Ii)(length,child.length);}if(closingBracket){length=(0,_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthAdd */ .Ii)(length,closingBracket.length);}return new PairAstNode(length,openingBracket,child,closingBracket,child?child.missingOpeningBracketIds:_smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_2__/* .SmallImmutableSet.getEmpty */ .tS.getEmpty());}}]);return PairAstNode;}(BaseAstNode);var ListAstNode=/*#__PURE__*/function(_BaseAstNode2){_inherits(ListAstNode,_BaseAstNode2);var _super2=_createSuper(ListAstNode);/**
     * Use ListAstNode.create.
    */function ListAstNode(length,listHeight,_missingOpeningBracketIds){var _this2;_classCallCheck(this,ListAstNode);_this2=_super2.call(this,length);_this2.listHeight=listHeight;_this2._missingOpeningBracketIds=_missingOpeningBracketIds;_this2.cachedMinIndentation=-1;return _this2;}/**
     * This method uses more memory-efficient list nodes that can only store 2 or 3 children.
    */_createClass(ListAstNode,[{key:"kind",get:function get(){return 4/* List */;}},{key:"missingOpeningBracketIds",get:function get(){return this._missingOpeningBracketIds;}},{key:"throwIfImmutable",value:function throwIfImmutable(){// NOOP
}},{key:"makeLastElementMutable",value:function makeLastElementMutable(){this.throwIfImmutable();var childCount=this.childrenLength;if(childCount===0){return undefined;}var lastChild=this.getChild(childCount-1);var mutable=lastChild.kind===4/* List */?lastChild.toMutable():lastChild;if(lastChild!==mutable){this.setChild(childCount-1,mutable);}return mutable;}},{key:"makeFirstElementMutable",value:function makeFirstElementMutable(){this.throwIfImmutable();var childCount=this.childrenLength;if(childCount===0){return undefined;}var firstChild=this.getChild(0);var mutable=firstChild.kind===4/* List */?firstChild.toMutable():firstChild;if(firstChild!==mutable){this.setChild(0,mutable);}return mutable;}},{key:"canBeReused",value:function canBeReused(openBracketIds){if(openBracketIds.intersects(this.missingOpeningBracketIds)){return false;}var lastChild=this;var lastLength;while(lastChild.kind===4/* List */&&(lastLength=lastChild.childrenLength)>0){lastChild=lastChild.getChild(lastLength-1);}return lastChild.canBeReused(openBracketIds);}},{key:"handleChildrenChanged",value:function handleChildrenChanged(){this.throwIfImmutable();var count=this.childrenLength;var length=this.getChild(0).length;var unopenedBrackets=this.getChild(0).missingOpeningBracketIds;for(var i=1;i<count;i++){var child=this.getChild(i);length=(0,_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthAdd */ .Ii)(length,child.length);unopenedBrackets=unopenedBrackets.merge(child.missingOpeningBracketIds);}this._length=length;this._missingOpeningBracketIds=unopenedBrackets;this.cachedMinIndentation=-1;}},{key:"computeMinIndentation",value:function computeMinIndentation(offset,textModel){if(this.cachedMinIndentation!==-1){return this.cachedMinIndentation;}var minIndentation=Number.MAX_SAFE_INTEGER;var childOffset=offset;for(var i=0;i<this.childrenLength;i++){var child=this.getChild(i);if(child){minIndentation=Math.min(minIndentation,child.computeMinIndentation(childOffset,textModel));childOffset=(0,_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthAdd */ .Ii)(childOffset,child.length);}}this.cachedMinIndentation=minIndentation;return minIndentation;}}],[{key:"create23",value:function create23(item1,item2,item3){var immutable=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var length=item1.length;var missingBracketIds=item1.missingOpeningBracketIds;if(item1.listHeight!==item2.listHeight){throw new Error('Invalid list heights');}length=(0,_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthAdd */ .Ii)(length,item2.length);missingBracketIds=missingBracketIds.merge(item2.missingOpeningBracketIds);if(item3){if(item1.listHeight!==item3.listHeight){throw new Error('Invalid list heights');}length=(0,_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthAdd */ .Ii)(length,item3.length);missingBracketIds=missingBracketIds.merge(item3.missingOpeningBracketIds);}return immutable?new Immutable23ListAstNode(length,item1.listHeight+1,item1,item2,item3,missingBracketIds):new TwoThreeListAstNode(length,item1.listHeight+1,item1,item2,item3,missingBracketIds);}},{key:"getEmpty",value:function getEmpty(){return new ImmutableArrayListAstNode(_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthZero */ .xl,0,[],_smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_2__/* .SmallImmutableSet.getEmpty */ .tS.getEmpty());}}]);return ListAstNode;}(BaseAstNode);var TwoThreeListAstNode=/*#__PURE__*/function(_ListAstNode){_inherits(TwoThreeListAstNode,_ListAstNode);var _super3=_createSuper(TwoThreeListAstNode);function TwoThreeListAstNode(length,listHeight,_item1,_item2,_item3,missingOpeningBracketIds){var _this3;_classCallCheck(this,TwoThreeListAstNode);_this3=_super3.call(this,length,listHeight,missingOpeningBracketIds);_this3._item1=_item1;_this3._item2=_item2;_this3._item3=_item3;return _this3;}_createClass(TwoThreeListAstNode,[{key:"childrenLength",get:function get(){return this._item3!==null?3:2;}},{key:"getChild",value:function getChild(idx){switch(idx){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3;}throw new Error('Invalid child index');}},{key:"setChild",value:function setChild(idx,node){switch(idx){case 0:this._item1=node;return;case 1:this._item2=node;return;case 2:this._item3=node;return;}throw new Error('Invalid child index');}},{key:"children",get:function get(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2];}},{key:"item1",get:function get(){return this._item1;}},{key:"item2",get:function get(){return this._item2;}},{key:"item3",get:function get(){return this._item3;}},{key:"deepClone",value:function deepClone(){return new TwoThreeListAstNode(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds);}},{key:"appendChildOfSameHeight",value:function appendChildOfSameHeight(node){if(this._item3){throw new Error('Cannot append to a full (2,3) tree node');}this.throwIfImmutable();this._item3=node;this.handleChildrenChanged();}},{key:"unappendChild",value:function unappendChild(){if(!this._item3){throw new Error('Cannot remove from a non-full (2,3) tree node');}this.throwIfImmutable();var result=this._item3;this._item3=null;this.handleChildrenChanged();return result;}},{key:"prependChildOfSameHeight",value:function prependChildOfSameHeight(node){if(this._item3){throw new Error('Cannot prepend to a full (2,3) tree node');}this.throwIfImmutable();this._item3=this._item2;this._item2=this._item1;this._item1=node;this.handleChildrenChanged();}},{key:"unprependChild",value:function unprependChild(){if(!this._item3){throw new Error('Cannot remove from a non-full (2,3) tree node');}this.throwIfImmutable();var result=this._item1;this._item1=this._item2;this._item2=this._item3;this._item3=null;this.handleChildrenChanged();return result;}},{key:"toMutable",value:function toMutable(){return this;}}]);return TwoThreeListAstNode;}(ListAstNode);/**
 * Immutable, if all children are immutable.
*/var Immutable23ListAstNode=/*#__PURE__*/function(_TwoThreeListAstNode){_inherits(Immutable23ListAstNode,_TwoThreeListAstNode);var _super4=_createSuper(Immutable23ListAstNode);function Immutable23ListAstNode(){_classCallCheck(this,Immutable23ListAstNode);return _super4.apply(this,arguments);}_createClass(Immutable23ListAstNode,[{key:"toMutable",value:function toMutable(){return new TwoThreeListAstNode(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds);}},{key:"throwIfImmutable",value:function throwIfImmutable(){throw new Error('this instance is immutable');}}]);return Immutable23ListAstNode;}(TwoThreeListAstNode);/**
 * For debugging.
*/var ArrayListAstNode=/*#__PURE__*/function(_ListAstNode2){_inherits(ArrayListAstNode,_ListAstNode2);var _super5=_createSuper(ArrayListAstNode);function ArrayListAstNode(length,listHeight,_children,missingOpeningBracketIds){var _this4;_classCallCheck(this,ArrayListAstNode);_this4=_super5.call(this,length,listHeight,missingOpeningBracketIds);_this4._children=_children;return _this4;}_createClass(ArrayListAstNode,[{key:"childrenLength",get:function get(){return this._children.length;}},{key:"getChild",value:function getChild(idx){return this._children[idx];}},{key:"setChild",value:function setChild(idx,child){this._children[idx]=child;}},{key:"children",get:function get(){return this._children;}},{key:"deepClone",value:function deepClone(){var children=new Array(this._children.length);for(var i=0;i<this._children.length;i++){children[i]=this._children[i].deepClone();}return new ArrayListAstNode(this.length,this.listHeight,children,this.missingOpeningBracketIds);}},{key:"appendChildOfSameHeight",value:function appendChildOfSameHeight(node){this.throwIfImmutable();this._children.push(node);this.handleChildrenChanged();}},{key:"unappendChild",value:function unappendChild(){this.throwIfImmutable();var item=this._children.pop();this.handleChildrenChanged();return item;}},{key:"prependChildOfSameHeight",value:function prependChildOfSameHeight(node){this.throwIfImmutable();this._children.unshift(node);this.handleChildrenChanged();}},{key:"unprependChild",value:function unprependChild(){this.throwIfImmutable();var item=this._children.shift();this.handleChildrenChanged();return item;}},{key:"toMutable",value:function toMutable(){return this;}}]);return ArrayListAstNode;}(ListAstNode);/**
 * Immutable, if all children are immutable.
*/var ImmutableArrayListAstNode=/*#__PURE__*/function(_ArrayListAstNode){_inherits(ImmutableArrayListAstNode,_ArrayListAstNode);var _super6=_createSuper(ImmutableArrayListAstNode);function ImmutableArrayListAstNode(){_classCallCheck(this,ImmutableArrayListAstNode);return _super6.apply(this,arguments);}_createClass(ImmutableArrayListAstNode,[{key:"toMutable",value:function toMutable(){return new ArrayListAstNode(this.length,this.listHeight,_toConsumableArray(this.children),this.missingOpeningBracketIds);}},{key:"throwIfImmutable",value:function throwIfImmutable(){throw new Error('this instance is immutable');}}]);return ImmutableArrayListAstNode;}(ArrayListAstNode);var emptyArray=[];var ImmutableLeafAstNode=/*#__PURE__*/function(_BaseAstNode3){_inherits(ImmutableLeafAstNode,_BaseAstNode3);var _super7=_createSuper(ImmutableLeafAstNode);function ImmutableLeafAstNode(){_classCallCheck(this,ImmutableLeafAstNode);return _super7.apply(this,arguments);}_createClass(ImmutableLeafAstNode,[{key:"listHeight",get:function get(){return 0;}},{key:"childrenLength",get:function get(){return 0;}},{key:"getChild",value:function getChild(idx){return null;}},{key:"children",get:function get(){return emptyArray;}},{key:"deepClone",value:function deepClone(){return this;}}]);return ImmutableLeafAstNode;}(BaseAstNode);var TextAstNode=/*#__PURE__*/function(_ImmutableLeafAstNode){_inherits(TextAstNode,_ImmutableLeafAstNode);var _super8=_createSuper(TextAstNode);function TextAstNode(){_classCallCheck(this,TextAstNode);return _super8.apply(this,arguments);}_createClass(TextAstNode,[{key:"kind",get:function get(){return 0/* Text */;}},{key:"missingOpeningBracketIds",get:function get(){return _smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_2__/* .SmallImmutableSet.getEmpty */ .tS.getEmpty();}},{key:"canBeReused",value:function canBeReused(_openedBracketIds){return true;}},{key:"computeMinIndentation",value:function computeMinIndentation(offset,textModel){var start=(0,_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthToObj */ .Hw)(offset);// Text ast nodes don't have partial indentation (ensured by the tokenizer).
// Thus, if this text node does not start at column 0, the first line cannot have any indentation at all.
var startLineNumber=(start.columnCount===0?start.lineCount:start.lineCount+1)+1;var endLineNumber=(0,_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthGetLineCount */ .W9)((0,_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthAdd */ .Ii)(offset,this.length))+1;var result=Number.MAX_SAFE_INTEGER;for(var lineNumber=startLineNumber;lineNumber<=endLineNumber;lineNumber++){var firstNonWsColumn=textModel.getLineFirstNonWhitespaceColumn(lineNumber);var lineContent=textModel.getLineContent(lineNumber);if(firstNonWsColumn===0){continue;}var visibleColumn=_core_cursorColumns_js__WEBPACK_IMPORTED_MODULE_0__/* .CursorColumns.visibleColumnFromColumn */ .i.visibleColumnFromColumn(lineContent,firstNonWsColumn,textModel.getOptions().tabSize);result=Math.min(result,visibleColumn);}return result;}}]);return TextAstNode;}(ImmutableLeafAstNode);var BracketAstNode=/*#__PURE__*/function(_ImmutableLeafAstNode2){_inherits(BracketAstNode,_ImmutableLeafAstNode2);var _super9=_createSuper(BracketAstNode);function BracketAstNode(length,languageId,/**
     * In case of a opening bracket, this is the id of the opening bracket.
     * In case of a closing bracket, this contains the ids of all opening brackets it can close.
    */bracketIds){var _this5;_classCallCheck(this,BracketAstNode);_this5=_super9.call(this,length);_this5.languageId=languageId;_this5.bracketIds=bracketIds;return _this5;}_createClass(BracketAstNode,[{key:"kind",get:function get(){return 1/* Bracket */;}},{key:"missingOpeningBracketIds",get:function get(){return _smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_2__/* .SmallImmutableSet.getEmpty */ .tS.getEmpty();}},{key:"canBeReused",value:function canBeReused(_openedBracketIds){// These nodes could be reused,
// but not in a general way.
// Their parent may be reused.
return false;}},{key:"computeMinIndentation",value:function computeMinIndentation(offset,textModel){return Number.MAX_SAFE_INTEGER;}}],[{key:"create",value:function create(length,languageId,bracketIds){var node=new BracketAstNode(length,languageId,bracketIds);return node;}}]);return BracketAstNode;}(ImmutableLeafAstNode);var InvalidBracketAstNode=/*#__PURE__*/function(_ImmutableLeafAstNode3){_inherits(InvalidBracketAstNode,_ImmutableLeafAstNode3);var _super10=_createSuper(InvalidBracketAstNode);function InvalidBracketAstNode(closingBrackets,length){var _this6;_classCallCheck(this,InvalidBracketAstNode);_this6=_super10.call(this,length);_this6.missingOpeningBracketIds=closingBrackets;return _this6;}_createClass(InvalidBracketAstNode,[{key:"kind",get:function get(){return 3/* UnexpectedClosingBracket */;}},{key:"canBeReused",value:function canBeReused(openedBracketIds){return!openedBracketIds.intersects(this.missingOpeningBracketIds);}},{key:"computeMinIndentation",value:function computeMinIndentation(offset,textModel){return Number.MAX_SAFE_INTEGER;}}]);return InvalidBracketAstNode;}(ImmutableLeafAstNode);

/***/ }),

/***/ 96150:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Q": () => (/* binding */ TextEditInfo),
/* harmony export */   "Y": () => (/* binding */ BeforeEditPositionMapper)
/* harmony export */ });
/* harmony import */ var _length_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99992);
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var TextEditInfo=function TextEditInfo(startOffset,endOffset,newLength){_classCallCheck(this,TextEditInfo);this.startOffset=startOffset;this.endOffset=endOffset;this.newLength=newLength;};var BeforeEditPositionMapper=/*#__PURE__*/function(){/**
     * @param edits Must be sorted by offset in ascending order.
    */function BeforeEditPositionMapper(edits,documentLength){_classCallCheck(this,BeforeEditPositionMapper);this.documentLength=documentLength;this.nextEditIdx=0;this.deltaOldToNewLineCount=0;this.deltaOldToNewColumnCount=0;this.deltaLineIdxInOld=-1;this.edits=edits.map(function(edit){return TextEditInfoCache.from(edit);});}/**
     * @param offset Must be equal to or greater than the last offset this method has been called with.
    */_createClass(BeforeEditPositionMapper,[{key:"getOffsetBeforeChange",value:function getOffsetBeforeChange(offset){this.adjustNextEdit(offset);return this.translateCurToOld(offset);}/**
     * @param offset Must be equal to or greater than the last offset this method has been called with.
    */},{key:"getDistanceToNextChange",value:function getDistanceToNextChange(offset){this.adjustNextEdit(offset);var nextEdit=this.edits[this.nextEditIdx];var nextChangeOffset=nextEdit?this.translateOldToCur(nextEdit.offsetObj):this.documentLength;return (0,_length_js__WEBPACK_IMPORTED_MODULE_0__/* .lengthDiffNonNegative */ .BE)(offset,nextChangeOffset);}},{key:"translateOldToCur",value:function translateOldToCur(oldOffsetObj){if(oldOffsetObj.lineCount===this.deltaLineIdxInOld){return (0,_length_js__WEBPACK_IMPORTED_MODULE_0__/* .toLength */ .Hg)(oldOffsetObj.lineCount+this.deltaOldToNewLineCount,oldOffsetObj.columnCount+this.deltaOldToNewColumnCount);}else{return (0,_length_js__WEBPACK_IMPORTED_MODULE_0__/* .toLength */ .Hg)(oldOffsetObj.lineCount+this.deltaOldToNewLineCount,oldOffsetObj.columnCount);}}},{key:"translateCurToOld",value:function translateCurToOld(newOffset){var offsetObj=(0,_length_js__WEBPACK_IMPORTED_MODULE_0__/* .lengthToObj */ .Hw)(newOffset);if(offsetObj.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld){return (0,_length_js__WEBPACK_IMPORTED_MODULE_0__/* .toLength */ .Hg)(offsetObj.lineCount-this.deltaOldToNewLineCount,offsetObj.columnCount-this.deltaOldToNewColumnCount);}else{return (0,_length_js__WEBPACK_IMPORTED_MODULE_0__/* .toLength */ .Hg)(offsetObj.lineCount-this.deltaOldToNewLineCount,offsetObj.columnCount);}}},{key:"adjustNextEdit",value:function adjustNextEdit(offset){while(this.nextEditIdx<this.edits.length){var nextEdit=this.edits[this.nextEditIdx];// After applying the edit, what is its end offset (considering all previous edits)?
var nextEditEndOffsetInCur=this.translateOldToCur(nextEdit.endOffsetAfterObj);if((0,_length_js__WEBPACK_IMPORTED_MODULE_0__/* .lengthLessThanEqual */ .By)(nextEditEndOffsetInCur,offset)){// We are after the edit, skip it
this.nextEditIdx++;var nextEditEndOffsetInCurObj=(0,_length_js__WEBPACK_IMPORTED_MODULE_0__/* .lengthToObj */ .Hw)(nextEditEndOffsetInCur);// Before applying the edit, what is its end offset (considering all previous edits)?
var nextEditEndOffsetBeforeInCurObj=(0,_length_js__WEBPACK_IMPORTED_MODULE_0__/* .lengthToObj */ .Hw)(this.translateOldToCur(nextEdit.endOffsetBeforeObj));var lineDelta=nextEditEndOffsetInCurObj.lineCount-nextEditEndOffsetBeforeInCurObj.lineCount;this.deltaOldToNewLineCount+=lineDelta;var previousColumnDelta=this.deltaLineIdxInOld===nextEdit.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0;var columnDelta=nextEditEndOffsetInCurObj.columnCount-nextEditEndOffsetBeforeInCurObj.columnCount;this.deltaOldToNewColumnCount=previousColumnDelta+columnDelta;this.deltaLineIdxInOld=nextEdit.endOffsetBeforeObj.lineCount;}else{// We are in or before the edit.
break;}}}}]);return BeforeEditPositionMapper;}();var TextEditInfoCache=/*#__PURE__*/function(){function TextEditInfoCache(startOffset,endOffset,textLength){_classCallCheck(this,TextEditInfoCache);this.endOffsetBeforeObj=(0,_length_js__WEBPACK_IMPORTED_MODULE_0__/* .lengthToObj */ .Hw)(endOffset);this.endOffsetAfterObj=(0,_length_js__WEBPACK_IMPORTED_MODULE_0__/* .lengthToObj */ .Hw)((0,_length_js__WEBPACK_IMPORTED_MODULE_0__/* .lengthAdd */ .Ii)(startOffset,textLength));this.offsetObj=(0,_length_js__WEBPACK_IMPORTED_MODULE_0__/* .lengthToObj */ .Hw)(startOffset);}_createClass(TextEditInfoCache,null,[{key:"from",value:function from(edit){return new TextEditInfoCache(edit.startOffset,edit.endOffset,edit.newLength);}}]);return TextEditInfoCache;}();

/***/ }),

/***/ 39985:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (/* binding */ LanguageAgnosticBracketTokens)
/* harmony export */ });
/* unused harmony export BracketTokens */
/* harmony import */ var _base_common_strings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41712);
/* harmony import */ var _ast_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(96139);
/* harmony import */ var _length_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(99992);
/* harmony import */ var _smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(11041);
/* harmony import */ var _tokenizer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(84093);
function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var BracketTokens=/*#__PURE__*/function(){function BracketTokens(map){_classCallCheck(this,BracketTokens);this.map=map;this.hasRegExp=false;this._regExpGlobal=null;}_createClass(BracketTokens,[{key:"getRegExpStr",value:function getRegExpStr(){if(this.isEmpty){return null;}else{var keys=_toConsumableArray(this.map.keys());keys.sort();keys.reverse();return keys.map(function(k){return prepareBracketForRegExp(k);}).join('|');}}/**
     * Returns null if there is no such regexp (because there are no brackets).
    */},{key:"regExpGlobal",get:function get(){if(!this.hasRegExp){var regExpStr=this.getRegExpStr();this._regExpGlobal=regExpStr?new RegExp(regExpStr,'g'):null;this.hasRegExp=true;}return this._regExpGlobal;}},{key:"getToken",value:function getToken(value){return this.map.get(value);}},{key:"findClosingTokenText",value:function findClosingTokenText(openingBracketIds){var _iterator=_createForOfIteratorHelper(this.map),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),closingText=_step$value[0],info=_step$value[1];if(info.bracketIds.intersects(openingBracketIds)){return closingText;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return undefined;}},{key:"isEmpty",get:function get(){return this.map.size===0;}}],[{key:"createFromLanguage",value:function createFromLanguage(configuration,denseKeyProvider){function getId(languageId,openingText){return denseKeyProvider.getKey("".concat(languageId,":::").concat(openingText));}var brackets=configuration.characterPair.getColorizedBrackets();var closingBrackets=new Map();var openingBrackets=new Set();var _iterator2=_createForOfIteratorHelper(brackets),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_slicedToArray(_step2.value,2),openingText=_step2$value[0],closingText=_step2$value[1];openingBrackets.add(openingText);var info=closingBrackets.get(closingText);var openingTextId=getId(configuration.languageId,openingText);if(!info){info={openingBrackets:_smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_3__/* .SmallImmutableSet.getEmpty */ .tS.getEmpty(),first:openingTextId};closingBrackets.set(closingText,info);}info.openingBrackets=info.openingBrackets.add(openingTextId,_smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_3__/* .identityKeyProvider */ .Qw);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var map=new Map();var _iterator3=_createForOfIteratorHelper(closingBrackets),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _step3$value=_slicedToArray(_step3.value,2),_closingText=_step3$value[0],_info=_step3$value[1];var length=(0,_length_js__WEBPACK_IMPORTED_MODULE_2__/* .toLength */ .Hg)(0,_closingText.length);map.set(_closingText,new _tokenizer_js__WEBPACK_IMPORTED_MODULE_4__/* .Token */ .WU(length,2/* ClosingBracket */,_info.first,_info.openingBrackets,_ast_js__WEBPACK_IMPORTED_MODULE_1__/* .BracketAstNode.create */ .n2.create(length,configuration.languageId,_info.openingBrackets)));}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}var _iterator4=_createForOfIteratorHelper(openingBrackets),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _openingText=_step4.value;var _length=(0,_length_js__WEBPACK_IMPORTED_MODULE_2__/* .toLength */ .Hg)(0,_openingText.length);var _openingTextId=getId(configuration.languageId,_openingText);var bracketIds=_smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_3__/* .SmallImmutableSet.getEmpty */ .tS.getEmpty().add(_openingTextId,_smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_3__/* .identityKeyProvider */ .Qw);map.set(_openingText,new _tokenizer_js__WEBPACK_IMPORTED_MODULE_4__/* .Token */ .WU(_length,1/* OpeningBracket */,_openingTextId,bracketIds,_ast_js__WEBPACK_IMPORTED_MODULE_1__/* .BracketAstNode.create */ .n2.create(_length,configuration.languageId,bracketIds)));}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return new BracketTokens(map);}}]);return BracketTokens;}();function prepareBracketForRegExp(str){var escaped=(0,_base_common_strings_js__WEBPACK_IMPORTED_MODULE_0__/* .escapeRegExpCharacters */ .ec)(str);// This bracket pair uses letters like e.g. "begin" - "end" (see https://github.com/microsoft/vscode/issues/132162)
var needsWordBoundaries=/^[\w ]+$/.test(str);return needsWordBoundaries?"\\b".concat(escaped,"\\b"):escaped;}var LanguageAgnosticBracketTokens=/*#__PURE__*/function(){function LanguageAgnosticBracketTokens(denseKeyProvider,getLanguageConfiguration){_classCallCheck(this,LanguageAgnosticBracketTokens);this.denseKeyProvider=denseKeyProvider;this.getLanguageConfiguration=getLanguageConfiguration;this.languageIdToBracketTokens=new Map();}_createClass(LanguageAgnosticBracketTokens,[{key:"didLanguageChange",value:function didLanguageChange(languageId){var existing=this.languageIdToBracketTokens.get(languageId);if(!existing){return false;}var newRegExpStr=BracketTokens.createFromLanguage(this.getLanguageConfiguration(languageId),this.denseKeyProvider).getRegExpStr();return existing.getRegExpStr()!==newRegExpStr;}},{key:"getSingleLanguageBracketTokens",value:function getSingleLanguageBracketTokens(languageId){var singleLanguageBracketTokens=this.languageIdToBracketTokens.get(languageId);if(!singleLanguageBracketTokens){singleLanguageBracketTokens=BracketTokens.createFromLanguage(this.getLanguageConfiguration(languageId),this.denseKeyProvider);this.languageIdToBracketTokens.set(languageId,singleLanguageBracketTokens);}return singleLanguageBracketTokens;}}]);return LanguageAgnosticBracketTokens;}();

/***/ }),

/***/ 99992:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BE": () => (/* binding */ lengthDiffNonNegative),
/* harmony export */   "By": () => (/* binding */ lengthLessThanEqual),
/* harmony export */   "F_": () => (/* binding */ lengthGetColumnCountIfZeroLineCount),
/* harmony export */   "Hg": () => (/* binding */ toLength),
/* harmony export */   "Hw": () => (/* binding */ lengthToObj),
/* harmony export */   "Ii": () => (/* binding */ lengthAdd),
/* harmony export */   "PZ": () => (/* binding */ positionToLength),
/* harmony export */   "Qw": () => (/* binding */ lengthsToRange),
/* harmony export */   "VR": () => (/* binding */ lengthLessThan),
/* harmony export */   "W9": () => (/* binding */ lengthGetLineCount),
/* harmony export */   "Zq": () => (/* binding */ lengthGreaterThanEqual),
/* harmony export */   "av": () => (/* binding */ lengthDiff),
/* harmony export */   "oR": () => (/* binding */ lengthOfString),
/* harmony export */   "xd": () => (/* binding */ lengthIsZero),
/* harmony export */   "xl": () => (/* binding */ lengthZero)
/* harmony export */ });
/* unused harmony export LengthObj */
/* harmony import */ var _base_common_strings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41712);
/* harmony import */ var _core_range_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(96844);
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*//**
 * Represents a non-negative length in terms of line and column count.
 * Prefer using {@link Length} for performance reasons.
*/var LengthObj=/*#__PURE__*/function(){function LengthObj(lineCount,columnCount){_classCallCheck(this,LengthObj);this.lineCount=lineCount;this.columnCount=columnCount;}_createClass(LengthObj,[{key:"toString",value:function toString(){return"".concat(this.lineCount,",").concat(this.columnCount);}}]);return LengthObj;}();LengthObj.zero=new LengthObj(0,0);/**
 * The end must be greater than or equal to the start.
*/function lengthDiff(startLineCount,startColumnCount,endLineCount,endColumnCount){return startLineCount!==endLineCount?toLength(endLineCount-startLineCount,endColumnCount):toLength(0,endColumnCount-startColumnCount);}var lengthZero=0;function lengthIsZero(length){return length===0;}/*
 * We have 52 bits available in a JS number.
 * We use the upper 26 bits to store the line and the lower 26 bits to store the column.
 *
 * Set boolean to `true` when debugging, so that debugging is easier.
 */var factor=/* is debug: */ false?0:Math.pow(2,26);function toLength(lineCount,columnCount){// llllllllllllllllllllllllllcccccccccccccccccccccccccc (52 bits)
//       line count (26 bits)    column count (26 bits)
// If there is no overflow (all values/sums below 2^26 = 67108864),
// we have `toLength(lns1, cols1) + toLength(lns2, cols2) = toLength(lns1 + lns2, cols1 + cols2)`.
return lineCount*factor+columnCount;}function lengthToObj(length){var l=length;var lineCount=Math.floor(l/factor);var columnCount=l-lineCount*factor;return new LengthObj(lineCount,columnCount);}function lengthGetLineCount(length){return Math.floor(length/factor);}/**
 * Returns the amount of columns of the given length, assuming that it does not span any line.
*/function lengthGetColumnCountIfZeroLineCount(length){return length;}function lengthAdd(l1,l2){return l2<factor?l1+l2:// l2 is the amount of columns (zero line count). Keep the column count from l1.
l1-l1%factor+l2;// l1 - (l1 % factor) equals toLength(l1.lineCount, 0)
}/**
 * Returns a non negative length `result` such that `lengthAdd(length1, result) = length2`, or zero if such length does not exist.
 */function lengthDiffNonNegative(length1,length2){var l1=length1;var l2=length2;var diff=l2-l1;if(diff<=0){// line-count of length1 is higher than line-count of length2
// or they are equal and column-count of length1 is higher than column-count of length2
return lengthZero;}var lineCount1=Math.floor(l1/factor);var lineCount2=Math.floor(l2/factor);var colCount2=l2-lineCount2*factor;if(lineCount1===lineCount2){var colCount1=l1-lineCount1*factor;return toLength(0,colCount2-colCount1);}else{return toLength(lineCount2-lineCount1,colCount2);}}function lengthLessThan(length1,length2){// First, compare line counts, then column counts.
return length1<length2;}function lengthLessThanEqual(length1,length2){return length1<=length2;}function lengthGreaterThanEqual(length1,length2){return length1>=length2;}function positionToLength(position){return toLength(position.lineNumber-1,position.column-1);}function lengthsToRange(lengthStart,lengthEnd){var l=lengthStart;var lineCount=Math.floor(l/factor);var colCount=l-lineCount*factor;var l2=lengthEnd;var lineCount2=Math.floor(l2/factor);var colCount2=l2-lineCount2*factor;return new _core_range_js__WEBPACK_IMPORTED_MODULE_1__/* .Range */ .e(lineCount+1,colCount+1,lineCount2+1,colCount2+1);}function lengthOfString(str){var lines=(0,_base_common_strings_js__WEBPACK_IMPORTED_MODULE_0__/* .splitLines */ .uq)(str);return toLength(lines.length-1,lines[lines.length-1].length);}

/***/ }),

/***/ 50687:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "w": () => (/* binding */ parseDocument)
});

// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/ast.js
var ast = __webpack_require__(96139);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/beforeEditPositionMapper.js
var beforeEditPositionMapper = __webpack_require__(96150);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/smallImmutableSet.js
var smallImmutableSet = __webpack_require__(11041);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/length.js
var bracketPairsTree_length = __webpack_require__(99992);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/concat23Trees.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*//**
 * Concatenates a list of (2,3) AstNode's into a single (2,3) AstNode.
 * This mutates the items of the input array!
 * If all items have the same height, this method has runtime O(items.length).
 * Otherwise, it has runtime O(items.length * max(log(items.length), items.max(i => i.height))).
*/function concat23Trees(items){if(items.length===0){return null;}if(items.length===1){return items[0];}var i=0;/**
     * Reads nodes of same height and concatenates them to a single node.
    */function readNode(){if(i>=items.length){return null;}var start=i;var height=items[start].listHeight;i++;while(i<items.length&&items[i].listHeight===height){i++;}if(i-start>=2){return concat23TreesOfSameHeight(start===0&&i===items.length?items:items.slice(start,i),false);}else{return items[start];}}// The items might not have the same height.
// We merge all items by using a binary concat operator.
var first=readNode();// There must be a first item
var second=readNode();if(!second){return first;}for(var item=readNode();item;item=readNode()){// Prefer concatenating smaller trees, as the runtime of concat depends on the tree height.
if(heightDiff(first,second)<=heightDiff(second,item)){first=concat(first,second);second=item;}else{second=concat(second,item);}}var result=concat(first,second);return result;}function concat23TreesOfSameHeight(items){var createImmutableLists=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(items.length===0){return null;}if(items.length===1){return items[0];}var length=items.length;// All trees have same height, just create parent nodes.
while(length>3){var newLength=length>>1;for(var i=0;i<newLength;i++){var j=i<<1;items[i]=ast/* ListAstNode.create23 */.Y0.create23(items[j],items[j+1],j+3===length?items[j+2]:null,createImmutableLists);}length=newLength;}return ast/* ListAstNode.create23 */.Y0.create23(items[0],items[1],length>=3?items[2]:null,createImmutableLists);}function heightDiff(node1,node2){return Math.abs(node1.listHeight-node2.listHeight);}function concat(node1,node2){if(node1.listHeight===node2.listHeight){return ast/* ListAstNode.create23 */.Y0.create23(node1,node2,null,false);}else if(node1.listHeight>node2.listHeight){// node1 is the tree we want to insert into
return append(node1,node2);}else{return prepend(node2,node1);}}/**
 * Appends the given node to the end of this (2,3) tree.
 * Returns the new root.
*/function append(list,nodeToAppend){list=list.toMutable();var curNode=list;var parents=new Array();var nodeToAppendOfCorrectHeight;while(true){// assert nodeToInsert.listHeight <= curNode.listHeight
if(nodeToAppend.listHeight===curNode.listHeight){nodeToAppendOfCorrectHeight=nodeToAppend;break;}// assert 0 <= nodeToInsert.listHeight < curNode.listHeight
if(curNode.kind!==4/* List */){throw new Error('unexpected');}parents.push(curNode);// assert 2 <= curNode.childrenLength <= 3
curNode=curNode.makeLastElementMutable();}// assert nodeToAppendOfCorrectHeight!.listHeight === curNode.listHeight
for(var i=parents.length-1;i>=0;i--){var parent=parents[i];if(nodeToAppendOfCorrectHeight){// Can we take the element?
if(parent.childrenLength>=3){// assert parent.childrenLength === 3 && parent.listHeight === nodeToAppendOfCorrectHeight.listHeight + 1
// we need to split to maintain (2,3)-tree property.
// Send the third element + the new element to the parent.
nodeToAppendOfCorrectHeight=ast/* ListAstNode.create23 */.Y0.create23(parent.unappendChild(),nodeToAppendOfCorrectHeight,null,false);}else{parent.appendChildOfSameHeight(nodeToAppendOfCorrectHeight);nodeToAppendOfCorrectHeight=undefined;}}else{parent.handleChildrenChanged();}}if(nodeToAppendOfCorrectHeight){return ast/* ListAstNode.create23 */.Y0.create23(list,nodeToAppendOfCorrectHeight,null,false);}else{return list;}}/**
 * Prepends the given node to the end of this (2,3) tree.
 * Returns the new root.
*/function prepend(list,nodeToAppend){list=list.toMutable();var curNode=list;var parents=new Array();// assert nodeToInsert.listHeight <= curNode.listHeight
while(nodeToAppend.listHeight!==curNode.listHeight){// assert 0 <= nodeToInsert.listHeight < curNode.listHeight
if(curNode.kind!==4/* List */){throw new Error('unexpected');}parents.push(curNode);// assert 2 <= curNode.childrenFast.length <= 3
curNode=curNode.makeFirstElementMutable();}var nodeToPrependOfCorrectHeight=nodeToAppend;// assert nodeToAppendOfCorrectHeight!.listHeight === curNode.listHeight
for(var i=parents.length-1;i>=0;i--){var parent=parents[i];if(nodeToPrependOfCorrectHeight){// Can we take the element?
if(parent.childrenLength>=3){// assert parent.childrenLength === 3 && parent.listHeight === nodeToAppendOfCorrectHeight.listHeight + 1
// we need to split to maintain (2,3)-tree property.
// Send the third element + the new element to the parent.
nodeToPrependOfCorrectHeight=ast/* ListAstNode.create23 */.Y0.create23(nodeToPrependOfCorrectHeight,parent.unprependChild(),null,false);}else{parent.prependChildOfSameHeight(nodeToPrependOfCorrectHeight);nodeToPrependOfCorrectHeight=undefined;}}else{parent.handleChildrenChanged();}}if(nodeToPrependOfCorrectHeight){return ast/* ListAstNode.create23 */.Y0.create23(nodeToPrependOfCorrectHeight,list,null,false);}else{return list;}}
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/nodeReader.js
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*//**
 * Allows to efficiently find a longest child at a given offset in a fixed node.
 * The requested offsets must increase monotonously.
*/var NodeReader=/*#__PURE__*/function(){function NodeReader(node){_classCallCheck(this,NodeReader);this.lastOffset=bracketPairsTree_length/* lengthZero */.xl;this.nextNodes=[node];this.offsets=[bracketPairsTree_length/* lengthZero */.xl];this.idxs=[];}/**
     * Returns the longest node at `offset` that satisfies the predicate.
     * @param offset must be greater than or equal to the last offset this method has been called with!
    */_createClass(NodeReader,[{key:"readLongestNodeAt",value:function readLongestNodeAt(offset,predicate){if((0,bracketPairsTree_length/* lengthLessThan */.VR)(offset,this.lastOffset)){throw new Error('Invalid offset');}this.lastOffset=offset;// Find the longest node of all those that are closest to the current offset.
while(true){var curNode=lastOrUndefined(this.nextNodes);if(!curNode){return undefined;}var curNodeOffset=lastOrUndefined(this.offsets);if((0,bracketPairsTree_length/* lengthLessThan */.VR)(offset,curNodeOffset)){// The next best node is not here yet.
// The reader must advance before a cached node is hit.
return undefined;}if((0,bracketPairsTree_length/* lengthLessThan */.VR)(curNodeOffset,offset)){// The reader is ahead of the current node.
if((0,bracketPairsTree_length/* lengthAdd */.Ii)(curNodeOffset,curNode.length)<=offset){// The reader is after the end of the current node.
this.nextNodeAfterCurrent();}else{// The reader is somewhere in the current node.
var nextChildIdx=getNextChildIdx(curNode);if(nextChildIdx!==-1){// Go to the first child and repeat.
this.nextNodes.push(curNode.getChild(nextChildIdx));this.offsets.push(curNodeOffset);this.idxs.push(nextChildIdx);}else{// We don't have children
this.nextNodeAfterCurrent();}}}else{// readerOffsetBeforeChange === curNodeOffset
if(predicate(curNode)){this.nextNodeAfterCurrent();return curNode;}else{var _nextChildIdx=getNextChildIdx(curNode);// look for shorter node
if(_nextChildIdx===-1){// There is no shorter node.
this.nextNodeAfterCurrent();return undefined;}else{// Descend into first child & repeat.
this.nextNodes.push(curNode.getChild(_nextChildIdx));this.offsets.push(curNodeOffset);this.idxs.push(_nextChildIdx);}}}}}// Navigates to the longest node that continues after the current node.
},{key:"nextNodeAfterCurrent",value:function nextNodeAfterCurrent(){while(true){var currentOffset=lastOrUndefined(this.offsets);var currentNode=lastOrUndefined(this.nextNodes);this.nextNodes.pop();this.offsets.pop();if(this.idxs.length===0){// We just popped the root node, there is no next node.
break;}// Parent is not undefined, because idxs is not empty
var parent=lastOrUndefined(this.nextNodes);var nextChildIdx=getNextChildIdx(parent,this.idxs[this.idxs.length-1]);if(nextChildIdx!==-1){this.nextNodes.push(parent.getChild(nextChildIdx));this.offsets.push((0,bracketPairsTree_length/* lengthAdd */.Ii)(currentOffset,currentNode.length));this.idxs[this.idxs.length-1]=nextChildIdx;break;}else{this.idxs.pop();}// We fully consumed the parent.
// Current node is now parent, so call nextNodeAfterCurrent again
}}}]);return NodeReader;}();function getNextChildIdx(node){var curIdx=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;while(true){curIdx++;if(curIdx>=node.childrenLength){return-1;}if(node.getChild(curIdx)){return curIdx;}}}function lastOrUndefined(arr){return arr.length>0?arr[arr.length-1]:undefined;}
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/parser.js
function parser_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function parser_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function parser_createClass(Constructor,protoProps,staticProps){if(protoProps)parser_defineProperties(Constructor.prototype,protoProps);if(staticProps)parser_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*//**
 * Non incrementally built ASTs are immutable.
*/function parseDocument(tokenizer,edits,oldNode,createImmutableLists){var parser=new Parser(tokenizer,edits,oldNode,createImmutableLists);return parser.parseDocument();}/**
 * Non incrementally built ASTs are immutable.
*/var Parser=/*#__PURE__*/function(){function Parser(tokenizer,edits,oldNode,createImmutableLists){parser_classCallCheck(this,Parser);this.tokenizer=tokenizer;this.createImmutableLists=createImmutableLists;this._itemsConstructed=0;this._itemsFromCache=0;if(oldNode&&createImmutableLists){throw new Error('Not supported');}this.oldNodeReader=oldNode?new NodeReader(oldNode):undefined;this.positionMapper=new beforeEditPositionMapper/* BeforeEditPositionMapper */.Y(edits,tokenizer.length);}parser_createClass(Parser,[{key:"parseDocument",value:function parseDocument(){this._itemsConstructed=0;this._itemsFromCache=0;var result=this.parseList(smallImmutableSet/* SmallImmutableSet.getEmpty */.tS.getEmpty());if(!result){result=ast/* ListAstNode.getEmpty */.Y0.getEmpty();}return result;}},{key:"parseList",value:function parseList(openedBracketIds){var items=new Array();while(true){var token=this.tokenizer.peek();if(!token||token.kind===2/* ClosingBracket */&&token.bracketIds.intersects(openedBracketIds)){break;}var child=this.parseChild(openedBracketIds);if(child.kind===4/* List */&&child.childrenLength===0){continue;}items.push(child);}// When there is no oldNodeReader, all items are created from scratch and must have the same height.
var result=this.oldNodeReader?concat23Trees(items):concat23TreesOfSameHeight(items,this.createImmutableLists);return result;}},{key:"parseChild",value:function parseChild(openedBracketIds){if(this.oldNodeReader){var maxCacheableLength=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!(0,bracketPairsTree_length/* lengthIsZero */.xd)(maxCacheableLength)){var cachedNode=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),function(curNode){if(!(0,bracketPairsTree_length/* lengthLessThan */.VR)(curNode.length,maxCacheableLength)){// Either the node contains edited text or touches edited text.
// In the latter case, brackets might have been extended (`end` -> `ending`), so even touching nodes cannot be reused.
return false;}var canBeReused=curNode.canBeReused(openedBracketIds);return canBeReused;});if(cachedNode){this._itemsFromCache++;this.tokenizer.skip(cachedNode.length);return cachedNode;}}}this._itemsConstructed++;var token=this.tokenizer.read();switch(token.kind){case 2/* ClosingBracket */:return new ast/* InvalidBracketAstNode */.Dm(token.bracketIds,token.length);case 0/* Text */:return token.astNode;case 1/* OpeningBracket */:{var set=openedBracketIds.merge(token.bracketIds);var child=this.parseList(set);var nextToken=this.tokenizer.peek();if(nextToken&&nextToken.kind===2/* ClosingBracket */&&(nextToken.bracketId===token.bracketId||nextToken.bracketIds.intersects(token.bracketIds))){this.tokenizer.read();return ast/* PairAstNode.create */.Kd.create(token.astNode,child,nextToken.astNode);}else{return ast/* PairAstNode.create */.Kd.create(token.astNode,child,null);}}default:throw new Error('unexpected');}}}]);return Parser;}();

/***/ }),

/***/ 11041:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FE": () => (/* binding */ DenseKeyProvider),
/* harmony export */   "Qw": () => (/* binding */ identityKeyProvider),
/* harmony export */   "tS": () => (/* binding */ SmallImmutableSet)
/* harmony export */ });
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var emptyArr=new Array();/**
 * Represents an immutable set that works best for a small number of elements (less than 32).
 * It uses bits to encode element membership efficiently.
*/var SmallImmutableSet=/*#__PURE__*/function(){function SmallImmutableSet(items,additionalItems){_classCallCheck(this,SmallImmutableSet);this.items=items;this.additionalItems=additionalItems;}_createClass(SmallImmutableSet,[{key:"add",value:function add(value,keyProvider){var key=keyProvider.getKey(value);var idx=key>>5;// divided by 32
if(idx===0){// fast path
var newItem=1<<key|this.items;if(newItem===this.items){return this;}return SmallImmutableSet.create(newItem,this.additionalItems);}idx--;var newItems=this.additionalItems.slice(0);while(newItems.length<idx){newItems.push(0);}newItems[idx]|=1<<(key&31);return SmallImmutableSet.create(this.items,newItems);}},{key:"merge",value:function merge(other){var merged=this.items|other.items;if(this.additionalItems===emptyArr&&other.additionalItems===emptyArr){// fast path
if(merged===this.items){return this;}if(merged===other.items){return other;}return SmallImmutableSet.create(merged,emptyArr);}// This can be optimized, but it's not a common case
var newItems=new Array();for(var i=0;i<Math.max(this.additionalItems.length,other.additionalItems.length);i++){var item1=this.additionalItems[i]||0;var item2=other.additionalItems[i]||0;newItems.push(item1|item2);}return SmallImmutableSet.create(merged,newItems);}},{key:"intersects",value:function intersects(other){if((this.items&other.items)!==0){return true;}for(var i=0;i<Math.min(this.additionalItems.length,other.additionalItems.length);i++){if((this.additionalItems[i]&other.additionalItems[i])!==0){return true;}}return false;}}],[{key:"create",value:function create(items,additionalItems){if(items<=128&&additionalItems.length===0){// We create a cache of 128=2^7 elements to cover all sets with up to 7 (dense) elements.
var cached=SmallImmutableSet.cache[items];if(!cached){cached=new SmallImmutableSet(items,additionalItems);SmallImmutableSet.cache[items]=cached;}return cached;}return new SmallImmutableSet(items,additionalItems);}},{key:"getEmpty",value:function getEmpty(){return this.empty;}}]);return SmallImmutableSet;}();SmallImmutableSet.cache=new Array(129);SmallImmutableSet.empty=SmallImmutableSet.create(0,emptyArr);var identityKeyProvider={getKey:function getKey(value){return value;}};/**
 * Assigns values a unique incrementing key.
*/var DenseKeyProvider=/*#__PURE__*/function(){function DenseKeyProvider(){_classCallCheck(this,DenseKeyProvider);this.items=new Map();}_createClass(DenseKeyProvider,[{key:"getKey",value:function getKey(value){var existing=this.items.get(value);if(existing===undefined){existing=this.items.size;this.items.set(value,existing);}return existing;}}]);return DenseKeyProvider;}();

/***/ }),

/***/ 84093:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WU": () => (/* binding */ Token),
/* harmony export */   "g": () => (/* binding */ FastTokenizer),
/* harmony export */   "xH": () => (/* binding */ TextBufferTokenizer)
/* harmony export */ });
/* harmony import */ var _base_common_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(32314);
/* harmony import */ var _languages_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98480);
/* harmony import */ var _ast_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(96139);
/* harmony import */ var _length_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99992);
/* harmony import */ var _smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(11041);
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var Token=function Token(length,kind,/**
     * If this token is an opening bracket, this is the id of the opening bracket.
     * If this token is a closing bracket, this is the id of the first opening bracket that is closed by this bracket.
     * Otherwise, it is -1.
     */bracketId,/**
     * If this token is an opening bracket, this just contains `bracketId`.
     * If this token is a closing bracket, this lists all opening bracket ids, that it closes.
     * Otherwise, it is empty.
     */bracketIds,astNode){_classCallCheck(this,Token);this.length=length;this.kind=kind;this.bracketId=bracketId;this.bracketIds=bracketIds;this.astNode=astNode;};var TextBufferTokenizer=/*#__PURE__*/function(){function TextBufferTokenizer(textModel,bracketTokens){_classCallCheck(this,TextBufferTokenizer);this.textModel=textModel;this.bracketTokens=bracketTokens;this.reader=new NonPeekableTextBufferTokenizer(this.textModel,this.bracketTokens);this._offset=_length_js__WEBPACK_IMPORTED_MODULE_3__/* .lengthZero */ .xl;this.didPeek=false;this.peeked=null;this.textBufferLineCount=textModel.getLineCount();this.textBufferLastLineLength=textModel.getLineLength(this.textBufferLineCount);}_createClass(TextBufferTokenizer,[{key:"offset",get:function get(){return this._offset;}},{key:"length",get:function get(){return (0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .toLength */ .Hg)(this.textBufferLineCount,this.textBufferLastLineLength);}},{key:"skip",value:function skip(length){this.didPeek=false;this._offset=(0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .lengthAdd */ .Ii)(this._offset,length);var obj=(0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .lengthToObj */ .Hw)(this._offset);this.reader.setPosition(obj.lineCount,obj.columnCount);}},{key:"read",value:function read(){var token;if(this.peeked){this.didPeek=false;token=this.peeked;}else{token=this.reader.read();}if(token){this._offset=(0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .lengthAdd */ .Ii)(this._offset,token.length);}return token;}},{key:"peek",value:function peek(){if(!this.didPeek){this.peeked=this.reader.read();this.didPeek=true;}return this.peeked;}}]);return TextBufferTokenizer;}();/**
 * Does not support peek.
*/var NonPeekableTextBufferTokenizer=/*#__PURE__*/function(){function NonPeekableTextBufferTokenizer(textModel,bracketTokens){_classCallCheck(this,NonPeekableTextBufferTokenizer);this.textModel=textModel;this.bracketTokens=bracketTokens;this.lineIdx=0;this.line=null;this.lineCharOffset=0;this.lineTokens=null;this.lineTokenOffset=0;/** Must be a zero line token. The end of the document cannot be peeked. */this.peekedToken=null;this.textBufferLineCount=textModel.getLineCount();this.textBufferLastLineLength=textModel.getLineLength(this.textBufferLineCount);}_createClass(NonPeekableTextBufferTokenizer,[{key:"setPosition",value:function setPosition(lineIdx,column){// We must not jump into a token!
if(lineIdx===this.lineIdx){this.lineCharOffset=column;this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset);}else{this.lineIdx=lineIdx;this.lineCharOffset=column;this.line=null;}this.peekedToken=null;}},{key:"read",value:function read(){if(this.peekedToken){var token=this.peekedToken;this.peekedToken=null;this.lineCharOffset+=(0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .lengthGetColumnCountIfZeroLineCount */ .F_)(token.length);return token;}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength){// We are after the end
return null;}if(this.line===null){this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1);this.line=this.lineTokens.getLineContent();this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset);}var startLineIdx=this.lineIdx;var startLineCharOffset=this.lineCharOffset;// limits the length of text tokens.
// If text tokens get too long, incremental updates will be slow
var lengthHeuristic=0;while(true){var lineTokens=this.lineTokens;var tokenCount=lineTokens.getCount();var peekedBracketToken=null;if(this.lineTokenOffset<tokenCount){var tokenMetadata=lineTokens.getMetadata(this.lineTokenOffset);while(this.lineTokenOffset+1<tokenCount&&tokenMetadata===lineTokens.getMetadata(this.lineTokenOffset+1)){// Skip tokens that are identical.
// Sometimes, (bracket) identifiers are split up into multiple tokens.
this.lineTokenOffset++;}var isOther=_languages_js__WEBPACK_IMPORTED_MODULE_1__/* .TokenMetadata.getTokenType */ .NX.getTokenType(tokenMetadata)===0/* Other */;var endOffset=lineTokens.getEndOffset(this.lineTokenOffset);// Is there a bracket token next? Only consume text.
if(isOther&&endOffset!==this.lineCharOffset){var languageId=lineTokens.getLanguageId(this.lineTokenOffset);var text=this.line.substring(this.lineCharOffset,endOffset);var brackets=this.bracketTokens.getSingleLanguageBracketTokens(languageId);var regexp=brackets.regExpGlobal;if(regexp){regexp.lastIndex=0;var match=regexp.exec(text);if(match){peekedBracketToken=brackets.getToken(match[0]);if(peekedBracketToken){// Consume leading text of the token
this.lineCharOffset+=match.index;}}}}lengthHeuristic+=endOffset-this.lineCharOffset;if(peekedBracketToken){// Don't skip the entire token, as a single token could contain multiple brackets.
if(startLineIdx!==this.lineIdx||startLineCharOffset!==this.lineCharOffset){// There is text before the bracket
this.peekedToken=peekedBracketToken;break;}else{// Consume the peeked token
this.lineCharOffset+=(0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .lengthGetColumnCountIfZeroLineCount */ .F_)(peekedBracketToken.length);return peekedBracketToken;}}else{// Skip the entire token, as the token contains no brackets at all.
this.lineTokenOffset++;this.lineCharOffset=endOffset;}}else{if(this.lineIdx===this.textBufferLineCount-1){break;}this.lineIdx++;this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1);this.lineTokenOffset=0;this.line=this.lineTokens.getLineContent();this.lineCharOffset=0;lengthHeuristic+=33;// max 1000/33 = 30 lines
// This limits the amount of work to recompute min-indentation
if(lengthHeuristic>1000){// only break (automatically) at the end of line.
break;}}if(lengthHeuristic>1500){// Eventually break regardless of the line length so that
// very long lines do not cause bad performance.
// This effective limits max indentation to 500, as
// indentation is not computed across multiple text nodes.
break;}}// If a token contains some proper indentation, it also contains \n{INDENTATION+}(?!{INDENTATION}),
// unless the line is too long.
// Thus, the min indentation of the document is the minimum min indentation of every text node.
var length=(0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .lengthDiff */ .av)(startLineIdx,startLineCharOffset,this.lineIdx,this.lineCharOffset);return new Token(length,0/* Text */,-1,_smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_4__/* .SmallImmutableSet.getEmpty */ .tS.getEmpty(),new _ast_js__WEBPACK_IMPORTED_MODULE_2__/* .TextAstNode */ .BH(length));}}]);return NonPeekableTextBufferTokenizer;}();var FastTokenizer=/*#__PURE__*/function(){function FastTokenizer(text,brackets){_classCallCheck(this,FastTokenizer);this.text=text;this._offset=_length_js__WEBPACK_IMPORTED_MODULE_3__/* .lengthZero */ .xl;this.idx=0;var regExpStr=brackets.getRegExpStr();var regexp=regExpStr?new RegExp(brackets.getRegExpStr()+'|\n','g'):null;var tokens=[];var match;var curLineCount=0;var lastLineBreakOffset=0;var lastTokenEndOffset=0;var lastTokenEndLine=0;var smallTextTokens0Line=new Array();for(var i=0;i<60;i++){smallTextTokens0Line.push(new Token((0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .toLength */ .Hg)(0,i),0/* Text */,-1,_smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_4__/* .SmallImmutableSet.getEmpty */ .tS.getEmpty(),new _ast_js__WEBPACK_IMPORTED_MODULE_2__/* .TextAstNode */ .BH((0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .toLength */ .Hg)(0,i))));}var smallTextTokens1Line=new Array();for(var _i=0;_i<60;_i++){smallTextTokens1Line.push(new Token((0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .toLength */ .Hg)(1,_i),0/* Text */,-1,_smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_4__/* .SmallImmutableSet.getEmpty */ .tS.getEmpty(),new _ast_js__WEBPACK_IMPORTED_MODULE_2__/* .TextAstNode */ .BH((0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .toLength */ .Hg)(1,_i))));}if(regexp){regexp.lastIndex=0;// If a token contains indentation, it also contains \n{INDENTATION+}(?!{INDENTATION})
while((match=regexp.exec(text))!==null){var curOffset=match.index;var value=match[0];if(value==='\n'){curLineCount++;lastLineBreakOffset=curOffset+1;}else{if(lastTokenEndOffset!==curOffset){var token=void 0;if(lastTokenEndLine===curLineCount){var colCount=curOffset-lastTokenEndOffset;if(colCount<smallTextTokens0Line.length){token=smallTextTokens0Line[colCount];}else{var length=(0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .toLength */ .Hg)(0,colCount);token=new Token(length,0/* Text */,-1,_smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_4__/* .SmallImmutableSet.getEmpty */ .tS.getEmpty(),new _ast_js__WEBPACK_IMPORTED_MODULE_2__/* .TextAstNode */ .BH(length));}}else{var lineCount=curLineCount-lastTokenEndLine;var _colCount=curOffset-lastLineBreakOffset;if(lineCount===1&&_colCount<smallTextTokens1Line.length){token=smallTextTokens1Line[_colCount];}else{var _length=(0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .toLength */ .Hg)(lineCount,_colCount);token=new Token(_length,0/* Text */,-1,_smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_4__/* .SmallImmutableSet.getEmpty */ .tS.getEmpty(),new _ast_js__WEBPACK_IMPORTED_MODULE_2__/* .TextAstNode */ .BH(_length));}}tokens.push(token);}// value is matched by regexp, so the token must exist
tokens.push(brackets.getToken(value));lastTokenEndOffset=curOffset+value.length;lastTokenEndLine=curLineCount;}}}var offset=text.length;if(lastTokenEndOffset!==offset){var _length2=lastTokenEndLine===curLineCount?(0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .toLength */ .Hg)(0,offset-lastTokenEndOffset):(0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .toLength */ .Hg)(curLineCount-lastTokenEndLine,offset-lastLineBreakOffset);tokens.push(new Token(_length2,0/* Text */,-1,_smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_4__/* .SmallImmutableSet.getEmpty */ .tS.getEmpty(),new _ast_js__WEBPACK_IMPORTED_MODULE_2__/* .TextAstNode */ .BH(_length2)));}this.length=(0,_length_js__WEBPACK_IMPORTED_MODULE_3__/* .toLength */ .Hg)(curLineCount,offset-lastLineBreakOffset);this.tokens=tokens;}_createClass(FastTokenizer,[{key:"offset",get:function get(){return this._offset;}},{key:"read",value:function read(){return this.tokens[this.idx++]||null;}},{key:"peek",value:function peek(){return this.tokens[this.idx]||null;}},{key:"skip",value:function skip(length){throw new _base_common_errors_js__WEBPACK_IMPORTED_MODULE_0__/* .NotSupportedError */ .B8();}}]);return FastTokenizer;}();

/***/ }),

/***/ 28330:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "r": () => (/* binding */ fixBracketsInLine)
/* harmony export */ });
/* harmony import */ var _bracketPairsTree_brackets_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39985);
/* harmony import */ var _bracketPairsTree_length_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99992);
/* harmony import */ var _bracketPairsTree_parser_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(50687);
/* harmony import */ var _bracketPairsTree_smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(11041);
/* harmony import */ var _bracketPairsTree_tokenizer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(84093);
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/function fixBracketsInLine(tokens,languageConfigurationService){var denseKeyProvider=new _bracketPairsTree_smallImmutableSet_js__WEBPACK_IMPORTED_MODULE_3__/* .DenseKeyProvider */ .FE();var bracketTokens=new _bracketPairsTree_brackets_js__WEBPACK_IMPORTED_MODULE_0__/* .LanguageAgnosticBracketTokens */ .Z(denseKeyProvider,function(languageId){return languageConfigurationService.getLanguageConfiguration(languageId);});var tokenizer=new _bracketPairsTree_tokenizer_js__WEBPACK_IMPORTED_MODULE_4__/* .TextBufferTokenizer */ .xH(new StaticTokenizerSource([tokens]),bracketTokens);var node=(0,_bracketPairsTree_parser_js__WEBPACK_IMPORTED_MODULE_2__/* .parseDocument */ .w)(tokenizer,[],undefined,true);var str='';var line=tokens.getLineContent();function processNode(node,offset){if(node.kind===2/* Pair */){processNode(node.openingBracket,offset);offset=(0,_bracketPairsTree_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthAdd */ .Ii)(offset,node.openingBracket.length);if(node.child){processNode(node.child,offset);offset=(0,_bracketPairsTree_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthAdd */ .Ii)(offset,node.child.length);}if(node.closingBracket){processNode(node.closingBracket,offset);offset=(0,_bracketPairsTree_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthAdd */ .Ii)(offset,node.closingBracket.length);}else{var singleLangBracketTokens=bracketTokens.getSingleLanguageBracketTokens(node.openingBracket.languageId);var closingTokenText=singleLangBracketTokens.findClosingTokenText(node.openingBracket.bracketIds);str+=closingTokenText;}}else if(node.kind===3/* UnexpectedClosingBracket */){// remove the bracket
}else if(node.kind===0/* Text */||node.kind===1/* Bracket */){str+=line.substring((0,_bracketPairsTree_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthGetColumnCountIfZeroLineCount */ .F_)(offset),(0,_bracketPairsTree_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthGetColumnCountIfZeroLineCount */ .F_)((0,_bracketPairsTree_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthAdd */ .Ii)(offset,node.length)));}else if(node.kind===4/* List */){var _iterator=_createForOfIteratorHelper(node.children),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var child=_step.value;processNode(child,offset);offset=(0,_bracketPairsTree_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthAdd */ .Ii)(offset,child.length);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}processNode(node,_bracketPairsTree_length_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthZero */ .xl);return str;}var StaticTokenizerSource=/*#__PURE__*/function(){function StaticTokenizerSource(lines){_classCallCheck(this,StaticTokenizerSource);this.lines=lines;}_createClass(StaticTokenizerSource,[{key:"getLineCount",value:function getLineCount(){return this.lines.length;}},{key:"getLineLength",value:function getLineLength(lineNumber){return this.lines[lineNumber-1].getLineContent().length;}},{key:"getLineTokens",value:function getLineTokens(lineNumber){return this.lines[lineNumber-1];}}]);return StaticTokenizerSource;}();

/***/ }),

/***/ 96747:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NL": () => (/* binding */ EditStack),
/* harmony export */   "e9": () => (/* binding */ isEditStackElement)
/* harmony export */ });
/* unused harmony exports SingleModelEditStackData, SingleModelEditStackElement, MultiModelEditStackElement */
/* harmony import */ var _nls_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(71453);
/* harmony import */ var _base_common_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(32314);
/* harmony import */ var _core_selection_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(33199);
/* harmony import */ var _base_common_uri_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(91134);
/* harmony import */ var _core_textChange_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5314);
/* harmony import */ var _base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(19833);
/* harmony import */ var _base_common_resources_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(74926);
function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/function uriGetComparisonKey(resource){return resource.toString();}var SingleModelEditStackData=/*#__PURE__*/function(){function SingleModelEditStackData(beforeVersionId,afterVersionId,beforeEOL,afterEOL,beforeCursorState,afterCursorState,changes){_classCallCheck(this,SingleModelEditStackData);this.beforeVersionId=beforeVersionId;this.afterVersionId=afterVersionId;this.beforeEOL=beforeEOL;this.afterEOL=afterEOL;this.beforeCursorState=beforeCursorState;this.afterCursorState=afterCursorState;this.changes=changes;}_createClass(SingleModelEditStackData,[{key:"append",value:function append(model,textChanges,afterEOL,afterVersionId,afterCursorState){if(textChanges.length>0){this.changes=(0,_core_textChange_js__WEBPACK_IMPORTED_MODULE_2__/* .compressConsecutiveTextChanges */ .b)(this.changes,textChanges);}this.afterEOL=afterEOL;this.afterVersionId=afterVersionId;this.afterCursorState=afterCursorState;}},{key:"serialize",value:function serialize(){var necessarySize=+4// beforeVersionId
+4// afterVersionId
+1// beforeEOL
+1// afterEOL
+SingleModelEditStackData._writeSelectionsSize(this.beforeCursorState)+SingleModelEditStackData._writeSelectionsSize(this.afterCursorState)+4// change count
;var _iterator=_createForOfIteratorHelper(this.changes),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var change=_step.value;necessarySize+=change.writeSize();}}catch(err){_iterator.e(err);}finally{_iterator.f();}var b=new Uint8Array(necessarySize);var offset=0;_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .writeUInt32BE */ .T4(b,this.beforeVersionId,offset);offset+=4;_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .writeUInt32BE */ .T4(b,this.afterVersionId,offset);offset+=4;_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .writeUInt8 */ .Cg(b,this.beforeEOL,offset);offset+=1;_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .writeUInt8 */ .Cg(b,this.afterEOL,offset);offset+=1;offset=SingleModelEditStackData._writeSelections(b,this.beforeCursorState,offset);offset=SingleModelEditStackData._writeSelections(b,this.afterCursorState,offset);_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .writeUInt32BE */ .T4(b,this.changes.length,offset);offset+=4;var _iterator2=_createForOfIteratorHelper(this.changes),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _change=_step2.value;offset=_change.write(b,offset);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return b.buffer;}}],[{key:"create",value:function create(model,beforeCursorState){var alternativeVersionId=model.getAlternativeVersionId();var eol=getModelEOL(model);return new SingleModelEditStackData(alternativeVersionId,alternativeVersionId,eol,eol,beforeCursorState,beforeCursorState,[]);}},{key:"_writeSelectionsSize",value:function _writeSelectionsSize(selections){return 4+4*4*(selections?selections.length:0);}},{key:"_writeSelections",value:function _writeSelections(b,selections,offset){_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .writeUInt32BE */ .T4(b,selections?selections.length:0,offset);offset+=4;if(selections){var _iterator3=_createForOfIteratorHelper(selections),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var selection=_step3.value;_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .writeUInt32BE */ .T4(b,selection.selectionStartLineNumber,offset);offset+=4;_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .writeUInt32BE */ .T4(b,selection.selectionStartColumn,offset);offset+=4;_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .writeUInt32BE */ .T4(b,selection.positionLineNumber,offset);offset+=4;_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .writeUInt32BE */ .T4(b,selection.positionColumn,offset);offset+=4;}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}return offset;}},{key:"_readSelections",value:function _readSelections(b,offset,dest){var count=_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .readUInt32BE */ .Ag(b,offset);offset+=4;for(var i=0;i<count;i++){var selectionStartLineNumber=_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .readUInt32BE */ .Ag(b,offset);offset+=4;var selectionStartColumn=_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .readUInt32BE */ .Ag(b,offset);offset+=4;var positionLineNumber=_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .readUInt32BE */ .Ag(b,offset);offset+=4;var positionColumn=_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .readUInt32BE */ .Ag(b,offset);offset+=4;dest.push(new _core_selection_js__WEBPACK_IMPORTED_MODULE_5__/* .Selection */ .Y(selectionStartLineNumber,selectionStartColumn,positionLineNumber,positionColumn));}return offset;}},{key:"deserialize",value:function deserialize(source){var b=new Uint8Array(source);var offset=0;var beforeVersionId=_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .readUInt32BE */ .Ag(b,offset);offset+=4;var afterVersionId=_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .readUInt32BE */ .Ag(b,offset);offset+=4;var beforeEOL=_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .readUInt8 */ .Q$(b,offset);offset+=1;var afterEOL=_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .readUInt8 */ .Q$(b,offset);offset+=1;var beforeCursorState=[];offset=SingleModelEditStackData._readSelections(b,offset,beforeCursorState);var afterCursorState=[];offset=SingleModelEditStackData._readSelections(b,offset,afterCursorState);var changeCount=_base_common_buffer_js__WEBPACK_IMPORTED_MODULE_3__/* .readUInt32BE */ .Ag(b,offset);offset+=4;var changes=[];for(var i=0;i<changeCount;i++){offset=_core_textChange_js__WEBPACK_IMPORTED_MODULE_2__/* .TextChange.read */ .q.read(b,offset,changes);}return new SingleModelEditStackData(beforeVersionId,afterVersionId,beforeEOL,afterEOL,beforeCursorState,afterCursorState,changes);}}]);return SingleModelEditStackData;}();var SingleModelEditStackElement=/*#__PURE__*/function(){function SingleModelEditStackElement(model,beforeCursorState){_classCallCheck(this,SingleModelEditStackElement);this.model=model;this._data=SingleModelEditStackData.create(model,beforeCursorState);}_createClass(SingleModelEditStackElement,[{key:"type",get:function get(){return 0/* Resource */;}},{key:"resource",get:function get(){if(_base_common_uri_js__WEBPACK_IMPORTED_MODULE_1__/* .URI.isUri */ .o.isUri(this.model)){return this.model;}return this.model.uri;}},{key:"label",get:function get(){return _nls_js__WEBPACK_IMPORTED_MODULE_6__/* .localize */ .N('edit',"Typing");}},{key:"toString",value:function toString(){var data=this._data instanceof SingleModelEditStackData?this._data:SingleModelEditStackData.deserialize(this._data);return data.changes.map(function(change){return change.toString();}).join(', ');}},{key:"matchesResource",value:function matchesResource(resource){var uri=_base_common_uri_js__WEBPACK_IMPORTED_MODULE_1__/* .URI.isUri */ .o.isUri(this.model)?this.model:this.model.uri;return uri.toString()===resource.toString();}},{key:"setModel",value:function setModel(model){this.model=model;}},{key:"canAppend",value:function canAppend(model){return this.model===model&&this._data instanceof SingleModelEditStackData;}},{key:"append",value:function append(model,textChanges,afterEOL,afterVersionId,afterCursorState){if(this._data instanceof SingleModelEditStackData){this._data.append(model,textChanges,afterEOL,afterVersionId,afterCursorState);}}},{key:"close",value:function close(){if(this._data instanceof SingleModelEditStackData){this._data=this._data.serialize();}}},{key:"open",value:function open(){if(!(this._data instanceof SingleModelEditStackData)){this._data=SingleModelEditStackData.deserialize(this._data);}}},{key:"undo",value:function undo(){if(_base_common_uri_js__WEBPACK_IMPORTED_MODULE_1__/* .URI.isUri */ .o.isUri(this.model)){// don't have a model
throw new Error("Invalid SingleModelEditStackElement");}if(this._data instanceof SingleModelEditStackData){this._data=this._data.serialize();}var data=SingleModelEditStackData.deserialize(this._data);this.model._applyUndo(data.changes,data.beforeEOL,data.beforeVersionId,data.beforeCursorState);}},{key:"redo",value:function redo(){if(_base_common_uri_js__WEBPACK_IMPORTED_MODULE_1__/* .URI.isUri */ .o.isUri(this.model)){// don't have a model
throw new Error("Invalid SingleModelEditStackElement");}if(this._data instanceof SingleModelEditStackData){this._data=this._data.serialize();}var data=SingleModelEditStackData.deserialize(this._data);this.model._applyRedo(data.changes,data.afterEOL,data.afterVersionId,data.afterCursorState);}},{key:"heapSize",value:function heapSize(){if(this._data instanceof SingleModelEditStackData){this._data=this._data.serialize();}return this._data.byteLength+168/*heap overhead*/;}}]);return SingleModelEditStackElement;}();var MultiModelEditStackElement=/*#__PURE__*/function(){function MultiModelEditStackElement(label,editStackElements){_classCallCheck(this,MultiModelEditStackElement);this.type=1/* Workspace */;this.label=label;this._isOpen=true;this._editStackElementsArr=editStackElements.slice(0);this._editStackElementsMap=new Map();var _iterator4=_createForOfIteratorHelper(this._editStackElementsArr),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var editStackElement=_step4.value;var key=uriGetComparisonKey(editStackElement.resource);this._editStackElementsMap.set(key,editStackElement);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}this._delegate=null;}_createClass(MultiModelEditStackElement,[{key:"resources",get:function get(){return this._editStackElementsArr.map(function(editStackElement){return editStackElement.resource;});}},{key:"prepareUndoRedo",value:function prepareUndoRedo(){if(this._delegate){return this._delegate.prepareUndoRedo(this);}}},{key:"matchesResource",value:function matchesResource(resource){var key=uriGetComparisonKey(resource);return this._editStackElementsMap.has(key);}},{key:"setModel",value:function setModel(model){var key=uriGetComparisonKey(_base_common_uri_js__WEBPACK_IMPORTED_MODULE_1__/* .URI.isUri */ .o.isUri(model)?model:model.uri);if(this._editStackElementsMap.has(key)){this._editStackElementsMap.get(key).setModel(model);}}},{key:"canAppend",value:function canAppend(model){if(!this._isOpen){return false;}var key=uriGetComparisonKey(model.uri);if(this._editStackElementsMap.has(key)){var editStackElement=this._editStackElementsMap.get(key);return editStackElement.canAppend(model);}return false;}},{key:"append",value:function append(model,textChanges,afterEOL,afterVersionId,afterCursorState){var key=uriGetComparisonKey(model.uri);var editStackElement=this._editStackElementsMap.get(key);editStackElement.append(model,textChanges,afterEOL,afterVersionId,afterCursorState);}},{key:"close",value:function close(){this._isOpen=false;}},{key:"open",value:function open(){// cannot reopen
}},{key:"undo",value:function undo(){this._isOpen=false;var _iterator5=_createForOfIteratorHelper(this._editStackElementsArr),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var editStackElement=_step5.value;editStackElement.undo();}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}},{key:"redo",value:function redo(){var _iterator6=_createForOfIteratorHelper(this._editStackElementsArr),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var editStackElement=_step6.value;editStackElement.redo();}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}},{key:"heapSize",value:function heapSize(resource){var key=uriGetComparisonKey(resource);if(this._editStackElementsMap.has(key)){var editStackElement=this._editStackElementsMap.get(key);return editStackElement.heapSize();}return 0;}},{key:"split",value:function split(){return this._editStackElementsArr;}},{key:"toString",value:function toString(){var result=[];var _iterator7=_createForOfIteratorHelper(this._editStackElementsArr),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var editStackElement=_step7.value;result.push("".concat((0,_base_common_resources_js__WEBPACK_IMPORTED_MODULE_4__/* .basename */ .EZ)(editStackElement.resource),": ").concat(editStackElement));}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}return"{".concat(result.join(', '),"}");}}]);return MultiModelEditStackElement;}();function getModelEOL(model){var eol=model.getEOL();if(eol==='\n'){return 0/* LF */;}else{return 1/* CRLF */;}}function isEditStackElement(element){if(!element){return false;}return element instanceof SingleModelEditStackElement||element instanceof MultiModelEditStackElement;}var EditStack=/*#__PURE__*/function(){function EditStack(model,undoRedoService){_classCallCheck(this,EditStack);this._model=model;this._undoRedoService=undoRedoService;}_createClass(EditStack,[{key:"pushStackElement",value:function pushStackElement(){var lastElement=this._undoRedoService.getLastElement(this._model.uri);if(isEditStackElement(lastElement)){lastElement.close();}}},{key:"popStackElement",value:function popStackElement(){var lastElement=this._undoRedoService.getLastElement(this._model.uri);if(isEditStackElement(lastElement)){lastElement.open();}}},{key:"clear",value:function clear(){this._undoRedoService.removeElements(this._model.uri);}},{key:"_getOrCreateEditStackElement",value:function _getOrCreateEditStackElement(beforeCursorState){var lastElement=this._undoRedoService.getLastElement(this._model.uri);if(isEditStackElement(lastElement)&&lastElement.canAppend(this._model)){return lastElement;}var newElement=new SingleModelEditStackElement(this._model,beforeCursorState);this._undoRedoService.pushElement(newElement);return newElement;}},{key:"pushEOL",value:function pushEOL(eol){var editStackElement=this._getOrCreateEditStackElement(null);this._model.setEOL(eol);editStackElement.append(this._model,[],getModelEOL(this._model),this._model.getAlternativeVersionId(),null);}},{key:"pushEditOperation",value:function pushEditOperation(beforeCursorState,editOperations,cursorStateComputer){var editStackElement=this._getOrCreateEditStackElement(beforeCursorState);var inverseEditOperations=this._model.applyEdits(editOperations,true);var afterCursorState=EditStack._computeCursorState(cursorStateComputer,inverseEditOperations);var textChanges=inverseEditOperations.map(function(op,index){return{index:index,textChange:op.textChange};});textChanges.sort(function(a,b){if(a.textChange.oldPosition===b.textChange.oldPosition){return a.index-b.index;}return a.textChange.oldPosition-b.textChange.oldPosition;});editStackElement.append(this._model,textChanges.map(function(op){return op.textChange;}),getModelEOL(this._model),this._model.getAlternativeVersionId(),afterCursorState);return afterCursorState;}}],[{key:"_computeCursorState",value:function _computeCursorState(cursorStateComputer,inverseEditOperations){try{return cursorStateComputer?cursorStateComputer(inverseEditOperations):null;}catch(e){(0,_base_common_errors_js__WEBPACK_IMPORTED_MODULE_0__/* .onUnexpectedError */ .dL)(e);return null;}}}]);return EditStack;}();

/***/ }),

/***/ 64263:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "W": () => (/* binding */ BracketPairGuidesClassNames),
  "l": () => (/* binding */ GuidesTextModelPart)
});

// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/arrays.js
var arrays = __webpack_require__(92224);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/strings.js
var strings = __webpack_require__(41712);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/cursorColumns.js
var cursorColumns = __webpack_require__(44847);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/range.js
var range = __webpack_require__(96844);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/textModelPart.js
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var TextModelPart=/*#__PURE__*/function(){function TextModelPart(){_classCallCheck(this,TextModelPart);this._isDisposed=false;}_createClass(TextModelPart,[{key:"dispose",value:function dispose(){this._isDisposed=true;}},{key:"assertNotDisposed",value:function assertNotDisposed(){if(this._isDisposed){throw new Error('TextModelPart is disposed!');}}}]);return TextModelPart;}();
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/utils.js
var utils = __webpack_require__(61272);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/textModelGuides.js
var textModelGuides = __webpack_require__(35933);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/guidesTextModelPart.js
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function guidesTextModelPart_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function guidesTextModelPart_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function guidesTextModelPart_createClass(Constructor,protoProps,staticProps){if(protoProps)guidesTextModelPart_defineProperties(Constructor.prototype,protoProps);if(staticProps)guidesTextModelPart_defineProperties(Constructor,staticProps);return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var GuidesTextModelPart=/*#__PURE__*/function(_TextModelPart){_inherits(GuidesTextModelPart,_TextModelPart);var _super=_createSuper(GuidesTextModelPart);function GuidesTextModelPart(textModel,languageConfigurationService){var _this;guidesTextModelPart_classCallCheck(this,GuidesTextModelPart);_this=_super.call(this);_this.textModel=textModel;_this.languageConfigurationService=languageConfigurationService;return _this;}guidesTextModelPart_createClass(GuidesTextModelPart,[{key:"getLanguageConfiguration",value:function getLanguageConfiguration(languageId){return this.languageConfigurationService.getLanguageConfiguration(languageId);}},{key:"_computeIndentLevel",value:function _computeIndentLevel(lineIndex){return (0,utils/* computeIndentLevel */.q)(this.textModel.getLineContent(lineIndex+1),this.textModel.getOptions().tabSize);}},{key:"getActiveIndentGuide",value:function getActiveIndentGuide(lineNumber,minLineNumber,maxLineNumber){var _this2=this;this.assertNotDisposed();var lineCount=this.textModel.getLineCount();if(lineNumber<1||lineNumber>lineCount){throw new Error('Illegal value for lineNumber');}var foldingRules=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules;var offSide=Boolean(foldingRules&&foldingRules.offSide);var up_aboveContentLineIndex=-2;/* -2 is a marker for not having computed it */var up_aboveContentLineIndent=-1;var up_belowContentLineIndex=-2;/* -2 is a marker for not having computed it */var up_belowContentLineIndent=-1;var up_resolveIndents=function up_resolveIndents(lineNumber){if(up_aboveContentLineIndex!==-1&&(up_aboveContentLineIndex===-2||up_aboveContentLineIndex>lineNumber-1)){up_aboveContentLineIndex=-1;up_aboveContentLineIndent=-1;// must find previous line with content
for(var lineIndex=lineNumber-2;lineIndex>=0;lineIndex--){var _indent=_this2._computeIndentLevel(lineIndex);if(_indent>=0){up_aboveContentLineIndex=lineIndex;up_aboveContentLineIndent=_indent;break;}}}if(up_belowContentLineIndex===-2){up_belowContentLineIndex=-1;up_belowContentLineIndent=-1;// must find next line with content
for(var _lineIndex=lineNumber;_lineIndex<lineCount;_lineIndex++){var _indent2=_this2._computeIndentLevel(_lineIndex);if(_indent2>=0){up_belowContentLineIndex=_lineIndex;up_belowContentLineIndent=_indent2;break;}}}};var down_aboveContentLineIndex=-2;/* -2 is a marker for not having computed it */var down_aboveContentLineIndent=-1;var down_belowContentLineIndex=-2;/* -2 is a marker for not having computed it */var down_belowContentLineIndent=-1;var down_resolveIndents=function down_resolveIndents(lineNumber){if(down_aboveContentLineIndex===-2){down_aboveContentLineIndex=-1;down_aboveContentLineIndent=-1;// must find previous line with content
for(var lineIndex=lineNumber-2;lineIndex>=0;lineIndex--){var _indent3=_this2._computeIndentLevel(lineIndex);if(_indent3>=0){down_aboveContentLineIndex=lineIndex;down_aboveContentLineIndent=_indent3;break;}}}if(down_belowContentLineIndex!==-1&&(down_belowContentLineIndex===-2||down_belowContentLineIndex<lineNumber-1)){down_belowContentLineIndex=-1;down_belowContentLineIndent=-1;// must find next line with content
for(var _lineIndex2=lineNumber;_lineIndex2<lineCount;_lineIndex2++){var _indent4=_this2._computeIndentLevel(_lineIndex2);if(_indent4>=0){down_belowContentLineIndex=_lineIndex2;down_belowContentLineIndent=_indent4;break;}}}};var startLineNumber=0;var goUp=true;var endLineNumber=0;var goDown=true;var indent=0;var initialIndent=0;for(var distance=0;goUp||goDown;distance++){var upLineNumber=lineNumber-distance;var downLineNumber=lineNumber+distance;if(distance>1&&(upLineNumber<1||upLineNumber<minLineNumber)){goUp=false;}if(distance>1&&(downLineNumber>lineCount||downLineNumber>maxLineNumber)){goDown=false;}if(distance>50000){// stop processing
goUp=false;goDown=false;}var upLineIndentLevel=-1;if(goUp&&upLineNumber>=1){// compute indent level going up
var currentIndent=this._computeIndentLevel(upLineNumber-1);if(currentIndent>=0){// This line has content (besides whitespace)
// Use the line's indent
up_belowContentLineIndex=upLineNumber-1;up_belowContentLineIndent=currentIndent;upLineIndentLevel=Math.ceil(currentIndent/this.textModel.getOptions().indentSize);}else{up_resolveIndents(upLineNumber);upLineIndentLevel=this._getIndentLevelForWhitespaceLine(offSide,up_aboveContentLineIndent,up_belowContentLineIndent);}}var downLineIndentLevel=-1;if(goDown&&downLineNumber<=lineCount){// compute indent level going down
var _currentIndent=this._computeIndentLevel(downLineNumber-1);if(_currentIndent>=0){// This line has content (besides whitespace)
// Use the line's indent
down_aboveContentLineIndex=downLineNumber-1;down_aboveContentLineIndent=_currentIndent;downLineIndentLevel=Math.ceil(_currentIndent/this.textModel.getOptions().indentSize);}else{down_resolveIndents(downLineNumber);downLineIndentLevel=this._getIndentLevelForWhitespaceLine(offSide,down_aboveContentLineIndent,down_belowContentLineIndent);}}if(distance===0){initialIndent=upLineIndentLevel;continue;}if(distance===1){if(downLineNumber<=lineCount&&downLineIndentLevel>=0&&initialIndent+1===downLineIndentLevel){// This is the beginning of a scope, we have special handling here, since we want the
// child scope indent to be active, not the parent scope
goUp=false;startLineNumber=downLineNumber;endLineNumber=downLineNumber;indent=downLineIndentLevel;continue;}if(upLineNumber>=1&&upLineIndentLevel>=0&&upLineIndentLevel-1===initialIndent){// This is the end of a scope, just like above
goDown=false;startLineNumber=upLineNumber;endLineNumber=upLineNumber;indent=upLineIndentLevel;continue;}startLineNumber=lineNumber;endLineNumber=lineNumber;indent=initialIndent;if(indent===0){// No need to continue
return{startLineNumber:startLineNumber,endLineNumber:endLineNumber,indent:indent};}}if(goUp){if(upLineIndentLevel>=indent){startLineNumber=upLineNumber;}else{goUp=false;}}if(goDown){if(downLineIndentLevel>=indent){endLineNumber=downLineNumber;}else{goDown=false;}}}return{startLineNumber:startLineNumber,endLineNumber:endLineNumber,indent:indent};}},{key:"getLinesBracketGuides",value:function getLinesBracketGuides(startLineNumber,endLineNumber,activePosition,options){var _this3=this;var _a,_b,_c,_d,_e;var result=[];var bracketPairs=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new range/* Range */.e(startLineNumber,1,endLineNumber,this.textModel.getLineMaxColumn(endLineNumber)));var activeBracketPairRange=undefined;if(activePosition&&bracketPairs.length>0){var bracketsContainingActivePosition=startLineNumber<=activePosition.lineNumber&&activePosition.lineNumber<=endLineNumber?// Does active position intersect with the view port? -> Intersect bracket pairs with activePosition
bracketPairs.filter(function(bp){return range/* Range.strictContainsPosition */.e.strictContainsPosition(bp.range,activePosition);}):this.textModel.bracketPairs.getBracketPairsInRange(range/* Range.fromPositions */.e.fromPositions(activePosition));activeBracketPairRange=(_a=(0,arrays/* findLast */.dF)(bracketsContainingActivePosition,/* Exclude single line bracket pairs for cases such as
             * ```
             * function test() {
             * 		if (true) { | }
             * }
             * ```
             */function(i){return i.range.startLineNumber!==i.range.endLineNumber;}))===null||_a===void 0?void 0:_a.range;}var queue=new arrays/* ArrayQueue */.H9(bracketPairs);/** Indexed by nesting level */var activeGuides=new Array();var nextGuides=new Array();var colorProvider=new BracketPairGuidesClassNames();var _loop=function _loop(lineNumber){var guides=new Array();if(nextGuides.length>0){guides=guides.concat(nextGuides);nextGuides.length=0;}result.push(guides);// Update activeGuides
var _iterator=_createForOfIteratorHelper(queue.takeWhile(function(b){return b.openingBracketRange.startLineNumber<=lineNumber;})||[]),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var pair=_step.value;if(pair.range.startLineNumber===pair.range.endLineNumber){// ignore single line brackets
continue;}var guideVisibleColumn=Math.min(_this3.getVisibleColumnFromPosition(pair.openingBracketRange.getStartPosition()),_this3.getVisibleColumnFromPosition((_c=(_b=pair.closingBracketRange)===null||_b===void 0?void 0:_b.getStartPosition())!==null&&_c!==void 0?_c:pair.range.getEndPosition()),pair.minVisibleColumnIndentation+1);var renderHorizontalEndLineAtTheBottom=false;if(pair.closingBracketRange){var firstNonWsIndex=strings/* firstNonWhitespaceIndex */.LC(_this3.textModel.getLineContent(pair.closingBracketRange.startLineNumber));if(firstNonWsIndex<pair.closingBracketRange.startColumn-1){renderHorizontalEndLineAtTheBottom=true;}}var start=pair.openingBracketRange.getStartPosition();var end=(_e=(_d=pair.closingBracketRange)===null||_d===void 0?void 0:_d.getStartPosition())!==null&&_e!==void 0?_e:pair.range.getEndPosition();if(pair.closingBracketRange===undefined){// Don't show guides for bracket pairs that are not balanced.
// See #135125.
activeGuides[pair.nestingLevel]=null;}else{activeGuides[pair.nestingLevel]={nestingLevel:pair.nestingLevel,guideVisibleColumn:guideVisibleColumn,start:start,visibleStartColumn:_this3.getVisibleColumnFromPosition(start),end:end,visibleEndColumn:_this3.getVisibleColumnFromPosition(end),bracketPair:pair,renderHorizontalEndLineAtTheBottom:renderHorizontalEndLineAtTheBottom};}}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _iterator2=_createForOfIteratorHelper(activeGuides),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _line=_step2.value;if(!_line){continue;}var _isActive=activeBracketPairRange&&_line.bracketPair.range.equalsRange(activeBracketPairRange);var _className=colorProvider.getInlineClassNameOfLevel(_line.nestingLevel)+(options.highlightActive&&_isActive?' '+colorProvider.activeClassName:'');if(_isActive&&options.horizontalGuides!==textModelGuides/* HorizontalGuidesState.Disabled */.s6.Disabled||options.includeInactive&&options.horizontalGuides===textModelGuides/* HorizontalGuidesState.Enabled */.s6.Enabled){if(_line.start.lineNumber===lineNumber){if(_line.guideVisibleColumn<_line.visibleStartColumn){guides.push(new textModelGuides/* IndentGuide */.UO(_line.guideVisibleColumn,_className,new textModelGuides/* IndentGuideHorizontalLine */.vW(false,_line.start.column)));}}if(_line.end.lineNumber===lineNumber+1){// The next line might have horizontal guides.
// However, the next line might also have a new bracket pair with the same indentation,
// so the current bracket pair might get replaced. That's why we push the guide to nextGuides one line ahead.
if(_line.guideVisibleColumn<_line.visibleEndColumn){nextGuides.push(new textModelGuides/* IndentGuide */.UO(_line.guideVisibleColumn,_className,new textModelGuides/* IndentGuideHorizontalLine */.vW(!_line.renderHorizontalEndLineAtTheBottom,_line.end.column)));}}}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var lastVisibleColumnCount=Number.MAX_SAFE_INTEGER;// Going backwards, so the last guide potentially replaces others
for(var i=activeGuides.length-1;i>=0;i--){var line=activeGuides[i];if(!line){continue;}var isActive=options.highlightActive&&activeBracketPairRange&&line.bracketPair.range.equalsRange(activeBracketPairRange);var className=colorProvider.getInlineClassNameOfLevel(line.nestingLevel)+(isActive?' '+colorProvider.activeClassName:'');if(isActive||options.includeInactive){if(line.renderHorizontalEndLineAtTheBottom&&line.end.lineNumber===lineNumber+1){nextGuides.push(new textModelGuides/* IndentGuide */.UO(line.guideVisibleColumn,className,null));}}if(line.end.lineNumber<=lineNumber||line.start.lineNumber>=lineNumber){continue;}if(line.guideVisibleColumn>=lastVisibleColumnCount&&!isActive){// Don't render a guide on top of an existing guide, unless it is active.
continue;}lastVisibleColumnCount=line.guideVisibleColumn;if(isActive||options.includeInactive){guides.push(new textModelGuides/* IndentGuide */.UO(line.guideVisibleColumn,className,null));}}guides.sort(function(a,b){return a.visibleColumn-b.visibleColumn;});};for(var lineNumber=startLineNumber;lineNumber<=endLineNumber;lineNumber++){_loop(lineNumber);}return result;}},{key:"getVisibleColumnFromPosition",value:function getVisibleColumnFromPosition(position){return cursorColumns/* CursorColumns.visibleColumnFromColumn */.i.visibleColumnFromColumn(this.textModel.getLineContent(position.lineNumber),position.column,this.textModel.getOptions().tabSize)+1;}},{key:"getLinesIndentGuides",value:function getLinesIndentGuides(startLineNumber,endLineNumber){this.assertNotDisposed();var lineCount=this.textModel.getLineCount();if(startLineNumber<1||startLineNumber>lineCount){throw new Error('Illegal value for startLineNumber');}if(endLineNumber<1||endLineNumber>lineCount){throw new Error('Illegal value for endLineNumber');}var options=this.textModel.getOptions();var foldingRules=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules;var offSide=Boolean(foldingRules&&foldingRules.offSide);var result=new Array(endLineNumber-startLineNumber+1);var aboveContentLineIndex=-2;/* -2 is a marker for not having computed it */var aboveContentLineIndent=-1;var belowContentLineIndex=-2;/* -2 is a marker for not having computed it */var belowContentLineIndent=-1;for(var lineNumber=startLineNumber;lineNumber<=endLineNumber;lineNumber++){var resultIndex=lineNumber-startLineNumber;var currentIndent=this._computeIndentLevel(lineNumber-1);if(currentIndent>=0){// This line has content (besides whitespace)
// Use the line's indent
aboveContentLineIndex=lineNumber-1;aboveContentLineIndent=currentIndent;result[resultIndex]=Math.ceil(currentIndent/options.indentSize);continue;}if(aboveContentLineIndex===-2){aboveContentLineIndex=-1;aboveContentLineIndent=-1;// must find previous line with content
for(var lineIndex=lineNumber-2;lineIndex>=0;lineIndex--){var indent=this._computeIndentLevel(lineIndex);if(indent>=0){aboveContentLineIndex=lineIndex;aboveContentLineIndent=indent;break;}}}if(belowContentLineIndex!==-1&&(belowContentLineIndex===-2||belowContentLineIndex<lineNumber-1)){belowContentLineIndex=-1;belowContentLineIndent=-1;// must find next line with content
for(var _lineIndex3=lineNumber;_lineIndex3<lineCount;_lineIndex3++){var _indent5=this._computeIndentLevel(_lineIndex3);if(_indent5>=0){belowContentLineIndex=_lineIndex3;belowContentLineIndent=_indent5;break;}}}result[resultIndex]=this._getIndentLevelForWhitespaceLine(offSide,aboveContentLineIndent,belowContentLineIndent);}return result;}},{key:"_getIndentLevelForWhitespaceLine",value:function _getIndentLevelForWhitespaceLine(offSide,aboveContentLineIndent,belowContentLineIndent){var options=this.textModel.getOptions();if(aboveContentLineIndent===-1||belowContentLineIndent===-1){// At the top or bottom of the file
return 0;}else if(aboveContentLineIndent<belowContentLineIndent){// we are inside the region above
return 1+Math.floor(aboveContentLineIndent/options.indentSize);}else if(aboveContentLineIndent===belowContentLineIndent){// we are in between two regions
return Math.ceil(belowContentLineIndent/options.indentSize);}else{if(offSide){// same level as region below
return Math.ceil(belowContentLineIndent/options.indentSize);}else{// we are inside the region that ends below
return 1+Math.floor(belowContentLineIndent/options.indentSize);}}}}]);return GuidesTextModelPart;}(TextModelPart);var BracketPairGuidesClassNames=/*#__PURE__*/function(){function BracketPairGuidesClassNames(){guidesTextModelPart_classCallCheck(this,BracketPairGuidesClassNames);this.activeClassName='indent-active';}guidesTextModelPart_createClass(BracketPairGuidesClassNames,[{key:"getInlineClassNameOfLevel",value:function getInlineClassNameOfLevel(level){// To support a dynamic amount of colors up to 6 colors,
// we use a number that is a lcm of all numbers from 1 to 6.
return"bracket-indent-guide lvl-".concat(level%30);}}]);return BracketPairGuidesClassNames;}();

/***/ }),

/***/ 22648:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "v": () => (/* binding */ MirrorTextModel)
/* harmony export */ });
/* harmony import */ var _base_common_strings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41712);
/* harmony import */ var _core_position_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60721);
/* harmony import */ var _prefixSumComputer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(25498);
function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var MirrorTextModel=/*#__PURE__*/function(){function MirrorTextModel(uri,lines,eol,versionId){_classCallCheck(this,MirrorTextModel);this._uri=uri;this._lines=lines;this._eol=eol;this._versionId=versionId;this._lineStarts=null;this._cachedTextValue=null;}_createClass(MirrorTextModel,[{key:"dispose",value:function dispose(){this._lines.length=0;}},{key:"version",get:function get(){return this._versionId;}},{key:"getText",value:function getText(){if(this._cachedTextValue===null){this._cachedTextValue=this._lines.join(this._eol);}return this._cachedTextValue;}},{key:"onEvents",value:function onEvents(e){if(e.eol&&e.eol!==this._eol){this._eol=e.eol;this._lineStarts=null;}// Update my lines
var changes=e.changes;var _iterator=_createForOfIteratorHelper(changes),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var change=_step.value;this._acceptDeleteRange(change.range);this._acceptInsertText(new _core_position_js__WEBPACK_IMPORTED_MODULE_1__/* .Position */ .L(change.range.startLineNumber,change.range.startColumn),change.text);}}catch(err){_iterator.e(err);}finally{_iterator.f();}this._versionId=e.versionId;this._cachedTextValue=null;}},{key:"_ensureLineStarts",value:function _ensureLineStarts(){if(!this._lineStarts){var eolLength=this._eol.length;var linesLength=this._lines.length;var lineStartValues=new Uint32Array(linesLength);for(var i=0;i<linesLength;i++){lineStartValues[i]=this._lines[i].length+eolLength;}this._lineStarts=new _prefixSumComputer_js__WEBPACK_IMPORTED_MODULE_2__/* .PrefixSumComputer */ .oQ(lineStartValues);}}/**
     * All changes to a line's text go through this method
     */},{key:"_setLineText",value:function _setLineText(lineIndex,newValue){this._lines[lineIndex]=newValue;if(this._lineStarts){// update prefix sum
this._lineStarts.setValue(lineIndex,this._lines[lineIndex].length+this._eol.length);}}},{key:"_acceptDeleteRange",value:function _acceptDeleteRange(range){if(range.startLineNumber===range.endLineNumber){if(range.startColumn===range.endColumn){// Nothing to delete
return;}// Delete text on the affected line
this._setLineText(range.startLineNumber-1,this._lines[range.startLineNumber-1].substring(0,range.startColumn-1)+this._lines[range.startLineNumber-1].substring(range.endColumn-1));return;}// Take remaining text on last line and append it to remaining text on first line
this._setLineText(range.startLineNumber-1,this._lines[range.startLineNumber-1].substring(0,range.startColumn-1)+this._lines[range.endLineNumber-1].substring(range.endColumn-1));// Delete middle lines
this._lines.splice(range.startLineNumber,range.endLineNumber-range.startLineNumber);if(this._lineStarts){// update prefix sum
this._lineStarts.removeValues(range.startLineNumber,range.endLineNumber-range.startLineNumber);}}},{key:"_acceptInsertText",value:function _acceptInsertText(position,insertText){if(insertText.length===0){// Nothing to insert
return;}var insertLines=(0,_base_common_strings_js__WEBPACK_IMPORTED_MODULE_0__/* .splitLines */ .uq)(insertText);if(insertLines.length===1){// Inserting text on one line
this._setLineText(position.lineNumber-1,this._lines[position.lineNumber-1].substring(0,position.column-1)+insertLines[0]+this._lines[position.lineNumber-1].substring(position.column-1));return;}// Append overflowing text from first line to the end of text to insert
insertLines[insertLines.length-1]+=this._lines[position.lineNumber-1].substring(position.column-1);// Delete overflowing text from first line and insert text on first line
this._setLineText(position.lineNumber-1,this._lines[position.lineNumber-1].substring(0,position.column-1)+insertLines[0]);// Insert new lines & store lengths
var newLengths=new Uint32Array(insertLines.length-1);for(var i=1;i<insertLines.length;i++){this._lines.splice(position.lineNumber+i-1,0,insertLines[i]);newLengths[i-1]=insertLines[i].length+this._eol.length;}if(this._lineStarts){// update prefix sum
this._lineStarts.insertValues(position.lineNumber,newLengths);}}}]);return MirrorTextModel;}();

/***/ }),

/***/ 25498:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Ck": () => (/* binding */ ConstantTimePrefixSumComputer),
/* harmony export */   "oQ": () => (/* binding */ PrefixSumComputer)
/* harmony export */ });
/* unused harmony export PrefixSumIndexOfResult */
/* harmony import */ var _base_common_arrays_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92224);
/* harmony import */ var _base_common_uint_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(54070);
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var PrefixSumComputer=/*#__PURE__*/function(){function PrefixSumComputer(values){_classCallCheck(this,PrefixSumComputer);this.values=values;this.prefixSum=new Uint32Array(values.length);this.prefixSumValidIndex=new Int32Array(1);this.prefixSumValidIndex[0]=-1;}_createClass(PrefixSumComputer,[{key:"insertValues",value:function insertValues(insertIndex,_insertValues){insertIndex=(0,_base_common_uint_js__WEBPACK_IMPORTED_MODULE_0__/* .toUint32 */ .A)(insertIndex);var oldValues=this.values;var oldPrefixSum=this.prefixSum;var insertValuesLen=_insertValues.length;if(insertValuesLen===0){return false;}this.values=new Uint32Array(oldValues.length+insertValuesLen);this.values.set(oldValues.subarray(0,insertIndex),0);this.values.set(oldValues.subarray(insertIndex),insertIndex+insertValuesLen);this.values.set(_insertValues,insertIndex);if(insertIndex-1<this.prefixSumValidIndex[0]){this.prefixSumValidIndex[0]=insertIndex-1;}this.prefixSum=new Uint32Array(this.values.length);if(this.prefixSumValidIndex[0]>=0){this.prefixSum.set(oldPrefixSum.subarray(0,this.prefixSumValidIndex[0]+1));}return true;}},{key:"setValue",value:function setValue(index,value){index=(0,_base_common_uint_js__WEBPACK_IMPORTED_MODULE_0__/* .toUint32 */ .A)(index);value=(0,_base_common_uint_js__WEBPACK_IMPORTED_MODULE_0__/* .toUint32 */ .A)(value);if(this.values[index]===value){return false;}this.values[index]=value;if(index-1<this.prefixSumValidIndex[0]){this.prefixSumValidIndex[0]=index-1;}return true;}},{key:"removeValues",value:function removeValues(startIndex,count){startIndex=(0,_base_common_uint_js__WEBPACK_IMPORTED_MODULE_0__/* .toUint32 */ .A)(startIndex);count=(0,_base_common_uint_js__WEBPACK_IMPORTED_MODULE_0__/* .toUint32 */ .A)(count);var oldValues=this.values;var oldPrefixSum=this.prefixSum;if(startIndex>=oldValues.length){return false;}var maxCount=oldValues.length-startIndex;if(count>=maxCount){count=maxCount;}if(count===0){return false;}this.values=new Uint32Array(oldValues.length-count);this.values.set(oldValues.subarray(0,startIndex),0);this.values.set(oldValues.subarray(startIndex+count),startIndex);this.prefixSum=new Uint32Array(this.values.length);if(startIndex-1<this.prefixSumValidIndex[0]){this.prefixSumValidIndex[0]=startIndex-1;}if(this.prefixSumValidIndex[0]>=0){this.prefixSum.set(oldPrefixSum.subarray(0,this.prefixSumValidIndex[0]+1));}return true;}},{key:"getTotalSum",value:function getTotalSum(){if(this.values.length===0){return 0;}return this._getPrefixSum(this.values.length-1);}/**
     * Returns the sum of the first `index + 1` many items.
     * @returns `SUM(0 <= j <= index, values[j])`.
     */},{key:"getPrefixSum",value:function getPrefixSum(index){if(index<0){return 0;}index=(0,_base_common_uint_js__WEBPACK_IMPORTED_MODULE_0__/* .toUint32 */ .A)(index);return this._getPrefixSum(index);}},{key:"_getPrefixSum",value:function _getPrefixSum(index){if(index<=this.prefixSumValidIndex[0]){return this.prefixSum[index];}var startIndex=this.prefixSumValidIndex[0]+1;if(startIndex===0){this.prefixSum[0]=this.values[0];startIndex++;}if(index>=this.values.length){index=this.values.length-1;}for(var i=startIndex;i<=index;i++){this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];}this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],index);return this.prefixSum[index];}},{key:"getIndexOf",value:function getIndexOf(sum){sum=Math.floor(sum);// Compute all sums (to get a fully valid prefixSum)
this.getTotalSum();var low=0;var high=this.values.length-1;var mid=0;var midStop=0;var midStart=0;while(low<=high){mid=low+(high-low)/2|0;midStop=this.prefixSum[mid];midStart=midStop-this.values[mid];if(sum<midStart){high=mid-1;}else if(sum>=midStop){low=mid+1;}else{break;}}return new PrefixSumIndexOfResult(mid,sum-midStart);}}]);return PrefixSumComputer;}();/**
 * {@link getIndexOf} has an amortized runtime complexity of O(1).
 *
 * ({@link PrefixSumComputer.getIndexOf} is just  O(log n))
*/var ConstantTimePrefixSumComputer=/*#__PURE__*/function(){function ConstantTimePrefixSumComputer(values){_classCallCheck(this,ConstantTimePrefixSumComputer);this._values=values;this._isValid=false;this._validEndIndex=-1;this._prefixSum=[];this._indexBySum=[];}/**
     * @returns SUM(0 <= j < values.length, values[j])
     */_createClass(ConstantTimePrefixSumComputer,[{key:"getTotalSum",value:function getTotalSum(){this._ensureValid();return this._indexBySum.length;}/**
     * Returns the sum of the first `count` many items.
     * @returns `SUM(0 <= j < count, values[j])`.
     */},{key:"getPrefixSum",value:function getPrefixSum(count){this._ensureValid();if(count===0){return 0;}return this._prefixSum[count-1];}/**
     * @returns `result`, such that `getPrefixSum(result.index) + result.remainder = sum`
     */},{key:"getIndexOf",value:function getIndexOf(sum){this._ensureValid();var idx=this._indexBySum[sum];var viewLinesAbove=idx>0?this._prefixSum[idx-1]:0;return new PrefixSumIndexOfResult(idx,sum-viewLinesAbove);}},{key:"removeValues",value:function removeValues(start,deleteCount){this._values.splice(start,deleteCount);this._invalidate(start);}},{key:"insertValues",value:function insertValues(insertIndex,insertArr){this._values=(0,_base_common_arrays_js__WEBPACK_IMPORTED_MODULE_1__/* .arrayInsert */ .Zv)(this._values,insertIndex,insertArr);this._invalidate(insertIndex);}},{key:"_invalidate",value:function _invalidate(index){this._isValid=false;this._validEndIndex=Math.min(this._validEndIndex,index-1);}},{key:"_ensureValid",value:function _ensureValid(){if(this._isValid){return;}for(var i=this._validEndIndex+1,len=this._values.length;i<len;i++){var value=this._values[i];var sumAbove=i>0?this._prefixSum[i-1]:0;this._prefixSum[i]=sumAbove+value;for(var j=0;j<value;j++){this._indexBySum[sumAbove+j]=i;}}// trim things
this._prefixSum.length=this._values.length;this._indexBySum.length=this._prefixSum[this._prefixSum.length-1];// mark as valid
this._isValid=true;this._validEndIndex=this._values.length-1;}},{key:"setValue",value:function setValue(index,value){if(this._values[index]===value){// no change
return;}this._values[index]=value;this._invalidate(index);}}]);return ConstantTimePrefixSumComputer;}();var PrefixSumIndexOfResult=function PrefixSumIndexOfResult(index,remainder){_classCallCheck(this,PrefixSumIndexOfResult);this.index=index;this.remainder=remainder;this._prefixSumIndexOfResultBrand=undefined;this.index=index;this.remainder=remainder;};

/***/ }),

/***/ 58102:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "HS": () => (/* binding */ ModelDecorationInjectedTextOptions),
  "qx": () => (/* binding */ ModelDecorationOptions),
  "yO": () => (/* binding */ TextModel)
});

// UNUSED EXPORTS: DidChangeContentEmitter, DidChangeDecorationsEmitter, LONG_LINE_BOUNDARY, ModelDecorationMinimapOptions, ModelDecorationOverviewRulerOptions, createTextBuffer, createTextBufferFactory

// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/arrays.js
var arrays = __webpack_require__(92224);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/color.js
var common_color = __webpack_require__(65142);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/errors.js
var errors = __webpack_require__(32314);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/event.js
var common_event = __webpack_require__(36223);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js
var lifecycle = __webpack_require__(19860);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/strings.js
var strings = __webpack_require__(41712);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/uri.js
var uri = __webpack_require__(91134);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/position.js
var core_position = __webpack_require__(60721);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/range.js
var core_range = __webpack_require__(96844);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/selection.js
var selection = __webpack_require__(33199);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model.js
var model = __webpack_require__(16227);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/textModelBracketPairs.js
var textModelBracketPairs = __webpack_require__(33190);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/beforeEditPositionMapper.js
var beforeEditPositionMapper = __webpack_require__(96150);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/brackets.js
var bracketPairsTree_brackets = __webpack_require__(39985);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/length.js
var bracketPairsTree_length = __webpack_require__(99992);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/parser.js + 2 modules
var parser = __webpack_require__(50687);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/smallImmutableSet.js
var smallImmutableSet = __webpack_require__(11041);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/tokenizer.js
var bracketPairsTree_tokenizer = __webpack_require__(84093);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/bracketPairsTree.js
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var BracketPairsTree=/*#__PURE__*/function(_Disposable){_inherits(BracketPairsTree,_Disposable);var _super=_createSuper(BracketPairsTree);function BracketPairsTree(textModel,getLanguageConfiguration){var _this;_classCallCheck(this,BracketPairsTree);_this=_super.call(this);_this.textModel=textModel;_this.getLanguageConfiguration=getLanguageConfiguration;_this.didChangeEmitter=new common_event/* Emitter */.Q5();_this.denseKeyProvider=new smallImmutableSet/* DenseKeyProvider */.FE();_this.brackets=new bracketPairsTree_brackets/* LanguageAgnosticBracketTokens */.Z(_this.denseKeyProvider,_this.getLanguageConfiguration);_this.onDidChange=_this.didChangeEmitter.event;_this._register(textModel.onBackgroundTokenizationStateChanged(function(){if(textModel.backgroundTokenizationState===2/* Completed */){var wasUndefined=_this.initialAstWithoutTokens===undefined;// Clear the initial tree as we can use the tree with token information now.
_this.initialAstWithoutTokens=undefined;if(!wasUndefined){_this.didChangeEmitter.fire();}}}));_this._register(textModel.onDidChangeTokens(function(_ref){var ranges=_ref.ranges;var edits=ranges.map(function(r){return new beforeEditPositionMapper/* TextEditInfo */.Q((0,bracketPairsTree_length/* toLength */.Hg)(r.fromLineNumber-1,0),(0,bracketPairsTree_length/* toLength */.Hg)(r.toLineNumber,0),(0,bracketPairsTree_length/* toLength */.Hg)(r.toLineNumber-r.fromLineNumber+1,0));});_this.astWithTokens=_this.parseDocumentFromTextBuffer(edits,_this.astWithTokens,false);if(!_this.initialAstWithoutTokens){_this.didChangeEmitter.fire();}}));if(textModel.backgroundTokenizationState===0/* Uninitialized */){// There are no token information yet
var brackets=_this.brackets.getSingleLanguageBracketTokens(_this.textModel.getLanguageId());var tokenizer=new bracketPairsTree_tokenizer/* FastTokenizer */.g(_this.textModel.getValue(),brackets);_this.initialAstWithoutTokens=(0,parser/* parseDocument */.w)(tokenizer,[],undefined,true);_this.astWithTokens=_this.initialAstWithoutTokens;}else if(textModel.backgroundTokenizationState===2/* Completed */){// Skip the initial ast, as there is no flickering.
// Directly create the tree with token information.
_this.initialAstWithoutTokens=undefined;_this.astWithTokens=_this.parseDocumentFromTextBuffer([],undefined,false);}else if(textModel.backgroundTokenizationState===1/* InProgress */){_this.initialAstWithoutTokens=_this.parseDocumentFromTextBuffer([],undefined,true);_this.astWithTokens=_this.initialAstWithoutTokens;}return _this;}_createClass(BracketPairsTree,[{key:"didLanguageChange",value:function didLanguageChange(languageId){return this.brackets.didLanguageChange(languageId);}},{key:"handleContentChanged",value:function handleContentChanged(change){var edits=change.changes.map(function(c){var range=core_range/* Range.lift */.e.lift(c.range);return new beforeEditPositionMapper/* TextEditInfo */.Q((0,bracketPairsTree_length/* positionToLength */.PZ)(range.getStartPosition()),(0,bracketPairsTree_length/* positionToLength */.PZ)(range.getEndPosition()),(0,bracketPairsTree_length/* lengthOfString */.oR)(c.text));}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(edits,this.astWithTokens,false);if(this.initialAstWithoutTokens){this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(edits,this.initialAstWithoutTokens,false);}}/**
     * @pure (only if isPure = true)
    */},{key:"parseDocumentFromTextBuffer",value:function parseDocumentFromTextBuffer(edits,previousAst,immutable){// Is much faster if `isPure = false`.
var isPure=false;var previousAstClone=isPure?previousAst===null||previousAst===void 0?void 0:previousAst.deepClone():previousAst;var tokenizer=new bracketPairsTree_tokenizer/* TextBufferTokenizer */.xH(this.textModel,this.brackets);var result=(0,parser/* parseDocument */.w)(tokenizer,edits,previousAstClone,immutable);return result;}},{key:"getBracketsInRange",value:function getBracketsInRange(range){var startOffset=(0,bracketPairsTree_length/* toLength */.Hg)(range.startLineNumber-1,range.startColumn-1);var endOffset=(0,bracketPairsTree_length/* toLength */.Hg)(range.endLineNumber-1,range.endColumn-1);var result=new Array();var node=this.initialAstWithoutTokens||this.astWithTokens;collectBrackets(node,bracketPairsTree_length/* lengthZero */.xl,node.length,startOffset,endOffset,result);return result;}},{key:"getBracketPairsInRange",value:function getBracketPairsInRange(range,includeMinIndentation){var result=new Array();var startLength=(0,bracketPairsTree_length/* positionToLength */.PZ)(range.getStartPosition());var endLength=(0,bracketPairsTree_length/* positionToLength */.PZ)(range.getEndPosition());var node=this.initialAstWithoutTokens||this.astWithTokens;var context=new CollectBracketPairsContext(result,includeMinIndentation,this.textModel);collectBracketPairs(node,bracketPairsTree_length/* lengthZero */.xl,node.length,startLength,endLength,context);return result;}}]);return BracketPairsTree;}(lifecycle/* Disposable */.JT);function collectBrackets(node,nodeOffsetStart,nodeOffsetEnd,startOffset,endOffset,result){var level=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;if(node.kind===1/* Bracket */){var range=(0,bracketPairsTree_length/* lengthsToRange */.Qw)(nodeOffsetStart,nodeOffsetEnd);result.push(new textModelBracketPairs/* BracketInfo */.M$(range,level-1,false));}else if(node.kind===3/* UnexpectedClosingBracket */){var _range=(0,bracketPairsTree_length/* lengthsToRange */.Qw)(nodeOffsetStart,nodeOffsetEnd);result.push(new textModelBracketPairs/* BracketInfo */.M$(_range,level-1,true));}else if(node.kind===4/* List */){var _iterator=_createForOfIteratorHelper(node.children),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var child=_step.value;nodeOffsetEnd=(0,bracketPairsTree_length/* lengthAdd */.Ii)(nodeOffsetStart,child.length);if((0,bracketPairsTree_length/* lengthLessThanEqual */.By)(nodeOffsetStart,endOffset)&&(0,bracketPairsTree_length/* lengthGreaterThanEqual */.Zq)(nodeOffsetEnd,startOffset)){collectBrackets(child,nodeOffsetStart,nodeOffsetEnd,startOffset,endOffset,result,level);}nodeOffsetStart=nodeOffsetEnd;}}catch(err){_iterator.e(err);}finally{_iterator.f();}}else if(node.kind===2/* Pair */){// Don't use node.children here to improve performance
level++;{var _child=node.openingBracket;nodeOffsetEnd=(0,bracketPairsTree_length/* lengthAdd */.Ii)(nodeOffsetStart,_child.length);if((0,bracketPairsTree_length/* lengthLessThanEqual */.By)(nodeOffsetStart,endOffset)&&(0,bracketPairsTree_length/* lengthGreaterThanEqual */.Zq)(nodeOffsetEnd,startOffset)){collectBrackets(_child,nodeOffsetStart,nodeOffsetEnd,startOffset,endOffset,result,level);}nodeOffsetStart=nodeOffsetEnd;}if(node.child){var _child2=node.child;nodeOffsetEnd=(0,bracketPairsTree_length/* lengthAdd */.Ii)(nodeOffsetStart,_child2.length);if((0,bracketPairsTree_length/* lengthLessThanEqual */.By)(nodeOffsetStart,endOffset)&&(0,bracketPairsTree_length/* lengthGreaterThanEqual */.Zq)(nodeOffsetEnd,startOffset)){collectBrackets(_child2,nodeOffsetStart,nodeOffsetEnd,startOffset,endOffset,result,level);}nodeOffsetStart=nodeOffsetEnd;}if(node.closingBracket){var _child3=node.closingBracket;nodeOffsetEnd=(0,bracketPairsTree_length/* lengthAdd */.Ii)(nodeOffsetStart,_child3.length);if((0,bracketPairsTree_length/* lengthLessThanEqual */.By)(nodeOffsetStart,endOffset)&&(0,bracketPairsTree_length/* lengthGreaterThanEqual */.Zq)(nodeOffsetEnd,startOffset)){collectBrackets(_child3,nodeOffsetStart,nodeOffsetEnd,startOffset,endOffset,result,level);}nodeOffsetStart=nodeOffsetEnd;}}}var CollectBracketPairsContext=function CollectBracketPairsContext(result,includeMinIndentation,textModel){_classCallCheck(this,CollectBracketPairsContext);this.result=result;this.includeMinIndentation=includeMinIndentation;this.textModel=textModel;};function collectBracketPairs(node,nodeOffset,nodeOffsetEnd,startOffset,endOffset,context){var level=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;var _a;if(node.kind===2/* Pair */){var openingBracketEnd=(0,bracketPairsTree_length/* lengthAdd */.Ii)(nodeOffset,node.openingBracket.length);var minIndentation=-1;if(context.includeMinIndentation){minIndentation=node.computeMinIndentation(nodeOffset,context.textModel);}context.result.push(new textModelBracketPairs/* BracketPairWithMinIndentationInfo */.YA((0,bracketPairsTree_length/* lengthsToRange */.Qw)(nodeOffset,nodeOffsetEnd),(0,bracketPairsTree_length/* lengthsToRange */.Qw)(nodeOffset,openingBracketEnd),node.closingBracket?(0,bracketPairsTree_length/* lengthsToRange */.Qw)((0,bracketPairsTree_length/* lengthAdd */.Ii)(openingBracketEnd,((_a=node.child)===null||_a===void 0?void 0:_a.length)||bracketPairsTree_length/* lengthZero */.xl),nodeOffsetEnd):undefined,level,minIndentation));level++;}var curOffset=nodeOffset;var _iterator2=_createForOfIteratorHelper(node.children),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var child=_step2.value;var childOffset=curOffset;curOffset=(0,bracketPairsTree_length/* lengthAdd */.Ii)(curOffset,child.length);if((0,bracketPairsTree_length/* lengthLessThanEqual */.By)(childOffset,endOffset)&&(0,bracketPairsTree_length/* lengthLessThanEqual */.By)(startOffset,curOffset)){collectBracketPairs(child,childOffset,curOffset,startOffset,endOffset,context,level);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages/supports.js
var supports = __webpack_require__(66909);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages/supports/richEditBrackets.js
var richEditBrackets = __webpack_require__(1092);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsImpl.js
function bracketPairsImpl_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){bracketPairsImpl_typeof=function _typeof(obj){return typeof obj;};}else{bracketPairsImpl_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return bracketPairsImpl_typeof(obj);}function bracketPairsImpl_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function bracketPairsImpl_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function bracketPairsImpl_createClass(Constructor,protoProps,staticProps){if(protoProps)bracketPairsImpl_defineProperties(Constructor.prototype,protoProps);if(staticProps)bracketPairsImpl_defineProperties(Constructor,staticProps);return Constructor;}function bracketPairsImpl_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)bracketPairsImpl_setPrototypeOf(subClass,superClass);}function bracketPairsImpl_setPrototypeOf(o,p){bracketPairsImpl_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return bracketPairsImpl_setPrototypeOf(o,p);}function bracketPairsImpl_createSuper(Derived){var hasNativeReflectConstruct=bracketPairsImpl_isNativeReflectConstruct();return function _createSuperInternal(){var Super=bracketPairsImpl_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=bracketPairsImpl_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return bracketPairsImpl_possibleConstructorReturn(this,result);};}function bracketPairsImpl_possibleConstructorReturn(self,call){if(call&&(bracketPairsImpl_typeof(call)==="object"||typeof call==="function")){return call;}return bracketPairsImpl_assertThisInitialized(self);}function bracketPairsImpl_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function bracketPairsImpl_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function bracketPairsImpl_getPrototypeOf(o){bracketPairsImpl_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return bracketPairsImpl_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var BracketPairsTextModelPart=/*#__PURE__*/function(_Disposable){bracketPairsImpl_inherits(BracketPairsTextModelPart,_Disposable);var _super=bracketPairsImpl_createSuper(BracketPairsTextModelPart);function BracketPairsTextModelPart(textModel,languageConfigurationService){var _this;bracketPairsImpl_classCallCheck(this,BracketPairsTextModelPart);_this=_super.call(this);_this.textModel=textModel;_this.languageConfigurationService=languageConfigurationService;_this.bracketPairsTree=_this._register(new lifecycle/* MutableDisposable */.XK());_this.onDidChangeEmitter=new common_event/* Emitter */.Q5();_this.onDidChange=_this.onDidChangeEmitter.event;_this.bracketsRequested=false;_this._register(textModel.onDidChangeOptions(function(e){_this.bracketPairsTree.clear();_this.updateBracketPairsTree();}));_this._register(textModel.onDidChangeLanguage(function(e){_this.bracketPairsTree.clear();_this.updateBracketPairsTree();}));_this._register(_this.languageConfigurationService.onDidChange(function(e){var _a;if(!e.languageId||((_a=_this.bracketPairsTree.value)===null||_a===void 0?void 0:_a.object.didLanguageChange(e.languageId))){_this.bracketPairsTree.clear();_this.updateBracketPairsTree();}}));return _this;}bracketPairsImpl_createClass(BracketPairsTextModelPart,[{key:"isDocumentSupported",get:function get(){var maxSupportedDocumentLength=/* max lines */50000*/* average column count */100;return this.textModel.getValueLength()<=maxSupportedDocumentLength;}},{key:"updateBracketPairsTree",value:function updateBracketPairsTree(){var _this2=this;if(this.bracketsRequested&&this.isDocumentSupported){if(!this.bracketPairsTree.value){var store=new lifecycle/* DisposableStore */.SL();this.bracketPairsTree.value=createDisposableRef(store.add(new BracketPairsTree(this.textModel,function(languageId){return _this2.languageConfigurationService.getLanguageConfiguration(languageId);})),store);store.add(this.bracketPairsTree.value.object.onDidChange(function(e){return _this2.onDidChangeEmitter.fire(e);}));this.onDidChangeEmitter.fire();}}else{if(this.bracketPairsTree.value){this.bracketPairsTree.clear();// Important: Don't call fire if there was no change!
this.onDidChangeEmitter.fire();}}}},{key:"handleContentChanged",value:function handleContentChanged(change){var _a;(_a=this.bracketPairsTree.value)===null||_a===void 0?void 0:_a.object.handleContentChanged(change);}/**
     * Returns all bracket pairs that intersect the given range.
     * The result is sorted by the start position.
    */},{key:"getBracketPairsInRange",value:function getBracketPairsInRange(range){var _a;this.bracketsRequested=true;this.updateBracketPairsTree();return((_a=this.bracketPairsTree.value)===null||_a===void 0?void 0:_a.object.getBracketPairsInRange(range,false))||[];}},{key:"getBracketPairsInRangeWithMinIndentation",value:function getBracketPairsInRangeWithMinIndentation(range){var _a;this.bracketsRequested=true;this.updateBracketPairsTree();return((_a=this.bracketPairsTree.value)===null||_a===void 0?void 0:_a.object.getBracketPairsInRange(range,true))||[];}},{key:"getBracketsInRange",value:function getBracketsInRange(range){var _a;this.bracketsRequested=true;this.updateBracketPairsTree();return((_a=this.bracketPairsTree.value)===null||_a===void 0?void 0:_a.object.getBracketsInRange(range))||[];}},{key:"findMatchingBracketUp",value:function findMatchingBracketUp(_bracket,_position){var bracket=_bracket.toLowerCase();var position=this.textModel.validatePosition(_position);var languageId=this.textModel.getLanguageIdAtPosition(position.lineNumber,position.column);var bracketsSupport=this.languageConfigurationService.getLanguageConfiguration(languageId).brackets;if(!bracketsSupport){return null;}var data=bracketsSupport.textIsBracket[bracket];if(!data){return null;}return stripBracketSearchCanceled(this._findMatchingBracketUp(data,position,null));}},{key:"matchBracket",value:function matchBracket(position){return this._matchBracket(this.textModel.validatePosition(position));}},{key:"_establishBracketSearchOffsets",value:function _establishBracketSearchOffsets(position,lineTokens,modeBrackets,tokenIndex){var tokenCount=lineTokens.getCount();var currentLanguageId=lineTokens.getLanguageId(tokenIndex);// limit search to not go before `maxBracketLength`
var searchStartOffset=Math.max(0,position.column-1-modeBrackets.maxBracketLength);for(var i=tokenIndex-1;i>=0;i--){var tokenEndOffset=lineTokens.getEndOffset(i);if(tokenEndOffset<=searchStartOffset){break;}if((0,supports/* ignoreBracketsInToken */.Bu)(lineTokens.getStandardTokenType(i))||lineTokens.getLanguageId(i)!==currentLanguageId){searchStartOffset=tokenEndOffset;break;}}// limit search to not go after `maxBracketLength`
var searchEndOffset=Math.min(lineTokens.getLineContent().length,position.column-1+modeBrackets.maxBracketLength);for(var _i=tokenIndex+1;_i<tokenCount;_i++){var tokenStartOffset=lineTokens.getStartOffset(_i);if(tokenStartOffset>=searchEndOffset){break;}if((0,supports/* ignoreBracketsInToken */.Bu)(lineTokens.getStandardTokenType(_i))||lineTokens.getLanguageId(_i)!==currentLanguageId){searchEndOffset=tokenStartOffset;break;}}return{searchStartOffset:searchStartOffset,searchEndOffset:searchEndOffset};}},{key:"_matchBracket",value:function _matchBracket(position){var lineNumber=position.lineNumber;var lineTokens=this.textModel.getLineTokens(lineNumber);var lineText=this.textModel.getLineContent(lineNumber);var tokenIndex=lineTokens.findTokenIndexAtOffset(position.column-1);if(tokenIndex<0){return null;}var currentModeBrackets=this.languageConfigurationService.getLanguageConfiguration(lineTokens.getLanguageId(tokenIndex)).brackets;// check that the token is not to be ignored
if(currentModeBrackets&&!(0,supports/* ignoreBracketsInToken */.Bu)(lineTokens.getStandardTokenType(tokenIndex))){var _this$_establishBrack=this._establishBracketSearchOffsets(position,lineTokens,currentModeBrackets,tokenIndex),searchStartOffset=_this$_establishBrack.searchStartOffset,searchEndOffset=_this$_establishBrack.searchEndOffset;// it might be the case that [currentTokenStart -> currentTokenEnd] contains multiple brackets
// `bestResult` will contain the most right-side result
var bestResult=null;while(true){var foundBracket=richEditBrackets/* BracketsUtils.findNextBracketInRange */.Vr.findNextBracketInRange(currentModeBrackets.forwardRegex,lineNumber,lineText,searchStartOffset,searchEndOffset);if(!foundBracket){// there are no more brackets in this text
break;}// check that we didn't hit a bracket too far away from position
if(foundBracket.startColumn<=position.column&&position.column<=foundBracket.endColumn){var foundBracketText=lineText.substring(foundBracket.startColumn-1,foundBracket.endColumn-1).toLowerCase();var r=this._matchFoundBracket(foundBracket,currentModeBrackets.textIsBracket[foundBracketText],currentModeBrackets.textIsOpenBracket[foundBracketText],null);if(r){if(r instanceof BracketSearchCanceled){return null;}bestResult=r;}}searchStartOffset=foundBracket.endColumn-1;}if(bestResult){return bestResult;}}// If position is in between two tokens, try also looking in the previous token
if(tokenIndex>0&&lineTokens.getStartOffset(tokenIndex)===position.column-1){var prevTokenIndex=tokenIndex-1;var prevModeBrackets=this.languageConfigurationService.getLanguageConfiguration(lineTokens.getLanguageId(prevTokenIndex)).brackets;// check that previous token is not to be ignored
if(prevModeBrackets&&!(0,supports/* ignoreBracketsInToken */.Bu)(lineTokens.getStandardTokenType(prevTokenIndex))){var _this$_establishBrack2=this._establishBracketSearchOffsets(position,lineTokens,prevModeBrackets,prevTokenIndex),_searchStartOffset=_this$_establishBrack2.searchStartOffset,_searchEndOffset=_this$_establishBrack2.searchEndOffset;var _foundBracket=richEditBrackets/* BracketsUtils.findPrevBracketInRange */.Vr.findPrevBracketInRange(prevModeBrackets.reversedRegex,lineNumber,lineText,_searchStartOffset,_searchEndOffset);// check that we didn't hit a bracket too far away from position
if(_foundBracket&&_foundBracket.startColumn<=position.column&&position.column<=_foundBracket.endColumn){var _foundBracketText=lineText.substring(_foundBracket.startColumn-1,_foundBracket.endColumn-1).toLowerCase();var _r=this._matchFoundBracket(_foundBracket,prevModeBrackets.textIsBracket[_foundBracketText],prevModeBrackets.textIsOpenBracket[_foundBracketText],null);if(_r){if(_r instanceof BracketSearchCanceled){return null;}return _r;}}}}return null;}},{key:"_matchFoundBracket",value:function _matchFoundBracket(foundBracket,data,isOpen,continueSearchPredicate){if(!data){return null;}var matched=isOpen?this._findMatchingBracketDown(data,foundBracket.getEndPosition(),continueSearchPredicate):this._findMatchingBracketUp(data,foundBracket.getStartPosition(),continueSearchPredicate);if(!matched){return null;}if(matched instanceof BracketSearchCanceled){return matched;}return[foundBracket,matched];}},{key:"_findMatchingBracketUp",value:function _findMatchingBracketUp(bracket,position,continueSearchPredicate){// console.log('_findMatchingBracketUp: ', 'bracket: ', JSON.stringify(bracket), 'startPosition: ', String(position));
var languageId=bracket.languageId;var reversedBracketRegex=bracket.reversedRegex;var count=-1;var totalCallCount=0;var searchPrevMatchingBracketInRange=function searchPrevMatchingBracketInRange(lineNumber,lineText,searchStartOffset,searchEndOffset){while(true){if(continueSearchPredicate&&++totalCallCount%100===0&&!continueSearchPredicate()){return BracketSearchCanceled.INSTANCE;}var r=richEditBrackets/* BracketsUtils.findPrevBracketInRange */.Vr.findPrevBracketInRange(reversedBracketRegex,lineNumber,lineText,searchStartOffset,searchEndOffset);if(!r){break;}var hitText=lineText.substring(r.startColumn-1,r.endColumn-1).toLowerCase();if(bracket.isOpen(hitText)){count++;}else if(bracket.isClose(hitText)){count--;}if(count===0){return r;}searchEndOffset=r.startColumn-1;}return null;};for(var lineNumber=position.lineNumber;lineNumber>=1;lineNumber--){var lineTokens=this.textModel.getLineTokens(lineNumber);var tokenCount=lineTokens.getCount();var lineText=this.textModel.getLineContent(lineNumber);var tokenIndex=tokenCount-1;var searchStartOffset=lineText.length;var searchEndOffset=lineText.length;if(lineNumber===position.lineNumber){tokenIndex=lineTokens.findTokenIndexAtOffset(position.column-1);searchStartOffset=position.column-1;searchEndOffset=position.column-1;}var prevSearchInToken=true;for(;tokenIndex>=0;tokenIndex--){var searchInToken=lineTokens.getLanguageId(tokenIndex)===languageId&&!(0,supports/* ignoreBracketsInToken */.Bu)(lineTokens.getStandardTokenType(tokenIndex));if(searchInToken){// this token should be searched
if(prevSearchInToken){// the previous token should be searched, simply extend searchStartOffset
searchStartOffset=lineTokens.getStartOffset(tokenIndex);}else{// the previous token should not be searched
searchStartOffset=lineTokens.getStartOffset(tokenIndex);searchEndOffset=lineTokens.getEndOffset(tokenIndex);}}else{// this token should not be searched
if(prevSearchInToken&&searchStartOffset!==searchEndOffset){var r=searchPrevMatchingBracketInRange(lineNumber,lineText,searchStartOffset,searchEndOffset);if(r){return r;}}}prevSearchInToken=searchInToken;}if(prevSearchInToken&&searchStartOffset!==searchEndOffset){var _r2=searchPrevMatchingBracketInRange(lineNumber,lineText,searchStartOffset,searchEndOffset);if(_r2){return _r2;}}}return null;}},{key:"_findMatchingBracketDown",value:function _findMatchingBracketDown(bracket,position,continueSearchPredicate){// console.log('_findMatchingBracketDown: ', 'bracket: ', JSON.stringify(bracket), 'startPosition: ', String(position));
var languageId=bracket.languageId;var bracketRegex=bracket.forwardRegex;var count=1;var totalCallCount=0;var searchNextMatchingBracketInRange=function searchNextMatchingBracketInRange(lineNumber,lineText,searchStartOffset,searchEndOffset){while(true){if(continueSearchPredicate&&++totalCallCount%100===0&&!continueSearchPredicate()){return BracketSearchCanceled.INSTANCE;}var r=richEditBrackets/* BracketsUtils.findNextBracketInRange */.Vr.findNextBracketInRange(bracketRegex,lineNumber,lineText,searchStartOffset,searchEndOffset);if(!r){break;}var hitText=lineText.substring(r.startColumn-1,r.endColumn-1).toLowerCase();if(bracket.isOpen(hitText)){count++;}else if(bracket.isClose(hitText)){count--;}if(count===0){return r;}searchStartOffset=r.endColumn-1;}return null;};var lineCount=this.textModel.getLineCount();for(var lineNumber=position.lineNumber;lineNumber<=lineCount;lineNumber++){var lineTokens=this.textModel.getLineTokens(lineNumber);var tokenCount=lineTokens.getCount();var lineText=this.textModel.getLineContent(lineNumber);var tokenIndex=0;var searchStartOffset=0;var searchEndOffset=0;if(lineNumber===position.lineNumber){tokenIndex=lineTokens.findTokenIndexAtOffset(position.column-1);searchStartOffset=position.column-1;searchEndOffset=position.column-1;}var prevSearchInToken=true;for(;tokenIndex<tokenCount;tokenIndex++){var searchInToken=lineTokens.getLanguageId(tokenIndex)===languageId&&!(0,supports/* ignoreBracketsInToken */.Bu)(lineTokens.getStandardTokenType(tokenIndex));if(searchInToken){// this token should be searched
if(prevSearchInToken){// the previous token should be searched, simply extend searchEndOffset
searchEndOffset=lineTokens.getEndOffset(tokenIndex);}else{// the previous token should not be searched
searchStartOffset=lineTokens.getStartOffset(tokenIndex);searchEndOffset=lineTokens.getEndOffset(tokenIndex);}}else{// this token should not be searched
if(prevSearchInToken&&searchStartOffset!==searchEndOffset){var r=searchNextMatchingBracketInRange(lineNumber,lineText,searchStartOffset,searchEndOffset);if(r){return r;}}}prevSearchInToken=searchInToken;}if(prevSearchInToken&&searchStartOffset!==searchEndOffset){var _r3=searchNextMatchingBracketInRange(lineNumber,lineText,searchStartOffset,searchEndOffset);if(_r3){return _r3;}}}return null;}},{key:"findPrevBracket",value:function findPrevBracket(_position){var position=this.textModel.validatePosition(_position);var languageId=null;var modeBrackets=null;for(var lineNumber=position.lineNumber;lineNumber>=1;lineNumber--){var lineTokens=this.textModel.getLineTokens(lineNumber);var tokenCount=lineTokens.getCount();var lineText=this.textModel.getLineContent(lineNumber);var tokenIndex=tokenCount-1;var searchStartOffset=lineText.length;var searchEndOffset=lineText.length;if(lineNumber===position.lineNumber){tokenIndex=lineTokens.findTokenIndexAtOffset(position.column-1);searchStartOffset=position.column-1;searchEndOffset=position.column-1;var tokenLanguageId=lineTokens.getLanguageId(tokenIndex);if(languageId!==tokenLanguageId){languageId=tokenLanguageId;modeBrackets=this.languageConfigurationService.getLanguageConfiguration(languageId).brackets;}}var prevSearchInToken=true;for(;tokenIndex>=0;tokenIndex--){var _tokenLanguageId=lineTokens.getLanguageId(tokenIndex);if(languageId!==_tokenLanguageId){// language id change!
if(modeBrackets&&prevSearchInToken&&searchStartOffset!==searchEndOffset){var r=richEditBrackets/* BracketsUtils.findPrevBracketInRange */.Vr.findPrevBracketInRange(modeBrackets.reversedRegex,lineNumber,lineText,searchStartOffset,searchEndOffset);if(r){return this._toFoundBracket(modeBrackets,r);}prevSearchInToken=false;}languageId=_tokenLanguageId;modeBrackets=this.languageConfigurationService.getLanguageConfiguration(languageId).brackets;}var searchInToken=!!modeBrackets&&!(0,supports/* ignoreBracketsInToken */.Bu)(lineTokens.getStandardTokenType(tokenIndex));if(searchInToken){// this token should be searched
if(prevSearchInToken){// the previous token should be searched, simply extend searchStartOffset
searchStartOffset=lineTokens.getStartOffset(tokenIndex);}else{// the previous token should not be searched
searchStartOffset=lineTokens.getStartOffset(tokenIndex);searchEndOffset=lineTokens.getEndOffset(tokenIndex);}}else{// this token should not be searched
if(modeBrackets&&prevSearchInToken&&searchStartOffset!==searchEndOffset){var _r4=richEditBrackets/* BracketsUtils.findPrevBracketInRange */.Vr.findPrevBracketInRange(modeBrackets.reversedRegex,lineNumber,lineText,searchStartOffset,searchEndOffset);if(_r4){return this._toFoundBracket(modeBrackets,_r4);}}}prevSearchInToken=searchInToken;}if(modeBrackets&&prevSearchInToken&&searchStartOffset!==searchEndOffset){var _r5=richEditBrackets/* BracketsUtils.findPrevBracketInRange */.Vr.findPrevBracketInRange(modeBrackets.reversedRegex,lineNumber,lineText,searchStartOffset,searchEndOffset);if(_r5){return this._toFoundBracket(modeBrackets,_r5);}}}return null;}},{key:"findNextBracket",value:function findNextBracket(_position){var position=this.textModel.validatePosition(_position);var lineCount=this.textModel.getLineCount();var languageId=null;var modeBrackets=null;for(var lineNumber=position.lineNumber;lineNumber<=lineCount;lineNumber++){var lineTokens=this.textModel.getLineTokens(lineNumber);var tokenCount=lineTokens.getCount();var lineText=this.textModel.getLineContent(lineNumber);var tokenIndex=0;var searchStartOffset=0;var searchEndOffset=0;if(lineNumber===position.lineNumber){tokenIndex=lineTokens.findTokenIndexAtOffset(position.column-1);searchStartOffset=position.column-1;searchEndOffset=position.column-1;var tokenLanguageId=lineTokens.getLanguageId(tokenIndex);if(languageId!==tokenLanguageId){languageId=tokenLanguageId;modeBrackets=this.languageConfigurationService.getLanguageConfiguration(languageId).brackets;}}var prevSearchInToken=true;for(;tokenIndex<tokenCount;tokenIndex++){var _tokenLanguageId2=lineTokens.getLanguageId(tokenIndex);if(languageId!==_tokenLanguageId2){// language id change!
if(modeBrackets&&prevSearchInToken&&searchStartOffset!==searchEndOffset){var r=richEditBrackets/* BracketsUtils.findNextBracketInRange */.Vr.findNextBracketInRange(modeBrackets.forwardRegex,lineNumber,lineText,searchStartOffset,searchEndOffset);if(r){return this._toFoundBracket(modeBrackets,r);}prevSearchInToken=false;}languageId=_tokenLanguageId2;modeBrackets=this.languageConfigurationService.getLanguageConfiguration(languageId).brackets;}var searchInToken=!!modeBrackets&&!(0,supports/* ignoreBracketsInToken */.Bu)(lineTokens.getStandardTokenType(tokenIndex));if(searchInToken){// this token should be searched
if(prevSearchInToken){// the previous token should be searched, simply extend searchEndOffset
searchEndOffset=lineTokens.getEndOffset(tokenIndex);}else{// the previous token should not be searched
searchStartOffset=lineTokens.getStartOffset(tokenIndex);searchEndOffset=lineTokens.getEndOffset(tokenIndex);}}else{// this token should not be searched
if(modeBrackets&&prevSearchInToken&&searchStartOffset!==searchEndOffset){var _r6=richEditBrackets/* BracketsUtils.findNextBracketInRange */.Vr.findNextBracketInRange(modeBrackets.forwardRegex,lineNumber,lineText,searchStartOffset,searchEndOffset);if(_r6){return this._toFoundBracket(modeBrackets,_r6);}}}prevSearchInToken=searchInToken;}if(modeBrackets&&prevSearchInToken&&searchStartOffset!==searchEndOffset){var _r7=richEditBrackets/* BracketsUtils.findNextBracketInRange */.Vr.findNextBracketInRange(modeBrackets.forwardRegex,lineNumber,lineText,searchStartOffset,searchEndOffset);if(_r7){return this._toFoundBracket(modeBrackets,_r7);}}}return null;}},{key:"findEnclosingBrackets",value:function findEnclosingBrackets(_position,maxDuration){var _this3=this;var continueSearchPredicate;if(typeof maxDuration==='undefined'){continueSearchPredicate=null;}else{var startTime=Date.now();continueSearchPredicate=function continueSearchPredicate(){return Date.now()-startTime<=maxDuration;};}var position=this.textModel.validatePosition(_position);var lineCount=this.textModel.getLineCount();var savedCounts=new Map();var counts=[];var resetCounts=function resetCounts(languageId,modeBrackets){if(!savedCounts.has(languageId)){var tmp=[];for(var i=0,len=modeBrackets?modeBrackets.brackets.length:0;i<len;i++){tmp[i]=0;}savedCounts.set(languageId,tmp);}counts=savedCounts.get(languageId);};var totalCallCount=0;var searchInRange=function searchInRange(modeBrackets,lineNumber,lineText,searchStartOffset,searchEndOffset){while(true){if(continueSearchPredicate&&++totalCallCount%100===0&&!continueSearchPredicate()){return BracketSearchCanceled.INSTANCE;}var r=richEditBrackets/* BracketsUtils.findNextBracketInRange */.Vr.findNextBracketInRange(modeBrackets.forwardRegex,lineNumber,lineText,searchStartOffset,searchEndOffset);if(!r){break;}var hitText=lineText.substring(r.startColumn-1,r.endColumn-1).toLowerCase();var bracket=modeBrackets.textIsBracket[hitText];if(bracket){if(bracket.isOpen(hitText)){counts[bracket.index]++;}else if(bracket.isClose(hitText)){counts[bracket.index]--;}if(counts[bracket.index]===-1){return _this3._matchFoundBracket(r,bracket,false,continueSearchPredicate);}}searchStartOffset=r.endColumn-1;}return null;};var languageId=null;var modeBrackets=null;for(var lineNumber=position.lineNumber;lineNumber<=lineCount;lineNumber++){var lineTokens=this.textModel.getLineTokens(lineNumber);var tokenCount=lineTokens.getCount();var lineText=this.textModel.getLineContent(lineNumber);var tokenIndex=0;var searchStartOffset=0;var searchEndOffset=0;if(lineNumber===position.lineNumber){tokenIndex=lineTokens.findTokenIndexAtOffset(position.column-1);searchStartOffset=position.column-1;searchEndOffset=position.column-1;var tokenLanguageId=lineTokens.getLanguageId(tokenIndex);if(languageId!==tokenLanguageId){languageId=tokenLanguageId;modeBrackets=this.languageConfigurationService.getLanguageConfiguration(languageId).brackets;resetCounts(languageId,modeBrackets);}}var prevSearchInToken=true;for(;tokenIndex<tokenCount;tokenIndex++){var _tokenLanguageId3=lineTokens.getLanguageId(tokenIndex);if(languageId!==_tokenLanguageId3){// language id change!
if(modeBrackets&&prevSearchInToken&&searchStartOffset!==searchEndOffset){var r=searchInRange(modeBrackets,lineNumber,lineText,searchStartOffset,searchEndOffset);if(r){return stripBracketSearchCanceled(r);}prevSearchInToken=false;}languageId=_tokenLanguageId3;modeBrackets=this.languageConfigurationService.getLanguageConfiguration(languageId).brackets;resetCounts(languageId,modeBrackets);}var searchInToken=!!modeBrackets&&!(0,supports/* ignoreBracketsInToken */.Bu)(lineTokens.getStandardTokenType(tokenIndex));if(searchInToken){// this token should be searched
if(prevSearchInToken){// the previous token should be searched, simply extend searchEndOffset
searchEndOffset=lineTokens.getEndOffset(tokenIndex);}else{// the previous token should not be searched
searchStartOffset=lineTokens.getStartOffset(tokenIndex);searchEndOffset=lineTokens.getEndOffset(tokenIndex);}}else{// this token should not be searched
if(modeBrackets&&prevSearchInToken&&searchStartOffset!==searchEndOffset){var _r8=searchInRange(modeBrackets,lineNumber,lineText,searchStartOffset,searchEndOffset);if(_r8){return stripBracketSearchCanceled(_r8);}}}prevSearchInToken=searchInToken;}if(modeBrackets&&prevSearchInToken&&searchStartOffset!==searchEndOffset){var _r9=searchInRange(modeBrackets,lineNumber,lineText,searchStartOffset,searchEndOffset);if(_r9){return stripBracketSearchCanceled(_r9);}}}return null;}},{key:"_toFoundBracket",value:function _toFoundBracket(modeBrackets,r){if(!r){return null;}var text=this.textModel.getValueInRange(r);text=text.toLowerCase();var data=modeBrackets.textIsBracket[text];if(!data){return null;}return{range:r,open:data.open,close:data.close,isOpen:modeBrackets.textIsOpenBracket[text]};}}]);return BracketPairsTextModelPart;}(lifecycle/* Disposable */.JT);function createDisposableRef(object,disposable){return{object:object,dispose:function dispose(){return disposable===null||disposable===void 0?void 0:disposable.dispose();}};}var BracketSearchCanceled=function BracketSearchCanceled(){bracketPairsImpl_classCallCheck(this,BracketSearchCanceled);this._searchCanceledBrand=undefined;};BracketSearchCanceled.INSTANCE=new BracketSearchCanceled();function stripBracketSearchCanceled(result){if(result instanceof BracketSearchCanceled){return null;}return result;}
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/editorColorRegistry.js
var editorColorRegistry = __webpack_require__(62660);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/theme/common/themeService.js
var themeService = __webpack_require__(46199);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/colorizedBracketPairsDecorationProvider.js
function colorizedBracketPairsDecorationProvider_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){colorizedBracketPairsDecorationProvider_typeof=function _typeof(obj){return typeof obj;};}else{colorizedBracketPairsDecorationProvider_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return colorizedBracketPairsDecorationProvider_typeof(obj);}function colorizedBracketPairsDecorationProvider_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=colorizedBracketPairsDecorationProvider_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function colorizedBracketPairsDecorationProvider_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return colorizedBracketPairsDecorationProvider_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return colorizedBracketPairsDecorationProvider_arrayLikeToArray(o,minLen);}function colorizedBracketPairsDecorationProvider_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function colorizedBracketPairsDecorationProvider_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function colorizedBracketPairsDecorationProvider_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function colorizedBracketPairsDecorationProvider_createClass(Constructor,protoProps,staticProps){if(protoProps)colorizedBracketPairsDecorationProvider_defineProperties(Constructor.prototype,protoProps);if(staticProps)colorizedBracketPairsDecorationProvider_defineProperties(Constructor,staticProps);return Constructor;}function colorizedBracketPairsDecorationProvider_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)colorizedBracketPairsDecorationProvider_setPrototypeOf(subClass,superClass);}function colorizedBracketPairsDecorationProvider_setPrototypeOf(o,p){colorizedBracketPairsDecorationProvider_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return colorizedBracketPairsDecorationProvider_setPrototypeOf(o,p);}function colorizedBracketPairsDecorationProvider_createSuper(Derived){var hasNativeReflectConstruct=colorizedBracketPairsDecorationProvider_isNativeReflectConstruct();return function _createSuperInternal(){var Super=colorizedBracketPairsDecorationProvider_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=colorizedBracketPairsDecorationProvider_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return colorizedBracketPairsDecorationProvider_possibleConstructorReturn(this,result);};}function colorizedBracketPairsDecorationProvider_possibleConstructorReturn(self,call){if(call&&(colorizedBracketPairsDecorationProvider_typeof(call)==="object"||typeof call==="function")){return call;}return colorizedBracketPairsDecorationProvider_assertThisInitialized(self);}function colorizedBracketPairsDecorationProvider_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function colorizedBracketPairsDecorationProvider_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function colorizedBracketPairsDecorationProvider_getPrototypeOf(o){colorizedBracketPairsDecorationProvider_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return colorizedBracketPairsDecorationProvider_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var ColorizedBracketPairsDecorationProvider=/*#__PURE__*/function(_Disposable){colorizedBracketPairsDecorationProvider_inherits(ColorizedBracketPairsDecorationProvider,_Disposable);var _super=colorizedBracketPairsDecorationProvider_createSuper(ColorizedBracketPairsDecorationProvider);function ColorizedBracketPairsDecorationProvider(textModel){var _this;colorizedBracketPairsDecorationProvider_classCallCheck(this,ColorizedBracketPairsDecorationProvider);_this=_super.call(this);_this.textModel=textModel;_this.colorProvider=new ColorProvider();_this.onDidChangeEmitter=new common_event/* Emitter */.Q5();_this.onDidChange=_this.onDidChangeEmitter.event;_this.colorizationOptions=textModel.getOptions().bracketPairColorizationOptions;_this._register(textModel.onDidChangeOptions(function(e){_this.colorizationOptions=textModel.getOptions().bracketPairColorizationOptions;}));_this._register(textModel.bracketPairs.onDidChange(function(e){_this.onDidChangeEmitter.fire();}));return _this;}colorizedBracketPairsDecorationProvider_createClass(ColorizedBracketPairsDecorationProvider,[{key:"getDecorationsInRange",value:function getDecorationsInRange(range,ownerId,filterOutValidation){if(ownerId===undefined){return[];}if(!this.colorizationOptions.enabled){return[];}var result=new Array();var bracketsInRange=this.textModel.bracketPairs.getBracketsInRange(range);var _iterator=colorizedBracketPairsDecorationProvider_createForOfIteratorHelper(bracketsInRange),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var bracket=_step.value;result.push({id:"bracket".concat(bracket.range.toString(),"-").concat(bracket.nestingLevel),options:{description:'BracketPairColorization',inlineClassName:this.colorProvider.getInlineClassName(bracket)},ownerId:0,range:bracket.range});}}catch(err){_iterator.e(err);}finally{_iterator.f();}return result;}},{key:"getAllDecorations",value:function getAllDecorations(ownerId,filterOutValidation){if(ownerId===undefined){return[];}if(!this.colorizationOptions.enabled){return[];}return this.getDecorationsInRange(new core_range/* Range */.e(1,1,this.textModel.getLineCount(),1),ownerId,filterOutValidation);}}]);return ColorizedBracketPairsDecorationProvider;}(lifecycle/* Disposable */.JT);var ColorProvider=/*#__PURE__*/function(){function ColorProvider(){colorizedBracketPairsDecorationProvider_classCallCheck(this,ColorProvider);this.unexpectedClosingBracketClassName='unexpected-closing-bracket';}colorizedBracketPairsDecorationProvider_createClass(ColorProvider,[{key:"getInlineClassName",value:function getInlineClassName(bracket){if(bracket.isInvalid){return this.unexpectedClosingBracketClassName;}return this.getInlineClassNameOfLevel(bracket.nestingLevel);}},{key:"getInlineClassNameOfLevel",value:function getInlineClassNameOfLevel(level){// To support a dynamic amount of colors up to 6 colors,
// we use a number that is a lcm of all numbers from 1 to 6.
return"bracket-highlighting-".concat(level%30);}}]);return ColorProvider;}();(0,themeService/* registerThemingParticipant */.Ic)(function(theme,collector){var colors=[editorColorRegistry/* editorBracketHighlightingForeground1 */.zJ,editorColorRegistry/* editorBracketHighlightingForeground2 */.Vs,editorColorRegistry/* editorBracketHighlightingForeground3 */.CE,editorColorRegistry/* editorBracketHighlightingForeground4 */.UP,editorColorRegistry/* editorBracketHighlightingForeground5 */.r0,editorColorRegistry/* editorBracketHighlightingForeground6 */.m1];var colorProvider=new ColorProvider();collector.addRule(".monaco-editor .".concat(colorProvider.unexpectedClosingBracketClassName," { color: ").concat(theme.getColor(editorColorRegistry/* editorBracketHighlightingUnexpectedBracketForeground */.ts),"; }"));var colorValues=colors.map(function(c){return theme.getColor(c);}).filter(function(c){return!!c;}).filter(function(c){return!c.isTransparent();});for(var level=0;level<30;level++){var color=colorValues[level%colorValues.length];collector.addRule(".monaco-editor .".concat(colorProvider.getInlineClassNameOfLevel(level)," { color: ").concat(color,"; }"));}});
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/editStack.js
var editStack = __webpack_require__(96747);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/guidesTextModelPart.js + 1 modules
var guidesTextModelPart = __webpack_require__(64263);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/indentationGuesser.js
function indentationGuesser_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var SpacesDiffResult=function SpacesDiffResult(){indentationGuesser_classCallCheck(this,SpacesDiffResult);this.spacesDiff=0;this.looksLikeAlignment=false;};/**
 * Compute the diff in spaces between two line's indentation.
 */function spacesDiff(a,aLength,b,bLength,result){result.spacesDiff=0;result.looksLikeAlignment=false;// This can go both ways (e.g.):
//  - a: "\t"
//  - b: "\t    "
//  => This should count 1 tab and 4 spaces
var i;for(i=0;i<aLength&&i<bLength;i++){var aCharCode=a.charCodeAt(i);var bCharCode=b.charCodeAt(i);if(aCharCode!==bCharCode){break;}}var aSpacesCnt=0,aTabsCount=0;for(var j=i;j<aLength;j++){var _aCharCode=a.charCodeAt(j);if(_aCharCode===32/* Space */){aSpacesCnt++;}else{aTabsCount++;}}var bSpacesCnt=0,bTabsCount=0;for(var _j=i;_j<bLength;_j++){var _bCharCode=b.charCodeAt(_j);if(_bCharCode===32/* Space */){bSpacesCnt++;}else{bTabsCount++;}}if(aSpacesCnt>0&&aTabsCount>0){return;}if(bSpacesCnt>0&&bTabsCount>0){return;}var tabsDiff=Math.abs(aTabsCount-bTabsCount);var spacesDiff=Math.abs(aSpacesCnt-bSpacesCnt);if(tabsDiff===0){// check if the indentation difference might be caused by alignment reasons
// sometime folks like to align their code, but this should not be used as a hint
result.spacesDiff=spacesDiff;if(spacesDiff>0&&0<=bSpacesCnt-1&&bSpacesCnt-1<a.length&&bSpacesCnt<b.length){if(b.charCodeAt(bSpacesCnt)!==32/* Space */&&a.charCodeAt(bSpacesCnt-1)===32/* Space */){if(a.charCodeAt(a.length-1)===44/* Comma */){// This looks like an alignment desire: e.g.
// const a = b + c,
//       d = b - c;
result.looksLikeAlignment=true;}}}return;}if(spacesDiff%tabsDiff===0){result.spacesDiff=spacesDiff/tabsDiff;return;}}function guessIndentation(source,defaultTabSize,defaultInsertSpaces){// Look at most at the first 10k lines
var linesCount=Math.min(source.getLineCount(),10000);var linesIndentedWithTabsCount=0;// number of lines that contain at least one tab in indentation
var linesIndentedWithSpacesCount=0;// number of lines that contain only spaces in indentation
var previousLineText='';// content of latest line that contained non-whitespace chars
var previousLineIndentation=0;// index at which latest line contained the first non-whitespace char
var ALLOWED_TAB_SIZE_GUESSES=[2,4,6,8,3,5,7];// prefer even guesses for `tabSize`, limit to [2, 8].
var MAX_ALLOWED_TAB_SIZE_GUESS=8;// max(ALLOWED_TAB_SIZE_GUESSES) = 8
var spacesDiffCount=[0,0,0,0,0,0,0,0,0];// `tabSize` scores
var tmp=new SpacesDiffResult();for(var lineNumber=1;lineNumber<=linesCount;lineNumber++){var currentLineLength=source.getLineLength(lineNumber);var currentLineText=source.getLineContent(lineNumber);// if the text buffer is chunk based, so long lines are cons-string, v8 will flattern the string when we check charCode.
// checking charCode on chunks directly is cheaper.
var useCurrentLineText=currentLineLength<=65536;var currentLineHasContent=false;// does `currentLineText` contain non-whitespace chars
var currentLineIndentation=0;// index at which `currentLineText` contains the first non-whitespace char
var currentLineSpacesCount=0;// count of spaces found in `currentLineText` indentation
var currentLineTabsCount=0;// count of tabs found in `currentLineText` indentation
for(var j=0,lenJ=currentLineLength;j<lenJ;j++){var charCode=useCurrentLineText?currentLineText.charCodeAt(j):source.getLineCharCode(lineNumber,j);if(charCode===9/* Tab */){currentLineTabsCount++;}else if(charCode===32/* Space */){currentLineSpacesCount++;}else{// Hit non whitespace character on this line
currentLineHasContent=true;currentLineIndentation=j;break;}}// Ignore empty or only whitespace lines
if(!currentLineHasContent){continue;}if(currentLineTabsCount>0){linesIndentedWithTabsCount++;}else if(currentLineSpacesCount>1){linesIndentedWithSpacesCount++;}spacesDiff(previousLineText,previousLineIndentation,currentLineText,currentLineIndentation,tmp);if(tmp.looksLikeAlignment){// if defaultInsertSpaces === true && the spaces count == tabSize, we may want to count it as valid indentation
//
// - item1
//   - item2
//
// otherwise skip this line entirely
//
// const a = 1,
//       b = 2;
if(!(defaultInsertSpaces&&defaultTabSize===tmp.spacesDiff)){continue;}}var currentSpacesDiff=tmp.spacesDiff;if(currentSpacesDiff<=MAX_ALLOWED_TAB_SIZE_GUESS){spacesDiffCount[currentSpacesDiff]++;}previousLineText=currentLineText;previousLineIndentation=currentLineIndentation;}var insertSpaces=defaultInsertSpaces;if(linesIndentedWithTabsCount!==linesIndentedWithSpacesCount){insertSpaces=linesIndentedWithTabsCount<linesIndentedWithSpacesCount;}var tabSize=defaultTabSize;// Guess tabSize only if inserting spaces...
if(insertSpaces){var tabSizeScore=insertSpaces?0:0.1*linesCount;// console.log("score threshold: " + tabSizeScore);
ALLOWED_TAB_SIZE_GUESSES.forEach(function(possibleTabSize){var possibleTabSizeScore=spacesDiffCount[possibleTabSize];if(possibleTabSizeScore>tabSizeScore){tabSizeScore=possibleTabSizeScore;tabSize=possibleTabSize;}});// Let a tabSize of 2 win even if it is not the maximum
// (only in case 4 was guessed)
if(tabSize===4&&spacesDiffCount[4]>0&&spacesDiffCount[2]>0&&spacesDiffCount[2]>=spacesDiffCount[4]/2){tabSize=2;}}// console.log('--------------------------');
// console.log('linesIndentedWithTabsCount: ' + linesIndentedWithTabsCount + ', linesIndentedWithSpacesCount: ' + linesIndentedWithSpacesCount);
// console.log('spacesDiffCount: ' + spacesDiffCount);
// console.log('tabSize: ' + tabSize + ', tabSizeScore: ' + tabSizeScore);
return{insertSpaces:insertSpaces,tabSize:tabSize};}
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/intervalTree.js
function intervalTree_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function intervalTree_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function intervalTree_createClass(Constructor,protoProps,staticProps){if(protoProps)intervalTree_defineProperties(Constructor.prototype,protoProps);if(staticProps)intervalTree_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/function getNodeColor(node){return(node.metadata&1/* ColorMask */)>>>0/* ColorOffset */;}function setNodeColor(node,color){node.metadata=node.metadata&254/* ColorMaskInverse */|color<<0/* ColorOffset */;}function getNodeIsVisited(node){return(node.metadata&2/* IsVisitedMask */)>>>1/* IsVisitedOffset */===1;}function setNodeIsVisited(node,value){node.metadata=node.metadata&253/* IsVisitedMaskInverse */|(value?1:0)<<1/* IsVisitedOffset */;}function getNodeIsForValidation(node){return(node.metadata&4/* IsForValidationMask */)>>>2/* IsForValidationOffset */===1;}function setNodeIsForValidation(node,value){node.metadata=node.metadata&251/* IsForValidationMaskInverse */|(value?1:0)<<2/* IsForValidationOffset */;}function getNodeStickiness(node){return(node.metadata&24/* StickinessMask */)>>>3/* StickinessOffset */;}function _setNodeStickiness(node,stickiness){node.metadata=node.metadata&231/* StickinessMaskInverse */|stickiness<<3/* StickinessOffset */;}function getCollapseOnReplaceEdit(node){return(node.metadata&32/* CollapseOnReplaceEditMask */)>>>5/* CollapseOnReplaceEditOffset */===1;}function setCollapseOnReplaceEdit(node,value){node.metadata=node.metadata&223/* CollapseOnReplaceEditMaskInverse */|(value?1:0)<<5/* CollapseOnReplaceEditOffset */;}var IntervalNode=/*#__PURE__*/function(){function IntervalNode(id,start,end){intervalTree_classCallCheck(this,IntervalNode);this.metadata=0;this.parent=this;this.left=this;this.right=this;setNodeColor(this,1/* Red */);this.start=start;this.end=end;// FORCE_OVERFLOWING_TEST: this.delta = start;
this.delta=0;this.maxEnd=end;this.id=id;this.ownerId=0;this.options=null;setNodeIsForValidation(this,false);_setNodeStickiness(this,1/* NeverGrowsWhenTypingAtEdges */);setCollapseOnReplaceEdit(this,false);this.cachedVersionId=0;this.cachedAbsoluteStart=start;this.cachedAbsoluteEnd=end;this.range=null;setNodeIsVisited(this,false);}intervalTree_createClass(IntervalNode,[{key:"reset",value:function reset(versionId,start,end,range){this.start=start;this.end=end;this.maxEnd=end;this.cachedVersionId=versionId;this.cachedAbsoluteStart=start;this.cachedAbsoluteEnd=end;this.range=range;}},{key:"setOptions",value:function setOptions(options){this.options=options;var className=this.options.className;setNodeIsForValidation(this,className==="squiggly-error"/* EditorErrorDecoration */||className==="squiggly-warning"/* EditorWarningDecoration */||className==="squiggly-info"/* EditorInfoDecoration */);_setNodeStickiness(this,this.options.stickiness);setCollapseOnReplaceEdit(this,this.options.collapseOnReplaceEdit);}},{key:"setCachedOffsets",value:function setCachedOffsets(absoluteStart,absoluteEnd,cachedVersionId){if(this.cachedVersionId!==cachedVersionId){this.range=null;}this.cachedVersionId=cachedVersionId;this.cachedAbsoluteStart=absoluteStart;this.cachedAbsoluteEnd=absoluteEnd;}},{key:"detach",value:function detach(){this.parent=null;this.left=null;this.right=null;}}]);return IntervalNode;}();var SENTINEL=new IntervalNode(null,0,0);SENTINEL.parent=SENTINEL;SENTINEL.left=SENTINEL;SENTINEL.right=SENTINEL;setNodeColor(SENTINEL,0/* Black */);var IntervalTree=/*#__PURE__*/function(){function IntervalTree(){intervalTree_classCallCheck(this,IntervalTree);this.root=SENTINEL;this.requestNormalizeDelta=false;}intervalTree_createClass(IntervalTree,[{key:"intervalSearch",value:function intervalSearch(start,end,filterOwnerId,filterOutValidation,cachedVersionId){if(this.root===SENTINEL){return[];}return _intervalSearch(this,start,end,filterOwnerId,filterOutValidation,cachedVersionId);}},{key:"search",value:function search(filterOwnerId,filterOutValidation,cachedVersionId){if(this.root===SENTINEL){return[];}return _search(this,filterOwnerId,filterOutValidation,cachedVersionId);}/**
     * Will not set `cachedAbsoluteStart` nor `cachedAbsoluteEnd` on the returned nodes!
     */},{key:"collectNodesFromOwner",value:function collectNodesFromOwner(ownerId){return _collectNodesFromOwner(this,ownerId);}/**
     * Will not set `cachedAbsoluteStart` nor `cachedAbsoluteEnd` on the returned nodes!
     */},{key:"collectNodesPostOrder",value:function collectNodesPostOrder(){return _collectNodesPostOrder(this);}},{key:"insert",value:function insert(node){rbTreeInsert(this,node);this._normalizeDeltaIfNecessary();}},{key:"delete",value:function _delete(node){rbTreeDelete(this,node);this._normalizeDeltaIfNecessary();}},{key:"resolveNode",value:function resolveNode(node,cachedVersionId){var initialNode=node;var delta=0;while(node!==this.root){if(node===node.parent.right){delta+=node.parent.delta;}node=node.parent;}var nodeStart=initialNode.start+delta;var nodeEnd=initialNode.end+delta;initialNode.setCachedOffsets(nodeStart,nodeEnd,cachedVersionId);}},{key:"acceptReplace",value:function acceptReplace(offset,length,textLength,forceMoveMarkers){// Our strategy is to remove all directly impacted nodes, and then add them back to the tree.
// (1) collect all nodes that are intersecting this edit as nodes of interest
var nodesOfInterest=searchForEditing(this,offset,offset+length);// (2) remove all nodes that are intersecting this edit
for(var i=0,len=nodesOfInterest.length;i<len;i++){var node=nodesOfInterest[i];rbTreeDelete(this,node);}this._normalizeDeltaIfNecessary();// (3) edit all tree nodes except the nodes of interest
noOverlapReplace(this,offset,offset+length,textLength);this._normalizeDeltaIfNecessary();// (4) edit the nodes of interest and insert them back in the tree
for(var _i=0,_len=nodesOfInterest.length;_i<_len;_i++){var _node=nodesOfInterest[_i];_node.start=_node.cachedAbsoluteStart;_node.end=_node.cachedAbsoluteEnd;nodeAcceptEdit(_node,offset,offset+length,textLength,forceMoveMarkers);_node.maxEnd=_node.end;rbTreeInsert(this,_node);}this._normalizeDeltaIfNecessary();}},{key:"_normalizeDeltaIfNecessary",value:function _normalizeDeltaIfNecessary(){if(!this.requestNormalizeDelta){return;}this.requestNormalizeDelta=false;normalizeDelta(this);}}]);return IntervalTree;}();//#region Delta Normalization
function normalizeDelta(T){var node=T.root;var delta=0;while(node!==SENTINEL){if(node.left!==SENTINEL&&!getNodeIsVisited(node.left)){// go left
node=node.left;continue;}if(node.right!==SENTINEL&&!getNodeIsVisited(node.right)){// go right
delta+=node.delta;node=node.right;continue;}// handle current node
node.start=delta+node.start;node.end=delta+node.end;node.delta=0;recomputeMaxEnd(node);setNodeIsVisited(node,true);// going up from this node
setNodeIsVisited(node.left,false);setNodeIsVisited(node.right,false);if(node===node.parent.right){delta-=node.parent.delta;}node=node.parent;}setNodeIsVisited(T.root,false);}function adjustMarkerBeforeColumn(markerOffset,markerStickToPreviousCharacter,checkOffset,moveSemantics){if(markerOffset<checkOffset){return true;}if(markerOffset>checkOffset){return false;}if(moveSemantics===1/* ForceMove */){return false;}if(moveSemantics===2/* ForceStay */){return true;}return markerStickToPreviousCharacter;}/**
 * This is a lot more complicated than strictly necessary to maintain the same behaviour
 * as when decorations were implemented using two markers.
 */function nodeAcceptEdit(node,start,end,textLength,forceMoveMarkers){var nodeStickiness=getNodeStickiness(node);var startStickToPreviousCharacter=nodeStickiness===0/* AlwaysGrowsWhenTypingAtEdges */||nodeStickiness===2/* GrowsOnlyWhenTypingBefore */;var endStickToPreviousCharacter=nodeStickiness===1/* NeverGrowsWhenTypingAtEdges */||nodeStickiness===2/* GrowsOnlyWhenTypingBefore */;var deletingCnt=end-start;var insertingCnt=textLength;var commonLength=Math.min(deletingCnt,insertingCnt);var nodeStart=node.start;var startDone=false;var nodeEnd=node.end;var endDone=false;if(start<=nodeStart&&nodeEnd<=end&&getCollapseOnReplaceEdit(node)){// This edit encompasses the entire decoration range
// and the decoration has asked to become collapsed
node.start=start;startDone=true;node.end=start;endDone=true;}{var moveSemantics=forceMoveMarkers?1/* ForceMove */:deletingCnt>0?2/* ForceStay */:0/* MarkerDefined */;if(!startDone&&adjustMarkerBeforeColumn(nodeStart,startStickToPreviousCharacter,start,moveSemantics)){startDone=true;}if(!endDone&&adjustMarkerBeforeColumn(nodeEnd,endStickToPreviousCharacter,start,moveSemantics)){endDone=true;}}if(commonLength>0&&!forceMoveMarkers){var _moveSemantics=deletingCnt>insertingCnt?2/* ForceStay */:0/* MarkerDefined */;if(!startDone&&adjustMarkerBeforeColumn(nodeStart,startStickToPreviousCharacter,start+commonLength,_moveSemantics)){startDone=true;}if(!endDone&&adjustMarkerBeforeColumn(nodeEnd,endStickToPreviousCharacter,start+commonLength,_moveSemantics)){endDone=true;}}{var _moveSemantics2=forceMoveMarkers?1/* ForceMove */:0/* MarkerDefined */;if(!startDone&&adjustMarkerBeforeColumn(nodeStart,startStickToPreviousCharacter,end,_moveSemantics2)){node.start=start+insertingCnt;startDone=true;}if(!endDone&&adjustMarkerBeforeColumn(nodeEnd,endStickToPreviousCharacter,end,_moveSemantics2)){node.end=start+insertingCnt;endDone=true;}}// Finish
var deltaColumn=insertingCnt-deletingCnt;if(!startDone){node.start=Math.max(0,nodeStart+deltaColumn);}if(!endDone){node.end=Math.max(0,nodeEnd+deltaColumn);}if(node.start>node.end){node.end=node.start;}}function searchForEditing(T,start,end){// https://en.wikipedia.org/wiki/Interval_tree#Augmented_tree
// Now, it is known that two intervals A and B overlap only when both
// A.low <= B.high and A.high >= B.low. When searching the trees for
// nodes overlapping with a given interval, you can immediately skip:
//  a) all nodes to the right of nodes whose low value is past the end of the given interval.
//  b) all nodes that have their maximum 'high' value below the start of the given interval.
var node=T.root;var delta=0;var nodeMaxEnd=0;var nodeStart=0;var nodeEnd=0;var result=[];var resultLen=0;while(node!==SENTINEL){if(getNodeIsVisited(node)){// going up from this node
setNodeIsVisited(node.left,false);setNodeIsVisited(node.right,false);if(node===node.parent.right){delta-=node.parent.delta;}node=node.parent;continue;}if(!getNodeIsVisited(node.left)){// first time seeing this node
nodeMaxEnd=delta+node.maxEnd;if(nodeMaxEnd<start){// cover case b) from above
// there is no need to search this node or its children
setNodeIsVisited(node,true);continue;}if(node.left!==SENTINEL){// go left
node=node.left;continue;}}// handle current node
nodeStart=delta+node.start;if(nodeStart>end){// cover case a) from above
// there is no need to search this node or its right subtree
setNodeIsVisited(node,true);continue;}nodeEnd=delta+node.end;if(nodeEnd>=start){node.setCachedOffsets(nodeStart,nodeEnd,0);result[resultLen++]=node;}setNodeIsVisited(node,true);if(node.right!==SENTINEL&&!getNodeIsVisited(node.right)){// go right
delta+=node.delta;node=node.right;continue;}}setNodeIsVisited(T.root,false);return result;}function noOverlapReplace(T,start,end,textLength){// https://en.wikipedia.org/wiki/Interval_tree#Augmented_tree
// Now, it is known that two intervals A and B overlap only when both
// A.low <= B.high and A.high >= B.low. When searching the trees for
// nodes overlapping with a given interval, you can immediately skip:
//  a) all nodes to the right of nodes whose low value is past the end of the given interval.
//  b) all nodes that have their maximum 'high' value below the start of the given interval.
var node=T.root;var delta=0;var nodeMaxEnd=0;var nodeStart=0;var editDelta=textLength-(end-start);while(node!==SENTINEL){if(getNodeIsVisited(node)){// going up from this node
setNodeIsVisited(node.left,false);setNodeIsVisited(node.right,false);if(node===node.parent.right){delta-=node.parent.delta;}recomputeMaxEnd(node);node=node.parent;continue;}if(!getNodeIsVisited(node.left)){// first time seeing this node
nodeMaxEnd=delta+node.maxEnd;if(nodeMaxEnd<start){// cover case b) from above
// there is no need to search this node or its children
setNodeIsVisited(node,true);continue;}if(node.left!==SENTINEL){// go left
node=node.left;continue;}}// handle current node
nodeStart=delta+node.start;if(nodeStart>end){node.start+=editDelta;node.end+=editDelta;node.delta+=editDelta;if(node.delta<-1073741824/* MIN_SAFE_DELTA */||node.delta>1073741824/* MAX_SAFE_DELTA */){T.requestNormalizeDelta=true;}// cover case a) from above
// there is no need to search this node or its right subtree
setNodeIsVisited(node,true);continue;}setNodeIsVisited(node,true);if(node.right!==SENTINEL&&!getNodeIsVisited(node.right)){// go right
delta+=node.delta;node=node.right;continue;}}setNodeIsVisited(T.root,false);}//#endregion
//#region Searching
function _collectNodesFromOwner(T,ownerId){var node=T.root;var result=[];var resultLen=0;while(node!==SENTINEL){if(getNodeIsVisited(node)){// going up from this node
setNodeIsVisited(node.left,false);setNodeIsVisited(node.right,false);node=node.parent;continue;}if(node.left!==SENTINEL&&!getNodeIsVisited(node.left)){// go left
node=node.left;continue;}// handle current node
if(node.ownerId===ownerId){result[resultLen++]=node;}setNodeIsVisited(node,true);if(node.right!==SENTINEL&&!getNodeIsVisited(node.right)){// go right
node=node.right;continue;}}setNodeIsVisited(T.root,false);return result;}function _collectNodesPostOrder(T){var node=T.root;var result=[];var resultLen=0;while(node!==SENTINEL){if(getNodeIsVisited(node)){// going up from this node
setNodeIsVisited(node.left,false);setNodeIsVisited(node.right,false);node=node.parent;continue;}if(node.left!==SENTINEL&&!getNodeIsVisited(node.left)){// go left
node=node.left;continue;}if(node.right!==SENTINEL&&!getNodeIsVisited(node.right)){// go right
node=node.right;continue;}// handle current node
result[resultLen++]=node;setNodeIsVisited(node,true);}setNodeIsVisited(T.root,false);return result;}function _search(T,filterOwnerId,filterOutValidation,cachedVersionId){var node=T.root;var delta=0;var nodeStart=0;var nodeEnd=0;var result=[];var resultLen=0;while(node!==SENTINEL){if(getNodeIsVisited(node)){// going up from this node
setNodeIsVisited(node.left,false);setNodeIsVisited(node.right,false);if(node===node.parent.right){delta-=node.parent.delta;}node=node.parent;continue;}if(node.left!==SENTINEL&&!getNodeIsVisited(node.left)){// go left
node=node.left;continue;}// handle current node
nodeStart=delta+node.start;nodeEnd=delta+node.end;node.setCachedOffsets(nodeStart,nodeEnd,cachedVersionId);var include=true;if(filterOwnerId&&node.ownerId&&node.ownerId!==filterOwnerId){include=false;}if(filterOutValidation&&getNodeIsForValidation(node)){include=false;}if(include){result[resultLen++]=node;}setNodeIsVisited(node,true);if(node.right!==SENTINEL&&!getNodeIsVisited(node.right)){// go right
delta+=node.delta;node=node.right;continue;}}setNodeIsVisited(T.root,false);return result;}function _intervalSearch(T,intervalStart,intervalEnd,filterOwnerId,filterOutValidation,cachedVersionId){// https://en.wikipedia.org/wiki/Interval_tree#Augmented_tree
// Now, it is known that two intervals A and B overlap only when both
// A.low <= B.high and A.high >= B.low. When searching the trees for
// nodes overlapping with a given interval, you can immediately skip:
//  a) all nodes to the right of nodes whose low value is past the end of the given interval.
//  b) all nodes that have their maximum 'high' value below the start of the given interval.
var node=T.root;var delta=0;var nodeMaxEnd=0;var nodeStart=0;var nodeEnd=0;var result=[];var resultLen=0;while(node!==SENTINEL){if(getNodeIsVisited(node)){// going up from this node
setNodeIsVisited(node.left,false);setNodeIsVisited(node.right,false);if(node===node.parent.right){delta-=node.parent.delta;}node=node.parent;continue;}if(!getNodeIsVisited(node.left)){// first time seeing this node
nodeMaxEnd=delta+node.maxEnd;if(nodeMaxEnd<intervalStart){// cover case b) from above
// there is no need to search this node or its children
setNodeIsVisited(node,true);continue;}if(node.left!==SENTINEL){// go left
node=node.left;continue;}}// handle current node
nodeStart=delta+node.start;if(nodeStart>intervalEnd){// cover case a) from above
// there is no need to search this node or its right subtree
setNodeIsVisited(node,true);continue;}nodeEnd=delta+node.end;if(nodeEnd>=intervalStart){// There is overlap
node.setCachedOffsets(nodeStart,nodeEnd,cachedVersionId);var include=true;if(filterOwnerId&&node.ownerId&&node.ownerId!==filterOwnerId){include=false;}if(filterOutValidation&&getNodeIsForValidation(node)){include=false;}if(include){result[resultLen++]=node;}}setNodeIsVisited(node,true);if(node.right!==SENTINEL&&!getNodeIsVisited(node.right)){// go right
delta+=node.delta;node=node.right;continue;}}setNodeIsVisited(T.root,false);return result;}//#endregion
//#region Insertion
function rbTreeInsert(T,newNode){if(T.root===SENTINEL){newNode.parent=SENTINEL;newNode.left=SENTINEL;newNode.right=SENTINEL;setNodeColor(newNode,0/* Black */);T.root=newNode;return T.root;}treeInsert(T,newNode);recomputeMaxEndWalkToRoot(newNode.parent);// repair tree
var x=newNode;while(x!==T.root&&getNodeColor(x.parent)===1/* Red */){if(x.parent===x.parent.parent.left){var y=x.parent.parent.right;if(getNodeColor(y)===1/* Red */){setNodeColor(x.parent,0/* Black */);setNodeColor(y,0/* Black */);setNodeColor(x.parent.parent,1/* Red */);x=x.parent.parent;}else{if(x===x.parent.right){x=x.parent;leftRotate(T,x);}setNodeColor(x.parent,0/* Black */);setNodeColor(x.parent.parent,1/* Red */);rightRotate(T,x.parent.parent);}}else{var _y=x.parent.parent.left;if(getNodeColor(_y)===1/* Red */){setNodeColor(x.parent,0/* Black */);setNodeColor(_y,0/* Black */);setNodeColor(x.parent.parent,1/* Red */);x=x.parent.parent;}else{if(x===x.parent.left){x=x.parent;rightRotate(T,x);}setNodeColor(x.parent,0/* Black */);setNodeColor(x.parent.parent,1/* Red */);leftRotate(T,x.parent.parent);}}}setNodeColor(T.root,0/* Black */);return newNode;}function treeInsert(T,z){var delta=0;var x=T.root;var zAbsoluteStart=z.start;var zAbsoluteEnd=z.end;while(true){var cmp=intervalCompare(zAbsoluteStart,zAbsoluteEnd,x.start+delta,x.end+delta);if(cmp<0){// this node should be inserted to the left
// => it is not affected by the node's delta
if(x.left===SENTINEL){z.start-=delta;z.end-=delta;z.maxEnd-=delta;x.left=z;break;}else{x=x.left;}}else{// this node should be inserted to the right
// => it is not affected by the node's delta
if(x.right===SENTINEL){z.start-=delta+x.delta;z.end-=delta+x.delta;z.maxEnd-=delta+x.delta;x.right=z;break;}else{delta+=x.delta;x=x.right;}}}z.parent=x;z.left=SENTINEL;z.right=SENTINEL;setNodeColor(z,1/* Red */);}//#endregion
//#region Deletion
function rbTreeDelete(T,z){var x;var y;// RB-DELETE except we don't swap z and y in case c)
// i.e. we always delete what's pointed at by z.
if(z.left===SENTINEL){x=z.right;y=z;// x's delta is no longer influenced by z's delta
x.delta+=z.delta;if(x.delta<-1073741824/* MIN_SAFE_DELTA */||x.delta>1073741824/* MAX_SAFE_DELTA */){T.requestNormalizeDelta=true;}x.start+=z.delta;x.end+=z.delta;}else if(z.right===SENTINEL){x=z.left;y=z;}else{y=leftest(z.right);x=y.right;// y's delta is no longer influenced by z's delta,
// but we don't want to walk the entire right-hand-side subtree of x.
// we therefore maintain z's delta in y, and adjust only x
x.start+=y.delta;x.end+=y.delta;x.delta+=y.delta;if(x.delta<-1073741824/* MIN_SAFE_DELTA */||x.delta>1073741824/* MAX_SAFE_DELTA */){T.requestNormalizeDelta=true;}y.start+=z.delta;y.end+=z.delta;y.delta=z.delta;if(y.delta<-1073741824/* MIN_SAFE_DELTA */||y.delta>1073741824/* MAX_SAFE_DELTA */){T.requestNormalizeDelta=true;}}if(y===T.root){T.root=x;setNodeColor(x,0/* Black */);z.detach();resetSentinel();recomputeMaxEnd(x);T.root.parent=SENTINEL;return;}var yWasRed=getNodeColor(y)===1/* Red */;if(y===y.parent.left){y.parent.left=x;}else{y.parent.right=x;}if(y===z){x.parent=y.parent;}else{if(y.parent===z){x.parent=y;}else{x.parent=y.parent;}y.left=z.left;y.right=z.right;y.parent=z.parent;setNodeColor(y,getNodeColor(z));if(z===T.root){T.root=y;}else{if(z===z.parent.left){z.parent.left=y;}else{z.parent.right=y;}}if(y.left!==SENTINEL){y.left.parent=y;}if(y.right!==SENTINEL){y.right.parent=y;}}z.detach();if(yWasRed){recomputeMaxEndWalkToRoot(x.parent);if(y!==z){recomputeMaxEndWalkToRoot(y);recomputeMaxEndWalkToRoot(y.parent);}resetSentinel();return;}recomputeMaxEndWalkToRoot(x);recomputeMaxEndWalkToRoot(x.parent);if(y!==z){recomputeMaxEndWalkToRoot(y);recomputeMaxEndWalkToRoot(y.parent);}// RB-DELETE-FIXUP
var w;while(x!==T.root&&getNodeColor(x)===0/* Black */){if(x===x.parent.left){w=x.parent.right;if(getNodeColor(w)===1/* Red */){setNodeColor(w,0/* Black */);setNodeColor(x.parent,1/* Red */);leftRotate(T,x.parent);w=x.parent.right;}if(getNodeColor(w.left)===0/* Black */&&getNodeColor(w.right)===0/* Black */){setNodeColor(w,1/* Red */);x=x.parent;}else{if(getNodeColor(w.right)===0/* Black */){setNodeColor(w.left,0/* Black */);setNodeColor(w,1/* Red */);rightRotate(T,w);w=x.parent.right;}setNodeColor(w,getNodeColor(x.parent));setNodeColor(x.parent,0/* Black */);setNodeColor(w.right,0/* Black */);leftRotate(T,x.parent);x=T.root;}}else{w=x.parent.left;if(getNodeColor(w)===1/* Red */){setNodeColor(w,0/* Black */);setNodeColor(x.parent,1/* Red */);rightRotate(T,x.parent);w=x.parent.left;}if(getNodeColor(w.left)===0/* Black */&&getNodeColor(w.right)===0/* Black */){setNodeColor(w,1/* Red */);x=x.parent;}else{if(getNodeColor(w.left)===0/* Black */){setNodeColor(w.right,0/* Black */);setNodeColor(w,1/* Red */);leftRotate(T,w);w=x.parent.left;}setNodeColor(w,getNodeColor(x.parent));setNodeColor(x.parent,0/* Black */);setNodeColor(w.left,0/* Black */);rightRotate(T,x.parent);x=T.root;}}}setNodeColor(x,0/* Black */);resetSentinel();}function leftest(node){while(node.left!==SENTINEL){node=node.left;}return node;}function resetSentinel(){SENTINEL.parent=SENTINEL;SENTINEL.delta=0;// optional
SENTINEL.start=0;// optional
SENTINEL.end=0;// optional
}//#endregion
//#region Rotations
function leftRotate(T,x){var y=x.right;// set y.
y.delta+=x.delta;// y's delta is no longer influenced by x's delta
if(y.delta<-1073741824/* MIN_SAFE_DELTA */||y.delta>1073741824/* MAX_SAFE_DELTA */){T.requestNormalizeDelta=true;}y.start+=x.delta;y.end+=x.delta;x.right=y.left;// turn y's left subtree into x's right subtree.
if(y.left!==SENTINEL){y.left.parent=x;}y.parent=x.parent;// link x's parent to y.
if(x.parent===SENTINEL){T.root=y;}else if(x===x.parent.left){x.parent.left=y;}else{x.parent.right=y;}y.left=x;// put x on y's left.
x.parent=y;recomputeMaxEnd(x);recomputeMaxEnd(y);}function rightRotate(T,y){var x=y.left;y.delta-=x.delta;if(y.delta<-1073741824/* MIN_SAFE_DELTA */||y.delta>1073741824/* MAX_SAFE_DELTA */){T.requestNormalizeDelta=true;}y.start-=x.delta;y.end-=x.delta;y.left=x.right;if(x.right!==SENTINEL){x.right.parent=y;}x.parent=y.parent;if(y.parent===SENTINEL){T.root=x;}else if(y===y.parent.right){y.parent.right=x;}else{y.parent.left=x;}x.right=y;y.parent=x;recomputeMaxEnd(y);recomputeMaxEnd(x);}//#endregion
//#region max end computation
function computeMaxEnd(node){var maxEnd=node.end;if(node.left!==SENTINEL){var leftMaxEnd=node.left.maxEnd;if(leftMaxEnd>maxEnd){maxEnd=leftMaxEnd;}}if(node.right!==SENTINEL){var rightMaxEnd=node.right.maxEnd+node.delta;if(rightMaxEnd>maxEnd){maxEnd=rightMaxEnd;}}return maxEnd;}function recomputeMaxEnd(node){node.maxEnd=computeMaxEnd(node);}function recomputeMaxEndWalkToRoot(node){while(node!==SENTINEL){var maxEnd=computeMaxEnd(node);if(node.maxEnd===maxEnd){// no need to go further
return;}node.maxEnd=maxEnd;node=node.parent;}}//#endregion
//#region utils
function intervalCompare(aStart,aEnd,bStart,bEnd){if(aStart===bStart){return aEnd-bEnd;}return aStart-bStart;}//#endregion
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase.js
function rbTreeBase_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function rbTreeBase_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function rbTreeBase_createClass(Constructor,protoProps,staticProps){if(protoProps)rbTreeBase_defineProperties(Constructor.prototype,protoProps);if(staticProps)rbTreeBase_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var TreeNode=/*#__PURE__*/function(){function TreeNode(piece,color){rbTreeBase_classCallCheck(this,TreeNode);this.piece=piece;this.color=color;this.size_left=0;this.lf_left=0;this.parent=this;this.left=this;this.right=this;}rbTreeBase_createClass(TreeNode,[{key:"next",value:function next(){if(this.right!==rbTreeBase_SENTINEL){return rbTreeBase_leftest(this.right);}var node=this;while(node.parent!==rbTreeBase_SENTINEL){if(node.parent.left===node){break;}node=node.parent;}if(node.parent===rbTreeBase_SENTINEL){return rbTreeBase_SENTINEL;}else{return node.parent;}}},{key:"prev",value:function prev(){if(this.left!==rbTreeBase_SENTINEL){return righttest(this.left);}var node=this;while(node.parent!==rbTreeBase_SENTINEL){if(node.parent.right===node){break;}node=node.parent;}if(node.parent===rbTreeBase_SENTINEL){return rbTreeBase_SENTINEL;}else{return node.parent;}}},{key:"detach",value:function detach(){this.parent=null;this.left=null;this.right=null;}}]);return TreeNode;}();var rbTreeBase_SENTINEL=new TreeNode(null,0/* Black */);rbTreeBase_SENTINEL.parent=rbTreeBase_SENTINEL;rbTreeBase_SENTINEL.left=rbTreeBase_SENTINEL;rbTreeBase_SENTINEL.right=rbTreeBase_SENTINEL;rbTreeBase_SENTINEL.color=0/* Black */;function rbTreeBase_leftest(node){while(node.left!==rbTreeBase_SENTINEL){node=node.left;}return node;}function righttest(node){while(node.right!==rbTreeBase_SENTINEL){node=node.right;}return node;}function calculateSize(node){if(node===rbTreeBase_SENTINEL){return 0;}return node.size_left+node.piece.length+calculateSize(node.right);}function calculateLF(node){if(node===rbTreeBase_SENTINEL){return 0;}return node.lf_left+node.piece.lineFeedCnt+calculateLF(node.right);}function rbTreeBase_resetSentinel(){rbTreeBase_SENTINEL.parent=rbTreeBase_SENTINEL;}function rbTreeBase_leftRotate(tree,x){var y=x.right;// fix size_left
y.size_left+=x.size_left+(x.piece?x.piece.length:0);y.lf_left+=x.lf_left+(x.piece?x.piece.lineFeedCnt:0);x.right=y.left;if(y.left!==rbTreeBase_SENTINEL){y.left.parent=x;}y.parent=x.parent;if(x.parent===rbTreeBase_SENTINEL){tree.root=y;}else if(x.parent.left===x){x.parent.left=y;}else{x.parent.right=y;}y.left=x;x.parent=y;}function rbTreeBase_rightRotate(tree,y){var x=y.left;y.left=x.right;if(x.right!==rbTreeBase_SENTINEL){x.right.parent=y;}x.parent=y.parent;// fix size_left
y.size_left-=x.size_left+(x.piece?x.piece.length:0);y.lf_left-=x.lf_left+(x.piece?x.piece.lineFeedCnt:0);if(y.parent===rbTreeBase_SENTINEL){tree.root=x;}else if(y===y.parent.right){y.parent.right=x;}else{y.parent.left=x;}x.right=y;y.parent=x;}function rbDelete(tree,z){var x;var y;if(z.left===rbTreeBase_SENTINEL){y=z;x=y.right;}else if(z.right===rbTreeBase_SENTINEL){y=z;x=y.left;}else{y=rbTreeBase_leftest(z.right);x=y.right;}if(y===tree.root){tree.root=x;// if x is null, we are removing the only node
x.color=0/* Black */;z.detach();rbTreeBase_resetSentinel();tree.root.parent=rbTreeBase_SENTINEL;return;}var yWasRed=y.color===1/* Red */;if(y===y.parent.left){y.parent.left=x;}else{y.parent.right=x;}if(y===z){x.parent=y.parent;recomputeTreeMetadata(tree,x);}else{if(y.parent===z){x.parent=y;}else{x.parent=y.parent;}// as we make changes to x's hierarchy, update size_left of subtree first
recomputeTreeMetadata(tree,x);y.left=z.left;y.right=z.right;y.parent=z.parent;y.color=z.color;if(z===tree.root){tree.root=y;}else{if(z===z.parent.left){z.parent.left=y;}else{z.parent.right=y;}}if(y.left!==rbTreeBase_SENTINEL){y.left.parent=y;}if(y.right!==rbTreeBase_SENTINEL){y.right.parent=y;}// update metadata
// we replace z with y, so in this sub tree, the length change is z.item.length
y.size_left=z.size_left;y.lf_left=z.lf_left;recomputeTreeMetadata(tree,y);}z.detach();if(x.parent.left===x){var newSizeLeft=calculateSize(x);var newLFLeft=calculateLF(x);if(newSizeLeft!==x.parent.size_left||newLFLeft!==x.parent.lf_left){var delta=newSizeLeft-x.parent.size_left;var lf_delta=newLFLeft-x.parent.lf_left;x.parent.size_left=newSizeLeft;x.parent.lf_left=newLFLeft;updateTreeMetadata(tree,x.parent,delta,lf_delta);}}recomputeTreeMetadata(tree,x.parent);if(yWasRed){rbTreeBase_resetSentinel();return;}// RB-DELETE-FIXUP
var w;while(x!==tree.root&&x.color===0/* Black */){if(x===x.parent.left){w=x.parent.right;if(w.color===1/* Red */){w.color=0/* Black */;x.parent.color=1/* Red */;rbTreeBase_leftRotate(tree,x.parent);w=x.parent.right;}if(w.left.color===0/* Black */&&w.right.color===0/* Black */){w.color=1/* Red */;x=x.parent;}else{if(w.right.color===0/* Black */){w.left.color=0/* Black */;w.color=1/* Red */;rbTreeBase_rightRotate(tree,w);w=x.parent.right;}w.color=x.parent.color;x.parent.color=0/* Black */;w.right.color=0/* Black */;rbTreeBase_leftRotate(tree,x.parent);x=tree.root;}}else{w=x.parent.left;if(w.color===1/* Red */){w.color=0/* Black */;x.parent.color=1/* Red */;rbTreeBase_rightRotate(tree,x.parent);w=x.parent.left;}if(w.left.color===0/* Black */&&w.right.color===0/* Black */){w.color=1/* Red */;x=x.parent;}else{if(w.left.color===0/* Black */){w.right.color=0/* Black */;w.color=1/* Red */;rbTreeBase_leftRotate(tree,w);w=x.parent.left;}w.color=x.parent.color;x.parent.color=0/* Black */;w.left.color=0/* Black */;rbTreeBase_rightRotate(tree,x.parent);x=tree.root;}}}x.color=0/* Black */;rbTreeBase_resetSentinel();}function fixInsert(tree,x){recomputeTreeMetadata(tree,x);while(x!==tree.root&&x.parent.color===1/* Red */){if(x.parent===x.parent.parent.left){var y=x.parent.parent.right;if(y.color===1/* Red */){x.parent.color=0/* Black */;y.color=0/* Black */;x.parent.parent.color=1/* Red */;x=x.parent.parent;}else{if(x===x.parent.right){x=x.parent;rbTreeBase_leftRotate(tree,x);}x.parent.color=0/* Black */;x.parent.parent.color=1/* Red */;rbTreeBase_rightRotate(tree,x.parent.parent);}}else{var _y=x.parent.parent.left;if(_y.color===1/* Red */){x.parent.color=0/* Black */;_y.color=0/* Black */;x.parent.parent.color=1/* Red */;x=x.parent.parent;}else{if(x===x.parent.left){x=x.parent;rbTreeBase_rightRotate(tree,x);}x.parent.color=0/* Black */;x.parent.parent.color=1/* Red */;rbTreeBase_leftRotate(tree,x.parent.parent);}}}tree.root.color=0/* Black */;}function updateTreeMetadata(tree,x,delta,lineFeedCntDelta){// node length change or line feed count change
while(x!==tree.root&&x!==rbTreeBase_SENTINEL){if(x.parent.left===x){x.parent.size_left+=delta;x.parent.lf_left+=lineFeedCntDelta;}x=x.parent;}}function recomputeTreeMetadata(tree,x){var delta=0;var lf_delta=0;if(x===tree.root){return;}// go upwards till the node whose left subtree is changed.
while(x!==tree.root&&x===x.parent.right){x=x.parent;}if(x===tree.root){// well, it means we add a node to the end (inorder)
return;}// x is the node whose right subtree is changed.
x=x.parent;delta=calculateSize(x.left)-x.size_left;lf_delta=calculateLF(x.left)-x.lf_left;x.size_left+=delta;x.lf_left+=lf_delta;// go upwards till root. O(logN)
while(x!==tree.root&&(delta!==0||lf_delta!==0)){if(x.parent.left===x){x.parent.size_left+=delta;x.parent.lf_left+=lf_delta;}x=x.parent;}}
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/textModelSearch.js
var textModelSearch = __webpack_require__(97886);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase.js
function pieceTreeBase_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=pieceTreeBase_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function pieceTreeBase_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return pieceTreeBase_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pieceTreeBase_arrayLikeToArray(o,minLen);}function pieceTreeBase_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function pieceTreeBase_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function pieceTreeBase_createClass(Constructor,protoProps,staticProps){if(protoProps)pieceTreeBase_defineProperties(Constructor.prototype,protoProps);if(staticProps)pieceTreeBase_defineProperties(Constructor,staticProps);return Constructor;}function pieceTreeBase_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/// const lfRegex = new RegExp(/\r\n|\r|\n/g);
var AverageBufferSize=65535;function createUintArray(arr){var r;if(arr[arr.length-1]<65536){r=new Uint16Array(arr.length);}else{r=new Uint32Array(arr.length);}r.set(arr,0);return r;}var LineStarts=function LineStarts(lineStarts,cr,lf,crlf,isBasicASCII){pieceTreeBase_classCallCheck(this,LineStarts);this.lineStarts=lineStarts;this.cr=cr;this.lf=lf;this.crlf=crlf;this.isBasicASCII=isBasicASCII;};function createLineStartsFast(str){var readonly=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var r=[0];var rLength=1;for(var i=0,len=str.length;i<len;i++){var chr=str.charCodeAt(i);if(chr===13/* CarriageReturn */){if(i+1<len&&str.charCodeAt(i+1)===10/* LineFeed */){// \r\n... case
r[rLength++]=i+2;i++;// skip \n
}else{// \r... case
r[rLength++]=i+1;}}else if(chr===10/* LineFeed */){r[rLength++]=i+1;}}if(readonly){return createUintArray(r);}else{return r;}}function createLineStarts(r,str){r.length=0;r[0]=0;var rLength=1;var cr=0,lf=0,crlf=0;var isBasicASCII=true;for(var i=0,len=str.length;i<len;i++){var chr=str.charCodeAt(i);if(chr===13/* CarriageReturn */){if(i+1<len&&str.charCodeAt(i+1)===10/* LineFeed */){// \r\n... case
crlf++;r[rLength++]=i+2;i++;// skip \n
}else{cr++;// \r... case
r[rLength++]=i+1;}}else if(chr===10/* LineFeed */){lf++;r[rLength++]=i+1;}else{if(isBasicASCII){if(chr!==9/* Tab */&&(chr<32||chr>126)){isBasicASCII=false;}}}}var result=new LineStarts(createUintArray(r),cr,lf,crlf,isBasicASCII);r.length=0;return result;}var Piece=function Piece(bufferIndex,start,end,lineFeedCnt,length){pieceTreeBase_classCallCheck(this,Piece);this.bufferIndex=bufferIndex;this.start=start;this.end=end;this.lineFeedCnt=lineFeedCnt;this.length=length;};var StringBuffer=function StringBuffer(buffer,lineStarts){pieceTreeBase_classCallCheck(this,StringBuffer);this.buffer=buffer;this.lineStarts=lineStarts;};/**
 * Readonly snapshot for piece tree.
 * In a real multiple thread environment, to make snapshot reading always work correctly, we need to
 * 1. Make TreeNode.piece immutable, then reading and writing can run in parallel.
 * 2. TreeNode/Buffers normalization should not happen during snapshot reading.
 */var PieceTreeSnapshot=/*#__PURE__*/function(){function PieceTreeSnapshot(tree,BOM){var _this=this;pieceTreeBase_classCallCheck(this,PieceTreeSnapshot);this._pieces=[];this._tree=tree;this._BOM=BOM;this._index=0;if(tree.root!==rbTreeBase_SENTINEL){tree.iterate(tree.root,function(node){if(node!==rbTreeBase_SENTINEL){_this._pieces.push(node.piece);}return true;});}}pieceTreeBase_createClass(PieceTreeSnapshot,[{key:"read",value:function read(){if(this._pieces.length===0){if(this._index===0){this._index++;return this._BOM;}else{return null;}}if(this._index>this._pieces.length-1){return null;}if(this._index===0){return this._BOM+this._tree.getPieceContent(this._pieces[this._index++]);}return this._tree.getPieceContent(this._pieces[this._index++]);}}]);return PieceTreeSnapshot;}();var PieceTreeSearchCache=/*#__PURE__*/function(){function PieceTreeSearchCache(limit){pieceTreeBase_classCallCheck(this,PieceTreeSearchCache);this._limit=limit;this._cache=[];}pieceTreeBase_createClass(PieceTreeSearchCache,[{key:"get",value:function get(offset){for(var i=this._cache.length-1;i>=0;i--){var nodePos=this._cache[i];if(nodePos.nodeStartOffset<=offset&&nodePos.nodeStartOffset+nodePos.node.piece.length>=offset){return nodePos;}}return null;}},{key:"get2",value:function get2(lineNumber){for(var i=this._cache.length-1;i>=0;i--){var nodePos=this._cache[i];if(nodePos.nodeStartLineNumber&&nodePos.nodeStartLineNumber<lineNumber&&nodePos.nodeStartLineNumber+nodePos.node.piece.lineFeedCnt>=lineNumber){return nodePos;}}return null;}},{key:"set",value:function set(nodePosition){if(this._cache.length>=this._limit){this._cache.shift();}this._cache.push(nodePosition);}},{key:"validate",value:function validate(offset){var hasInvalidVal=false;var tmp=this._cache;for(var i=0;i<tmp.length;i++){var nodePos=tmp[i];if(nodePos.node.parent===null||nodePos.nodeStartOffset>=offset){tmp[i]=null;hasInvalidVal=true;continue;}}if(hasInvalidVal){var newArr=[];var _iterator=pieceTreeBase_createForOfIteratorHelper(tmp),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var entry=_step.value;if(entry!==null){newArr.push(entry);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}this._cache=newArr;}}}]);return PieceTreeSearchCache;}();var PieceTreeBase=/*#__PURE__*/function(){function PieceTreeBase(chunks,eol,eolNormalized){pieceTreeBase_classCallCheck(this,PieceTreeBase);this.create(chunks,eol,eolNormalized);}pieceTreeBase_createClass(PieceTreeBase,[{key:"create",value:function create(chunks,eol,eolNormalized){this._buffers=[new StringBuffer('',[0])];this._lastChangeBufferPos={line:0,column:0};this.root=rbTreeBase_SENTINEL;this._lineCnt=1;this._length=0;this._EOL=eol;this._EOLLength=eol.length;this._EOLNormalized=eolNormalized;var lastNode=null;for(var i=0,len=chunks.length;i<len;i++){if(chunks[i].buffer.length>0){if(!chunks[i].lineStarts){chunks[i].lineStarts=createLineStartsFast(chunks[i].buffer);}var piece=new Piece(i+1,{line:0,column:0},{line:chunks[i].lineStarts.length-1,column:chunks[i].buffer.length-chunks[i].lineStarts[chunks[i].lineStarts.length-1]},chunks[i].lineStarts.length-1,chunks[i].buffer.length);this._buffers.push(chunks[i]);lastNode=this.rbInsertRight(lastNode,piece);}}this._searchCache=new PieceTreeSearchCache(1);this._lastVisitedLine={lineNumber:0,value:''};this.computeBufferMetadata();}},{key:"normalizeEOL",value:function normalizeEOL(eol){var _this2=this;var averageBufferSize=AverageBufferSize;var min=averageBufferSize-Math.floor(averageBufferSize/3);var max=min*2;var tempChunk='';var tempChunkLen=0;var chunks=[];this.iterate(this.root,function(node){var str=_this2.getNodeContent(node);var len=str.length;if(tempChunkLen<=min||tempChunkLen+len<max){tempChunk+=str;tempChunkLen+=len;return true;}// flush anyways
var text=tempChunk.replace(/\r\n|\r|\n/g,eol);chunks.push(new StringBuffer(text,createLineStartsFast(text)));tempChunk=str;tempChunkLen=len;return true;});if(tempChunkLen>0){var text=tempChunk.replace(/\r\n|\r|\n/g,eol);chunks.push(new StringBuffer(text,createLineStartsFast(text)));}this.create(chunks,eol,true);}// #region Buffer API
},{key:"getEOL",value:function getEOL(){return this._EOL;}},{key:"setEOL",value:function setEOL(newEOL){this._EOL=newEOL;this._EOLLength=this._EOL.length;this.normalizeEOL(newEOL);}},{key:"createSnapshot",value:function createSnapshot(BOM){return new PieceTreeSnapshot(this,BOM);}},{key:"getOffsetAt",value:function getOffsetAt(lineNumber,column){var leftLen=0;// inorder
var x=this.root;while(x!==rbTreeBase_SENTINEL){if(x.left!==rbTreeBase_SENTINEL&&x.lf_left+1>=lineNumber){x=x.left;}else if(x.lf_left+x.piece.lineFeedCnt+1>=lineNumber){leftLen+=x.size_left;// lineNumber >= 2
var accumualtedValInCurrentIndex=this.getAccumulatedValue(x,lineNumber-x.lf_left-2);return leftLen+=accumualtedValInCurrentIndex+column-1;}else{lineNumber-=x.lf_left+x.piece.lineFeedCnt;leftLen+=x.size_left+x.piece.length;x=x.right;}}return leftLen;}},{key:"getPositionAt",value:function getPositionAt(offset){offset=Math.floor(offset);offset=Math.max(0,offset);var x=this.root;var lfCnt=0;var originalOffset=offset;while(x!==rbTreeBase_SENTINEL){if(x.size_left!==0&&x.size_left>=offset){x=x.left;}else if(x.size_left+x.piece.length>=offset){var out=this.getIndexOf(x,offset-x.size_left);lfCnt+=x.lf_left+out.index;if(out.index===0){var lineStartOffset=this.getOffsetAt(lfCnt+1,1);var column=originalOffset-lineStartOffset;return new core_position/* Position */.L(lfCnt+1,column+1);}return new core_position/* Position */.L(lfCnt+1,out.remainder+1);}else{offset-=x.size_left+x.piece.length;lfCnt+=x.lf_left+x.piece.lineFeedCnt;if(x.right===rbTreeBase_SENTINEL){// last node
var _lineStartOffset=this.getOffsetAt(lfCnt+1,1);var _column=originalOffset-offset-_lineStartOffset;return new core_position/* Position */.L(lfCnt+1,_column+1);}else{x=x.right;}}}return new core_position/* Position */.L(1,1);}},{key:"getValueInRange",value:function getValueInRange(range,eol){if(range.startLineNumber===range.endLineNumber&&range.startColumn===range.endColumn){return'';}var startPosition=this.nodeAt2(range.startLineNumber,range.startColumn);var endPosition=this.nodeAt2(range.endLineNumber,range.endColumn);var value=this.getValueInRange2(startPosition,endPosition);if(eol){if(eol!==this._EOL||!this._EOLNormalized){return value.replace(/\r\n|\r|\n/g,eol);}if(eol===this.getEOL()&&this._EOLNormalized){if(eol==='\r\n'){}return value;}return value.replace(/\r\n|\r|\n/g,eol);}return value;}},{key:"getValueInRange2",value:function getValueInRange2(startPosition,endPosition){if(startPosition.node===endPosition.node){var node=startPosition.node;var _buffer=this._buffers[node.piece.bufferIndex].buffer;var _startOffset=this.offsetInBuffer(node.piece.bufferIndex,node.piece.start);return _buffer.substring(_startOffset+startPosition.remainder,_startOffset+endPosition.remainder);}var x=startPosition.node;var buffer=this._buffers[x.piece.bufferIndex].buffer;var startOffset=this.offsetInBuffer(x.piece.bufferIndex,x.piece.start);var ret=buffer.substring(startOffset+startPosition.remainder,startOffset+x.piece.length);x=x.next();while(x!==rbTreeBase_SENTINEL){var _buffer2=this._buffers[x.piece.bufferIndex].buffer;var _startOffset2=this.offsetInBuffer(x.piece.bufferIndex,x.piece.start);if(x===endPosition.node){ret+=_buffer2.substring(_startOffset2,_startOffset2+endPosition.remainder);break;}else{ret+=_buffer2.substr(_startOffset2,x.piece.length);}x=x.next();}return ret;}},{key:"getLinesContent",value:function getLinesContent(){var _this3=this;var lines=[];var linesLength=0;var currentLine='';var danglingCR=false;this.iterate(this.root,function(node){if(node===rbTreeBase_SENTINEL){return true;}var piece=node.piece;var pieceLength=piece.length;if(pieceLength===0){return true;}var buffer=_this3._buffers[piece.bufferIndex].buffer;var lineStarts=_this3._buffers[piece.bufferIndex].lineStarts;var pieceStartLine=piece.start.line;var pieceEndLine=piece.end.line;var pieceStartOffset=lineStarts[pieceStartLine]+piece.start.column;if(danglingCR){if(buffer.charCodeAt(pieceStartOffset)===10/* LineFeed */){// pretend the \n was in the previous piece..
pieceStartOffset++;pieceLength--;}lines[linesLength++]=currentLine;currentLine='';danglingCR=false;if(pieceLength===0){return true;}}if(pieceStartLine===pieceEndLine){// this piece has no new lines
if(!_this3._EOLNormalized&&buffer.charCodeAt(pieceStartOffset+pieceLength-1)===13/* CarriageReturn */){danglingCR=true;currentLine+=buffer.substr(pieceStartOffset,pieceLength-1);}else{currentLine+=buffer.substr(pieceStartOffset,pieceLength);}return true;}// add the text before the first line start in this piece
currentLine+=_this3._EOLNormalized?buffer.substring(pieceStartOffset,Math.max(pieceStartOffset,lineStarts[pieceStartLine+1]-_this3._EOLLength)):buffer.substring(pieceStartOffset,lineStarts[pieceStartLine+1]).replace(/(\r\n|\r|\n)$/,'');lines[linesLength++]=currentLine;for(var line=pieceStartLine+1;line<pieceEndLine;line++){currentLine=_this3._EOLNormalized?buffer.substring(lineStarts[line],lineStarts[line+1]-_this3._EOLLength):buffer.substring(lineStarts[line],lineStarts[line+1]).replace(/(\r\n|\r|\n)$/,'');lines[linesLength++]=currentLine;}if(!_this3._EOLNormalized&&buffer.charCodeAt(lineStarts[pieceEndLine]+piece.end.column-1)===13/* CarriageReturn */){danglingCR=true;if(piece.end.column===0){// The last line ended with a \r, let's undo the push, it will be pushed by next iteration
linesLength--;}else{currentLine=buffer.substr(lineStarts[pieceEndLine],piece.end.column-1);}}else{currentLine=buffer.substr(lineStarts[pieceEndLine],piece.end.column);}return true;});if(danglingCR){lines[linesLength++]=currentLine;currentLine='';}lines[linesLength++]=currentLine;return lines;}},{key:"getLength",value:function getLength(){return this._length;}},{key:"getLineCount",value:function getLineCount(){return this._lineCnt;}},{key:"getLineContent",value:function getLineContent(lineNumber){if(this._lastVisitedLine.lineNumber===lineNumber){return this._lastVisitedLine.value;}this._lastVisitedLine.lineNumber=lineNumber;if(lineNumber===this._lineCnt){this._lastVisitedLine.value=this.getLineRawContent(lineNumber);}else if(this._EOLNormalized){this._lastVisitedLine.value=this.getLineRawContent(lineNumber,this._EOLLength);}else{this._lastVisitedLine.value=this.getLineRawContent(lineNumber).replace(/(\r\n|\r|\n)$/,'');}return this._lastVisitedLine.value;}},{key:"_getCharCode",value:function _getCharCode(nodePos){if(nodePos.remainder===nodePos.node.piece.length){// the char we want to fetch is at the head of next node.
var matchingNode=nodePos.node.next();if(!matchingNode){return 0;}var buffer=this._buffers[matchingNode.piece.bufferIndex];var startOffset=this.offsetInBuffer(matchingNode.piece.bufferIndex,matchingNode.piece.start);return buffer.buffer.charCodeAt(startOffset);}else{var _buffer3=this._buffers[nodePos.node.piece.bufferIndex];var _startOffset3=this.offsetInBuffer(nodePos.node.piece.bufferIndex,nodePos.node.piece.start);var targetOffset=_startOffset3+nodePos.remainder;return _buffer3.buffer.charCodeAt(targetOffset);}}},{key:"getLineCharCode",value:function getLineCharCode(lineNumber,index){var nodePos=this.nodeAt2(lineNumber,index+1);return this._getCharCode(nodePos);}},{key:"getLineLength",value:function getLineLength(lineNumber){if(lineNumber===this.getLineCount()){var startOffset=this.getOffsetAt(lineNumber,1);return this.getLength()-startOffset;}return this.getOffsetAt(lineNumber+1,1)-this.getOffsetAt(lineNumber,1)-this._EOLLength;}},{key:"findMatchesInNode",value:function findMatchesInNode(node,searcher,startLineNumber,startColumn,startCursor,endCursor,searchData,captureMatches,limitResultCount,resultLen,result){var buffer=this._buffers[node.piece.bufferIndex];var startOffsetInBuffer=this.offsetInBuffer(node.piece.bufferIndex,node.piece.start);var start=this.offsetInBuffer(node.piece.bufferIndex,startCursor);var end=this.offsetInBuffer(node.piece.bufferIndex,endCursor);var m;// Reset regex to search from the beginning
var ret={line:0,column:0};var searchText;var offsetInBuffer;if(searcher._wordSeparators){searchText=buffer.buffer.substring(start,end);offsetInBuffer=function offsetInBuffer(offset){return offset+start;};searcher.reset(0);}else{searchText=buffer.buffer;offsetInBuffer=function offsetInBuffer(offset){return offset;};searcher.reset(start);}do{m=searcher.next(searchText);if(m){if(offsetInBuffer(m.index)>=end){return resultLen;}this.positionInBuffer(node,offsetInBuffer(m.index)-startOffsetInBuffer,ret);var lineFeedCnt=this.getLineFeedCnt(node.piece.bufferIndex,startCursor,ret);var retStartColumn=ret.line===startCursor.line?ret.column-startCursor.column+startColumn:ret.column+1;var retEndColumn=retStartColumn+m[0].length;result[resultLen++]=(0,textModelSearch/* createFindMatch */.iE)(new core_range/* Range */.e(startLineNumber+lineFeedCnt,retStartColumn,startLineNumber+lineFeedCnt,retEndColumn),m,captureMatches);if(offsetInBuffer(m.index)+m[0].length>=end){return resultLen;}if(resultLen>=limitResultCount){return resultLen;}}}while(m);return resultLen;}},{key:"findMatchesLineByLine",value:function findMatchesLineByLine(searchRange,searchData,captureMatches,limitResultCount){var result=[];var resultLen=0;var searcher=new textModelSearch/* Searcher */.sz(searchData.wordSeparators,searchData.regex);var startPosition=this.nodeAt2(searchRange.startLineNumber,searchRange.startColumn);if(startPosition===null){return[];}var endPosition=this.nodeAt2(searchRange.endLineNumber,searchRange.endColumn);if(endPosition===null){return[];}var start=this.positionInBuffer(startPosition.node,startPosition.remainder);var end=this.positionInBuffer(endPosition.node,endPosition.remainder);if(startPosition.node===endPosition.node){this.findMatchesInNode(startPosition.node,searcher,searchRange.startLineNumber,searchRange.startColumn,start,end,searchData,captureMatches,limitResultCount,resultLen,result);return result;}var startLineNumber=searchRange.startLineNumber;var currentNode=startPosition.node;while(currentNode!==endPosition.node){var lineBreakCnt=this.getLineFeedCnt(currentNode.piece.bufferIndex,start,currentNode.piece.end);if(lineBreakCnt>=1){// last line break position
var lineStarts=this._buffers[currentNode.piece.bufferIndex].lineStarts;var startOffsetInBuffer=this.offsetInBuffer(currentNode.piece.bufferIndex,currentNode.piece.start);var nextLineStartOffset=lineStarts[start.line+lineBreakCnt];var _startColumn2=startLineNumber===searchRange.startLineNumber?searchRange.startColumn:1;resultLen=this.findMatchesInNode(currentNode,searcher,startLineNumber,_startColumn2,start,this.positionInBuffer(currentNode,nextLineStartOffset-startOffsetInBuffer),searchData,captureMatches,limitResultCount,resultLen,result);if(resultLen>=limitResultCount){return result;}startLineNumber+=lineBreakCnt;}var _startColumn=startLineNumber===searchRange.startLineNumber?searchRange.startColumn-1:0;// search for the remaining content
if(startLineNumber===searchRange.endLineNumber){var text=this.getLineContent(startLineNumber).substring(_startColumn,searchRange.endColumn-1);resultLen=this._findMatchesInLine(searchData,searcher,text,searchRange.endLineNumber,_startColumn,resultLen,result,captureMatches,limitResultCount);return result;}resultLen=this._findMatchesInLine(searchData,searcher,this.getLineContent(startLineNumber).substr(_startColumn),startLineNumber,_startColumn,resultLen,result,captureMatches,limitResultCount);if(resultLen>=limitResultCount){return result;}startLineNumber++;startPosition=this.nodeAt2(startLineNumber,1);currentNode=startPosition.node;start=this.positionInBuffer(startPosition.node,startPosition.remainder);}if(startLineNumber===searchRange.endLineNumber){var _startColumn3=startLineNumber===searchRange.startLineNumber?searchRange.startColumn-1:0;var _text=this.getLineContent(startLineNumber).substring(_startColumn3,searchRange.endColumn-1);resultLen=this._findMatchesInLine(searchData,searcher,_text,searchRange.endLineNumber,_startColumn3,resultLen,result,captureMatches,limitResultCount);return result;}var startColumn=startLineNumber===searchRange.startLineNumber?searchRange.startColumn:1;resultLen=this.findMatchesInNode(endPosition.node,searcher,startLineNumber,startColumn,start,end,searchData,captureMatches,limitResultCount,resultLen,result);return result;}},{key:"_findMatchesInLine",value:function _findMatchesInLine(searchData,searcher,text,lineNumber,deltaOffset,resultLen,result,captureMatches,limitResultCount){var wordSeparators=searchData.wordSeparators;if(!captureMatches&&searchData.simpleSearch){var searchString=searchData.simpleSearch;var searchStringLen=searchString.length;var textLength=text.length;var lastMatchIndex=-searchStringLen;while((lastMatchIndex=text.indexOf(searchString,lastMatchIndex+searchStringLen))!==-1){if(!wordSeparators||(0,textModelSearch/* isValidMatch */.cM)(wordSeparators,text,textLength,lastMatchIndex,searchStringLen)){result[resultLen++]=new model/* FindMatch */.tk(new core_range/* Range */.e(lineNumber,lastMatchIndex+1+deltaOffset,lineNumber,lastMatchIndex+1+searchStringLen+deltaOffset),null);if(resultLen>=limitResultCount){return resultLen;}}}return resultLen;}var m;// Reset regex to search from the beginning
searcher.reset(0);do{m=searcher.next(text);if(m){result[resultLen++]=(0,textModelSearch/* createFindMatch */.iE)(new core_range/* Range */.e(lineNumber,m.index+1+deltaOffset,lineNumber,m.index+1+m[0].length+deltaOffset),m,captureMatches);if(resultLen>=limitResultCount){return resultLen;}}}while(m);return resultLen;}// #endregion
// #region Piece Table
},{key:"insert",value:function insert(offset,value){var eolNormalized=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;this._EOLNormalized=this._EOLNormalized&&eolNormalized;this._lastVisitedLine.lineNumber=0;this._lastVisitedLine.value='';if(this.root!==rbTreeBase_SENTINEL){var _this$nodeAt=this.nodeAt(offset),node=_this$nodeAt.node,remainder=_this$nodeAt.remainder,nodeStartOffset=_this$nodeAt.nodeStartOffset;var piece=node.piece;var bufferIndex=piece.bufferIndex;var insertPosInBuffer=this.positionInBuffer(node,remainder);if(node.piece.bufferIndex===0&&piece.end.line===this._lastChangeBufferPos.line&&piece.end.column===this._lastChangeBufferPos.column&&nodeStartOffset+piece.length===offset&&value.length<AverageBufferSize){// changed buffer
this.appendToNode(node,value);this.computeBufferMetadata();return;}if(nodeStartOffset===offset){this.insertContentToNodeLeft(value,node);this._searchCache.validate(offset);}else if(nodeStartOffset+node.piece.length>offset){// we are inserting into the middle of a node.
var nodesToDel=[];var newRightPiece=new Piece(piece.bufferIndex,insertPosInBuffer,piece.end,this.getLineFeedCnt(piece.bufferIndex,insertPosInBuffer,piece.end),this.offsetInBuffer(bufferIndex,piece.end)-this.offsetInBuffer(bufferIndex,insertPosInBuffer));if(this.shouldCheckCRLF()&&this.endWithCR(value)){var headOfRight=this.nodeCharCodeAt(node,remainder);if(headOfRight===10/** \n */){var newStart={line:newRightPiece.start.line+1,column:0};newRightPiece=new Piece(newRightPiece.bufferIndex,newStart,newRightPiece.end,this.getLineFeedCnt(newRightPiece.bufferIndex,newStart,newRightPiece.end),newRightPiece.length-1);value+='\n';}}// reuse node for content before insertion point.
if(this.shouldCheckCRLF()&&this.startWithLF(value)){var tailOfLeft=this.nodeCharCodeAt(node,remainder-1);if(tailOfLeft===13/** \r */){var previousPos=this.positionInBuffer(node,remainder-1);this.deleteNodeTail(node,previousPos);value='\r'+value;if(node.piece.length===0){nodesToDel.push(node);}}else{this.deleteNodeTail(node,insertPosInBuffer);}}else{this.deleteNodeTail(node,insertPosInBuffer);}var newPieces=this.createNewPieces(value);if(newRightPiece.length>0){this.rbInsertRight(node,newRightPiece);}var tmpNode=node;for(var k=0;k<newPieces.length;k++){tmpNode=this.rbInsertRight(tmpNode,newPieces[k]);}this.deleteNodes(nodesToDel);}else{this.insertContentToNodeRight(value,node);}}else{// insert new node
var pieces=this.createNewPieces(value);var _node=this.rbInsertLeft(null,pieces[0]);for(var _k=1;_k<pieces.length;_k++){_node=this.rbInsertRight(_node,pieces[_k]);}}// todo, this is too brutal. Total line feed count should be updated the same way as lf_left.
this.computeBufferMetadata();}},{key:"delete",value:function _delete(offset,cnt){this._lastVisitedLine.lineNumber=0;this._lastVisitedLine.value='';if(cnt<=0||this.root===rbTreeBase_SENTINEL){return;}var startPosition=this.nodeAt(offset);var endPosition=this.nodeAt(offset+cnt);var startNode=startPosition.node;var endNode=endPosition.node;if(startNode===endNode){var _startSplitPosInBuffer=this.positionInBuffer(startNode,startPosition.remainder);var _endSplitPosInBuffer=this.positionInBuffer(startNode,endPosition.remainder);if(startPosition.nodeStartOffset===offset){if(cnt===startNode.piece.length){// delete node
var next=startNode.next();rbDelete(this,startNode);this.validateCRLFWithPrevNode(next);this.computeBufferMetadata();return;}this.deleteNodeHead(startNode,_endSplitPosInBuffer);this._searchCache.validate(offset);this.validateCRLFWithPrevNode(startNode);this.computeBufferMetadata();return;}if(startPosition.nodeStartOffset+startNode.piece.length===offset+cnt){this.deleteNodeTail(startNode,_startSplitPosInBuffer);this.validateCRLFWithNextNode(startNode);this.computeBufferMetadata();return;}// delete content in the middle, this node will be splitted to nodes
this.shrinkNode(startNode,_startSplitPosInBuffer,_endSplitPosInBuffer);this.computeBufferMetadata();return;}var nodesToDel=[];var startSplitPosInBuffer=this.positionInBuffer(startNode,startPosition.remainder);this.deleteNodeTail(startNode,startSplitPosInBuffer);this._searchCache.validate(offset);if(startNode.piece.length===0){nodesToDel.push(startNode);}// update last touched node
var endSplitPosInBuffer=this.positionInBuffer(endNode,endPosition.remainder);this.deleteNodeHead(endNode,endSplitPosInBuffer);if(endNode.piece.length===0){nodesToDel.push(endNode);}// delete nodes in between
var secondNode=startNode.next();for(var node=secondNode;node!==rbTreeBase_SENTINEL&&node!==endNode;node=node.next()){nodesToDel.push(node);}var prev=startNode.piece.length===0?startNode.prev():startNode;this.deleteNodes(nodesToDel);this.validateCRLFWithNextNode(prev);this.computeBufferMetadata();}},{key:"insertContentToNodeLeft",value:function insertContentToNodeLeft(value,node){// we are inserting content to the beginning of node
var nodesToDel=[];if(this.shouldCheckCRLF()&&this.endWithCR(value)&&this.startWithLF(node)){// move `\n` to new node.
var piece=node.piece;var newStart={line:piece.start.line+1,column:0};var nPiece=new Piece(piece.bufferIndex,newStart,piece.end,this.getLineFeedCnt(piece.bufferIndex,newStart,piece.end),piece.length-1);node.piece=nPiece;value+='\n';updateTreeMetadata(this,node,-1,-1);if(node.piece.length===0){nodesToDel.push(node);}}var newPieces=this.createNewPieces(value);var newNode=this.rbInsertLeft(node,newPieces[newPieces.length-1]);for(var k=newPieces.length-2;k>=0;k--){newNode=this.rbInsertLeft(newNode,newPieces[k]);}this.validateCRLFWithPrevNode(newNode);this.deleteNodes(nodesToDel);}},{key:"insertContentToNodeRight",value:function insertContentToNodeRight(value,node){// we are inserting to the right of this node.
if(this.adjustCarriageReturnFromNext(value,node)){// move \n to the new node.
value+='\n';}var newPieces=this.createNewPieces(value);var newNode=this.rbInsertRight(node,newPieces[0]);var tmpNode=newNode;for(var k=1;k<newPieces.length;k++){tmpNode=this.rbInsertRight(tmpNode,newPieces[k]);}this.validateCRLFWithPrevNode(newNode);}},{key:"positionInBuffer",value:function positionInBuffer(node,remainder,ret){var piece=node.piece;var bufferIndex=node.piece.bufferIndex;var lineStarts=this._buffers[bufferIndex].lineStarts;var startOffset=lineStarts[piece.start.line]+piece.start.column;var offset=startOffset+remainder;// binary search offset between startOffset and endOffset
var low=piece.start.line;var high=piece.end.line;var mid=0;var midStop=0;var midStart=0;while(low<=high){mid=low+(high-low)/2|0;midStart=lineStarts[mid];if(mid===high){break;}midStop=lineStarts[mid+1];if(offset<midStart){high=mid-1;}else if(offset>=midStop){low=mid+1;}else{break;}}if(ret){ret.line=mid;ret.column=offset-midStart;return null;}return{line:mid,column:offset-midStart};}},{key:"getLineFeedCnt",value:function getLineFeedCnt(bufferIndex,start,end){// we don't need to worry about start: abc\r|\n, or abc|\r, or abc|\n, or abc|\r\n doesn't change the fact that, there is one line break after start.
// now let's take care of end: abc\r|\n, if end is in between \r and \n, we need to add line feed count by 1
if(end.column===0){return end.line-start.line;}var lineStarts=this._buffers[bufferIndex].lineStarts;if(end.line===lineStarts.length-1){// it means, there is no \n after end, otherwise, there will be one more lineStart.
return end.line-start.line;}var nextLineStartOffset=lineStarts[end.line+1];var endOffset=lineStarts[end.line]+end.column;if(nextLineStartOffset>endOffset+1){// there are more than 1 character after end, which means it can't be \n
return end.line-start.line;}// endOffset + 1 === nextLineStartOffset
// character at endOffset is \n, so we check the character before first
// if character at endOffset is \r, end.column is 0 and we can't get here.
var previousCharOffset=endOffset-1;// end.column > 0 so it's okay.
var buffer=this._buffers[bufferIndex].buffer;if(buffer.charCodeAt(previousCharOffset)===13){return end.line-start.line+1;}else{return end.line-start.line;}}},{key:"offsetInBuffer",value:function offsetInBuffer(bufferIndex,cursor){var lineStarts=this._buffers[bufferIndex].lineStarts;return lineStarts[cursor.line]+cursor.column;}},{key:"deleteNodes",value:function deleteNodes(nodes){for(var i=0;i<nodes.length;i++){rbDelete(this,nodes[i]);}}},{key:"createNewPieces",value:function createNewPieces(text){if(text.length>AverageBufferSize){// the content is large, operations like substring, charCode becomes slow
// so here we split it into smaller chunks, just like what we did for CR/LF normalization
var newPieces=[];while(text.length>AverageBufferSize){var lastChar=text.charCodeAt(AverageBufferSize-1);var splitText=void 0;if(lastChar===13/* CarriageReturn */||lastChar>=0xD800&&lastChar<=0xDBFF){// last character is \r or a high surrogate => keep it back
splitText=text.substring(0,AverageBufferSize-1);text=text.substring(AverageBufferSize-1);}else{splitText=text.substring(0,AverageBufferSize);text=text.substring(AverageBufferSize);}var _lineStarts2=createLineStartsFast(splitText);newPieces.push(new Piece(this._buffers.length,/* buffer index */{line:0,column:0},{line:_lineStarts2.length-1,column:splitText.length-_lineStarts2[_lineStarts2.length-1]},_lineStarts2.length-1,splitText.length));this._buffers.push(new StringBuffer(splitText,_lineStarts2));}var _lineStarts=createLineStartsFast(text);newPieces.push(new Piece(this._buffers.length,/* buffer index */{line:0,column:0},{line:_lineStarts.length-1,column:text.length-_lineStarts[_lineStarts.length-1]},_lineStarts.length-1,text.length));this._buffers.push(new StringBuffer(text,_lineStarts));return newPieces;}var startOffset=this._buffers[0].buffer.length;var lineStarts=createLineStartsFast(text,false);var start=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===startOffset&&startOffset!==0&&this.startWithLF(text)&&this.endWithCR(this._buffers[0].buffer)// todo, we can check this._lastChangeBufferPos's column as it's the last one
){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1};start=this._lastChangeBufferPos;for(var i=0;i<lineStarts.length;i++){lineStarts[i]+=startOffset+1;}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(lineStarts.slice(1));this._buffers[0].buffer+='_'+text;startOffset+=1;}else{if(startOffset!==0){for(var _i=0;_i<lineStarts.length;_i++){lineStarts[_i]+=startOffset;}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(lineStarts.slice(1));this._buffers[0].buffer+=text;}var endOffset=this._buffers[0].buffer.length;var endIndex=this._buffers[0].lineStarts.length-1;var endColumn=endOffset-this._buffers[0].lineStarts[endIndex];var endPos={line:endIndex,column:endColumn};var newPiece=new Piece(0,/** todo@peng */start,endPos,this.getLineFeedCnt(0,start,endPos),endOffset-startOffset);this._lastChangeBufferPos=endPos;return[newPiece];}},{key:"getLineRawContent",value:function getLineRawContent(lineNumber){var endOffset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var x=this.root;var ret='';var cache=this._searchCache.get2(lineNumber);if(cache){x=cache.node;var prevAccumulatedValue=this.getAccumulatedValue(x,lineNumber-cache.nodeStartLineNumber-1);var buffer=this._buffers[x.piece.bufferIndex].buffer;var startOffset=this.offsetInBuffer(x.piece.bufferIndex,x.piece.start);if(cache.nodeStartLineNumber+x.piece.lineFeedCnt===lineNumber){ret=buffer.substring(startOffset+prevAccumulatedValue,startOffset+x.piece.length);}else{var accumulatedValue=this.getAccumulatedValue(x,lineNumber-cache.nodeStartLineNumber);return buffer.substring(startOffset+prevAccumulatedValue,startOffset+accumulatedValue-endOffset);}}else{var nodeStartOffset=0;var originalLineNumber=lineNumber;while(x!==rbTreeBase_SENTINEL){if(x.left!==rbTreeBase_SENTINEL&&x.lf_left>=lineNumber-1){x=x.left;}else if(x.lf_left+x.piece.lineFeedCnt>lineNumber-1){var _prevAccumulatedValue=this.getAccumulatedValue(x,lineNumber-x.lf_left-2);var _accumulatedValue=this.getAccumulatedValue(x,lineNumber-x.lf_left-1);var _buffer4=this._buffers[x.piece.bufferIndex].buffer;var _startOffset4=this.offsetInBuffer(x.piece.bufferIndex,x.piece.start);nodeStartOffset+=x.size_left;this._searchCache.set({node:x,nodeStartOffset:nodeStartOffset,nodeStartLineNumber:originalLineNumber-(lineNumber-1-x.lf_left)});return _buffer4.substring(_startOffset4+_prevAccumulatedValue,_startOffset4+_accumulatedValue-endOffset);}else if(x.lf_left+x.piece.lineFeedCnt===lineNumber-1){var _prevAccumulatedValue2=this.getAccumulatedValue(x,lineNumber-x.lf_left-2);var _buffer5=this._buffers[x.piece.bufferIndex].buffer;var _startOffset5=this.offsetInBuffer(x.piece.bufferIndex,x.piece.start);ret=_buffer5.substring(_startOffset5+_prevAccumulatedValue2,_startOffset5+x.piece.length);break;}else{lineNumber-=x.lf_left+x.piece.lineFeedCnt;nodeStartOffset+=x.size_left+x.piece.length;x=x.right;}}}// search in order, to find the node contains end column
x=x.next();while(x!==rbTreeBase_SENTINEL){var _buffer6=this._buffers[x.piece.bufferIndex].buffer;if(x.piece.lineFeedCnt>0){var _accumulatedValue2=this.getAccumulatedValue(x,0);var _startOffset6=this.offsetInBuffer(x.piece.bufferIndex,x.piece.start);ret+=_buffer6.substring(_startOffset6,_startOffset6+_accumulatedValue2-endOffset);return ret;}else{var _startOffset7=this.offsetInBuffer(x.piece.bufferIndex,x.piece.start);ret+=_buffer6.substr(_startOffset7,x.piece.length);}x=x.next();}return ret;}},{key:"computeBufferMetadata",value:function computeBufferMetadata(){var x=this.root;var lfCnt=1;var len=0;while(x!==rbTreeBase_SENTINEL){lfCnt+=x.lf_left+x.piece.lineFeedCnt;len+=x.size_left+x.piece.length;x=x.right;}this._lineCnt=lfCnt;this._length=len;this._searchCache.validate(this._length);}// #region node operations
},{key:"getIndexOf",value:function getIndexOf(node,accumulatedValue){var piece=node.piece;var pos=this.positionInBuffer(node,accumulatedValue);var lineCnt=pos.line-piece.start.line;if(this.offsetInBuffer(piece.bufferIndex,piece.end)-this.offsetInBuffer(piece.bufferIndex,piece.start)===accumulatedValue){// we are checking the end of this node, so a CRLF check is necessary.
var realLineCnt=this.getLineFeedCnt(node.piece.bufferIndex,piece.start,pos);if(realLineCnt!==lineCnt){// aha yes, CRLF
return{index:realLineCnt,remainder:0};}}return{index:lineCnt,remainder:pos.column};}},{key:"getAccumulatedValue",value:function getAccumulatedValue(node,index){if(index<0){return 0;}var piece=node.piece;var lineStarts=this._buffers[piece.bufferIndex].lineStarts;var expectedLineStartIndex=piece.start.line+index+1;if(expectedLineStartIndex>piece.end.line){return lineStarts[piece.end.line]+piece.end.column-lineStarts[piece.start.line]-piece.start.column;}else{return lineStarts[expectedLineStartIndex]-lineStarts[piece.start.line]-piece.start.column;}}},{key:"deleteNodeTail",value:function deleteNodeTail(node,pos){var piece=node.piece;var originalLFCnt=piece.lineFeedCnt;var originalEndOffset=this.offsetInBuffer(piece.bufferIndex,piece.end);var newEnd=pos;var newEndOffset=this.offsetInBuffer(piece.bufferIndex,newEnd);var newLineFeedCnt=this.getLineFeedCnt(piece.bufferIndex,piece.start,newEnd);var lf_delta=newLineFeedCnt-originalLFCnt;var size_delta=newEndOffset-originalEndOffset;var newLength=piece.length+size_delta;node.piece=new Piece(piece.bufferIndex,piece.start,newEnd,newLineFeedCnt,newLength);updateTreeMetadata(this,node,size_delta,lf_delta);}},{key:"deleteNodeHead",value:function deleteNodeHead(node,pos){var piece=node.piece;var originalLFCnt=piece.lineFeedCnt;var originalStartOffset=this.offsetInBuffer(piece.bufferIndex,piece.start);var newStart=pos;var newLineFeedCnt=this.getLineFeedCnt(piece.bufferIndex,newStart,piece.end);var newStartOffset=this.offsetInBuffer(piece.bufferIndex,newStart);var lf_delta=newLineFeedCnt-originalLFCnt;var size_delta=originalStartOffset-newStartOffset;var newLength=piece.length+size_delta;node.piece=new Piece(piece.bufferIndex,newStart,piece.end,newLineFeedCnt,newLength);updateTreeMetadata(this,node,size_delta,lf_delta);}},{key:"shrinkNode",value:function shrinkNode(node,start,end){var piece=node.piece;var originalStartPos=piece.start;var originalEndPos=piece.end;// old piece, originalStartPos, start
var oldLength=piece.length;var oldLFCnt=piece.lineFeedCnt;var newEnd=start;var newLineFeedCnt=this.getLineFeedCnt(piece.bufferIndex,piece.start,newEnd);var newLength=this.offsetInBuffer(piece.bufferIndex,start)-this.offsetInBuffer(piece.bufferIndex,originalStartPos);node.piece=new Piece(piece.bufferIndex,piece.start,newEnd,newLineFeedCnt,newLength);updateTreeMetadata(this,node,newLength-oldLength,newLineFeedCnt-oldLFCnt);// new right piece, end, originalEndPos
var newPiece=new Piece(piece.bufferIndex,end,originalEndPos,this.getLineFeedCnt(piece.bufferIndex,end,originalEndPos),this.offsetInBuffer(piece.bufferIndex,originalEndPos)-this.offsetInBuffer(piece.bufferIndex,end));var newNode=this.rbInsertRight(node,newPiece);this.validateCRLFWithPrevNode(newNode);}},{key:"appendToNode",value:function appendToNode(node,value){if(this.adjustCarriageReturnFromNext(value,node)){value+='\n';}var hitCRLF=this.shouldCheckCRLF()&&this.startWithLF(value)&&this.endWithCR(node);var startOffset=this._buffers[0].buffer.length;this._buffers[0].buffer+=value;var lineStarts=createLineStartsFast(value,false);for(var i=0;i<lineStarts.length;i++){lineStarts[i]+=startOffset;}if(hitCRLF){var prevStartOffset=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop();// _lastChangeBufferPos is already wrong
this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:startOffset-prevStartOffset};}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(lineStarts.slice(1));var endIndex=this._buffers[0].lineStarts.length-1;var endColumn=this._buffers[0].buffer.length-this._buffers[0].lineStarts[endIndex];var newEnd={line:endIndex,column:endColumn};var newLength=node.piece.length+value.length;var oldLineFeedCnt=node.piece.lineFeedCnt;var newLineFeedCnt=this.getLineFeedCnt(0,node.piece.start,newEnd);var lf_delta=newLineFeedCnt-oldLineFeedCnt;node.piece=new Piece(node.piece.bufferIndex,node.piece.start,newEnd,newLineFeedCnt,newLength);this._lastChangeBufferPos=newEnd;updateTreeMetadata(this,node,value.length,lf_delta);}},{key:"nodeAt",value:function nodeAt(offset){var x=this.root;var cache=this._searchCache.get(offset);if(cache){return{node:cache.node,nodeStartOffset:cache.nodeStartOffset,remainder:offset-cache.nodeStartOffset};}var nodeStartOffset=0;while(x!==rbTreeBase_SENTINEL){if(x.size_left>offset){x=x.left;}else if(x.size_left+x.piece.length>=offset){nodeStartOffset+=x.size_left;var ret={node:x,remainder:offset-x.size_left,nodeStartOffset:nodeStartOffset};this._searchCache.set(ret);return ret;}else{offset-=x.size_left+x.piece.length;nodeStartOffset+=x.size_left+x.piece.length;x=x.right;}}return null;}},{key:"nodeAt2",value:function nodeAt2(lineNumber,column){var x=this.root;var nodeStartOffset=0;while(x!==rbTreeBase_SENTINEL){if(x.left!==rbTreeBase_SENTINEL&&x.lf_left>=lineNumber-1){x=x.left;}else if(x.lf_left+x.piece.lineFeedCnt>lineNumber-1){var prevAccumualtedValue=this.getAccumulatedValue(x,lineNumber-x.lf_left-2);var accumulatedValue=this.getAccumulatedValue(x,lineNumber-x.lf_left-1);nodeStartOffset+=x.size_left;return{node:x,remainder:Math.min(prevAccumualtedValue+column-1,accumulatedValue),nodeStartOffset:nodeStartOffset};}else if(x.lf_left+x.piece.lineFeedCnt===lineNumber-1){var _prevAccumualtedValue=this.getAccumulatedValue(x,lineNumber-x.lf_left-2);if(_prevAccumualtedValue+column-1<=x.piece.length){return{node:x,remainder:_prevAccumualtedValue+column-1,nodeStartOffset:nodeStartOffset};}else{column-=x.piece.length-_prevAccumualtedValue;break;}}else{lineNumber-=x.lf_left+x.piece.lineFeedCnt;nodeStartOffset+=x.size_left+x.piece.length;x=x.right;}}// search in order, to find the node contains position.column
x=x.next();while(x!==rbTreeBase_SENTINEL){if(x.piece.lineFeedCnt>0){var _accumulatedValue3=this.getAccumulatedValue(x,0);var _nodeStartOffset=this.offsetOfNode(x);return{node:x,remainder:Math.min(column-1,_accumulatedValue3),nodeStartOffset:_nodeStartOffset};}else{if(x.piece.length>=column-1){var _nodeStartOffset2=this.offsetOfNode(x);return{node:x,remainder:column-1,nodeStartOffset:_nodeStartOffset2};}else{column-=x.piece.length;}}x=x.next();}return null;}},{key:"nodeCharCodeAt",value:function nodeCharCodeAt(node,offset){if(node.piece.lineFeedCnt<1){return-1;}var buffer=this._buffers[node.piece.bufferIndex];var newOffset=this.offsetInBuffer(node.piece.bufferIndex,node.piece.start)+offset;return buffer.buffer.charCodeAt(newOffset);}},{key:"offsetOfNode",value:function offsetOfNode(node){if(!node){return 0;}var pos=node.size_left;while(node!==this.root){if(node.parent.right===node){pos+=node.parent.size_left+node.parent.piece.length;}node=node.parent;}return pos;}// #endregion
// #region CRLF
},{key:"shouldCheckCRLF",value:function shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL==='\n');}},{key:"startWithLF",value:function startWithLF(val){if(typeof val==='string'){return val.charCodeAt(0)===10;}if(val===rbTreeBase_SENTINEL||val.piece.lineFeedCnt===0){return false;}var piece=val.piece;var lineStarts=this._buffers[piece.bufferIndex].lineStarts;var line=piece.start.line;var startOffset=lineStarts[line]+piece.start.column;if(line===lineStarts.length-1){// last line, so there is no line feed at the end of this line
return false;}var nextLineOffset=lineStarts[line+1];if(nextLineOffset>startOffset+1){return false;}return this._buffers[piece.bufferIndex].buffer.charCodeAt(startOffset)===10;}},{key:"endWithCR",value:function endWithCR(val){if(typeof val==='string'){return val.charCodeAt(val.length-1)===13;}if(val===rbTreeBase_SENTINEL||val.piece.lineFeedCnt===0){return false;}return this.nodeCharCodeAt(val,val.piece.length-1)===13;}},{key:"validateCRLFWithPrevNode",value:function validateCRLFWithPrevNode(nextNode){if(this.shouldCheckCRLF()&&this.startWithLF(nextNode)){var node=nextNode.prev();if(this.endWithCR(node)){this.fixCRLF(node,nextNode);}}}},{key:"validateCRLFWithNextNode",value:function validateCRLFWithNextNode(node){if(this.shouldCheckCRLF()&&this.endWithCR(node)){var nextNode=node.next();if(this.startWithLF(nextNode)){this.fixCRLF(node,nextNode);}}}},{key:"fixCRLF",value:function fixCRLF(prev,next){var nodesToDel=[];// update node
var lineStarts=this._buffers[prev.piece.bufferIndex].lineStarts;var newEnd;if(prev.piece.end.column===0){// it means, last line ends with \r, not \r\n
newEnd={line:prev.piece.end.line-1,column:lineStarts[prev.piece.end.line]-lineStarts[prev.piece.end.line-1]-1};}else{// \r\n
newEnd={line:prev.piece.end.line,column:prev.piece.end.column-1};}var prevNewLength=prev.piece.length-1;var prevNewLFCnt=prev.piece.lineFeedCnt-1;prev.piece=new Piece(prev.piece.bufferIndex,prev.piece.start,newEnd,prevNewLFCnt,prevNewLength);updateTreeMetadata(this,prev,-1,-1);if(prev.piece.length===0){nodesToDel.push(prev);}// update nextNode
var newStart={line:next.piece.start.line+1,column:0};var newLength=next.piece.length-1;var newLineFeedCnt=this.getLineFeedCnt(next.piece.bufferIndex,newStart,next.piece.end);next.piece=new Piece(next.piece.bufferIndex,newStart,next.piece.end,newLineFeedCnt,newLength);updateTreeMetadata(this,next,-1,-1);if(next.piece.length===0){nodesToDel.push(next);}// create new piece which contains \r\n
var pieces=this.createNewPieces('\r\n');this.rbInsertRight(prev,pieces[0]);// delete empty nodes
for(var i=0;i<nodesToDel.length;i++){rbDelete(this,nodesToDel[i]);}}},{key:"adjustCarriageReturnFromNext",value:function adjustCarriageReturnFromNext(value,node){if(this.shouldCheckCRLF()&&this.endWithCR(value)){var nextNode=node.next();if(this.startWithLF(nextNode)){// move `\n` forward
value+='\n';if(nextNode.piece.length===1){rbDelete(this,nextNode);}else{var piece=nextNode.piece;var newStart={line:piece.start.line+1,column:0};var newLength=piece.length-1;var newLineFeedCnt=this.getLineFeedCnt(piece.bufferIndex,newStart,piece.end);nextNode.piece=new Piece(piece.bufferIndex,newStart,piece.end,newLineFeedCnt,newLength);updateTreeMetadata(this,nextNode,-1,-1);}return true;}}return false;}// #endregion
// #endregion
// #region Tree operations
},{key:"iterate",value:function iterate(node,callback){if(node===rbTreeBase_SENTINEL){return callback(rbTreeBase_SENTINEL);}var leftRet=this.iterate(node.left,callback);if(!leftRet){return leftRet;}return callback(node)&&this.iterate(node.right,callback);}},{key:"getNodeContent",value:function getNodeContent(node){if(node===rbTreeBase_SENTINEL){return'';}var buffer=this._buffers[node.piece.bufferIndex];var currentContent;var piece=node.piece;var startOffset=this.offsetInBuffer(piece.bufferIndex,piece.start);var endOffset=this.offsetInBuffer(piece.bufferIndex,piece.end);currentContent=buffer.buffer.substring(startOffset,endOffset);return currentContent;}},{key:"getPieceContent",value:function getPieceContent(piece){var buffer=this._buffers[piece.bufferIndex];var startOffset=this.offsetInBuffer(piece.bufferIndex,piece.start);var endOffset=this.offsetInBuffer(piece.bufferIndex,piece.end);var currentContent=buffer.buffer.substring(startOffset,endOffset);return currentContent;}/**
     *      node              node
     *     /  \              /  \
     *    a   b    <----   a    b
     *                         /
     *                        z
     */},{key:"rbInsertRight",value:function rbInsertRight(node,p){var z=new TreeNode(p,1/* Red */);z.left=rbTreeBase_SENTINEL;z.right=rbTreeBase_SENTINEL;z.parent=rbTreeBase_SENTINEL;z.size_left=0;z.lf_left=0;var x=this.root;if(x===rbTreeBase_SENTINEL){this.root=z;z.color=0/* Black */;}else if(node.right===rbTreeBase_SENTINEL){node.right=z;z.parent=node;}else{var nextNode=rbTreeBase_leftest(node.right);nextNode.left=z;z.parent=nextNode;}fixInsert(this,z);return z;}/**
     *      node              node
     *     /  \              /  \
     *    a   b     ---->   a    b
     *                       \
     *                        z
     */},{key:"rbInsertLeft",value:function rbInsertLeft(node,p){var z=new TreeNode(p,1/* Red */);z.left=rbTreeBase_SENTINEL;z.right=rbTreeBase_SENTINEL;z.parent=rbTreeBase_SENTINEL;z.size_left=0;z.lf_left=0;if(this.root===rbTreeBase_SENTINEL){this.root=z;z.color=0/* Black */;}else if(node.left===rbTreeBase_SENTINEL){node.left=z;z.parent=node;}else{var prevNode=righttest(node.left);// a
prevNode.right=z;z.parent=prevNode;}fixInsert(this,z);return z;}}]);return PieceTreeBase;}();
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/eolCounter.js
var eolCounter = __webpack_require__(82982);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/textChange.js
var textChange = __webpack_require__(5314);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer.js
function pieceTreeTextBuffer_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){pieceTreeTextBuffer_typeof=function _typeof(obj){return typeof obj;};}else{pieceTreeTextBuffer_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return pieceTreeTextBuffer_typeof(obj);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||pieceTreeTextBuffer_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function pieceTreeTextBuffer_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return pieceTreeTextBuffer_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pieceTreeTextBuffer_arrayLikeToArray(o,minLen);}function pieceTreeTextBuffer_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function pieceTreeTextBuffer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function pieceTreeTextBuffer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function pieceTreeTextBuffer_createClass(Constructor,protoProps,staticProps){if(protoProps)pieceTreeTextBuffer_defineProperties(Constructor.prototype,protoProps);if(staticProps)pieceTreeTextBuffer_defineProperties(Constructor,staticProps);return Constructor;}function pieceTreeTextBuffer_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)pieceTreeTextBuffer_setPrototypeOf(subClass,superClass);}function pieceTreeTextBuffer_setPrototypeOf(o,p){pieceTreeTextBuffer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return pieceTreeTextBuffer_setPrototypeOf(o,p);}function pieceTreeTextBuffer_createSuper(Derived){var hasNativeReflectConstruct=pieceTreeTextBuffer_isNativeReflectConstruct();return function _createSuperInternal(){var Super=pieceTreeTextBuffer_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=pieceTreeTextBuffer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return pieceTreeTextBuffer_possibleConstructorReturn(this,result);};}function pieceTreeTextBuffer_possibleConstructorReturn(self,call){if(call&&(pieceTreeTextBuffer_typeof(call)==="object"||typeof call==="function")){return call;}return pieceTreeTextBuffer_assertThisInitialized(self);}function pieceTreeTextBuffer_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function pieceTreeTextBuffer_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function pieceTreeTextBuffer_getPrototypeOf(o){pieceTreeTextBuffer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return pieceTreeTextBuffer_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var PieceTreeTextBuffer=/*#__PURE__*/function(_Disposable){pieceTreeTextBuffer_inherits(PieceTreeTextBuffer,_Disposable);var _super=pieceTreeTextBuffer_createSuper(PieceTreeTextBuffer);function PieceTreeTextBuffer(chunks,BOM,eol,containsRTL,containsUnusualLineTerminators,isBasicASCII,eolNormalized){var _this;pieceTreeTextBuffer_classCallCheck(this,PieceTreeTextBuffer);_this=_super.call(this);_this._onDidChangeContent=_this._register(new common_event/* Emitter */.Q5());_this._BOM=BOM;_this._mightContainNonBasicASCII=!isBasicASCII;_this._mightContainRTL=containsRTL;_this._mightContainUnusualLineTerminators=containsUnusualLineTerminators;_this._pieceTree=new PieceTreeBase(chunks,eol,eolNormalized);return _this;}pieceTreeTextBuffer_createClass(PieceTreeTextBuffer,[{key:"mightContainRTL",value:function mightContainRTL(){return this._mightContainRTL;}},{key:"mightContainUnusualLineTerminators",value:function mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators;}},{key:"resetMightContainUnusualLineTerminators",value:function resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=false;}},{key:"mightContainNonBasicASCII",value:function mightContainNonBasicASCII(){return this._mightContainNonBasicASCII;}},{key:"getBOM",value:function getBOM(){return this._BOM;}},{key:"getEOL",value:function getEOL(){return this._pieceTree.getEOL();}},{key:"createSnapshot",value:function createSnapshot(preserveBOM){return this._pieceTree.createSnapshot(preserveBOM?this._BOM:'');}},{key:"getOffsetAt",value:function getOffsetAt(lineNumber,column){return this._pieceTree.getOffsetAt(lineNumber,column);}},{key:"getPositionAt",value:function getPositionAt(offset){return this._pieceTree.getPositionAt(offset);}},{key:"getRangeAt",value:function getRangeAt(start,length){var end=start+length;var startPosition=this.getPositionAt(start);var endPosition=this.getPositionAt(end);return new core_range/* Range */.e(startPosition.lineNumber,startPosition.column,endPosition.lineNumber,endPosition.column);}},{key:"getValueInRange",value:function getValueInRange(range)/* TextDefined */{var eol=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(range.isEmpty()){return'';}var lineEnding=this._getEndOfLine(eol);return this._pieceTree.getValueInRange(range,lineEnding);}},{key:"getValueLengthInRange",value:function getValueLengthInRange(range)/* TextDefined */{var eol=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(range.isEmpty()){return 0;}if(range.startLineNumber===range.endLineNumber){return range.endColumn-range.startColumn;}var startOffset=this.getOffsetAt(range.startLineNumber,range.startColumn);var endOffset=this.getOffsetAt(range.endLineNumber,range.endColumn);return endOffset-startOffset;}},{key:"getCharacterCountInRange",value:function getCharacterCountInRange(range)/* TextDefined */{var eol=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(this._mightContainNonBasicASCII){// we must count by iterating
var result=0;var fromLineNumber=range.startLineNumber;var toLineNumber=range.endLineNumber;for(var lineNumber=fromLineNumber;lineNumber<=toLineNumber;lineNumber++){var lineContent=this.getLineContent(lineNumber);var fromOffset=lineNumber===fromLineNumber?range.startColumn-1:0;var toOffset=lineNumber===toLineNumber?range.endColumn-1:lineContent.length;for(var offset=fromOffset;offset<toOffset;offset++){if(strings/* isHighSurrogate */.ZG(lineContent.charCodeAt(offset))){result=result+1;offset=offset+1;}else{result=result+1;}}}result+=this._getEndOfLine(eol).length*(toLineNumber-fromLineNumber);return result;}return this.getValueLengthInRange(range,eol);}},{key:"getLength",value:function getLength(){return this._pieceTree.getLength();}},{key:"getLineCount",value:function getLineCount(){return this._pieceTree.getLineCount();}},{key:"getLinesContent",value:function getLinesContent(){return this._pieceTree.getLinesContent();}},{key:"getLineContent",value:function getLineContent(lineNumber){return this._pieceTree.getLineContent(lineNumber);}},{key:"getLineCharCode",value:function getLineCharCode(lineNumber,index){return this._pieceTree.getLineCharCode(lineNumber,index);}},{key:"getLineLength",value:function getLineLength(lineNumber){return this._pieceTree.getLineLength(lineNumber);}},{key:"getLineFirstNonWhitespaceColumn",value:function getLineFirstNonWhitespaceColumn(lineNumber){var result=strings/* firstNonWhitespaceIndex */.LC(this.getLineContent(lineNumber));if(result===-1){return 0;}return result+1;}},{key:"getLineLastNonWhitespaceColumn",value:function getLineLastNonWhitespaceColumn(lineNumber){var result=strings/* lastNonWhitespaceIndex */.ow(this.getLineContent(lineNumber));if(result===-1){return 0;}return result+2;}},{key:"_getEndOfLine",value:function _getEndOfLine(eol){switch(eol){case 1/* LF */:return'\n';case 2/* CRLF */:return'\r\n';case 0/* TextDefined */:return this.getEOL();default:throw new Error('Unknown EOL preference');}}},{key:"setEOL",value:function setEOL(newEOL){this._pieceTree.setEOL(newEOL);}},{key:"applyEdits",value:function applyEdits(rawOperations,recordTrimAutoWhitespace,computeUndoEdits){var mightContainRTL=this._mightContainRTL;var mightContainUnusualLineTerminators=this._mightContainUnusualLineTerminators;var mightContainNonBasicASCII=this._mightContainNonBasicASCII;var canReduceOperations=true;var operations=[];for(var i=0;i<rawOperations.length;i++){var op=rawOperations[i];if(canReduceOperations&&op._isTracked){canReduceOperations=false;}var validatedRange=op.range;if(op.text){var textMightContainNonBasicASCII=true;if(!mightContainNonBasicASCII){textMightContainNonBasicASCII=!strings/* isBasicASCII */.$i(op.text);mightContainNonBasicASCII=textMightContainNonBasicASCII;}if(!mightContainRTL&&textMightContainNonBasicASCII){// check if the new inserted text contains RTL
mightContainRTL=strings/* containsRTL */.Ut(op.text);}if(!mightContainUnusualLineTerminators&&textMightContainNonBasicASCII){// check if the new inserted text contains unusual line terminators
mightContainUnusualLineTerminators=strings/* containsUnusualLineTerminators */.ab(op.text);}}var validText='';var eolCount=0;var firstLineLength=0;var lastLineLength=0;if(op.text){var strEOL=void 0;var _countEOL=(0,eolCounter/* countEOL */.Q)(op.text);var _countEOL2=_slicedToArray(_countEOL,4);eolCount=_countEOL2[0];firstLineLength=_countEOL2[1];lastLineLength=_countEOL2[2];strEOL=_countEOL2[3];var bufferEOL=this.getEOL();var expectedStrEOL=bufferEOL==='\r\n'?2/* CRLF */:1/* LF */;if(strEOL===0/* Unknown */||strEOL===expectedStrEOL){validText=op.text;}else{validText=op.text.replace(/\r\n|\r|\n/g,bufferEOL);}}operations[i]={sortIndex:i,identifier:op.identifier||null,range:validatedRange,rangeOffset:this.getOffsetAt(validatedRange.startLineNumber,validatedRange.startColumn),rangeLength:this.getValueLengthInRange(validatedRange),text:validText,eolCount:eolCount,firstLineLength:firstLineLength,lastLineLength:lastLineLength,forceMoveMarkers:Boolean(op.forceMoveMarkers),isAutoWhitespaceEdit:op.isAutoWhitespaceEdit||false};}// Sort operations ascending
operations.sort(PieceTreeTextBuffer._sortOpsAscending);var hasTouchingRanges=false;for(var _i2=0,count=operations.length-1;_i2<count;_i2++){var rangeEnd=operations[_i2].range.getEndPosition();var nextRangeStart=operations[_i2+1].range.getStartPosition();if(nextRangeStart.isBeforeOrEqual(rangeEnd)){if(nextRangeStart.isBefore(rangeEnd)){// overlapping ranges
throw new Error('Overlapping ranges are not allowed!');}hasTouchingRanges=true;}}if(canReduceOperations){operations=this._reduceOperations(operations);}// Delta encode operations
var reverseRanges=computeUndoEdits||recordTrimAutoWhitespace?PieceTreeTextBuffer._getInverseEditRanges(operations):[];var newTrimAutoWhitespaceCandidates=[];if(recordTrimAutoWhitespace){for(var _i3=0;_i3<operations.length;_i3++){var _op=operations[_i3];var reverseRange=reverseRanges[_i3];if(_op.isAutoWhitespaceEdit&&_op.range.isEmpty()){// Record already the future line numbers that might be auto whitespace removal candidates on next edit
for(var lineNumber=reverseRange.startLineNumber;lineNumber<=reverseRange.endLineNumber;lineNumber++){var currentLineContent='';if(lineNumber===reverseRange.startLineNumber){currentLineContent=this.getLineContent(_op.range.startLineNumber);if(strings/* firstNonWhitespaceIndex */.LC(currentLineContent)!==-1){continue;}}newTrimAutoWhitespaceCandidates.push({lineNumber:lineNumber,oldContent:currentLineContent});}}}}var reverseOperations=null;if(computeUndoEdits){var reverseRangeDeltaOffset=0;reverseOperations=[];for(var _i4=0;_i4<operations.length;_i4++){var _op2=operations[_i4];var _reverseRange=reverseRanges[_i4];var bufferText=this.getValueInRange(_op2.range);var reverseRangeOffset=_op2.rangeOffset+reverseRangeDeltaOffset;reverseRangeDeltaOffset+=_op2.text.length-bufferText.length;reverseOperations[_i4]={sortIndex:_op2.sortIndex,identifier:_op2.identifier,range:_reverseRange,text:bufferText,textChange:new textChange/* TextChange */.q(_op2.rangeOffset,bufferText,reverseRangeOffset,_op2.text)};}// Can only sort reverse operations when the order is not significant
if(!hasTouchingRanges){reverseOperations.sort(function(a,b){return a.sortIndex-b.sortIndex;});}}this._mightContainRTL=mightContainRTL;this._mightContainUnusualLineTerminators=mightContainUnusualLineTerminators;this._mightContainNonBasicASCII=mightContainNonBasicASCII;var contentChanges=this._doApplyEdits(operations);var trimAutoWhitespaceLineNumbers=null;if(recordTrimAutoWhitespace&&newTrimAutoWhitespaceCandidates.length>0){// sort line numbers auto whitespace removal candidates for next edit descending
newTrimAutoWhitespaceCandidates.sort(function(a,b){return b.lineNumber-a.lineNumber;});trimAutoWhitespaceLineNumbers=[];for(var _i5=0,len=newTrimAutoWhitespaceCandidates.length;_i5<len;_i5++){var _lineNumber=newTrimAutoWhitespaceCandidates[_i5].lineNumber;if(_i5>0&&newTrimAutoWhitespaceCandidates[_i5-1].lineNumber===_lineNumber){// Do not have the same line number twice
continue;}var prevContent=newTrimAutoWhitespaceCandidates[_i5].oldContent;var lineContent=this.getLineContent(_lineNumber);if(lineContent.length===0||lineContent===prevContent||strings/* firstNonWhitespaceIndex */.LC(lineContent)!==-1){continue;}trimAutoWhitespaceLineNumbers.push(_lineNumber);}}this._onDidChangeContent.fire();return new model/* ApplyEditsResult */.je(reverseOperations,contentChanges,trimAutoWhitespaceLineNumbers);}/**
     * Transform operations such that they represent the same logic edit,
     * but that they also do not cause OOM crashes.
     */},{key:"_reduceOperations",value:function _reduceOperations(operations){if(operations.length<1000){// We know from empirical testing that a thousand edits work fine regardless of their shape.
return operations;}// At one point, due to how events are emitted and how each operation is handled,
// some operations can trigger a high amount of temporary string allocations,
// that will immediately get edited again.
// e.g. a formatter inserting ridiculous ammounts of \n on a model with a single line
// Therefore, the strategy is to collapse all the operations into a huge single edit operation
return[this._toSingleEditOperation(operations)];}},{key:"_toSingleEditOperation",value:function _toSingleEditOperation(operations){var forceMoveMarkers=false;var firstEditRange=operations[0].range;var lastEditRange=operations[operations.length-1].range;var entireEditRange=new core_range/* Range */.e(firstEditRange.startLineNumber,firstEditRange.startColumn,lastEditRange.endLineNumber,lastEditRange.endColumn);var lastEndLineNumber=firstEditRange.startLineNumber;var lastEndColumn=firstEditRange.startColumn;var result=[];for(var i=0,len=operations.length;i<len;i++){var operation=operations[i];var range=operation.range;forceMoveMarkers=forceMoveMarkers||operation.forceMoveMarkers;// (1) -- Push old text
result.push(this.getValueInRange(new core_range/* Range */.e(lastEndLineNumber,lastEndColumn,range.startLineNumber,range.startColumn)));// (2) -- Push new text
if(operation.text.length>0){result.push(operation.text);}lastEndLineNumber=range.endLineNumber;lastEndColumn=range.endColumn;}var text=result.join('');var _countEOL3=(0,eolCounter/* countEOL */.Q)(text),_countEOL4=_slicedToArray(_countEOL3,3),eolCount=_countEOL4[0],firstLineLength=_countEOL4[1],lastLineLength=_countEOL4[2];return{sortIndex:0,identifier:operations[0].identifier,range:entireEditRange,rangeOffset:this.getOffsetAt(entireEditRange.startLineNumber,entireEditRange.startColumn),rangeLength:this.getValueLengthInRange(entireEditRange,0/* TextDefined */),text:text,eolCount:eolCount,firstLineLength:firstLineLength,lastLineLength:lastLineLength,forceMoveMarkers:forceMoveMarkers,isAutoWhitespaceEdit:false};}},{key:"_doApplyEdits",value:function _doApplyEdits(operations){operations.sort(PieceTreeTextBuffer._sortOpsDescending);var contentChanges=[];// operations are from bottom to top
for(var i=0;i<operations.length;i++){var op=operations[i];var startLineNumber=op.range.startLineNumber;var startColumn=op.range.startColumn;var endLineNumber=op.range.endLineNumber;var endColumn=op.range.endColumn;if(startLineNumber===endLineNumber&&startColumn===endColumn&&op.text.length===0){// no-op
continue;}if(op.text){// replacement
this._pieceTree.delete(op.rangeOffset,op.rangeLength);this._pieceTree.insert(op.rangeOffset,op.text,true);}else{// deletion
this._pieceTree.delete(op.rangeOffset,op.rangeLength);}var contentChangeRange=new core_range/* Range */.e(startLineNumber,startColumn,endLineNumber,endColumn);contentChanges.push({range:contentChangeRange,rangeLength:op.rangeLength,text:op.text,rangeOffset:op.rangeOffset,forceMoveMarkers:op.forceMoveMarkers});}return contentChanges;}},{key:"findMatchesLineByLine",value:function findMatchesLineByLine(searchRange,searchData,captureMatches,limitResultCount){return this._pieceTree.findMatchesLineByLine(searchRange,searchData,captureMatches,limitResultCount);}/**
     * Assumes `operations` are validated and sorted ascending
     */}],[{key:"_getInverseEditRanges",value:function _getInverseEditRanges(operations){var result=[];var prevOpEndLineNumber=0;var prevOpEndColumn=0;var prevOp=null;for(var i=0,len=operations.length;i<len;i++){var op=operations[i];var startLineNumber=void 0;var startColumn=void 0;if(prevOp){if(prevOp.range.endLineNumber===op.range.startLineNumber){startLineNumber=prevOpEndLineNumber;startColumn=prevOpEndColumn+(op.range.startColumn-prevOp.range.endColumn);}else{startLineNumber=prevOpEndLineNumber+(op.range.startLineNumber-prevOp.range.endLineNumber);startColumn=op.range.startColumn;}}else{startLineNumber=op.range.startLineNumber;startColumn=op.range.startColumn;}var resultRange=void 0;if(op.text.length>0){// the operation inserts something
var lineCount=op.eolCount+1;if(lineCount===1){// single line insert
resultRange=new core_range/* Range */.e(startLineNumber,startColumn,startLineNumber,startColumn+op.firstLineLength);}else{// multi line insert
resultRange=new core_range/* Range */.e(startLineNumber,startColumn,startLineNumber+lineCount-1,op.lastLineLength+1);}}else{// There is nothing to insert
resultRange=new core_range/* Range */.e(startLineNumber,startColumn,startLineNumber,startColumn);}prevOpEndLineNumber=resultRange.endLineNumber;prevOpEndColumn=resultRange.endColumn;result.push(resultRange);prevOp=op;}return result;}},{key:"_sortOpsAscending",value:function _sortOpsAscending(a,b){var r=core_range/* Range.compareRangesUsingEnds */.e.compareRangesUsingEnds(a.range,b.range);if(r===0){return a.sortIndex-b.sortIndex;}return r;}},{key:"_sortOpsDescending",value:function _sortOpsDescending(a,b){var r=core_range/* Range.compareRangesUsingEnds */.e.compareRangesUsingEnds(a.range,b.range);if(r===0){return b.sortIndex-a.sortIndex;}return-r;}}]);return PieceTreeTextBuffer;}(lifecycle/* Disposable */.JT);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder.js
function pieceTreeTextBufferBuilder_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function pieceTreeTextBufferBuilder_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function pieceTreeTextBufferBuilder_createClass(Constructor,protoProps,staticProps){if(protoProps)pieceTreeTextBufferBuilder_defineProperties(Constructor.prototype,protoProps);if(staticProps)pieceTreeTextBufferBuilder_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var PieceTreeTextBufferFactory=/*#__PURE__*/function(){function PieceTreeTextBufferFactory(_chunks,_bom,_cr,_lf,_crlf,_containsRTL,_containsUnusualLineTerminators,_isBasicASCII,_normalizeEOL){pieceTreeTextBufferBuilder_classCallCheck(this,PieceTreeTextBufferFactory);this._chunks=_chunks;this._bom=_bom;this._cr=_cr;this._lf=_lf;this._crlf=_crlf;this._containsRTL=_containsRTL;this._containsUnusualLineTerminators=_containsUnusualLineTerminators;this._isBasicASCII=_isBasicASCII;this._normalizeEOL=_normalizeEOL;}pieceTreeTextBufferBuilder_createClass(PieceTreeTextBufferFactory,[{key:"_getEOL",value:function _getEOL(defaultEOL){var totalEOLCount=this._cr+this._lf+this._crlf;var totalCRCount=this._cr+this._crlf;if(totalEOLCount===0){// This is an empty file or a file with precisely one line
return defaultEOL===1/* LF */?'\n':'\r\n';}if(totalCRCount>totalEOLCount/2){// More than half of the file contains \r\n ending lines
return'\r\n';}// At least one line more ends in \n
return'\n';}},{key:"create",value:function create(defaultEOL){var eol=this._getEOL(defaultEOL);var chunks=this._chunks;if(this._normalizeEOL&&(eol==='\r\n'&&(this._cr>0||this._lf>0)||eol==='\n'&&(this._cr>0||this._crlf>0))){// Normalize pieces
for(var i=0,len=chunks.length;i<len;i++){var str=chunks[i].buffer.replace(/\r\n|\r|\n/g,eol);var newLineStart=createLineStartsFast(str);chunks[i]=new StringBuffer(str,newLineStart);}}var textBuffer=new PieceTreeTextBuffer(chunks,this._bom,eol,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:textBuffer,disposable:textBuffer};}}]);return PieceTreeTextBufferFactory;}();var PieceTreeTextBufferBuilder=/*#__PURE__*/function(){function PieceTreeTextBufferBuilder(){pieceTreeTextBufferBuilder_classCallCheck(this,PieceTreeTextBufferBuilder);this.chunks=[];this.BOM='';this._hasPreviousChar=false;this._previousChar=0;this._tmpLineStarts=[];this.cr=0;this.lf=0;this.crlf=0;this.containsRTL=false;this.containsUnusualLineTerminators=false;this.isBasicASCII=true;}pieceTreeTextBufferBuilder_createClass(PieceTreeTextBufferBuilder,[{key:"acceptChunk",value:function acceptChunk(chunk){if(chunk.length===0){return;}if(this.chunks.length===0){if(strings/* startsWithUTF8BOM */.uS(chunk)){this.BOM=strings/* UTF8_BOM_CHARACTER */.c1;chunk=chunk.substr(1);}}var lastChar=chunk.charCodeAt(chunk.length-1);if(lastChar===13/* CarriageReturn */||lastChar>=0xD800&&lastChar<=0xDBFF){// last character is \r or a high surrogate => keep it back
this._acceptChunk1(chunk.substr(0,chunk.length-1),false);this._hasPreviousChar=true;this._previousChar=lastChar;}else{this._acceptChunk1(chunk,false);this._hasPreviousChar=false;this._previousChar=lastChar;}}},{key:"_acceptChunk1",value:function _acceptChunk1(chunk,allowEmptyStrings){if(!allowEmptyStrings&&chunk.length===0){// Nothing to do
return;}if(this._hasPreviousChar){this._acceptChunk2(String.fromCharCode(this._previousChar)+chunk);}else{this._acceptChunk2(chunk);}}},{key:"_acceptChunk2",value:function _acceptChunk2(chunk){var lineStarts=createLineStarts(this._tmpLineStarts,chunk);this.chunks.push(new StringBuffer(chunk,lineStarts.lineStarts));this.cr+=lineStarts.cr;this.lf+=lineStarts.lf;this.crlf+=lineStarts.crlf;if(this.isBasicASCII){this.isBasicASCII=lineStarts.isBasicASCII;}if(!this.isBasicASCII&&!this.containsRTL){// No need to check if it is basic ASCII
this.containsRTL=strings/* containsRTL */.Ut(chunk);}if(!this.isBasicASCII&&!this.containsUnusualLineTerminators){// No need to check if it is basic ASCII
this.containsUnusualLineTerminators=strings/* containsUnusualLineTerminators */.ab(chunk);}}},{key:"finish",value:function finish(){var normalizeEOL=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this._finish();return new PieceTreeTextBufferFactory(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,normalizeEOL);}},{key:"_finish",value:function _finish(){if(this.chunks.length===0){this._acceptChunk1('',true);}if(this._hasPreviousChar){this._hasPreviousChar=false;// recreate last chunk
var lastChunk=this.chunks[this.chunks.length-1];lastChunk.buffer+=String.fromCharCode(this._previousChar);var newLineStarts=createLineStartsFast(lastChunk.buffer);lastChunk.lineStarts=newLineStarts;if(this._previousChar===13/* CarriageReturn */){this.cr++;}}}}]);return PieceTreeTextBufferBuilder;}();
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/textModelEvents.js
var textModelEvents = __webpack_require__(59311);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/tokens/lineTokens.js
var tokens_lineTokens = __webpack_require__(83817);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages.js + 2 modules
var languages = __webpack_require__(98480);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages/nullMode.js
var nullMode = __webpack_require__(57018);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/stopwatch.js
var stopwatch = __webpack_require__(76660);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/tokens/contiguousMultilineTokensBuilder.js + 1 modules
var contiguousMultilineTokensBuilder = __webpack_require__(62770);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/async.js
var common_async = __webpack_require__(88494);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/platform.js
var platform = __webpack_require__(63638);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/textModelTokens.js
function textModelTokens_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){textModelTokens_typeof=function _typeof(obj){return typeof obj;};}else{textModelTokens_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return textModelTokens_typeof(obj);}function textModelTokens_slicedToArray(arr,i){return textModelTokens_arrayWithHoles(arr)||textModelTokens_iterableToArrayLimit(arr,i)||textModelTokens_unsupportedIterableToArray(arr,i)||textModelTokens_nonIterableRest();}function textModelTokens_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function textModelTokens_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return textModelTokens_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return textModelTokens_arrayLikeToArray(o,minLen);}function textModelTokens_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function textModelTokens_iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function textModelTokens_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=textModelTokens_getPrototypeOf(object);if(object===null)break;}return object;}function textModelTokens_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)textModelTokens_setPrototypeOf(subClass,superClass);}function textModelTokens_setPrototypeOf(o,p){textModelTokens_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return textModelTokens_setPrototypeOf(o,p);}function textModelTokens_createSuper(Derived){var hasNativeReflectConstruct=textModelTokens_isNativeReflectConstruct();return function _createSuperInternal(){var Super=textModelTokens_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=textModelTokens_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return textModelTokens_possibleConstructorReturn(this,result);};}function textModelTokens_possibleConstructorReturn(self,call){if(call&&(textModelTokens_typeof(call)==="object"||typeof call==="function")){return call;}return textModelTokens_assertThisInitialized(self);}function textModelTokens_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function textModelTokens_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function textModelTokens_getPrototypeOf(o){textModelTokens_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return textModelTokens_getPrototypeOf(o);}function textModelTokens_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function textModelTokens_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function textModelTokens_createClass(Constructor,protoProps,staticProps){if(protoProps)textModelTokens_defineProperties(Constructor.prototype,protoProps);if(staticProps)textModelTokens_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*//**
 * An array that avoids being sparse by always
 * filling up unused indices with a default value.
 */var ContiguousGrowingArray=/*#__PURE__*/function(){function ContiguousGrowingArray(_default){textModelTokens_classCallCheck(this,ContiguousGrowingArray);this._default=_default;this._store=[];}textModelTokens_createClass(ContiguousGrowingArray,[{key:"get",value:function get(index){if(index<this._store.length){return this._store[index];}return this._default;}},{key:"set",value:function set(index,value){while(index>=this._store.length){this._store[this._store.length]=this._default;}this._store[index]=value;}},{key:"delete",value:function _delete(deleteIndex,deleteCount){if(deleteCount===0||deleteIndex>=this._store.length){return;}this._store.splice(deleteIndex,deleteCount);}},{key:"insert",value:function insert(insertIndex,insertCount){if(insertCount===0||insertIndex>=this._store.length){return;}var arr=[];for(var i=0;i<insertCount;i++){arr[i]=this._default;}this._store=arrays/* arrayInsert */.Zv(this._store,insertIndex,arr);}}]);return ContiguousGrowingArray;}();/**
 * Stores the states at the start of each line and keeps track of which lines
 * must be retokenized. Also uses state equality to quickly validate lines
 * that don't need to be retokenized.
 *
 * For example, when typing on a line, the line gets marked as needing to be tokenized.
 * Once the line is tokenized, the end state is checked for equality against the begin
 * state of the next line. If the states are equal, tokenization doesn't need to run
 * again over the rest of the file. If the states are not equal, the next line gets marked
 * as needing to be tokenized.
 */var TokenizationStateStore=/*#__PURE__*/function(){function TokenizationStateStore(tokenizationSupport,initialState){textModelTokens_classCallCheck(this,TokenizationStateStore);this.tokenizationSupport=tokenizationSupport;this.initialState=initialState;/**
         * `lineBeginState[i]` contains the begin state used to tokenize line number `i + 1`.
         */this._lineBeginState=new ContiguousGrowingArray(null);/**
         * `lineNeedsTokenization[i]` describes if line number `i + 1` needs to be tokenized.
         */this._lineNeedsTokenization=new ContiguousGrowingArray(true);this._firstLineNeedsTokenization=0;this._lineBeginState.set(0,this.initialState);}textModelTokens_createClass(TokenizationStateStore,[{key:"invalidLineStartIndex",get:function get(){return this._firstLineNeedsTokenization;}},{key:"markMustBeTokenized",value:function markMustBeTokenized(lineIndex){this._lineNeedsTokenization.set(lineIndex,true);this._firstLineNeedsTokenization=Math.min(this._firstLineNeedsTokenization,lineIndex);}},{key:"getBeginState",value:function getBeginState(lineIndex){return this._lineBeginState.get(lineIndex);}},{key:"setEndState",value:function setEndState(linesLength,lineIndex,endState){this._lineNeedsTokenization.set(lineIndex,false);this._firstLineNeedsTokenization=lineIndex+1;// Check if this was the last line
if(lineIndex===linesLength-1){return;}// Check if the end state has changed
var previousEndState=this._lineBeginState.get(lineIndex+1);if(previousEndState===null||!endState.equals(previousEndState)){this._lineBeginState.set(lineIndex+1,endState);this.markMustBeTokenized(lineIndex+1);return;}// Perhaps we can skip tokenizing some lines...
var i=lineIndex+1;while(i<linesLength){if(this._lineNeedsTokenization.get(i)){break;}i++;}this._firstLineNeedsTokenization=i;}//#region Editing
},{key:"applyEdits",value:function applyEdits(range,eolCount){this.markMustBeTokenized(range.startLineNumber-1);this._lineBeginState.delete(range.startLineNumber,range.endLineNumber-range.startLineNumber);this._lineNeedsTokenization.delete(range.startLineNumber,range.endLineNumber-range.startLineNumber);this._lineBeginState.insert(range.startLineNumber,eolCount);this._lineNeedsTokenization.insert(range.startLineNumber,eolCount);}}]);return TokenizationStateStore;}();var TextModelTokenization=/*#__PURE__*/function(_Disposable){textModelTokens_inherits(TextModelTokenization,_Disposable);var _super=textModelTokens_createSuper(TextModelTokenization);function TextModelTokenization(_textModel,_languageIdCodec){var _this;textModelTokens_classCallCheck(this,TextModelTokenization);_this=_super.call(this);_this._textModel=_textModel;_this._languageIdCodec=_languageIdCodec;_this._isScheduled=false;_this._isDisposed=false;_this._tokenizationStateStore=null;_this._register(languages/* TokenizationRegistry.onDidChange */.RW.onDidChange(function(e){var languageId=_this._textModel.getLanguageId();if(e.changedLanguages.indexOf(languageId)===-1){return;}_this._resetTokenizationState();_this._textModel.clearTokens();}));_this._register(_this._textModel.onDidChangeContentFast(function(e){if(e.isFlush){_this._resetTokenizationState();return;}if(_this._tokenizationStateStore){for(var i=0,len=e.changes.length;i<len;i++){var change=e.changes[i];var _countEOL=(0,eolCounter/* countEOL */.Q)(change.text),_countEOL2=textModelTokens_slicedToArray(_countEOL,1),eolCount=_countEOL2[0];_this._tokenizationStateStore.applyEdits(change.range,eolCount);}}_this._beginBackgroundTokenization();}));_this._register(_this._textModel.onDidChangeAttached(function(){_this._beginBackgroundTokenization();}));_this._register(_this._textModel.onDidChangeLanguage(function(){_this._resetTokenizationState();_this._textModel.clearTokens();}));_this._resetTokenizationState();return _this;}textModelTokens_createClass(TextModelTokenization,[{key:"dispose",value:function dispose(){this._isDisposed=true;_get(textModelTokens_getPrototypeOf(TextModelTokenization.prototype),"dispose",this).call(this);}},{key:"_resetTokenizationState",value:function _resetTokenizationState(){var _initializeTokenizati=initializeTokenization(this._textModel),_initializeTokenizati2=textModelTokens_slicedToArray(_initializeTokenizati,2),tokenizationSupport=_initializeTokenizati2[0],initialState=_initializeTokenizati2[1];if(tokenizationSupport&&initialState){this._tokenizationStateStore=new TokenizationStateStore(tokenizationSupport,initialState);}else{this._tokenizationStateStore=null;}this._beginBackgroundTokenization();}},{key:"_beginBackgroundTokenization",value:function _beginBackgroundTokenization(){var _this2=this;if(this._isScheduled||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()){return;}this._isScheduled=true;(0,common_async/* runWhenIdle */.To)(function(deadline){_this2._isScheduled=false;_this2._backgroundTokenizeWithDeadline(deadline);});}/**
     * Tokenize until the deadline occurs, but try to yield every 1-2ms.
     */},{key:"_backgroundTokenizeWithDeadline",value:function _backgroundTokenizeWithDeadline(deadline){var _this3=this;// Read the time remaining from the `deadline` immediately because it is unclear
// if the `deadline` object will be valid after execution leaves this function.
var endTime=Date.now()+deadline.timeRemaining();var execute=function execute(){if(_this3._isDisposed||!_this3._textModel.isAttachedToEditor()||!_this3._hasLinesToTokenize()){// disposed in the meantime or detached or finished
return;}_this3._backgroundTokenizeForAtLeast1ms();if(Date.now()<endTime){// There is still time before reaching the deadline, so yield to the browser and then
// continue execution
(0,platform/* setTimeout0 */.fn)(execute);}else{// The deadline has been reached, so schedule a new idle callback if necessary
_this3._beginBackgroundTokenization();}};execute();}/**
     * Tokenize for at least 1ms.
     */},{key:"_backgroundTokenizeForAtLeast1ms",value:function _backgroundTokenizeForAtLeast1ms(){var lineCount=this._textModel.getLineCount();var builder=new contiguousMultilineTokensBuilder/* ContiguousMultilineTokensBuilder */.N();var sw=stopwatch/* StopWatch.create */.G.create(false);do{if(sw.elapsed()>1){// the comparison is intentionally > 1 and not >= 1 to ensure that
// a full millisecond has elapsed, given how microseconds are rounded
// to milliseconds
break;}var tokenizedLineNumber=this._tokenizeOneInvalidLine(builder);if(tokenizedLineNumber>=lineCount){break;}}while(this._hasLinesToTokenize());this._textModel.setTokens(builder.finalize(),!this._hasLinesToTokenize());}},{key:"tokenizeViewport",value:function tokenizeViewport(startLineNumber,endLineNumber){var builder=new contiguousMultilineTokensBuilder/* ContiguousMultilineTokensBuilder */.N();this._tokenizeViewport(builder,startLineNumber,endLineNumber);this._textModel.setTokens(builder.finalize(),!this._hasLinesToTokenize());}},{key:"reset",value:function reset(){this._resetTokenizationState();this._textModel.clearTokens();}},{key:"forceTokenization",value:function forceTokenization(lineNumber){var builder=new contiguousMultilineTokensBuilder/* ContiguousMultilineTokensBuilder */.N();this._updateTokensUntilLine(builder,lineNumber);this._textModel.setTokens(builder.finalize(),!this._hasLinesToTokenize());}},{key:"getTokenTypeIfInsertingCharacter",value:function getTokenTypeIfInsertingCharacter(position,character){if(!this._tokenizationStateStore){return 0/* Other */;}this.forceTokenization(position.lineNumber);var lineStartState=this._tokenizationStateStore.getBeginState(position.lineNumber-1);if(!lineStartState){return 0/* Other */;}var languageId=this._textModel.getLanguageId();var lineContent=this._textModel.getLineContent(position.lineNumber);// Create the text as if `character` was inserted
var text=lineContent.substring(0,position.column-1)+character+lineContent.substring(position.column-1);var r=safeTokenize(this._languageIdCodec,languageId,this._tokenizationStateStore.tokenizationSupport,text,true,lineStartState);var lineTokens=new tokens_lineTokens/* LineTokens */.A(r.tokens,text,this._languageIdCodec);if(lineTokens.getCount()===0){return 0/* Other */;}var tokenIndex=lineTokens.findTokenIndexAtOffset(position.column-1);return lineTokens.getStandardTokenType(tokenIndex);}},{key:"tokenizeLineWithEdit",value:function tokenizeLineWithEdit(position,length,newText){var lineNumber=position.lineNumber;var column=position.column;if(!this._tokenizationStateStore){return null;}this.forceTokenization(lineNumber);var lineStartState=this._tokenizationStateStore.getBeginState(lineNumber-1);if(!lineStartState){return null;}var curLineContent=this._textModel.getLineContent(lineNumber);var newLineContent=curLineContent.substring(0,column-1)+newText+curLineContent.substring(column-1+length);var languageId=this._textModel.getLanguageIdAtPosition(lineNumber,0);var result=safeTokenize(this._languageIdCodec,languageId,this._tokenizationStateStore.tokenizationSupport,newLineContent,true,lineStartState);var lineTokens=new tokens_lineTokens/* LineTokens */.A(result.tokens,newLineContent,this._languageIdCodec);return lineTokens;}},{key:"isCheapToTokenize",value:function isCheapToTokenize(lineNumber){if(!this._tokenizationStateStore){return true;}var firstInvalidLineNumber=this._tokenizationStateStore.invalidLineStartIndex+1;if(lineNumber>firstInvalidLineNumber){return false;}if(lineNumber<firstInvalidLineNumber){return true;}if(this._textModel.getLineLength(lineNumber)<2048/* CHEAP_TOKENIZATION_LENGTH_LIMIT */){return true;}return false;}},{key:"_hasLinesToTokenize",value:function _hasLinesToTokenize(){if(!this._tokenizationStateStore){return false;}return this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount();}},{key:"_tokenizeOneInvalidLine",value:function _tokenizeOneInvalidLine(builder){if(!this._tokenizationStateStore||!this._hasLinesToTokenize()){return this._textModel.getLineCount()+1;}var lineNumber=this._tokenizationStateStore.invalidLineStartIndex+1;this._updateTokensUntilLine(builder,lineNumber);return lineNumber;}},{key:"_updateTokensUntilLine",value:function _updateTokensUntilLine(builder,lineNumber){if(!this._tokenizationStateStore){return;}var languageId=this._textModel.getLanguageId();var linesLength=this._textModel.getLineCount();var endLineIndex=lineNumber-1;// Validate all states up to and including endLineIndex
for(var lineIndex=this._tokenizationStateStore.invalidLineStartIndex;lineIndex<=endLineIndex;lineIndex++){var text=this._textModel.getLineContent(lineIndex+1);var lineStartState=this._tokenizationStateStore.getBeginState(lineIndex);var r=safeTokenize(this._languageIdCodec,languageId,this._tokenizationStateStore.tokenizationSupport,text,true,lineStartState);builder.add(lineIndex+1,r.tokens);this._tokenizationStateStore.setEndState(linesLength,lineIndex,r.endState);lineIndex=this._tokenizationStateStore.invalidLineStartIndex-1;// -1 because the outer loop increments it
}}},{key:"_tokenizeViewport",value:function _tokenizeViewport(builder,startLineNumber,endLineNumber){if(!this._tokenizationStateStore){// nothing to do
return;}if(endLineNumber<=this._tokenizationStateStore.invalidLineStartIndex){// nothing to do
return;}if(startLineNumber<=this._tokenizationStateStore.invalidLineStartIndex){// tokenization has reached the viewport start...
this._updateTokensUntilLine(builder,endLineNumber);return;}var nonWhitespaceColumn=this._textModel.getLineFirstNonWhitespaceColumn(startLineNumber);var fakeLines=[];var initialState=null;for(var i=startLineNumber-1;nonWhitespaceColumn>1&&i>=1;i--){var newNonWhitespaceIndex=this._textModel.getLineFirstNonWhitespaceColumn(i);if(newNonWhitespaceIndex===0){continue;}if(newNonWhitespaceIndex<nonWhitespaceColumn){initialState=this._tokenizationStateStore.getBeginState(i-1);if(initialState){break;}fakeLines.push(this._textModel.getLineContent(i));nonWhitespaceColumn=newNonWhitespaceIndex;}}if(!initialState){initialState=this._tokenizationStateStore.initialState;}var languageId=this._textModel.getLanguageId();var state=initialState;for(var _i2=fakeLines.length-1;_i2>=0;_i2--){var r=safeTokenize(this._languageIdCodec,languageId,this._tokenizationStateStore.tokenizationSupport,fakeLines[_i2],false,state);state=r.endState;}for(var lineNumber=startLineNumber;lineNumber<=endLineNumber;lineNumber++){var text=this._textModel.getLineContent(lineNumber);var _r=safeTokenize(this._languageIdCodec,languageId,this._tokenizationStateStore.tokenizationSupport,text,true,state);builder.add(lineNumber,_r.tokens);this._tokenizationStateStore.markMustBeTokenized(lineNumber-1);state=_r.endState;}}}]);return TextModelTokenization;}(lifecycle/* Disposable */.JT);function initializeTokenization(textModel){if(textModel.isTooLargeForTokenization()){return[null,null];}var tokenizationSupport=languages/* TokenizationRegistry.get */.RW.get(textModel.getLanguageId());if(!tokenizationSupport){return[null,null];}var initialState;try{initialState=tokenizationSupport.getInitialState();}catch(e){(0,errors/* onUnexpectedError */.dL)(e);return[null,null];}return[tokenizationSupport,initialState];}function safeTokenize(languageIdCodec,languageId,tokenizationSupport,text,hasEOL,state){var r=null;if(tokenizationSupport){try{r=tokenizationSupport.tokenizeEncoded(text,hasEOL,state.clone());}catch(e){(0,errors/* onUnexpectedError */.dL)(e);}}if(!r){r=(0,nullMode/* nullTokenizeEncoded */.Dy)(languageIdCodec.encodeLanguageId(languageId),state);}tokens_lineTokens/* LineTokens.convertToEndOffset */.A.convertToEndOffset(r.tokens,text.length);return r;}
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/tokens/contiguousTokensStore.js + 1 modules
var contiguousTokensStore = __webpack_require__(9518);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/tokens/sparseTokensStore.js
var sparseTokensStore = __webpack_require__(5122);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/wordHelper.js
var wordHelper = __webpack_require__(44049);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages/languageConfigurationRegistry.js + 4 modules
var languageConfigurationRegistry = __webpack_require__(71567);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/services/language.js
var language = __webpack_require__(84318);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/undoRedo/common/undoRedo.js
var undoRedo = __webpack_require__(25637);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/textModelDefaults.js
var textModelDefaults = __webpack_require__(9219);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js
function textModel_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=textModel_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||textModel_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return textModel_arrayLikeToArray(arr);}function textModel_slicedToArray(arr,i){return textModel_arrayWithHoles(arr)||textModel_iterableToArrayLimit(arr,i)||textModel_unsupportedIterableToArray(arr,i)||textModel_nonIterableRest();}function textModel_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function textModel_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return textModel_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return textModel_arrayLikeToArray(o,minLen);}function textModel_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function textModel_iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function textModel_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function textModel_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){textModel_get=Reflect.get;}else{textModel_get=function _get(target,property,receiver){var base=textModel_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return textModel_get(target,property,receiver||target);}function textModel_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=textModel_getPrototypeOf(object);if(object===null)break;}return object;}function textModel_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)textModel_setPrototypeOf(subClass,superClass);}function textModel_setPrototypeOf(o,p){textModel_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return textModel_setPrototypeOf(o,p);}function textModel_createSuper(Derived){var hasNativeReflectConstruct=textModel_isNativeReflectConstruct();return function _createSuperInternal(){var Super=textModel_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=textModel_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return textModel_possibleConstructorReturn(this,result);};}function textModel_possibleConstructorReturn(self,call){if(call&&(textModel_typeof(call)==="object"||typeof call==="function")){return call;}return textModel_assertThisInitialized(self);}function textModel_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function textModel_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function textModel_getPrototypeOf(o){textModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return textModel_getPrototypeOf(o);}function textModel_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function textModel_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function textModel_createClass(Constructor,protoProps,staticProps){if(protoProps)textModel_defineProperties(Constructor.prototype,protoProps);if(staticProps)textModel_defineProperties(Constructor,staticProps);return Constructor;}function textModel_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){textModel_typeof=function _typeof(obj){return typeof obj;};}else{textModel_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return textModel_typeof(obj);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect==="undefined"?"undefined":textModel_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;}return c>3&&r&&Object.defineProperty(target,key,r),r;};var __param=undefined&&undefined.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex);};};function createTextBufferBuilder(){return new PieceTreeTextBufferBuilder();}function createTextBufferFactory(text){var builder=createTextBufferBuilder();builder.acceptChunk(text);return builder.finish();}function createTextBuffer(value,defaultEOL){var factory=typeof value==='string'?createTextBufferFactory(value):value;return factory.create(defaultEOL);}var MODEL_ID=0;var LIMIT_FIND_COUNT=999;var LONG_LINE_BOUNDARY=10000;var TextModelSnapshot=/*#__PURE__*/function(){function TextModelSnapshot(source){textModel_classCallCheck(this,TextModelSnapshot);this._source=source;this._eos=false;}textModel_createClass(TextModelSnapshot,[{key:"read",value:function read(){if(this._eos){return null;}var result=[];var resultCnt=0;var resultLength=0;do{var tmp=this._source.read();if(tmp===null){// end-of-stream
this._eos=true;if(resultCnt===0){return null;}else{return result.join('');}}if(tmp.length>0){result[resultCnt++]=tmp;resultLength+=tmp.length;}if(resultLength>=64*1024){return result.join('');}}while(true);}}]);return TextModelSnapshot;}();var invalidFunc=function invalidFunc(){throw new Error("Invalid change accessor");};var TextModel=/*#__PURE__*/function(_Disposable){textModel_inherits(TextModel,_Disposable);var _super=textModel_createSuper(TextModel);function TextModel(source,languageId,creationOptions){var _this;var associatedResource=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var _undoRedoService=arguments.length>4?arguments[4]:undefined;var _languageService=arguments.length>5?arguments[5]:undefined;var _languageConfigurationService=arguments.length>6?arguments[6]:undefined;textModel_classCallCheck(this,TextModel);_this=_super.call(this);_this._undoRedoService=_undoRedoService;_this._languageService=_languageService;_this._languageConfigurationService=_languageConfigurationService;//#region Events
_this._onWillDispose=_this._register(new common_event/* Emitter */.Q5());_this.onWillDispose=_this._onWillDispose.event;_this._onDidChangeDecorations=_this._register(new DidChangeDecorationsEmitter(function(affectedInjectedTextLines){return _this.handleBeforeFireDecorationsChangedEvent(affectedInjectedTextLines);}));_this.onDidChangeDecorations=_this._onDidChangeDecorations.event;_this._onDidChangeLanguage=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeLanguage=_this._onDidChangeLanguage.event;_this._onDidChangeLanguageConfiguration=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeLanguageConfiguration=_this._onDidChangeLanguageConfiguration.event;_this._onDidChangeTokens=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeTokens=_this._onDidChangeTokens.event;_this._onDidChangeOptions=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeOptions=_this._onDidChangeOptions.event;_this._onDidChangeAttached=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeAttached=_this._onDidChangeAttached.event;_this._onDidChangeContentOrInjectedText=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeContentOrInjectedText=_this._onDidChangeContentOrInjectedText.event;_this._eventEmitter=_this._register(new DidChangeContentEmitter());_this._backgroundTokenizationState=0/* Uninitialized */;_this._onBackgroundTokenizationStateChanged=_this._register(new common_event/* Emitter */.Q5());_this.onBackgroundTokenizationStateChanged=_this._onBackgroundTokenizationStateChanged.event;_this._register(_this._eventEmitter.fastEvent(function(e){_this._onDidChangeContentOrInjectedText.fire(e.rawContentChangedEvent);}));// Generate a new unique model id
MODEL_ID++;_this.id='$model'+MODEL_ID;_this.isForSimpleWidget=creationOptions.isForSimpleWidget;if(typeof associatedResource==='undefined'||associatedResource===null){_this._associatedResource=uri/* URI.parse */.o.parse('inmemory://model/'+MODEL_ID);}else{_this._associatedResource=associatedResource;}_this._attachedEditorCount=0;var _createTextBuffer=createTextBuffer(source,creationOptions.defaultEOL),textBuffer=_createTextBuffer.textBuffer,disposable=_createTextBuffer.disposable;_this._buffer=textBuffer;_this._bufferDisposable=disposable;_this._options=TextModel.resolveOptions(_this._buffer,creationOptions);var bufferLineCount=_this._buffer.getLineCount();var bufferTextLength=_this._buffer.getValueLengthInRange(new core_range/* Range */.e(1,1,bufferLineCount,_this._buffer.getLineLength(bufferLineCount)+1),0/* TextDefined */);// !!! Make a decision in the ctor and permanently respect this decision !!!
// If a model is too large at construction time, it will never get tokenized,
// under no circumstances.
if(creationOptions.largeFileOptimizations){_this._isTooLargeForTokenization=bufferTextLength>TextModel.LARGE_FILE_SIZE_THRESHOLD||bufferLineCount>TextModel.LARGE_FILE_LINE_COUNT_THRESHOLD;}else{_this._isTooLargeForTokenization=false;}_this._isTooLargeForSyncing=bufferTextLength>TextModel.MODEL_SYNC_LIMIT;_this._versionId=1;_this._alternativeVersionId=1;_this._initialUndoRedoSnapshot=null;_this._isDisposed=false;_this._isDisposing=false;_this._languageId=languageId;_this._languageRegistryListener=_this._languageConfigurationService.onDidChange(function(e){if(e.affects(_this._languageId)){_this._onDidChangeLanguageConfiguration.fire({});}});_this._instanceId=strings/* singleLetterHash */.PJ(MODEL_ID);_this._lastDecorationId=0;_this._decorations=Object.create(null);_this._decorationsTree=new DecorationsTrees();_this._commandManager=new editStack/* EditStack */.NL(textModel_assertThisInitialized(_this),_this._undoRedoService);_this._isUndoing=false;_this._isRedoing=false;_this._trimAutoWhitespaceLines=null;_this._tokens=new contiguousTokensStore/* ContiguousTokensStore */.l(_this._languageService.languageIdCodec);_this._semanticTokens=new sparseTokensStore/* SparseTokensStore */.u(_this._languageService.languageIdCodec);_this._tokenization=new TextModelTokenization(textModel_assertThisInitialized(_this),_this._languageService.languageIdCodec);_this._bracketPairColorizer=_this._register(new BracketPairsTextModelPart(textModel_assertThisInitialized(_this),_this._languageConfigurationService));_this._guidesTextModelPart=_this._register(new guidesTextModelPart/* GuidesTextModelPart */.l(textModel_assertThisInitialized(_this),_this._languageConfigurationService));_this._decorationProvider=_this._register(new ColorizedBracketPairsDecorationProvider(textModel_assertThisInitialized(_this)));_this._register(_this._decorationProvider.onDidChange(function(){_this._onDidChangeDecorations.beginDeferredEmit();_this._onDidChangeDecorations.fire();_this._onDidChangeDecorations.endDeferredEmit();}));return _this;}textModel_createClass(TextModel,[{key:"onDidChangeContentFast",value:function onDidChangeContentFast(listener){return this._eventEmitter.fastEvent(function(e){return listener(e.contentChangedEvent);});}},{key:"onDidChangeContent",value:function onDidChangeContent(listener){return this._eventEmitter.slowEvent(function(e){return listener(e.contentChangedEvent);});}},{key:"bracketPairs",get:function get(){return this._bracketPairColorizer;}},{key:"guides",get:function get(){return this._guidesTextModelPart;}},{key:"backgroundTokenizationState",get:function get(){return this._backgroundTokenizationState;}},{key:"handleTokenizationProgress",value:function handleTokenizationProgress(completed){if(this._backgroundTokenizationState===2/* Completed */){// We already did a full tokenization and don't go back to progressing.
return;}var newState=completed?2/* Completed */:1/* InProgress */;if(this._backgroundTokenizationState!==newState){this._backgroundTokenizationState=newState;this._onBackgroundTokenizationStateChanged.fire();}}},{key:"dispose",value:function dispose(){this._isDisposing=true;this._onWillDispose.fire();this._languageRegistryListener.dispose();this._tokenization.dispose();this._isDisposed=true;textModel_get(textModel_getPrototypeOf(TextModel.prototype),"dispose",this).call(this);this._bufferDisposable.dispose();this._isDisposing=false;// Manually release reference to previous text buffer to avoid large leaks
// in case someone leaks a TextModel reference
var emptyDisposedTextBuffer=new PieceTreeTextBuffer([],'','\n',false,false,true,true);emptyDisposedTextBuffer.dispose();this._buffer=emptyDisposedTextBuffer;}},{key:"_assertNotDisposed",value:function _assertNotDisposed(){if(this._isDisposed){throw new Error('Model is disposed!');}}},{key:"_emitContentChangedEvent",value:function _emitContentChangedEvent(rawChange,change){this._bracketPairColorizer.handleContentChanged(change);if(this._isDisposing){// Do not confuse listeners by emitting any event after disposing
return;}this._eventEmitter.fire(new textModelEvents/* InternalModelContentChangeEvent */.fV(rawChange,change));}},{key:"setValue",value:function setValue(value){this._assertNotDisposed();if(value===null){// There's nothing to do
return;}var _createTextBuffer2=createTextBuffer(value,this._options.defaultEOL),textBuffer=_createTextBuffer2.textBuffer,disposable=_createTextBuffer2.disposable;this._setValueFromTextBuffer(textBuffer,disposable);}},{key:"_createContentChanged2",value:function _createContentChanged2(range,rangeOffset,rangeLength,text,isUndoing,isRedoing,isFlush){return{changes:[{range:range,rangeOffset:rangeOffset,rangeLength:rangeLength,text:text}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:isUndoing,isRedoing:isRedoing,isFlush:isFlush};}},{key:"_setValueFromTextBuffer",value:function _setValueFromTextBuffer(textBuffer,textBufferDisposable){this._assertNotDisposed();var oldFullModelRange=this.getFullModelRange();var oldModelValueLength=this.getValueLengthInRange(oldFullModelRange);var endLineNumber=this.getLineCount();var endColumn=this.getLineMaxColumn(endLineNumber);this._buffer=textBuffer;this._bufferDisposable.dispose();this._bufferDisposable=textBufferDisposable;this._increaseVersionId();// Flush all tokens
this._tokens.flush();this._semanticTokens.flush();// Destroy all my decorations
this._decorations=Object.create(null);this._decorationsTree=new DecorationsTrees();// Destroy my edit history and settings
this._commandManager.clear();this._trimAutoWhitespaceLines=null;this._emitContentChangedEvent(new textModelEvents/* ModelRawContentChangedEvent */.dQ([new textModelEvents/* ModelRawFlush */.Jx()],this._versionId,false,false),this._createContentChanged2(new core_range/* Range */.e(1,1,endLineNumber,endColumn),0,oldModelValueLength,this.getValue(),false,false,true));}},{key:"setEOL",value:function setEOL(eol){this._assertNotDisposed();var newEOL=eol===1/* CRLF */?'\r\n':'\n';if(this._buffer.getEOL()===newEOL){// Nothing to do
return;}var oldFullModelRange=this.getFullModelRange();var oldModelValueLength=this.getValueLengthInRange(oldFullModelRange);var endLineNumber=this.getLineCount();var endColumn=this.getLineMaxColumn(endLineNumber);this._onBeforeEOLChange();this._buffer.setEOL(newEOL);this._increaseVersionId();this._onAfterEOLChange();this._emitContentChangedEvent(new textModelEvents/* ModelRawContentChangedEvent */.dQ([new textModelEvents/* ModelRawEOLChanged */.CZ()],this._versionId,false,false),this._createContentChanged2(new core_range/* Range */.e(1,1,endLineNumber,endColumn),0,oldModelValueLength,this.getValue(),false,false,false));}},{key:"_onBeforeEOLChange",value:function _onBeforeEOLChange(){// Ensure all decorations get their `range` set.
this._decorationsTree.ensureAllNodesHaveRanges(this);}},{key:"_onAfterEOLChange",value:function _onAfterEOLChange(){// Transform back `range` to offsets
var versionId=this.getVersionId();var allDecorations=this._decorationsTree.collectNodesPostOrder();for(var i=0,len=allDecorations.length;i<len;i++){var node=allDecorations[i];var range=node.range;// the range is defined due to `_onBeforeEOLChange`
var delta=node.cachedAbsoluteStart-node.start;var startOffset=this._buffer.getOffsetAt(range.startLineNumber,range.startColumn);var endOffset=this._buffer.getOffsetAt(range.endLineNumber,range.endColumn);node.cachedAbsoluteStart=startOffset;node.cachedAbsoluteEnd=endOffset;node.cachedVersionId=versionId;node.start=startOffset-delta;node.end=endOffset-delta;recomputeMaxEnd(node);}}},{key:"onBeforeAttached",value:function onBeforeAttached(){this._attachedEditorCount++;if(this._attachedEditorCount===1){this._onDidChangeAttached.fire(undefined);}}},{key:"onBeforeDetached",value:function onBeforeDetached(){this._attachedEditorCount--;if(this._attachedEditorCount===0){this._onDidChangeAttached.fire(undefined);}}},{key:"isAttachedToEditor",value:function isAttachedToEditor(){return this._attachedEditorCount>0;}},{key:"getAttachedEditorCount",value:function getAttachedEditorCount(){return this._attachedEditorCount;}},{key:"isTooLargeForSyncing",value:function isTooLargeForSyncing(){return this._isTooLargeForSyncing;}},{key:"isTooLargeForTokenization",value:function isTooLargeForTokenization(){return this._isTooLargeForTokenization;}},{key:"isDisposed",value:function isDisposed(){return this._isDisposed;}},{key:"isDominatedByLongLines",value:function isDominatedByLongLines(){this._assertNotDisposed();if(this.isTooLargeForTokenization()){// Cannot word wrap huge files anyways, so it doesn't really matter
return false;}var smallLineCharCount=0;var longLineCharCount=0;var lineCount=this._buffer.getLineCount();for(var lineNumber=1;lineNumber<=lineCount;lineNumber++){var lineLength=this._buffer.getLineLength(lineNumber);if(lineLength>=LONG_LINE_BOUNDARY){longLineCharCount+=lineLength;}else{smallLineCharCount+=lineLength;}}return longLineCharCount>smallLineCharCount;}},{key:"uri",get:function get(){return this._associatedResource;}//#region Options
},{key:"getOptions",value:function getOptions(){this._assertNotDisposed();return this._options;}},{key:"getFormattingOptions",value:function getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces};}},{key:"updateOptions",value:function updateOptions(_newOpts){this._assertNotDisposed();var tabSize=typeof _newOpts.tabSize!=='undefined'?_newOpts.tabSize:this._options.tabSize;var indentSize=typeof _newOpts.indentSize!=='undefined'?_newOpts.indentSize:this._options.indentSize;var insertSpaces=typeof _newOpts.insertSpaces!=='undefined'?_newOpts.insertSpaces:this._options.insertSpaces;var trimAutoWhitespace=typeof _newOpts.trimAutoWhitespace!=='undefined'?_newOpts.trimAutoWhitespace:this._options.trimAutoWhitespace;var bracketPairColorizationOptions=typeof _newOpts.bracketColorizationOptions!=='undefined'?_newOpts.bracketColorizationOptions:this._options.bracketPairColorizationOptions;var newOpts=new model/* TextModelResolvedOptions */.dJ({tabSize:tabSize,indentSize:indentSize,insertSpaces:insertSpaces,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:trimAutoWhitespace,bracketPairColorizationOptions:bracketPairColorizationOptions});if(this._options.equals(newOpts)){return;}var e=this._options.createChangeEvent(newOpts);this._options=newOpts;this._onDidChangeOptions.fire(e);}},{key:"detectIndentation",value:function detectIndentation(defaultInsertSpaces,defaultTabSize){this._assertNotDisposed();var guessedIndentation=guessIndentation(this._buffer,defaultTabSize,defaultInsertSpaces);this.updateOptions({insertSpaces:guessedIndentation.insertSpaces,tabSize:guessedIndentation.tabSize,indentSize:guessedIndentation.tabSize// TODO@Alex: guess indentSize independent of tabSize
});}},{key:"normalizeIndentation",value:function normalizeIndentation(str){this._assertNotDisposed();return TextModel.normalizeIndentation(str,this._options.indentSize,this._options.insertSpaces);}//#endregion
//#region Reading
},{key:"getVersionId",value:function getVersionId(){this._assertNotDisposed();return this._versionId;}},{key:"mightContainRTL",value:function mightContainRTL(){return this._buffer.mightContainRTL();}},{key:"mightContainUnusualLineTerminators",value:function mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators();}},{key:"removeUnusualLineTerminators",value:function removeUnusualLineTerminators(){var selections=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var matches=this.findMatches(strings/* UNUSUAL_LINE_TERMINATORS.source */.Qe.source,false,true,false,null,false,1073741824/* MAX_SAFE_SMALL_INTEGER */);this._buffer.resetMightContainUnusualLineTerminators();this.pushEditOperations(selections,matches.map(function(m){return{range:m.range,text:null};}),function(){return null;});}},{key:"mightContainNonBasicASCII",value:function mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII();}},{key:"getAlternativeVersionId",value:function getAlternativeVersionId(){this._assertNotDisposed();return this._alternativeVersionId;}},{key:"getInitialUndoRedoSnapshot",value:function getInitialUndoRedoSnapshot(){this._assertNotDisposed();return this._initialUndoRedoSnapshot;}},{key:"getOffsetAt",value:function getOffsetAt(rawPosition){this._assertNotDisposed();var position=this._validatePosition(rawPosition.lineNumber,rawPosition.column,0/* Relaxed */);return this._buffer.getOffsetAt(position.lineNumber,position.column);}},{key:"getPositionAt",value:function getPositionAt(rawOffset){this._assertNotDisposed();var offset=Math.min(this._buffer.getLength(),Math.max(0,rawOffset));return this._buffer.getPositionAt(offset);}},{key:"_increaseVersionId",value:function _increaseVersionId(){this._versionId=this._versionId+1;this._alternativeVersionId=this._versionId;}},{key:"_overwriteVersionId",value:function _overwriteVersionId(versionId){this._versionId=versionId;}},{key:"_overwriteAlternativeVersionId",value:function _overwriteAlternativeVersionId(newAlternativeVersionId){this._alternativeVersionId=newAlternativeVersionId;}},{key:"_overwriteInitialUndoRedoSnapshot",value:function _overwriteInitialUndoRedoSnapshot(newInitialUndoRedoSnapshot){this._initialUndoRedoSnapshot=newInitialUndoRedoSnapshot;}},{key:"getValue",value:function getValue(eol){var preserveBOM=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this._assertNotDisposed();var fullModelRange=this.getFullModelRange();var fullModelValue=this.getValueInRange(fullModelRange,eol);if(preserveBOM){return this._buffer.getBOM()+fullModelValue;}return fullModelValue;}},{key:"createSnapshot",value:function createSnapshot(){var preserveBOM=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return new TextModelSnapshot(this._buffer.createSnapshot(preserveBOM));}},{key:"getValueLength",value:function getValueLength(eol){var preserveBOM=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this._assertNotDisposed();var fullModelRange=this.getFullModelRange();var fullModelValue=this.getValueLengthInRange(fullModelRange,eol);if(preserveBOM){return this._buffer.getBOM().length+fullModelValue;}return fullModelValue;}},{key:"getValueInRange",value:function getValueInRange(rawRange)/* TextDefined */{var eol=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._assertNotDisposed();return this._buffer.getValueInRange(this.validateRange(rawRange),eol);}},{key:"getValueLengthInRange",value:function getValueLengthInRange(rawRange)/* TextDefined */{var eol=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._assertNotDisposed();return this._buffer.getValueLengthInRange(this.validateRange(rawRange),eol);}},{key:"getCharacterCountInRange",value:function getCharacterCountInRange(rawRange)/* TextDefined */{var eol=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._assertNotDisposed();return this._buffer.getCharacterCountInRange(this.validateRange(rawRange),eol);}},{key:"getLineCount",value:function getLineCount(){this._assertNotDisposed();return this._buffer.getLineCount();}},{key:"getLineContent",value:function getLineContent(lineNumber){this._assertNotDisposed();if(lineNumber<1||lineNumber>this.getLineCount()){throw new Error('Illegal value for lineNumber');}return this._buffer.getLineContent(lineNumber);}},{key:"getLineLength",value:function getLineLength(lineNumber){this._assertNotDisposed();if(lineNumber<1||lineNumber>this.getLineCount()){throw new Error('Illegal value for lineNumber');}return this._buffer.getLineLength(lineNumber);}},{key:"getLinesContent",value:function getLinesContent(){this._assertNotDisposed();return this._buffer.getLinesContent();}},{key:"getEOL",value:function getEOL(){this._assertNotDisposed();return this._buffer.getEOL();}},{key:"getEndOfLineSequence",value:function getEndOfLineSequence(){this._assertNotDisposed();return this._buffer.getEOL()==='\n'?0/* LF */:1/* CRLF */;}},{key:"getLineMinColumn",value:function getLineMinColumn(lineNumber){this._assertNotDisposed();return 1;}},{key:"getLineMaxColumn",value:function getLineMaxColumn(lineNumber){this._assertNotDisposed();if(lineNumber<1||lineNumber>this.getLineCount()){throw new Error('Illegal value for lineNumber');}return this._buffer.getLineLength(lineNumber)+1;}},{key:"getLineFirstNonWhitespaceColumn",value:function getLineFirstNonWhitespaceColumn(lineNumber){this._assertNotDisposed();if(lineNumber<1||lineNumber>this.getLineCount()){throw new Error('Illegal value for lineNumber');}return this._buffer.getLineFirstNonWhitespaceColumn(lineNumber);}},{key:"getLineLastNonWhitespaceColumn",value:function getLineLastNonWhitespaceColumn(lineNumber){this._assertNotDisposed();if(lineNumber<1||lineNumber>this.getLineCount()){throw new Error('Illegal value for lineNumber');}return this._buffer.getLineLastNonWhitespaceColumn(lineNumber);}/**
     * Validates `range` is within buffer bounds, but allows it to sit in between surrogate pairs, etc.
     * Will try to not allocate if possible.
     */},{key:"_validateRangeRelaxedNoAllocations",value:function _validateRangeRelaxedNoAllocations(range){var linesCount=this._buffer.getLineCount();var initialStartLineNumber=range.startLineNumber;var initialStartColumn=range.startColumn;var startLineNumber=Math.floor(typeof initialStartLineNumber==='number'&&!isNaN(initialStartLineNumber)?initialStartLineNumber:1);var startColumn=Math.floor(typeof initialStartColumn==='number'&&!isNaN(initialStartColumn)?initialStartColumn:1);if(startLineNumber<1){startLineNumber=1;startColumn=1;}else if(startLineNumber>linesCount){startLineNumber=linesCount;startColumn=this.getLineMaxColumn(startLineNumber);}else{if(startColumn<=1){startColumn=1;}else{var maxColumn=this.getLineMaxColumn(startLineNumber);if(startColumn>=maxColumn){startColumn=maxColumn;}}}var initialEndLineNumber=range.endLineNumber;var initialEndColumn=range.endColumn;var endLineNumber=Math.floor(typeof initialEndLineNumber==='number'&&!isNaN(initialEndLineNumber)?initialEndLineNumber:1);var endColumn=Math.floor(typeof initialEndColumn==='number'&&!isNaN(initialEndColumn)?initialEndColumn:1);if(endLineNumber<1){endLineNumber=1;endColumn=1;}else if(endLineNumber>linesCount){endLineNumber=linesCount;endColumn=this.getLineMaxColumn(endLineNumber);}else{if(endColumn<=1){endColumn=1;}else{var _maxColumn=this.getLineMaxColumn(endLineNumber);if(endColumn>=_maxColumn){endColumn=_maxColumn;}}}if(initialStartLineNumber===startLineNumber&&initialStartColumn===startColumn&&initialEndLineNumber===endLineNumber&&initialEndColumn===endColumn&&range instanceof core_range/* Range */.e&&!(range instanceof selection/* Selection */.Y)){return range;}return new core_range/* Range */.e(startLineNumber,startColumn,endLineNumber,endColumn);}},{key:"_isValidPosition",value:function _isValidPosition(lineNumber,column,validationType){if(typeof lineNumber!=='number'||typeof column!=='number'){return false;}if(isNaN(lineNumber)||isNaN(column)){return false;}if(lineNumber<1||column<1){return false;}if((lineNumber|0)!==lineNumber||(column|0)!==column){return false;}var lineCount=this._buffer.getLineCount();if(lineNumber>lineCount){return false;}if(column===1){return true;}var maxColumn=this.getLineMaxColumn(lineNumber);if(column>maxColumn){return false;}if(validationType===1/* SurrogatePairs */){// !!At this point, column > 1
var charCodeBefore=this._buffer.getLineCharCode(lineNumber,column-2);if(strings/* isHighSurrogate */.ZG(charCodeBefore)){return false;}}return true;}},{key:"_validatePosition",value:function _validatePosition(_lineNumber,_column,validationType){var lineNumber=Math.floor(typeof _lineNumber==='number'&&!isNaN(_lineNumber)?_lineNumber:1);var column=Math.floor(typeof _column==='number'&&!isNaN(_column)?_column:1);var lineCount=this._buffer.getLineCount();if(lineNumber<1){return new core_position/* Position */.L(1,1);}if(lineNumber>lineCount){return new core_position/* Position */.L(lineCount,this.getLineMaxColumn(lineCount));}if(column<=1){return new core_position/* Position */.L(lineNumber,1);}var maxColumn=this.getLineMaxColumn(lineNumber);if(column>=maxColumn){return new core_position/* Position */.L(lineNumber,maxColumn);}if(validationType===1/* SurrogatePairs */){// If the position would end up in the middle of a high-low surrogate pair,
// we move it to before the pair
// !!At this point, column > 1
var charCodeBefore=this._buffer.getLineCharCode(lineNumber,column-2);if(strings/* isHighSurrogate */.ZG(charCodeBefore)){return new core_position/* Position */.L(lineNumber,column-1);}}return new core_position/* Position */.L(lineNumber,column);}},{key:"validatePosition",value:function validatePosition(position){var validationType=1/* SurrogatePairs */;this._assertNotDisposed();// Avoid object allocation and cover most likely case
if(position instanceof core_position/* Position */.L){if(this._isValidPosition(position.lineNumber,position.column,validationType)){return position;}}return this._validatePosition(position.lineNumber,position.column,validationType);}},{key:"_isValidRange",value:function _isValidRange(range,validationType){var startLineNumber=range.startLineNumber;var startColumn=range.startColumn;var endLineNumber=range.endLineNumber;var endColumn=range.endColumn;if(!this._isValidPosition(startLineNumber,startColumn,0/* Relaxed */)){return false;}if(!this._isValidPosition(endLineNumber,endColumn,0/* Relaxed */)){return false;}if(validationType===1/* SurrogatePairs */){var charCodeBeforeStart=startColumn>1?this._buffer.getLineCharCode(startLineNumber,startColumn-2):0;var charCodeBeforeEnd=endColumn>1&&endColumn<=this._buffer.getLineLength(endLineNumber)?this._buffer.getLineCharCode(endLineNumber,endColumn-2):0;var startInsideSurrogatePair=strings/* isHighSurrogate */.ZG(charCodeBeforeStart);var endInsideSurrogatePair=strings/* isHighSurrogate */.ZG(charCodeBeforeEnd);if(!startInsideSurrogatePair&&!endInsideSurrogatePair){return true;}return false;}return true;}},{key:"validateRange",value:function validateRange(_range){var validationType=1/* SurrogatePairs */;this._assertNotDisposed();// Avoid object allocation and cover most likely case
if(_range instanceof core_range/* Range */.e&&!(_range instanceof selection/* Selection */.Y)){if(this._isValidRange(_range,validationType)){return _range;}}var start=this._validatePosition(_range.startLineNumber,_range.startColumn,0/* Relaxed */);var end=this._validatePosition(_range.endLineNumber,_range.endColumn,0/* Relaxed */);var startLineNumber=start.lineNumber;var startColumn=start.column;var endLineNumber=end.lineNumber;var endColumn=end.column;if(validationType===1/* SurrogatePairs */){var charCodeBeforeStart=startColumn>1?this._buffer.getLineCharCode(startLineNumber,startColumn-2):0;var charCodeBeforeEnd=endColumn>1&&endColumn<=this._buffer.getLineLength(endLineNumber)?this._buffer.getLineCharCode(endLineNumber,endColumn-2):0;var startInsideSurrogatePair=strings/* isHighSurrogate */.ZG(charCodeBeforeStart);var endInsideSurrogatePair=strings/* isHighSurrogate */.ZG(charCodeBeforeEnd);if(!startInsideSurrogatePair&&!endInsideSurrogatePair){return new core_range/* Range */.e(startLineNumber,startColumn,endLineNumber,endColumn);}if(startLineNumber===endLineNumber&&startColumn===endColumn){// do not expand a collapsed range, simply move it to a valid location
return new core_range/* Range */.e(startLineNumber,startColumn-1,endLineNumber,endColumn-1);}if(startInsideSurrogatePair&&endInsideSurrogatePair){// expand range at both ends
return new core_range/* Range */.e(startLineNumber,startColumn-1,endLineNumber,endColumn+1);}if(startInsideSurrogatePair){// only expand range at the start
return new core_range/* Range */.e(startLineNumber,startColumn-1,endLineNumber,endColumn);}// only expand range at the end
return new core_range/* Range */.e(startLineNumber,startColumn,endLineNumber,endColumn+1);}return new core_range/* Range */.e(startLineNumber,startColumn,endLineNumber,endColumn);}},{key:"modifyPosition",value:function modifyPosition(rawPosition,offset){this._assertNotDisposed();var candidate=this.getOffsetAt(rawPosition)+offset;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,candidate)));}},{key:"getFullModelRange",value:function getFullModelRange(){this._assertNotDisposed();var lineCount=this.getLineCount();return new core_range/* Range */.e(1,1,lineCount,this.getLineMaxColumn(lineCount));}},{key:"findMatchesLineByLine",value:function findMatchesLineByLine(searchRange,searchData,captureMatches,limitResultCount){return this._buffer.findMatchesLineByLine(searchRange,searchData,captureMatches,limitResultCount);}},{key:"findMatches",value:function findMatches(searchString,rawSearchScope,isRegex,matchCase,wordSeparators,captureMatches){var _this2=this;var limitResultCount=arguments.length>6&&arguments[6]!==undefined?arguments[6]:LIMIT_FIND_COUNT;this._assertNotDisposed();var searchRanges=null;if(rawSearchScope!==null){if(!Array.isArray(rawSearchScope)){rawSearchScope=[rawSearchScope];}if(rawSearchScope.every(function(searchScope){return core_range/* Range.isIRange */.e.isIRange(searchScope);})){searchRanges=rawSearchScope.map(function(searchScope){return _this2.validateRange(searchScope);});}}if(searchRanges===null){searchRanges=[this.getFullModelRange()];}searchRanges=searchRanges.sort(function(d1,d2){return d1.startLineNumber-d2.startLineNumber||d1.startColumn-d2.startColumn;});var uniqueSearchRanges=[];uniqueSearchRanges.push(searchRanges.reduce(function(prev,curr){if(core_range/* Range.areIntersecting */.e.areIntersecting(prev,curr)){return prev.plusRange(curr);}uniqueSearchRanges.push(prev);return curr;}));var matchMapper;if(!isRegex&&searchString.indexOf('\n')<0){// not regex, not multi line
var searchParams=new textModelSearch/* SearchParams */.bc(searchString,isRegex,matchCase,wordSeparators);var searchData=searchParams.parseSearchRequest();if(!searchData){return[];}matchMapper=function matchMapper(searchRange){return _this2.findMatchesLineByLine(searchRange,searchData,captureMatches,limitResultCount);};}else{matchMapper=function matchMapper(searchRange){return textModelSearch/* TextModelSearch.findMatches */.pM.findMatches(_this2,new textModelSearch/* SearchParams */.bc(searchString,isRegex,matchCase,wordSeparators),searchRange,captureMatches,limitResultCount);};}return uniqueSearchRanges.map(matchMapper).reduce(function(arr,matches){return arr.concat(matches);},[]);}},{key:"findNextMatch",value:function findNextMatch(searchString,rawSearchStart,isRegex,matchCase,wordSeparators,captureMatches){this._assertNotDisposed();var searchStart=this.validatePosition(rawSearchStart);if(!isRegex&&searchString.indexOf('\n')<0){var searchParams=new textModelSearch/* SearchParams */.bc(searchString,isRegex,matchCase,wordSeparators);var searchData=searchParams.parseSearchRequest();if(!searchData){return null;}var lineCount=this.getLineCount();var searchRange=new core_range/* Range */.e(searchStart.lineNumber,searchStart.column,lineCount,this.getLineMaxColumn(lineCount));var ret=this.findMatchesLineByLine(searchRange,searchData,captureMatches,1);textModelSearch/* TextModelSearch.findNextMatch */.pM.findNextMatch(this,new textModelSearch/* SearchParams */.bc(searchString,isRegex,matchCase,wordSeparators),searchStart,captureMatches);if(ret.length>0){return ret[0];}searchRange=new core_range/* Range */.e(1,1,searchStart.lineNumber,this.getLineMaxColumn(searchStart.lineNumber));ret=this.findMatchesLineByLine(searchRange,searchData,captureMatches,1);if(ret.length>0){return ret[0];}return null;}return textModelSearch/* TextModelSearch.findNextMatch */.pM.findNextMatch(this,new textModelSearch/* SearchParams */.bc(searchString,isRegex,matchCase,wordSeparators),searchStart,captureMatches);}},{key:"findPreviousMatch",value:function findPreviousMatch(searchString,rawSearchStart,isRegex,matchCase,wordSeparators,captureMatches){this._assertNotDisposed();var searchStart=this.validatePosition(rawSearchStart);return textModelSearch/* TextModelSearch.findPreviousMatch */.pM.findPreviousMatch(this,new textModelSearch/* SearchParams */.bc(searchString,isRegex,matchCase,wordSeparators),searchStart,captureMatches);}//#endregion
//#region Editing
},{key:"pushStackElement",value:function pushStackElement(){this._commandManager.pushStackElement();}},{key:"popStackElement",value:function popStackElement(){this._commandManager.popStackElement();}},{key:"pushEOL",value:function pushEOL(eol){var currentEOL=this.getEOL()==='\n'?0/* LF */:1/* CRLF */;if(currentEOL===eol){return;}try{this._onDidChangeDecorations.beginDeferredEmit();this._eventEmitter.beginDeferredEmit();if(this._initialUndoRedoSnapshot===null){this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri);}this._commandManager.pushEOL(eol);}finally{this._eventEmitter.endDeferredEmit();this._onDidChangeDecorations.endDeferredEmit();}}},{key:"_validateEditOperation",value:function _validateEditOperation(rawOperation){if(rawOperation instanceof model/* ValidAnnotatedEditOperation */.Qi){return rawOperation;}return new model/* ValidAnnotatedEditOperation */.Qi(rawOperation.identifier||null,this.validateRange(rawOperation.range),rawOperation.text,rawOperation.forceMoveMarkers||false,rawOperation.isAutoWhitespaceEdit||false,rawOperation._isTracked||false);}},{key:"_validateEditOperations",value:function _validateEditOperations(rawOperations){var result=[];for(var i=0,len=rawOperations.length;i<len;i++){result[i]=this._validateEditOperation(rawOperations[i]);}return result;}},{key:"pushEditOperations",value:function pushEditOperations(beforeCursorState,editOperations,cursorStateComputer){try{this._onDidChangeDecorations.beginDeferredEmit();this._eventEmitter.beginDeferredEmit();return this._pushEditOperations(beforeCursorState,this._validateEditOperations(editOperations),cursorStateComputer);}finally{this._eventEmitter.endDeferredEmit();this._onDidChangeDecorations.endDeferredEmit();}}},{key:"_pushEditOperations",value:function _pushEditOperations(beforeCursorState,editOperations,cursorStateComputer){var _this3=this;if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){// Go through each saved line number and insert a trim whitespace edit
// if it is safe to do so (no conflicts with other edits).
var incomingEdits=editOperations.map(function(op){return{range:_this3.validateRange(op.range),text:op.text};});// Sometimes, auto-formatters change ranges automatically which can cause undesired auto whitespace trimming near the cursor
// We'll use the following heuristic: if the edits occur near the cursor, then it's ok to trim auto whitespace
var editsAreNearCursors=true;if(beforeCursorState){for(var i=0,len=beforeCursorState.length;i<len;i++){var sel=beforeCursorState[i];var foundEditNearSel=false;for(var j=0,lenJ=incomingEdits.length;j<lenJ;j++){var editRange=incomingEdits[j].range;var selIsAbove=editRange.startLineNumber>sel.endLineNumber;var selIsBelow=sel.startLineNumber>editRange.endLineNumber;if(!selIsAbove&&!selIsBelow){foundEditNearSel=true;break;}}if(!foundEditNearSel){editsAreNearCursors=false;break;}}}if(editsAreNearCursors){for(var _i=0,_len=this._trimAutoWhitespaceLines.length;_i<_len;_i++){var trimLineNumber=this._trimAutoWhitespaceLines[_i];var maxLineColumn=this.getLineMaxColumn(trimLineNumber);var allowTrimLine=true;for(var _j=0,_lenJ=incomingEdits.length;_j<_lenJ;_j++){var _editRange=incomingEdits[_j].range;var editText=incomingEdits[_j].text;if(trimLineNumber<_editRange.startLineNumber||trimLineNumber>_editRange.endLineNumber){// `trimLine` is completely outside this edit
continue;}// At this point:
//   editRange.startLineNumber <= trimLine <= editRange.endLineNumber
if(trimLineNumber===_editRange.startLineNumber&&_editRange.startColumn===maxLineColumn&&_editRange.isEmpty()&&editText&&editText.length>0&&editText.charAt(0)==='\n'){// This edit inserts a new line (and maybe other text) after `trimLine`
continue;}if(trimLineNumber===_editRange.startLineNumber&&_editRange.startColumn===1&&_editRange.isEmpty()&&editText&&editText.length>0&&editText.charAt(editText.length-1)==='\n'){// This edit inserts a new line (and maybe other text) before `trimLine`
continue;}// Looks like we can't trim this line as it would interfere with an incoming edit
allowTrimLine=false;break;}if(allowTrimLine){var trimRange=new core_range/* Range */.e(trimLineNumber,1,trimLineNumber,maxLineColumn);editOperations.push(new model/* ValidAnnotatedEditOperation */.Qi(null,trimRange,null,false,false,false));}}}this._trimAutoWhitespaceLines=null;}if(this._initialUndoRedoSnapshot===null){this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri);}return this._commandManager.pushEditOperation(beforeCursorState,editOperations,cursorStateComputer);}},{key:"_applyUndo",value:function _applyUndo(changes,eol,resultingAlternativeVersionId,resultingSelection){var _this4=this;var edits=changes.map(function(change){var rangeStart=_this4.getPositionAt(change.newPosition);var rangeEnd=_this4.getPositionAt(change.newEnd);return{range:new core_range/* Range */.e(rangeStart.lineNumber,rangeStart.column,rangeEnd.lineNumber,rangeEnd.column),text:change.oldText};});this._applyUndoRedoEdits(edits,eol,true,false,resultingAlternativeVersionId,resultingSelection);}},{key:"_applyRedo",value:function _applyRedo(changes,eol,resultingAlternativeVersionId,resultingSelection){var _this5=this;var edits=changes.map(function(change){var rangeStart=_this5.getPositionAt(change.oldPosition);var rangeEnd=_this5.getPositionAt(change.oldEnd);return{range:new core_range/* Range */.e(rangeStart.lineNumber,rangeStart.column,rangeEnd.lineNumber,rangeEnd.column),text:change.newText};});this._applyUndoRedoEdits(edits,eol,false,true,resultingAlternativeVersionId,resultingSelection);}},{key:"_applyUndoRedoEdits",value:function _applyUndoRedoEdits(edits,eol,isUndoing,isRedoing,resultingAlternativeVersionId,resultingSelection){try{this._onDidChangeDecorations.beginDeferredEmit();this._eventEmitter.beginDeferredEmit();this._isUndoing=isUndoing;this._isRedoing=isRedoing;this.applyEdits(edits,false);this.setEOL(eol);this._overwriteAlternativeVersionId(resultingAlternativeVersionId);}finally{this._isUndoing=false;this._isRedoing=false;this._eventEmitter.endDeferredEmit(resultingSelection);this._onDidChangeDecorations.endDeferredEmit();}}},{key:"applyEdits",value:function applyEdits(rawOperations){var computeUndoEdits=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;try{this._onDidChangeDecorations.beginDeferredEmit();this._eventEmitter.beginDeferredEmit();var operations=this._validateEditOperations(rawOperations);return this._doApplyEdits(operations,computeUndoEdits);}finally{this._eventEmitter.endDeferredEmit();this._onDidChangeDecorations.endDeferredEmit();}}},{key:"_doApplyEdits",value:function _doApplyEdits(rawOperations,computeUndoEdits){var _this6=this;var oldLineCount=this._buffer.getLineCount();var result=this._buffer.applyEdits(rawOperations,this._options.trimAutoWhitespace,computeUndoEdits);var newLineCount=this._buffer.getLineCount();var contentChanges=result.changes;this._trimAutoWhitespaceLines=result.trimAutoWhitespaceLineNumbers;if(contentChanges.length!==0){// We do a first pass to update tokens and decorations
// because we want to read decorations in the second pass
// where we will emit content change events
// and we want to read the final decorations
for(var i=0,len=contentChanges.length;i<len;i++){var change=contentChanges[i];var _countEOL=(0,eolCounter/* countEOL */.Q)(change.text),_countEOL2=textModel_slicedToArray(_countEOL,3),eolCount=_countEOL2[0],firstLineLength=_countEOL2[1],lastLineLength=_countEOL2[2];this._tokens.acceptEdit(change.range,eolCount,firstLineLength);this._semanticTokens.acceptEdit(change.range,eolCount,firstLineLength,lastLineLength,change.text.length>0?change.text.charCodeAt(0):0/* Null */);this._decorationsTree.acceptReplace(change.rangeOffset,change.rangeLength,change.text.length,change.forceMoveMarkers);}var rawContentChanges=[];this._increaseVersionId();var lineCount=oldLineCount;for(var _i2=0,_len2=contentChanges.length;_i2<_len2;_i2++){var _change=contentChanges[_i2];var _countEOL3=(0,eolCounter/* countEOL */.Q)(_change.text),_countEOL4=textModel_slicedToArray(_countEOL3,1),_eolCount=_countEOL4[0];this._onDidChangeDecorations.fire();var startLineNumber=_change.range.startLineNumber;var endLineNumber=_change.range.endLineNumber;var deletingLinesCnt=endLineNumber-startLineNumber;var insertingLinesCnt=_eolCount;var editingLinesCnt=Math.min(deletingLinesCnt,insertingLinesCnt);var changeLineCountDelta=insertingLinesCnt-deletingLinesCnt;var currentEditStartLineNumber=newLineCount-lineCount-changeLineCountDelta+startLineNumber;var firstEditLineNumber=currentEditStartLineNumber;var lastInsertedLineNumber=currentEditStartLineNumber+insertingLinesCnt;var decorationsWithInjectedTextInEditedRange=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new core_position/* Position */.L(firstEditLineNumber,1)),this.getOffsetAt(new core_position/* Position */.L(lastInsertedLineNumber,this.getLineMaxColumn(lastInsertedLineNumber))),0);var injectedTextInEditedRange=textModelEvents/* LineInjectedText.fromDecorations */.gk.fromDecorations(decorationsWithInjectedTextInEditedRange);var injectedTextInEditedRangeQueue=new arrays/* ArrayQueue */.H9(injectedTextInEditedRange);var _loop=function _loop(j){var editLineNumber=startLineNumber+j;var currentEditLineNumber=currentEditStartLineNumber+j;injectedTextInEditedRangeQueue.takeFromEndWhile(function(r){return r.lineNumber>currentEditLineNumber;});var decorationsInCurrentLine=injectedTextInEditedRangeQueue.takeFromEndWhile(function(r){return r.lineNumber===currentEditLineNumber;});rawContentChanges.push(new textModelEvents/* ModelRawLineChanged */.rU(editLineNumber,_this6.getLineContent(currentEditLineNumber),decorationsInCurrentLine));};for(var j=editingLinesCnt;j>=0;j--){_loop(j);}if(editingLinesCnt<deletingLinesCnt){// Must delete some lines
var spliceStartLineNumber=startLineNumber+editingLinesCnt;rawContentChanges.push(new textModelEvents/* ModelRawLinesDeleted */.lN(spliceStartLineNumber+1,endLineNumber));}if(editingLinesCnt<insertingLinesCnt){var _injectedTextInEditedRangeQueue=new arrays/* ArrayQueue */.H9(injectedTextInEditedRange);// Must insert some lines
var spliceLineNumber=startLineNumber+editingLinesCnt;var cnt=insertingLinesCnt-editingLinesCnt;var fromLineNumber=newLineCount-lineCount-cnt+spliceLineNumber+1;var injectedTexts=[];var newLines=[];var _loop2=function _loop2(_i3){var lineNumber=fromLineNumber+_i3;newLines[_i3]=_this6.getLineContent(lineNumber);_injectedTextInEditedRangeQueue.takeWhile(function(r){return r.lineNumber<lineNumber;});injectedTexts[_i3]=_injectedTextInEditedRangeQueue.takeWhile(function(r){return r.lineNumber===lineNumber;});};for(var _i3=0;_i3<cnt;_i3++){_loop2(_i3);}rawContentChanges.push(new textModelEvents/* ModelRawLinesInserted */.Tx(spliceLineNumber+1,startLineNumber+insertingLinesCnt,newLines,injectedTexts));}lineCount+=changeLineCountDelta;}this._emitContentChangedEvent(new textModelEvents/* ModelRawContentChangedEvent */.dQ(rawContentChanges,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:contentChanges,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:false});}return result.reverseEdits===null?undefined:result.reverseEdits;}},{key:"undo",value:function undo(){return this._undoRedoService.undo(this.uri);}},{key:"canUndo",value:function canUndo(){return this._undoRedoService.canUndo(this.uri);}},{key:"redo",value:function redo(){return this._undoRedoService.redo(this.uri);}},{key:"canRedo",value:function canRedo(){return this._undoRedoService.canRedo(this.uri);}//#endregion
//#region Decorations
},{key:"handleBeforeFireDecorationsChangedEvent",value:function handleBeforeFireDecorationsChangedEvent(affectedInjectedTextLines){var _this7=this;// This is called before the decoration changed event is fired.
if(affectedInjectedTextLines===null||affectedInjectedTextLines.size===0){return;}var affectedLines=_toConsumableArray(affectedInjectedTextLines);var lineChangeEvents=affectedLines.map(function(lineNumber){return new textModelEvents/* ModelRawLineChanged */.rU(lineNumber,_this7.getLineContent(lineNumber),_this7._getInjectedTextInLine(lineNumber));});this._onDidChangeContentOrInjectedText.fire(new textModelEvents/* ModelInjectedTextChangedEvent */.D8(lineChangeEvents));}},{key:"changeDecorations",value:function changeDecorations(callback){var ownerId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._assertNotDisposed();try{this._onDidChangeDecorations.beginDeferredEmit();return this._changeDecorations(ownerId,callback);}finally{this._onDidChangeDecorations.endDeferredEmit();}}},{key:"_changeDecorations",value:function _changeDecorations(ownerId,callback){var _this8=this;var changeAccessor={addDecoration:function addDecoration(range,options){return _this8._deltaDecorationsImpl(ownerId,[],[{range:range,options:options}])[0];},changeDecoration:function changeDecoration(id,newRange){_this8._changeDecorationImpl(id,newRange);},changeDecorationOptions:function changeDecorationOptions(id,options){_this8._changeDecorationOptionsImpl(id,_normalizeOptions(options));},removeDecoration:function removeDecoration(id){_this8._deltaDecorationsImpl(ownerId,[id],[]);},deltaDecorations:function deltaDecorations(oldDecorations,newDecorations){if(oldDecorations.length===0&&newDecorations.length===0){// nothing to do
return[];}return _this8._deltaDecorationsImpl(ownerId,oldDecorations,newDecorations);}};var result=null;try{result=callback(changeAccessor);}catch(e){(0,errors/* onUnexpectedError */.dL)(e);}// Invalidate change accessor
changeAccessor.addDecoration=invalidFunc;changeAccessor.changeDecoration=invalidFunc;changeAccessor.changeDecorationOptions=invalidFunc;changeAccessor.removeDecoration=invalidFunc;changeAccessor.deltaDecorations=invalidFunc;return result;}},{key:"deltaDecorations",value:function deltaDecorations(oldDecorations,newDecorations){var ownerId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this._assertNotDisposed();if(!oldDecorations){oldDecorations=[];}if(oldDecorations.length===0&&newDecorations.length===0){// nothing to do
return[];}try{this._onDidChangeDecorations.beginDeferredEmit();return this._deltaDecorationsImpl(ownerId,oldDecorations,newDecorations);}finally{this._onDidChangeDecorations.endDeferredEmit();}}},{key:"_getTrackedRange",value:function _getTrackedRange(id){return this.getDecorationRange(id);}},{key:"_setTrackedRange",value:function _setTrackedRange(id,newRange,newStickiness){var node=id?this._decorations[id]:null;if(!node){if(!newRange){// node doesn't exist, the request is to delete => nothing to do
return null;}// node doesn't exist, the request is to set => add the tracked range
return this._deltaDecorationsImpl(0,[],[{range:newRange,options:TRACKED_RANGE_OPTIONS[newStickiness]}])[0];}if(!newRange){// node exists, the request is to delete => delete node
this._decorationsTree.delete(node);delete this._decorations[node.id];return null;}// node exists, the request is to set => change the tracked range and its options
var range=this._validateRangeRelaxedNoAllocations(newRange);var startOffset=this._buffer.getOffsetAt(range.startLineNumber,range.startColumn);var endOffset=this._buffer.getOffsetAt(range.endLineNumber,range.endColumn);this._decorationsTree.delete(node);node.reset(this.getVersionId(),startOffset,endOffset,range);node.setOptions(TRACKED_RANGE_OPTIONS[newStickiness]);this._decorationsTree.insert(node);return node.id;}},{key:"removeAllDecorationsWithOwnerId",value:function removeAllDecorationsWithOwnerId(ownerId){if(this._isDisposed){return;}var nodes=this._decorationsTree.collectNodesFromOwner(ownerId);for(var i=0,len=nodes.length;i<len;i++){var node=nodes[i];this._decorationsTree.delete(node);delete this._decorations[node.id];}}},{key:"getDecorationOptions",value:function getDecorationOptions(decorationId){var node=this._decorations[decorationId];if(!node){return null;}return node.options;}},{key:"getDecorationRange",value:function getDecorationRange(decorationId){var node=this._decorations[decorationId];if(!node){return null;}return this._decorationsTree.getNodeRange(this,node);}},{key:"getLineDecorations",value:function getLineDecorations(lineNumber){var ownerId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var filterOutValidation=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(lineNumber<1||lineNumber>this.getLineCount()){return[];}return this.getLinesDecorations(lineNumber,lineNumber,ownerId,filterOutValidation);}},{key:"getLinesDecorations",value:function getLinesDecorations(_startLineNumber,_endLineNumber){var ownerId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var filterOutValidation=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var lineCount=this.getLineCount();var startLineNumber=Math.min(lineCount,Math.max(1,_startLineNumber));var endLineNumber=Math.min(lineCount,Math.max(1,_endLineNumber));var endColumn=this.getLineMaxColumn(endLineNumber);var range=new core_range/* Range */.e(startLineNumber,1,endLineNumber,endColumn);var decorations=this._getDecorationsInRange(range,ownerId,filterOutValidation);decorations.push.apply(decorations,_toConsumableArray(this._decorationProvider.getDecorationsInRange(range,ownerId,filterOutValidation)));return decorations;}},{key:"getDecorationsInRange",value:function getDecorationsInRange(range){var ownerId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var filterOutValidation=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var validatedRange=this.validateRange(range);var decorations=this._getDecorationsInRange(validatedRange,ownerId,filterOutValidation);decorations.push.apply(decorations,_toConsumableArray(this._decorationProvider.getDecorationsInRange(validatedRange,ownerId,filterOutValidation)));return decorations;}},{key:"getOverviewRulerDecorations",value:function getOverviewRulerDecorations(){var ownerId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var filterOutValidation=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return this._decorationsTree.getAll(this,ownerId,filterOutValidation,true);}},{key:"getInjectedTextDecorations",value:function getInjectedTextDecorations(){var ownerId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return this._decorationsTree.getAllInjectedText(this,ownerId);}},{key:"_getInjectedTextInLine",value:function _getInjectedTextInLine(lineNumber){var startOffset=this._buffer.getOffsetAt(lineNumber,1);var endOffset=startOffset+this._buffer.getLineLength(lineNumber);var result=this._decorationsTree.getInjectedTextInInterval(this,startOffset,endOffset,0);return textModelEvents/* LineInjectedText.fromDecorations */.gk.fromDecorations(result).filter(function(t){return t.lineNumber===lineNumber;});}},{key:"getAllDecorations",value:function getAllDecorations(){var ownerId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var filterOutValidation=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var result=this._decorationsTree.getAll(this,ownerId,filterOutValidation,false);result=result.concat(this._decorationProvider.getAllDecorations(ownerId,filterOutValidation));return result;}},{key:"_getDecorationsInRange",value:function _getDecorationsInRange(filterRange,filterOwnerId,filterOutValidation){var startOffset=this._buffer.getOffsetAt(filterRange.startLineNumber,filterRange.startColumn);var endOffset=this._buffer.getOffsetAt(filterRange.endLineNumber,filterRange.endColumn);return this._decorationsTree.getAllInInterval(this,startOffset,endOffset,filterOwnerId,filterOutValidation);}},{key:"getRangeAt",value:function getRangeAt(start,end){return this._buffer.getRangeAt(start,end-start);}},{key:"_changeDecorationImpl",value:function _changeDecorationImpl(decorationId,_range){var node=this._decorations[decorationId];if(!node){return;}if(node.options.after){var oldRange=this.getDecorationRange(decorationId);this._onDidChangeDecorations.recordLineAffectedByInjectedText(oldRange.endLineNumber);}if(node.options.before){var _oldRange=this.getDecorationRange(decorationId);this._onDidChangeDecorations.recordLineAffectedByInjectedText(_oldRange.startLineNumber);}var range=this._validateRangeRelaxedNoAllocations(_range);var startOffset=this._buffer.getOffsetAt(range.startLineNumber,range.startColumn);var endOffset=this._buffer.getOffsetAt(range.endLineNumber,range.endColumn);this._decorationsTree.delete(node);node.reset(this.getVersionId(),startOffset,endOffset,range);this._decorationsTree.insert(node);this._onDidChangeDecorations.checkAffectedAndFire(node.options);if(node.options.after){this._onDidChangeDecorations.recordLineAffectedByInjectedText(range.endLineNumber);}if(node.options.before){this._onDidChangeDecorations.recordLineAffectedByInjectedText(range.startLineNumber);}}},{key:"_changeDecorationOptionsImpl",value:function _changeDecorationOptionsImpl(decorationId,options){var node=this._decorations[decorationId];if(!node){return;}var nodeWasInOverviewRuler=node.options.overviewRuler&&node.options.overviewRuler.color?true:false;var nodeIsInOverviewRuler=options.overviewRuler&&options.overviewRuler.color?true:false;this._onDidChangeDecorations.checkAffectedAndFire(node.options);this._onDidChangeDecorations.checkAffectedAndFire(options);if(node.options.after||options.after){var nodeRange=this._decorationsTree.getNodeRange(this,node);this._onDidChangeDecorations.recordLineAffectedByInjectedText(nodeRange.endLineNumber);}if(node.options.before||options.before){var _nodeRange=this._decorationsTree.getNodeRange(this,node);this._onDidChangeDecorations.recordLineAffectedByInjectedText(_nodeRange.startLineNumber);}if(nodeWasInOverviewRuler!==nodeIsInOverviewRuler){// Delete + Insert due to an overview ruler status change
this._decorationsTree.delete(node);node.setOptions(options);this._decorationsTree.insert(node);}else{node.setOptions(options);}}},{key:"_deltaDecorationsImpl",value:function _deltaDecorationsImpl(ownerId,oldDecorationsIds,newDecorations){var versionId=this.getVersionId();var oldDecorationsLen=oldDecorationsIds.length;var oldDecorationIndex=0;var newDecorationsLen=newDecorations.length;var newDecorationIndex=0;var result=new Array(newDecorationsLen);while(oldDecorationIndex<oldDecorationsLen||newDecorationIndex<newDecorationsLen){var node=null;if(oldDecorationIndex<oldDecorationsLen){// (1) get ourselves an old node
do{node=this._decorations[oldDecorationsIds[oldDecorationIndex++]];}while(!node&&oldDecorationIndex<oldDecorationsLen);// (2) remove the node from the tree (if it exists)
if(node){if(node.options.after){var nodeRange=this._decorationsTree.getNodeRange(this,node);this._onDidChangeDecorations.recordLineAffectedByInjectedText(nodeRange.endLineNumber);}if(node.options.before){var _nodeRange2=this._decorationsTree.getNodeRange(this,node);this._onDidChangeDecorations.recordLineAffectedByInjectedText(_nodeRange2.startLineNumber);}this._decorationsTree.delete(node);this._onDidChangeDecorations.checkAffectedAndFire(node.options);}}if(newDecorationIndex<newDecorationsLen){// (3) create a new node if necessary
if(!node){var internalDecorationId=++this._lastDecorationId;var decorationId="".concat(this._instanceId,";").concat(internalDecorationId);node=new IntervalNode(decorationId,0,0);this._decorations[decorationId]=node;}// (4) initialize node
var newDecoration=newDecorations[newDecorationIndex];var range=this._validateRangeRelaxedNoAllocations(newDecoration.range);var options=_normalizeOptions(newDecoration.options);var startOffset=this._buffer.getOffsetAt(range.startLineNumber,range.startColumn);var endOffset=this._buffer.getOffsetAt(range.endLineNumber,range.endColumn);node.ownerId=ownerId;node.reset(versionId,startOffset,endOffset,range);node.setOptions(options);if(node.options.after){this._onDidChangeDecorations.recordLineAffectedByInjectedText(range.endLineNumber);}if(node.options.before){this._onDidChangeDecorations.recordLineAffectedByInjectedText(range.startLineNumber);}this._onDidChangeDecorations.checkAffectedAndFire(options);this._decorationsTree.insert(node);result[newDecorationIndex]=node.id;newDecorationIndex++;}else{if(node){delete this._decorations[node.id];}}}return result;}},{key:"setTokens",value:function setTokens(tokens){var backgroundTokenizationCompleted=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(tokens.length!==0){var ranges=[];for(var i=0,len=tokens.length;i<len;i++){var element=tokens[i];var minChangedLineNumber=0;var maxChangedLineNumber=0;var hasChange=false;for(var lineNumber=element.startLineNumber;lineNumber<=element.endLineNumber;lineNumber++){if(hasChange){this._tokens.setTokens(this._languageId,lineNumber-1,this._buffer.getLineLength(lineNumber),element.getLineTokens(lineNumber),false);maxChangedLineNumber=lineNumber;}else{var lineHasChange=this._tokens.setTokens(this._languageId,lineNumber-1,this._buffer.getLineLength(lineNumber),element.getLineTokens(lineNumber),true);if(lineHasChange){hasChange=true;minChangedLineNumber=lineNumber;maxChangedLineNumber=lineNumber;}}}if(hasChange){ranges.push({fromLineNumber:minChangedLineNumber,toLineNumber:maxChangedLineNumber});}}if(ranges.length>0){this._emitModelTokensChangedEvent({tokenizationSupportChanged:false,semanticTokensApplied:false,ranges:ranges});}}this.handleTokenizationProgress(backgroundTokenizationCompleted);}},{key:"setSemanticTokens",value:function setSemanticTokens(tokens,isComplete){this._semanticTokens.set(tokens,isComplete);this._emitModelTokensChangedEvent({tokenizationSupportChanged:false,semanticTokensApplied:tokens!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]});}},{key:"hasCompleteSemanticTokens",value:function hasCompleteSemanticTokens(){return this._semanticTokens.isComplete();}},{key:"hasSomeSemanticTokens",value:function hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty();}},{key:"setPartialSemanticTokens",value:function setPartialSemanticTokens(range,tokens){if(this.hasCompleteSemanticTokens()){return;}var changedRange=this.validateRange(this._semanticTokens.setPartial(range,tokens));this._emitModelTokensChangedEvent({tokenizationSupportChanged:false,semanticTokensApplied:true,ranges:[{fromLineNumber:changedRange.startLineNumber,toLineNumber:changedRange.endLineNumber}]});}},{key:"tokenizeViewport",value:function tokenizeViewport(startLineNumber,endLineNumber){startLineNumber=Math.max(1,startLineNumber);endLineNumber=Math.min(this._buffer.getLineCount(),endLineNumber);this._tokenization.tokenizeViewport(startLineNumber,endLineNumber);}},{key:"clearTokens",value:function clearTokens(){this._tokens.flush();this._emitModelTokensChangedEvent({tokenizationSupportChanged:true,semanticTokensApplied:false,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]});}},{key:"_emitModelTokensChangedEvent",value:function _emitModelTokensChangedEvent(e){if(!this._isDisposing){this._onDidChangeTokens.fire(e);}}},{key:"resetTokenization",value:function resetTokenization(){this._tokenization.reset();}},{key:"forceTokenization",value:function forceTokenization(lineNumber){if(lineNumber<1||lineNumber>this.getLineCount()){throw new Error('Illegal value for lineNumber');}this._tokenization.forceTokenization(lineNumber);}},{key:"isCheapToTokenize",value:function isCheapToTokenize(lineNumber){return this._tokenization.isCheapToTokenize(lineNumber);}},{key:"tokenizeIfCheap",value:function tokenizeIfCheap(lineNumber){if(this.isCheapToTokenize(lineNumber)){this.forceTokenization(lineNumber);}}},{key:"getLineTokens",value:function getLineTokens(lineNumber){if(lineNumber<1||lineNumber>this.getLineCount()){throw new Error('Illegal value for lineNumber');}return this._getLineTokens(lineNumber);}},{key:"_getLineTokens",value:function _getLineTokens(lineNumber){var lineText=this.getLineContent(lineNumber);var syntacticTokens=this._tokens.getTokens(this._languageId,lineNumber-1,lineText);return this._semanticTokens.addSparseTokens(lineNumber,syntacticTokens);}},{key:"getLanguageId",value:function getLanguageId(){return this._languageId;}},{key:"setMode",value:function setMode(languageId){if(this._languageId===languageId){// There's nothing to do
return;}var e={oldLanguage:this._languageId,newLanguage:languageId};this._languageId=languageId;this._onDidChangeLanguage.fire(e);this._onDidChangeLanguageConfiguration.fire({});}},{key:"getLanguageIdAtPosition",value:function getLanguageIdAtPosition(lineNumber,column){var position=this.validatePosition(new core_position/* Position */.L(lineNumber,column));var lineTokens=this.getLineTokens(position.lineNumber);return lineTokens.getLanguageId(lineTokens.findTokenIndexAtOffset(position.column-1));}},{key:"getTokenTypeIfInsertingCharacter",value:function getTokenTypeIfInsertingCharacter(lineNumber,column,character){var position=this.validatePosition(new core_position/* Position */.L(lineNumber,column));return this._tokenization.getTokenTypeIfInsertingCharacter(position,character);}},{key:"tokenizeLineWithEdit",value:function tokenizeLineWithEdit(position,length,newText){var validatedPosition=this.validatePosition(position);return this._tokenization.tokenizeLineWithEdit(validatedPosition,length,newText);}},{key:"getLanguageConfiguration",value:function getLanguageConfiguration(languageId){return this._languageConfigurationService.getLanguageConfiguration(languageId);}// Having tokens allows implementing additional helper methods
},{key:"getWordAtPosition",value:function getWordAtPosition(_position){this._assertNotDisposed();var position=this.validatePosition(_position);var lineContent=this.getLineContent(position.lineNumber);var lineTokens=this._getLineTokens(position.lineNumber);var tokenIndex=lineTokens.findTokenIndexAtOffset(position.column-1);// (1). First try checking right biased word
var _TextModel$_findLangu=TextModel._findLanguageBoundaries(lineTokens,tokenIndex),_TextModel$_findLangu2=textModel_slicedToArray(_TextModel$_findLangu,2),rbStartOffset=_TextModel$_findLangu2[0],rbEndOffset=_TextModel$_findLangu2[1];var rightBiasedWord=(0,wordHelper/* getWordAtText */.t2)(position.column,this.getLanguageConfiguration(lineTokens.getLanguageId(tokenIndex)).getWordDefinition(),lineContent.substring(rbStartOffset,rbEndOffset),rbStartOffset);// Make sure the result touches the original passed in position
if(rightBiasedWord&&rightBiasedWord.startColumn<=_position.column&&_position.column<=rightBiasedWord.endColumn){return rightBiasedWord;}// (2). Else, if we were at a language boundary, check the left biased word
if(tokenIndex>0&&rbStartOffset===position.column-1){// edge case, where `position` sits between two tokens belonging to two different languages
var _TextModel$_findLangu3=TextModel._findLanguageBoundaries(lineTokens,tokenIndex-1),_TextModel$_findLangu4=textModel_slicedToArray(_TextModel$_findLangu3,2),lbStartOffset=_TextModel$_findLangu4[0],lbEndOffset=_TextModel$_findLangu4[1];var leftBiasedWord=(0,wordHelper/* getWordAtText */.t2)(position.column,this.getLanguageConfiguration(lineTokens.getLanguageId(tokenIndex-1)).getWordDefinition(),lineContent.substring(lbStartOffset,lbEndOffset),lbStartOffset);// Make sure the result touches the original passed in position
if(leftBiasedWord&&leftBiasedWord.startColumn<=_position.column&&_position.column<=leftBiasedWord.endColumn){return leftBiasedWord;}}return null;}},{key:"getWordUntilPosition",value:function getWordUntilPosition(position){var wordAtPosition=this.getWordAtPosition(position);if(!wordAtPosition){return{word:'',startColumn:position.column,endColumn:position.column};}return{word:wordAtPosition.word.substr(0,position.column-wordAtPosition.startColumn),startColumn:wordAtPosition.startColumn,endColumn:position.column};}//#endregion
},{key:"normalizePosition",value:function normalizePosition(position,affinity){return position;}/**
     * Gets the column at which indentation stops at a given line.
     * @internal
    */},{key:"getLineIndentColumn",value:function getLineIndentColumn(lineNumber){// Columns start with 1.
return indentOfLine(this.getLineContent(lineNumber))+1;}}],[{key:"resolveOptions",value:function resolveOptions(textBuffer,options){if(options.detectIndentation){var guessedIndentation=guessIndentation(textBuffer,options.tabSize,options.insertSpaces);return new model/* TextModelResolvedOptions */.dJ({tabSize:guessedIndentation.tabSize,indentSize:guessedIndentation.tabSize,insertSpaces:guessedIndentation.insertSpaces,trimAutoWhitespace:options.trimAutoWhitespace,defaultEOL:options.defaultEOL,bracketPairColorizationOptions:options.bracketPairColorizationOptions});}return new model/* TextModelResolvedOptions */.dJ({tabSize:options.tabSize,indentSize:options.indentSize,insertSpaces:options.insertSpaces,trimAutoWhitespace:options.trimAutoWhitespace,defaultEOL:options.defaultEOL,bracketPairColorizationOptions:options.bracketPairColorizationOptions});}},{key:"_normalizeIndentationFromWhitespace",value:function _normalizeIndentationFromWhitespace(str,indentSize,insertSpaces){var spacesCnt=0;for(var i=0;i<str.length;i++){if(str.charAt(i)==='\t'){spacesCnt+=indentSize;}else{spacesCnt++;}}var result='';if(!insertSpaces){var tabsCnt=Math.floor(spacesCnt/indentSize);spacesCnt=spacesCnt%indentSize;for(var _i4=0;_i4<tabsCnt;_i4++){result+='\t';}}for(var _i5=0;_i5<spacesCnt;_i5++){result+=' ';}return result;}},{key:"normalizeIndentation",value:function normalizeIndentation(str,indentSize,insertSpaces){var firstNonWhitespaceIndex=strings/* firstNonWhitespaceIndex */.LC(str);if(firstNonWhitespaceIndex===-1){firstNonWhitespaceIndex=str.length;}return TextModel._normalizeIndentationFromWhitespace(str.substring(0,firstNonWhitespaceIndex),indentSize,insertSpaces)+str.substring(firstNonWhitespaceIndex);}},{key:"_findLanguageBoundaries",value:function _findLanguageBoundaries(lineTokens,tokenIndex){var languageId=lineTokens.getLanguageId(tokenIndex);// go left until a different language is hit
var startOffset=0;for(var i=tokenIndex;i>=0&&lineTokens.getLanguageId(i)===languageId;i--){startOffset=lineTokens.getStartOffset(i);}// go right until a different language is hit
var endOffset=lineTokens.getLineContent().length;for(var _i6=tokenIndex,tokenCount=lineTokens.getCount();_i6<tokenCount&&lineTokens.getLanguageId(_i6)===languageId;_i6++){endOffset=lineTokens.getEndOffset(_i6);}return[startOffset,endOffset];}}]);return TextModel;}(lifecycle/* Disposable */.JT);TextModel.MODEL_SYNC_LIMIT=50*1024*1024;// 50 MB
TextModel.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;// 20 MB;
TextModel.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1000;// 300K lines
TextModel.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:false,tabSize:textModelDefaults/* EDITOR_MODEL_DEFAULTS.tabSize */.D.tabSize,indentSize:textModelDefaults/* EDITOR_MODEL_DEFAULTS.indentSize */.D.indentSize,insertSpaces:textModelDefaults/* EDITOR_MODEL_DEFAULTS.insertSpaces */.D.insertSpaces,detectIndentation:false,defaultEOL:1/* LF */,trimAutoWhitespace:textModelDefaults/* EDITOR_MODEL_DEFAULTS.trimAutoWhitespace */.D.trimAutoWhitespace,largeFileOptimizations:textModelDefaults/* EDITOR_MODEL_DEFAULTS.largeFileOptimizations */.D.largeFileOptimizations,bracketPairColorizationOptions:textModelDefaults/* EDITOR_MODEL_DEFAULTS.bracketPairColorizationOptions */.D.bracketPairColorizationOptions};TextModel=__decorate([__param(4,undoRedo/* IUndoRedoService */.tJ),__param(5,language/* ILanguageService */.O),__param(6,languageConfigurationRegistry/* ILanguageConfigurationService */.c_)],TextModel);function indentOfLine(line){var indent=0;var _iterator=textModel_createForOfIteratorHelper(line),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var c=_step.value;if(c===' '||c==='\t'){indent++;}else{break;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return indent;}//#region Decorations
function isNodeInOverviewRuler(node){return node.options.overviewRuler&&node.options.overviewRuler.color?true:false;}function isNodeInjectedText(node){return!!node.options.after||!!node.options.before;}var DecorationsTrees=/*#__PURE__*/function(){function DecorationsTrees(){textModel_classCallCheck(this,DecorationsTrees);this._decorationsTree0=new IntervalTree();this._decorationsTree1=new IntervalTree();this._injectedTextDecorationsTree=new IntervalTree();}textModel_createClass(DecorationsTrees,[{key:"ensureAllNodesHaveRanges",value:function ensureAllNodesHaveRanges(host){this.getAll(host,0,false,false);}},{key:"_ensureNodesHaveRanges",value:function _ensureNodesHaveRanges(host,nodes){var _iterator2=textModel_createForOfIteratorHelper(nodes),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var node=_step2.value;if(node.range===null){node.range=host.getRangeAt(node.cachedAbsoluteStart,node.cachedAbsoluteEnd);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return nodes;}},{key:"getAllInInterval",value:function getAllInInterval(host,start,end,filterOwnerId,filterOutValidation){var versionId=host.getVersionId();var result=this._intervalSearch(start,end,filterOwnerId,filterOutValidation,versionId);return this._ensureNodesHaveRanges(host,result);}},{key:"_intervalSearch",value:function _intervalSearch(start,end,filterOwnerId,filterOutValidation,cachedVersionId){var r0=this._decorationsTree0.intervalSearch(start,end,filterOwnerId,filterOutValidation,cachedVersionId);var r1=this._decorationsTree1.intervalSearch(start,end,filterOwnerId,filterOutValidation,cachedVersionId);var r2=this._injectedTextDecorationsTree.intervalSearch(start,end,filterOwnerId,filterOutValidation,cachedVersionId);return r0.concat(r1).concat(r2);}},{key:"getInjectedTextInInterval",value:function getInjectedTextInInterval(host,start,end,filterOwnerId){var versionId=host.getVersionId();var result=this._injectedTextDecorationsTree.intervalSearch(start,end,filterOwnerId,false,versionId);return this._ensureNodesHaveRanges(host,result).filter(function(i){return i.options.showIfCollapsed||!i.range.isEmpty();});}},{key:"getAllInjectedText",value:function getAllInjectedText(host,filterOwnerId){var versionId=host.getVersionId();var result=this._injectedTextDecorationsTree.search(filterOwnerId,false,versionId);return this._ensureNodesHaveRanges(host,result).filter(function(i){return i.options.showIfCollapsed||!i.range.isEmpty();});}},{key:"getAll",value:function getAll(host,filterOwnerId,filterOutValidation,overviewRulerOnly){var versionId=host.getVersionId();var result=this._search(filterOwnerId,filterOutValidation,overviewRulerOnly,versionId);return this._ensureNodesHaveRanges(host,result);}},{key:"_search",value:function _search(filterOwnerId,filterOutValidation,overviewRulerOnly,cachedVersionId){if(overviewRulerOnly){return this._decorationsTree1.search(filterOwnerId,filterOutValidation,cachedVersionId);}else{var r0=this._decorationsTree0.search(filterOwnerId,filterOutValidation,cachedVersionId);var r1=this._decorationsTree1.search(filterOwnerId,filterOutValidation,cachedVersionId);var r2=this._injectedTextDecorationsTree.search(filterOwnerId,filterOutValidation,cachedVersionId);return r0.concat(r1).concat(r2);}}},{key:"collectNodesFromOwner",value:function collectNodesFromOwner(ownerId){var r0=this._decorationsTree0.collectNodesFromOwner(ownerId);var r1=this._decorationsTree1.collectNodesFromOwner(ownerId);var r2=this._injectedTextDecorationsTree.collectNodesFromOwner(ownerId);return r0.concat(r1).concat(r2);}},{key:"collectNodesPostOrder",value:function collectNodesPostOrder(){var r0=this._decorationsTree0.collectNodesPostOrder();var r1=this._decorationsTree1.collectNodesPostOrder();var r2=this._injectedTextDecorationsTree.collectNodesPostOrder();return r0.concat(r1).concat(r2);}},{key:"insert",value:function insert(node){if(isNodeInjectedText(node)){this._injectedTextDecorationsTree.insert(node);}else if(isNodeInOverviewRuler(node)){this._decorationsTree1.insert(node);}else{this._decorationsTree0.insert(node);}}},{key:"delete",value:function _delete(node){if(isNodeInjectedText(node)){this._injectedTextDecorationsTree.delete(node);}else if(isNodeInOverviewRuler(node)){this._decorationsTree1.delete(node);}else{this._decorationsTree0.delete(node);}}},{key:"getNodeRange",value:function getNodeRange(host,node){var versionId=host.getVersionId();if(node.cachedVersionId!==versionId){this._resolveNode(node,versionId);}if(node.range===null){node.range=host.getRangeAt(node.cachedAbsoluteStart,node.cachedAbsoluteEnd);}return node.range;}},{key:"_resolveNode",value:function _resolveNode(node,cachedVersionId){if(isNodeInjectedText(node)){this._injectedTextDecorationsTree.resolveNode(node,cachedVersionId);}else if(isNodeInOverviewRuler(node)){this._decorationsTree1.resolveNode(node,cachedVersionId);}else{this._decorationsTree0.resolveNode(node,cachedVersionId);}}},{key:"acceptReplace",value:function acceptReplace(offset,length,textLength,forceMoveMarkers){this._decorationsTree0.acceptReplace(offset,length,textLength,forceMoveMarkers);this._decorationsTree1.acceptReplace(offset,length,textLength,forceMoveMarkers);this._injectedTextDecorationsTree.acceptReplace(offset,length,textLength,forceMoveMarkers);}}]);return DecorationsTrees;}();function cleanClassName(className){return className.replace(/[^a-z0-9\-_]/gi,' ');}var DecorationOptions=function DecorationOptions(options){textModel_classCallCheck(this,DecorationOptions);this.color=options.color||'';this.darkColor=options.darkColor||'';};var ModelDecorationOverviewRulerOptions=/*#__PURE__*/function(_DecorationOptions){textModel_inherits(ModelDecorationOverviewRulerOptions,_DecorationOptions);var _super2=textModel_createSuper(ModelDecorationOverviewRulerOptions);function ModelDecorationOverviewRulerOptions(options){var _this9;textModel_classCallCheck(this,ModelDecorationOverviewRulerOptions);_this9=_super2.call(this,options);_this9._resolvedColor=null;_this9.position=typeof options.position==='number'?options.position:model/* OverviewRulerLane.Center */.sh.Center;return _this9;}textModel_createClass(ModelDecorationOverviewRulerOptions,[{key:"getColor",value:function getColor(theme){if(!this._resolvedColor){if(theme.type!=='light'&&this.darkColor){this._resolvedColor=this._resolveColor(this.darkColor,theme);}else{this._resolvedColor=this._resolveColor(this.color,theme);}}return this._resolvedColor;}},{key:"invalidateCachedColor",value:function invalidateCachedColor(){this._resolvedColor=null;}},{key:"_resolveColor",value:function _resolveColor(color,theme){if(typeof color==='string'){return color;}var c=color?theme.getColor(color.id):null;if(!c){return'';}return c.toString();}}]);return ModelDecorationOverviewRulerOptions;}(DecorationOptions);var ModelDecorationMinimapOptions=/*#__PURE__*/function(_DecorationOptions2){textModel_inherits(ModelDecorationMinimapOptions,_DecorationOptions2);var _super3=textModel_createSuper(ModelDecorationMinimapOptions);function ModelDecorationMinimapOptions(options){var _this10;textModel_classCallCheck(this,ModelDecorationMinimapOptions);_this10=_super3.call(this,options);_this10.position=options.position;return _this10;}textModel_createClass(ModelDecorationMinimapOptions,[{key:"getColor",value:function getColor(theme){if(!this._resolvedColor){if(theme.type!=='light'&&this.darkColor){this._resolvedColor=this._resolveColor(this.darkColor,theme);}else{this._resolvedColor=this._resolveColor(this.color,theme);}}return this._resolvedColor;}},{key:"invalidateCachedColor",value:function invalidateCachedColor(){this._resolvedColor=undefined;}},{key:"_resolveColor",value:function _resolveColor(color,theme){if(typeof color==='string'){return common_color/* Color.fromHex */.Il.fromHex(color);}return theme.getColor(color.id);}}]);return ModelDecorationMinimapOptions;}(DecorationOptions);var ModelDecorationInjectedTextOptions=/*#__PURE__*/function(){function ModelDecorationInjectedTextOptions(options){textModel_classCallCheck(this,ModelDecorationInjectedTextOptions);this.content=options.content||'';this.inlineClassName=options.inlineClassName||null;this.inlineClassNameAffectsLetterSpacing=options.inlineClassNameAffectsLetterSpacing||false;this.attachedData=options.attachedData||null;this.cursorStops=options.cursorStops||null;}textModel_createClass(ModelDecorationInjectedTextOptions,null,[{key:"from",value:function from(options){if(options instanceof ModelDecorationInjectedTextOptions){return options;}return new ModelDecorationInjectedTextOptions(options);}}]);return ModelDecorationInjectedTextOptions;}();var ModelDecorationOptions=/*#__PURE__*/function(){function ModelDecorationOptions(options){textModel_classCallCheck(this,ModelDecorationOptions);var _a,_b;this.description=options.description;this.stickiness=options.stickiness||0/* AlwaysGrowsWhenTypingAtEdges */;this.zIndex=options.zIndex||0;this.className=options.className?cleanClassName(options.className):null;this.hoverMessage=options.hoverMessage||null;this.glyphMarginHoverMessage=options.glyphMarginHoverMessage||null;this.isWholeLine=options.isWholeLine||false;this.showIfCollapsed=options.showIfCollapsed||false;this.collapseOnReplaceEdit=options.collapseOnReplaceEdit||false;this.overviewRuler=options.overviewRuler?new ModelDecorationOverviewRulerOptions(options.overviewRuler):null;this.minimap=options.minimap?new ModelDecorationMinimapOptions(options.minimap):null;this.glyphMarginClassName=options.glyphMarginClassName?cleanClassName(options.glyphMarginClassName):null;this.linesDecorationsClassName=options.linesDecorationsClassName?cleanClassName(options.linesDecorationsClassName):null;this.firstLineDecorationClassName=options.firstLineDecorationClassName?cleanClassName(options.firstLineDecorationClassName):null;this.marginClassName=options.marginClassName?cleanClassName(options.marginClassName):null;this.inlineClassName=options.inlineClassName?cleanClassName(options.inlineClassName):null;this.inlineClassNameAffectsLetterSpacing=options.inlineClassNameAffectsLetterSpacing||false;this.beforeContentClassName=options.beforeContentClassName?cleanClassName(options.beforeContentClassName):null;this.afterContentClassName=options.afterContentClassName?cleanClassName(options.afterContentClassName):null;this.after=options.after?ModelDecorationInjectedTextOptions.from(options.after):null;this.before=options.before?ModelDecorationInjectedTextOptions.from(options.before):null;this.hideInCommentTokens=(_a=options.hideInCommentTokens)!==null&&_a!==void 0?_a:false;this.hideInStringTokens=(_b=options.hideInStringTokens)!==null&&_b!==void 0?_b:false;}textModel_createClass(ModelDecorationOptions,null,[{key:"register",value:function register(options){return new ModelDecorationOptions(options);}},{key:"createDynamic",value:function createDynamic(options){return new ModelDecorationOptions(options);}}]);return ModelDecorationOptions;}();ModelDecorationOptions.EMPTY=ModelDecorationOptions.register({description:'empty'});/**
 * The order carefully matches the values of the enum.
 */var TRACKED_RANGE_OPTIONS=[ModelDecorationOptions.register({description:'tracked-range-always-grows-when-typing-at-edges',stickiness:0/* AlwaysGrowsWhenTypingAtEdges */}),ModelDecorationOptions.register({description:'tracked-range-never-grows-when-typing-at-edges',stickiness:1/* NeverGrowsWhenTypingAtEdges */}),ModelDecorationOptions.register({description:'tracked-range-grows-only-when-typing-before',stickiness:2/* GrowsOnlyWhenTypingBefore */}),ModelDecorationOptions.register({description:'tracked-range-grows-only-when-typing-after',stickiness:3/* GrowsOnlyWhenTypingAfter */})];function _normalizeOptions(options){if(options instanceof ModelDecorationOptions){return options;}return ModelDecorationOptions.createDynamic(options);}var DidChangeDecorationsEmitter=/*#__PURE__*/function(_Disposable2){textModel_inherits(DidChangeDecorationsEmitter,_Disposable2);var _super4=textModel_createSuper(DidChangeDecorationsEmitter);function DidChangeDecorationsEmitter(handleBeforeFire){var _this11;textModel_classCallCheck(this,DidChangeDecorationsEmitter);_this11=_super4.call(this);_this11.handleBeforeFire=handleBeforeFire;_this11._actual=_this11._register(new common_event/* Emitter */.Q5());_this11.event=_this11._actual.event;_this11._affectedInjectedTextLines=null;_this11._deferredCnt=0;_this11._shouldFire=false;_this11._affectsMinimap=false;_this11._affectsOverviewRuler=false;return _this11;}textModel_createClass(DidChangeDecorationsEmitter,[{key:"beginDeferredEmit",value:function beginDeferredEmit(){this._deferredCnt++;}},{key:"endDeferredEmit",value:function endDeferredEmit(){var _a;this._deferredCnt--;if(this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);var event={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=false;this._affectsMinimap=false;this._affectsOverviewRuler=false;this._actual.fire(event);}(_a=this._affectedInjectedTextLines)===null||_a===void 0?void 0:_a.clear();this._affectedInjectedTextLines=null;}}},{key:"recordLineAffectedByInjectedText",value:function recordLineAffectedByInjectedText(lineNumber){if(!this._affectedInjectedTextLines){this._affectedInjectedTextLines=new Set();}this._affectedInjectedTextLines.add(lineNumber);}},{key:"checkAffectedAndFire",value:function checkAffectedAndFire(options){if(!this._affectsMinimap){this._affectsMinimap=options.minimap&&options.minimap.position?true:false;}if(!this._affectsOverviewRuler){this._affectsOverviewRuler=options.overviewRuler&&options.overviewRuler.color?true:false;}this._shouldFire=true;}},{key:"fire",value:function fire(){this._affectsMinimap=true;this._affectsOverviewRuler=true;this._shouldFire=true;}}]);return DidChangeDecorationsEmitter;}(lifecycle/* Disposable */.JT);//#endregion
var DidChangeContentEmitter=/*#__PURE__*/function(_Disposable3){textModel_inherits(DidChangeContentEmitter,_Disposable3);var _super5=textModel_createSuper(DidChangeContentEmitter);function DidChangeContentEmitter(){var _this12;textModel_classCallCheck(this,DidChangeContentEmitter);_this12=_super5.call(this);/**
         * Both `fastEvent` and `slowEvent` work the same way and contain the same events, but first we invoke `fastEvent` and then `slowEvent`.
         */_this12._fastEmitter=_this12._register(new common_event/* Emitter */.Q5());_this12.fastEvent=_this12._fastEmitter.event;_this12._slowEmitter=_this12._register(new common_event/* Emitter */.Q5());_this12.slowEvent=_this12._slowEmitter.event;_this12._deferredCnt=0;_this12._deferredEvent=null;return _this12;}textModel_createClass(DidChangeContentEmitter,[{key:"beginDeferredEmit",value:function beginDeferredEmit(){this._deferredCnt++;}},{key:"endDeferredEmit",value:function endDeferredEmit(){var resultingSelection=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;this._deferredCnt--;if(this._deferredCnt===0){if(this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=resultingSelection;var e=this._deferredEvent;this._deferredEvent=null;this._fastEmitter.fire(e);this._slowEmitter.fire(e);}}}},{key:"fire",value:function fire(e){if(this._deferredCnt>0){if(this._deferredEvent){this._deferredEvent=this._deferredEvent.merge(e);}else{this._deferredEvent=e;}return;}this._fastEmitter.fire(e);this._slowEmitter.fire(e);}}]);return DidChangeContentEmitter;}(lifecycle/* Disposable */.JT);

/***/ }),

/***/ 97886:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "bc": () => (/* binding */ SearchParams),
/* harmony export */   "cM": () => (/* binding */ isValidMatch),
/* harmony export */   "iE": () => (/* binding */ createFindMatch),
/* harmony export */   "pM": () => (/* binding */ TextModelSearch),
/* harmony export */   "sz": () => (/* binding */ Searcher)
/* harmony export */ });
/* unused harmony export isMultilineRegexSource */
/* harmony import */ var _base_common_strings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41712);
/* harmony import */ var _core_wordCharacterClassifier_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60493);
/* harmony import */ var _core_position_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(60721);
/* harmony import */ var _core_range_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(96844);
/* harmony import */ var _model_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16227);
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var LIMIT_FIND_COUNT=999;var SearchParams=/*#__PURE__*/function(){function SearchParams(searchString,isRegex,matchCase,wordSeparators){_classCallCheck(this,SearchParams);this.searchString=searchString;this.isRegex=isRegex;this.matchCase=matchCase;this.wordSeparators=wordSeparators;}_createClass(SearchParams,[{key:"parseSearchRequest",value:function parseSearchRequest(){if(this.searchString===''){return null;}// Try to create a RegExp out of the params
var multiline;if(this.isRegex){multiline=isMultilineRegexSource(this.searchString);}else{multiline=this.searchString.indexOf('\n')>=0;}var regex=null;try{regex=_base_common_strings_js__WEBPACK_IMPORTED_MODULE_0__/* .createRegExp */ .GF(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:false,multiline:multiline,global:true,unicode:true});}catch(err){return null;}if(!regex){return null;}var canUseSimpleSearch=!this.isRegex&&!multiline;if(canUseSimpleSearch&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()){// casing might make a difference
canUseSimpleSearch=this.matchCase;}return new _model_js__WEBPACK_IMPORTED_MODULE_2__/* .SearchData */ .Tx(regex,this.wordSeparators?(0,_core_wordCharacterClassifier_js__WEBPACK_IMPORTED_MODULE_1__/* .getMapForWordSeparators */ .u)(this.wordSeparators):null,canUseSimpleSearch?this.searchString:null);}}]);return SearchParams;}();function isMultilineRegexSource(searchString){if(!searchString||searchString.length===0){return false;}for(var i=0,len=searchString.length;i<len;i++){var chCode=searchString.charCodeAt(i);if(chCode===92/* Backslash */){// move to next char
i++;if(i>=len){// string ends with a \
break;}var nextChCode=searchString.charCodeAt(i);if(nextChCode===110/* n */||nextChCode===114/* r */||nextChCode===87/* W */){return true;}}}return false;}function createFindMatch(range,rawMatches,captureMatches){if(!captureMatches){return new _model_js__WEBPACK_IMPORTED_MODULE_2__/* .FindMatch */ .tk(range,null);}var matches=[];for(var i=0,len=rawMatches.length;i<len;i++){matches[i]=rawMatches[i];}return new _model_js__WEBPACK_IMPORTED_MODULE_2__/* .FindMatch */ .tk(range,matches);}var LineFeedCounter=/*#__PURE__*/function(){function LineFeedCounter(text){_classCallCheck(this,LineFeedCounter);var lineFeedsOffsets=[];var lineFeedsOffsetsLen=0;for(var i=0,textLen=text.length;i<textLen;i++){if(text.charCodeAt(i)===10/* LineFeed */){lineFeedsOffsets[lineFeedsOffsetsLen++]=i;}}this._lineFeedsOffsets=lineFeedsOffsets;}_createClass(LineFeedCounter,[{key:"findLineFeedCountBeforeOffset",value:function findLineFeedCountBeforeOffset(offset){var lineFeedsOffsets=this._lineFeedsOffsets;var min=0;var max=lineFeedsOffsets.length-1;if(max===-1){// no line feeds
return 0;}if(offset<=lineFeedsOffsets[0]){// before first line feed
return 0;}while(min<max){var mid=min+((max-min)/2>>0);if(lineFeedsOffsets[mid]>=offset){max=mid-1;}else{if(lineFeedsOffsets[mid+1]>=offset){// bingo!
min=mid;max=mid;}else{min=mid+1;}}}return min+1;}}]);return LineFeedCounter;}();var TextModelSearch=/*#__PURE__*/function(){function TextModelSearch(){_classCallCheck(this,TextModelSearch);}_createClass(TextModelSearch,null,[{key:"findMatches",value:function findMatches(model,searchParams,searchRange,captureMatches,limitResultCount){var searchData=searchParams.parseSearchRequest();if(!searchData){return[];}if(searchData.regex.multiline){return this._doFindMatchesMultiline(model,searchRange,new Searcher(searchData.wordSeparators,searchData.regex),captureMatches,limitResultCount);}return this._doFindMatchesLineByLine(model,searchRange,searchData,captureMatches,limitResultCount);}/**
     * Multiline search always executes on the lines concatenated with \n.
     * We must therefore compensate for the count of \n in case the model is CRLF
     */},{key:"_getMultilineMatchRange",value:function _getMultilineMatchRange(model,deltaOffset,text,lfCounter,matchIndex,match0){var startOffset;var lineFeedCountBeforeMatch=0;if(lfCounter){lineFeedCountBeforeMatch=lfCounter.findLineFeedCountBeforeOffset(matchIndex);startOffset=deltaOffset+matchIndex+lineFeedCountBeforeMatch/* add as many \r as there were \n */;}else{startOffset=deltaOffset+matchIndex;}var endOffset;if(lfCounter){var lineFeedCountBeforeEndOfMatch=lfCounter.findLineFeedCountBeforeOffset(matchIndex+match0.length);var lineFeedCountInMatch=lineFeedCountBeforeEndOfMatch-lineFeedCountBeforeMatch;endOffset=startOffset+match0.length+lineFeedCountInMatch/* add as many \r as there were \n */;}else{endOffset=startOffset+match0.length;}var startPosition=model.getPositionAt(startOffset);var endPosition=model.getPositionAt(endOffset);return new _core_range_js__WEBPACK_IMPORTED_MODULE_3__/* .Range */ .e(startPosition.lineNumber,startPosition.column,endPosition.lineNumber,endPosition.column);}},{key:"_doFindMatchesMultiline",value:function _doFindMatchesMultiline(model,searchRange,searcher,captureMatches,limitResultCount){var deltaOffset=model.getOffsetAt(searchRange.getStartPosition());// We always execute multiline search over the lines joined with \n
// This makes it that \n will match the EOL for both CRLF and LF models
// We compensate for offset errors in `_getMultilineMatchRange`
var text=model.getValueInRange(searchRange,1/* LF */);var lfCounter=model.getEOL()==='\r\n'?new LineFeedCounter(text):null;var result=[];var counter=0;var m;searcher.reset(0);while(m=searcher.next(text)){result[counter++]=createFindMatch(this._getMultilineMatchRange(model,deltaOffset,text,lfCounter,m.index,m[0]),m,captureMatches);if(counter>=limitResultCount){return result;}}return result;}},{key:"_doFindMatchesLineByLine",value:function _doFindMatchesLineByLine(model,searchRange,searchData,captureMatches,limitResultCount){var result=[];var resultLen=0;// Early case for a search range that starts & stops on the same line number
if(searchRange.startLineNumber===searchRange.endLineNumber){var _text=model.getLineContent(searchRange.startLineNumber).substring(searchRange.startColumn-1,searchRange.endColumn-1);resultLen=this._findMatchesInLine(searchData,_text,searchRange.startLineNumber,searchRange.startColumn-1,resultLen,result,captureMatches,limitResultCount);return result;}// Collect results from first line
var text=model.getLineContent(searchRange.startLineNumber).substring(searchRange.startColumn-1);resultLen=this._findMatchesInLine(searchData,text,searchRange.startLineNumber,searchRange.startColumn-1,resultLen,result,captureMatches,limitResultCount);// Collect results from middle lines
for(var lineNumber=searchRange.startLineNumber+1;lineNumber<searchRange.endLineNumber&&resultLen<limitResultCount;lineNumber++){resultLen=this._findMatchesInLine(searchData,model.getLineContent(lineNumber),lineNumber,0,resultLen,result,captureMatches,limitResultCount);}// Collect results from last line
if(resultLen<limitResultCount){var _text2=model.getLineContent(searchRange.endLineNumber).substring(0,searchRange.endColumn-1);resultLen=this._findMatchesInLine(searchData,_text2,searchRange.endLineNumber,0,resultLen,result,captureMatches,limitResultCount);}return result;}},{key:"_findMatchesInLine",value:function _findMatchesInLine(searchData,text,lineNumber,deltaOffset,resultLen,result,captureMatches,limitResultCount){var wordSeparators=searchData.wordSeparators;if(!captureMatches&&searchData.simpleSearch){var searchString=searchData.simpleSearch;var searchStringLen=searchString.length;var textLength=text.length;var lastMatchIndex=-searchStringLen;while((lastMatchIndex=text.indexOf(searchString,lastMatchIndex+searchStringLen))!==-1){if(!wordSeparators||isValidMatch(wordSeparators,text,textLength,lastMatchIndex,searchStringLen)){result[resultLen++]=new _model_js__WEBPACK_IMPORTED_MODULE_2__/* .FindMatch */ .tk(new _core_range_js__WEBPACK_IMPORTED_MODULE_3__/* .Range */ .e(lineNumber,lastMatchIndex+1+deltaOffset,lineNumber,lastMatchIndex+1+searchStringLen+deltaOffset),null);if(resultLen>=limitResultCount){return resultLen;}}}return resultLen;}var searcher=new Searcher(searchData.wordSeparators,searchData.regex);var m;// Reset regex to search from the beginning
searcher.reset(0);do{m=searcher.next(text);if(m){result[resultLen++]=createFindMatch(new _core_range_js__WEBPACK_IMPORTED_MODULE_3__/* .Range */ .e(lineNumber,m.index+1+deltaOffset,lineNumber,m.index+1+m[0].length+deltaOffset),m,captureMatches);if(resultLen>=limitResultCount){return resultLen;}}}while(m);return resultLen;}},{key:"findNextMatch",value:function findNextMatch(model,searchParams,searchStart,captureMatches){var searchData=searchParams.parseSearchRequest();if(!searchData){return null;}var searcher=new Searcher(searchData.wordSeparators,searchData.regex);if(searchData.regex.multiline){return this._doFindNextMatchMultiline(model,searchStart,searcher,captureMatches);}return this._doFindNextMatchLineByLine(model,searchStart,searcher,captureMatches);}},{key:"_doFindNextMatchMultiline",value:function _doFindNextMatchMultiline(model,searchStart,searcher,captureMatches){var searchTextStart=new _core_position_js__WEBPACK_IMPORTED_MODULE_4__/* .Position */ .L(searchStart.lineNumber,1);var deltaOffset=model.getOffsetAt(searchTextStart);var lineCount=model.getLineCount();// We always execute multiline search over the lines joined with \n
// This makes it that \n will match the EOL for both CRLF and LF models
// We compensate for offset errors in `_getMultilineMatchRange`
var text=model.getValueInRange(new _core_range_js__WEBPACK_IMPORTED_MODULE_3__/* .Range */ .e(searchTextStart.lineNumber,searchTextStart.column,lineCount,model.getLineMaxColumn(lineCount)),1/* LF */);var lfCounter=model.getEOL()==='\r\n'?new LineFeedCounter(text):null;searcher.reset(searchStart.column-1);var m=searcher.next(text);if(m){return createFindMatch(this._getMultilineMatchRange(model,deltaOffset,text,lfCounter,m.index,m[0]),m,captureMatches);}if(searchStart.lineNumber!==1||searchStart.column!==1){// Try again from the top
return this._doFindNextMatchMultiline(model,new _core_position_js__WEBPACK_IMPORTED_MODULE_4__/* .Position */ .L(1,1),searcher,captureMatches);}return null;}},{key:"_doFindNextMatchLineByLine",value:function _doFindNextMatchLineByLine(model,searchStart,searcher,captureMatches){var lineCount=model.getLineCount();var startLineNumber=searchStart.lineNumber;// Look in first line
var text=model.getLineContent(startLineNumber);var r=this._findFirstMatchInLine(searcher,text,startLineNumber,searchStart.column,captureMatches);if(r){return r;}for(var i=1;i<=lineCount;i++){var lineIndex=(startLineNumber+i-1)%lineCount;var _text3=model.getLineContent(lineIndex+1);var _r=this._findFirstMatchInLine(searcher,_text3,lineIndex+1,1,captureMatches);if(_r){return _r;}}return null;}},{key:"_findFirstMatchInLine",value:function _findFirstMatchInLine(searcher,text,lineNumber,fromColumn,captureMatches){// Set regex to search from column
searcher.reset(fromColumn-1);var m=searcher.next(text);if(m){return createFindMatch(new _core_range_js__WEBPACK_IMPORTED_MODULE_3__/* .Range */ .e(lineNumber,m.index+1,lineNumber,m.index+1+m[0].length),m,captureMatches);}return null;}},{key:"findPreviousMatch",value:function findPreviousMatch(model,searchParams,searchStart,captureMatches){var searchData=searchParams.parseSearchRequest();if(!searchData){return null;}var searcher=new Searcher(searchData.wordSeparators,searchData.regex);if(searchData.regex.multiline){return this._doFindPreviousMatchMultiline(model,searchStart,searcher,captureMatches);}return this._doFindPreviousMatchLineByLine(model,searchStart,searcher,captureMatches);}},{key:"_doFindPreviousMatchMultiline",value:function _doFindPreviousMatchMultiline(model,searchStart,searcher,captureMatches){var matches=this._doFindMatchesMultiline(model,new _core_range_js__WEBPACK_IMPORTED_MODULE_3__/* .Range */ .e(1,1,searchStart.lineNumber,searchStart.column),searcher,captureMatches,10*LIMIT_FIND_COUNT);if(matches.length>0){return matches[matches.length-1];}var lineCount=model.getLineCount();if(searchStart.lineNumber!==lineCount||searchStart.column!==model.getLineMaxColumn(lineCount)){// Try again with all content
return this._doFindPreviousMatchMultiline(model,new _core_position_js__WEBPACK_IMPORTED_MODULE_4__/* .Position */ .L(lineCount,model.getLineMaxColumn(lineCount)),searcher,captureMatches);}return null;}},{key:"_doFindPreviousMatchLineByLine",value:function _doFindPreviousMatchLineByLine(model,searchStart,searcher,captureMatches){var lineCount=model.getLineCount();var startLineNumber=searchStart.lineNumber;// Look in first line
var text=model.getLineContent(startLineNumber).substring(0,searchStart.column-1);var r=this._findLastMatchInLine(searcher,text,startLineNumber,captureMatches);if(r){return r;}for(var i=1;i<=lineCount;i++){var lineIndex=(lineCount+startLineNumber-i-1)%lineCount;var _text4=model.getLineContent(lineIndex+1);var _r2=this._findLastMatchInLine(searcher,_text4,lineIndex+1,captureMatches);if(_r2){return _r2;}}return null;}},{key:"_findLastMatchInLine",value:function _findLastMatchInLine(searcher,text,lineNumber,captureMatches){var bestResult=null;var m;searcher.reset(0);while(m=searcher.next(text)){bestResult=createFindMatch(new _core_range_js__WEBPACK_IMPORTED_MODULE_3__/* .Range */ .e(lineNumber,m.index+1,lineNumber,m.index+1+m[0].length),m,captureMatches);}return bestResult;}}]);return TextModelSearch;}();function leftIsWordBounday(wordSeparators,text,textLength,matchStartIndex,matchLength){if(matchStartIndex===0){// Match starts at start of string
return true;}var charBefore=text.charCodeAt(matchStartIndex-1);if(wordSeparators.get(charBefore)!==0/* Regular */){// The character before the match is a word separator
return true;}if(charBefore===13/* CarriageReturn */||charBefore===10/* LineFeed */){// The character before the match is line break or carriage return.
return true;}if(matchLength>0){var firstCharInMatch=text.charCodeAt(matchStartIndex);if(wordSeparators.get(firstCharInMatch)!==0/* Regular */){// The first character inside the match is a word separator
return true;}}return false;}function rightIsWordBounday(wordSeparators,text,textLength,matchStartIndex,matchLength){if(matchStartIndex+matchLength===textLength){// Match ends at end of string
return true;}var charAfter=text.charCodeAt(matchStartIndex+matchLength);if(wordSeparators.get(charAfter)!==0/* Regular */){// The character after the match is a word separator
return true;}if(charAfter===13/* CarriageReturn */||charAfter===10/* LineFeed */){// The character after the match is line break or carriage return.
return true;}if(matchLength>0){var lastCharInMatch=text.charCodeAt(matchStartIndex+matchLength-1);if(wordSeparators.get(lastCharInMatch)!==0/* Regular */){// The last character in the match is a word separator
return true;}}return false;}function isValidMatch(wordSeparators,text,textLength,matchStartIndex,matchLength){return leftIsWordBounday(wordSeparators,text,textLength,matchStartIndex,matchLength)&&rightIsWordBounday(wordSeparators,text,textLength,matchStartIndex,matchLength);}var Searcher=/*#__PURE__*/function(){function Searcher(wordSeparators,searchRegex){_classCallCheck(this,Searcher);this._wordSeparators=wordSeparators;this._searchRegex=searchRegex;this._prevMatchStartIndex=-1;this._prevMatchLength=0;}_createClass(Searcher,[{key:"reset",value:function reset(lastIndex){this._searchRegex.lastIndex=lastIndex;this._prevMatchStartIndex=-1;this._prevMatchLength=0;}},{key:"next",value:function next(text){var textLength=text.length;var m;do{if(this._prevMatchStartIndex+this._prevMatchLength===textLength){// Reached the end of the line
return null;}m=this._searchRegex.exec(text);if(!m){return null;}var matchStartIndex=m.index;var matchLength=m[0].length;if(matchStartIndex===this._prevMatchStartIndex&&matchLength===this._prevMatchLength){if(matchLength===0){// the search result is an empty string and won't advance `regex.lastIndex`, so `regex.exec` will stuck here
// we attempt to recover from that by advancing by two if surrogate pair found and by one otherwise
if(_base_common_strings_js__WEBPACK_IMPORTED_MODULE_0__/* .getNextCodePoint */ .ZH(text,textLength,this._searchRegex.lastIndex)>0xFFFF){this._searchRegex.lastIndex+=2;}else{this._searchRegex.lastIndex+=1;}continue;}// Exit early if the regex matches the same range twice
return null;}this._prevMatchStartIndex=matchStartIndex;this._prevMatchLength=matchLength;if(!this._wordSeparators||isValidMatch(this._wordSeparators,text,textLength,matchStartIndex,matchLength)){return m;}}while(m);return null;}}]);return Searcher;}();

/***/ }),

/***/ 61272:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "q": () => (/* binding */ computeIndentLevel)
/* harmony export */ });
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/ /**
 * Returns:
 *  - -1 => the line consists of whitespace
 *  - otherwise => the indent level is returned value
 */function computeIndentLevel(line,tabSize){var indent=0;var i=0;var len=line.length;while(i<len){var chCode=line.charCodeAt(i);if(chCode===32/* Space */){indent++;}else if(chCode===9/* Tab */){indent=indent-indent%tabSize+tabSize;}else{break;}i++;}if(i===len){return-1;// line only consists of whitespace
}return indent;}

/***/ })

}]);