"use strict";
(self["webpackChunkicode_run"] = self["webpackChunkicode_run"] || []).push([["vendors-my-cli_node_modules_monaco-editor_esm_vs_editor_browser_editorBrowser_js-my-cli_node_-e6e605"],{

/***/ 63892:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CL": () => (/* binding */ isCodeEditor),
/* harmony export */   "Pi": () => (/* binding */ getCodeEditor),
/* harmony export */   "QI": () => (/* binding */ isDiffEditor)
/* harmony export */ });
/* harmony import */ var _common_editorCommon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(69400);
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*//**
 *@internal
 */function isCodeEditor(thing){if(thing&&typeof thing.getEditorType==='function'){return thing.getEditorType()===_common_editorCommon_js__WEBPACK_IMPORTED_MODULE_0__/* .EditorType.ICodeEditor */ .g.ICodeEditor;}else{return false;}}/**
 *@internal
 */function isDiffEditor(thing){if(thing&&typeof thing.getEditorType==='function'){return thing.getEditorType()===_common_editorCommon_js__WEBPACK_IMPORTED_MODULE_0__/* .EditorType.IDiffEditor */ .g.IDiffEditor;}else{return false;}}/**
 *@internal
 */function getCodeEditor(thing){if(isCodeEditor(thing)){return thing;}if(isDiffEditor(thing)){return thing.getModifiedEditor();}return null;}

/***/ }),

/***/ 48786:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "N5": () => (/* binding */ EditorMouseEventFactory),
/* harmony export */   "Pp": () => (/* binding */ createCoordinatesRelativeToEditor),
/* harmony export */   "YN": () => (/* binding */ PageCoordinates),
/* harmony export */   "gy": () => (/* binding */ EditorMouseEvent),
/* harmony export */   "iB": () => (/* binding */ GlobalEditorMouseMoveMonitor),
/* harmony export */   "kG": () => (/* binding */ createEditorPagePosition),
/* harmony export */   "rU": () => (/* binding */ ClientCoordinates),
/* harmony export */   "t7": () => (/* binding */ DynamicCssRules),
/* harmony export */   "tC": () => (/* binding */ EditorPointerEventFactory)
/* harmony export */ });
/* unused harmony exports EditorPagePosition, CoordinatesRelativeToEditor */
/* harmony import */ var _base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20446);
/* harmony import */ var _base_browser_globalMouseMoveMonitor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(95144);
/* harmony import */ var _base_browser_mouseEvent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(36590);
/* harmony import */ var _base_common_async_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(88494);
/* harmony import */ var _base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(19860);
/* harmony import */ var _platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(25530);
function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*//**
 * Coordinates relative to the whole document (e.g. mouse event's pageX and pageY)
 */var PageCoordinates=/*#__PURE__*/function(){function PageCoordinates(x,y){_classCallCheck(this,PageCoordinates);this.x=x;this.y=y;this._pageCoordinatesBrand=undefined;}_createClass(PageCoordinates,[{key:"toClientCoordinates",value:function toClientCoordinates(){return new ClientCoordinates(this.x-_base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.StandardWindow.scrollX,this.y-_base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.StandardWindow.scrollY);}}]);return PageCoordinates;}();/**
 * Coordinates within the application's client area (i.e. origin is document's scroll position).
 *
 * For example, clicking in the top-left corner of the client area will
 * always result in a mouse event with a client.x value of 0, regardless
 * of whether the page is scrolled horizontally.
 */var ClientCoordinates=/*#__PURE__*/function(){function ClientCoordinates(clientX,clientY){_classCallCheck(this,ClientCoordinates);this.clientX=clientX;this.clientY=clientY;this._clientCoordinatesBrand=undefined;}_createClass(ClientCoordinates,[{key:"toPageCoordinates",value:function toPageCoordinates(){return new PageCoordinates(this.clientX+_base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.StandardWindow.scrollX,this.clientY+_base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.StandardWindow.scrollY);}}]);return ClientCoordinates;}();/**
 * The position of the editor in the page.
 */var EditorPagePosition=function EditorPagePosition(x,y,width,height){_classCallCheck(this,EditorPagePosition);this.x=x;this.y=y;this.width=width;this.height=height;this._editorPagePositionBrand=undefined;};/**
 * Coordinates relative to the the (top;left) of the editor that can be used safely with other internal editor metrics.
 * **NOTE**: This position is obtained by taking page coordinates and transforming them relative to the
 * editor's (top;left) position in a way in which scale transformations are taken into account.
 * **NOTE**: These coordinates could be negative if the mouse position is outside the editor.
 */var CoordinatesRelativeToEditor=function CoordinatesRelativeToEditor(x,y){_classCallCheck(this,CoordinatesRelativeToEditor);this.x=x;this.y=y;this._positionRelativeToEditorBrand=undefined;};function createEditorPagePosition(editorViewDomNode){var editorPos=_base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.getDomNodePagePosition(editorViewDomNode);return new EditorPagePosition(editorPos.left,editorPos.top,editorPos.width,editorPos.height);}function createCoordinatesRelativeToEditor(editorViewDomNode,editorPagePosition,pos){// The editor's page position is read from the DOM using getBoundingClientRect().
//
// getBoundingClientRect() returns the actual dimensions, while offsetWidth and offsetHeight
// reflect the unscaled size. We can use this difference to detect a transform:scale()
// and we will apply the transformation in inverse to get mouse coordinates that make sense inside the editor.
//
// This could be expanded to cover rotation as well maybe by walking the DOM up from `editorViewDomNode`
// and computing the effective transformation matrix using getComputedStyle(element).transform.
//
var scaleX=editorPagePosition.width/editorViewDomNode.offsetWidth;var scaleY=editorPagePosition.height/editorViewDomNode.offsetHeight;// Adjust mouse offsets if editor appears to be scaled via transforms
var relativeX=(pos.x-editorPagePosition.x)/scaleX;var relativeY=(pos.y-editorPagePosition.y)/scaleY;return new CoordinatesRelativeToEditor(relativeX,relativeY);}var EditorMouseEvent=/*#__PURE__*/function(_StandardMouseEvent){_inherits(EditorMouseEvent,_StandardMouseEvent);var _super=_createSuper(EditorMouseEvent);function EditorMouseEvent(e,editorViewDomNode){var _this;_classCallCheck(this,EditorMouseEvent);_this=_super.call(this,e);_this._editorMouseEventBrand=undefined;_this.pos=new PageCoordinates(_this.posx,_this.posy);_this.editorPos=createEditorPagePosition(editorViewDomNode);_this.relativePos=createCoordinatesRelativeToEditor(editorViewDomNode,_this.editorPos,_this.pos);return _this;}return EditorMouseEvent;}(_base_browser_mouseEvent_js__WEBPACK_IMPORTED_MODULE_2__/* .StandardMouseEvent */ .n);var EditorMouseEventFactory=/*#__PURE__*/function(){function EditorMouseEventFactory(editorViewDomNode){_classCallCheck(this,EditorMouseEventFactory);this._editorViewDomNode=editorViewDomNode;}_createClass(EditorMouseEventFactory,[{key:"_create",value:function _create(e){return new EditorMouseEvent(e,this._editorViewDomNode);}},{key:"onContextMenu",value:function onContextMenu(target,callback){var _this2=this;return _base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.addDisposableListener(target,'contextmenu',function(e){callback(_this2._create(e));});}},{key:"onMouseUp",value:function onMouseUp(target,callback){var _this3=this;return _base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.addDisposableListener(target,'mouseup',function(e){callback(_this3._create(e));});}},{key:"onMouseDown",value:function onMouseDown(target,callback){var _this4=this;return _base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.addDisposableListener(target,'mousedown',function(e){callback(_this4._create(e));});}},{key:"onMouseLeave",value:function onMouseLeave(target,callback){var _this5=this;return _base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.addDisposableNonBubblingMouseOutListener(target,function(e){callback(_this5._create(e));});}},{key:"onMouseMoveThrottled",value:function onMouseMoveThrottled(target,callback,merger,minimumTimeMs){var _this6=this;var myMerger=function myMerger(lastEvent,currentEvent){return merger(lastEvent,_this6._create(currentEvent));};return _base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.addDisposableThrottledListener(target,'mousemove',callback,myMerger,minimumTimeMs);}}]);return EditorMouseEventFactory;}();var EditorPointerEventFactory=/*#__PURE__*/function(){function EditorPointerEventFactory(editorViewDomNode){_classCallCheck(this,EditorPointerEventFactory);this._editorViewDomNode=editorViewDomNode;}_createClass(EditorPointerEventFactory,[{key:"_create",value:function _create(e){return new EditorMouseEvent(e,this._editorViewDomNode);}},{key:"onPointerUp",value:function onPointerUp(target,callback){var _this7=this;return _base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.addDisposableListener(target,'pointerup',function(e){callback(_this7._create(e));});}},{key:"onPointerDown",value:function onPointerDown(target,callback){var _this8=this;return _base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.addDisposableListener(target,'pointerdown',function(e){callback(_this8._create(e));});}},{key:"onPointerLeave",value:function onPointerLeave(target,callback){var _this9=this;return _base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.addDisposableNonBubblingPointerOutListener(target,function(e){callback(_this9._create(e));});}},{key:"onPointerMoveThrottled",value:function onPointerMoveThrottled(target,callback,merger,minimumTimeMs){var _this10=this;var myMerger=function myMerger(lastEvent,currentEvent){return merger(lastEvent,_this10._create(currentEvent));};return _base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.addDisposableThrottledListener(target,'pointermove',callback,myMerger,minimumTimeMs);}}]);return EditorPointerEventFactory;}();var GlobalEditorMouseMoveMonitor=/*#__PURE__*/function(_Disposable){_inherits(GlobalEditorMouseMoveMonitor,_Disposable);var _super2=_createSuper(GlobalEditorMouseMoveMonitor);function GlobalEditorMouseMoveMonitor(editorViewDomNode){var _this11;_classCallCheck(this,GlobalEditorMouseMoveMonitor);_this11=_super2.call(this);_this11._editorViewDomNode=editorViewDomNode;_this11._globalMouseMoveMonitor=_this11._register(new _base_browser_globalMouseMoveMonitor_js__WEBPACK_IMPORTED_MODULE_1__/* .GlobalMouseMoveMonitor */ .Z());_this11._keydownListener=null;return _this11;}_createClass(GlobalEditorMouseMoveMonitor,[{key:"startMonitoring",value:function startMonitoring(initialElement,initialButtons,merger,mouseMoveCallback,onStopCallback){var _this12=this;// Add a <<capture>> keydown event listener that will cancel the monitoring
// if something other than a modifier key is pressed
this._keydownListener=_base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.addStandardDisposableListener(document,'keydown',function(e){var kb=e.toKeybinding();if(kb.isModifierKey()){// Allow modifier keys
return;}_this12._globalMouseMoveMonitor.stopMonitoring(true,e.browserEvent);},true);var myMerger=function myMerger(lastEvent,currentEvent){return merger(lastEvent,new EditorMouseEvent(currentEvent,_this12._editorViewDomNode));};this._globalMouseMoveMonitor.startMonitoring(initialElement,initialButtons,myMerger,mouseMoveCallback,function(e){_this12._keydownListener.dispose();onStopCallback(e);});}},{key:"stopMonitoring",value:function stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(true);}}]);return GlobalEditorMouseMoveMonitor;}(_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_4__/* .Disposable */ .JT);/**
 * A helper to create dynamic css rules, bound to a class name.
 * Rules are reused.
 * Reference counting and delayed garbage collection ensure that no rules leak.
*/var DynamicCssRules=/*#__PURE__*/function(){function DynamicCssRules(_editor){var _this13=this;_classCallCheck(this,DynamicCssRules);this._editor=_editor;this._instanceId=++DynamicCssRules._idPool;this._counter=0;this._rules=new Map();// We delay garbage collection so that hanging rules can be reused.
this._garbageCollectionScheduler=new _base_common_async_js__WEBPACK_IMPORTED_MODULE_3__/* .RunOnceScheduler */ .pY(function(){return _this13.garbageCollect();},1000);}_createClass(DynamicCssRules,[{key:"createClassNameRef",value:function createClassNameRef(options){var _this14=this;var rule=this.getOrCreateRule(options);rule.increaseRefCount();return{className:rule.className,dispose:function dispose(){rule.decreaseRefCount();_this14._garbageCollectionScheduler.schedule();}};}},{key:"getOrCreateRule",value:function getOrCreateRule(properties){var key=this.computeUniqueKey(properties);var existingRule=this._rules.get(key);if(!existingRule){var counter=this._counter++;existingRule=new RefCountedCssRule(key,"dyn-rule-".concat(this._instanceId,"-").concat(counter),_base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.isInShadowDOM(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():undefined,properties);this._rules.set(key,existingRule);}return existingRule;}},{key:"computeUniqueKey",value:function computeUniqueKey(properties){return JSON.stringify(properties);}},{key:"garbageCollect",value:function garbageCollect(){var _iterator=_createForOfIteratorHelper(this._rules.values()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var rule=_step.value;if(!rule.hasReferences()){this._rules.delete(rule.key);rule.dispose();}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}]);return DynamicCssRules;}();DynamicCssRules._idPool=0;var RefCountedCssRule=/*#__PURE__*/function(){function RefCountedCssRule(key,className,_containerElement,properties){_classCallCheck(this,RefCountedCssRule);this.key=key;this.className=className;this.properties=properties;this._referenceCount=0;this._styleElement=_base_browser_dom_js__WEBPACK_IMPORTED_MODULE_0__.createStyleSheet(_containerElement);this._styleElement.textContent=this.getCssText(this.className,this.properties);}_createClass(RefCountedCssRule,[{key:"getCssText",value:function getCssText(className,properties){var str=".".concat(className," {");for(var prop in properties){var value=properties[prop];var cssValue=void 0;if(_typeof(value)==='object'){cssValue="var(".concat((0,_platform_theme_common_colorRegistry_js__WEBPACK_IMPORTED_MODULE_5__/* .asCssVariableName */ .QO2)(value.id),")");}else{cssValue=value;}var cssPropName=camelToDashes(prop);str+="\n\t".concat(cssPropName,": ").concat(cssValue,";");}str+="\n}";return str;}},{key:"dispose",value:function dispose(){this._styleElement.remove();}},{key:"increaseRefCount",value:function increaseRefCount(){this._referenceCount++;}},{key:"decreaseRefCount",value:function decreaseRefCount(){this._referenceCount--;}},{key:"hasReferences",value:function hasReferences(){return this._referenceCount>0;}}]);return RefCountedCssRule;}();function camelToDashes(str){return str.replace(/(^[A-Z])/,function(_ref){var _ref2=_slicedToArray(_ref,1),first=_ref2[0];return first.toLowerCase();}).replace(/([A-Z])/g,function(_ref3){var _ref4=_slicedToArray(_ref3,1),letter=_ref4[0];return"-".concat(letter.toLowerCase());});}

/***/ }),

/***/ 79098:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AJ": () => (/* binding */ MultiCommand),
/* harmony export */   "QG": () => (/* binding */ registerInstantiatedEditorAction),
/* harmony export */   "Qr": () => (/* binding */ registerEditorAction),
/* harmony export */   "R6": () => (/* binding */ EditorAction),
/* harmony export */   "Sq": () => (/* binding */ SelectAllCommand),
/* harmony export */   "Uc": () => (/* binding */ EditorExtensionsRegistry),
/* harmony export */   "_K": () => (/* binding */ registerEditorContribution),
/* harmony export */   "_l": () => (/* binding */ EditorCommand),
/* harmony export */   "f": () => (/* binding */ registerModelCommand),
/* harmony export */   "fK": () => (/* binding */ registerEditorCommand),
/* harmony export */   "jY": () => (/* binding */ MultiEditorAction),
/* harmony export */   "kz": () => (/* binding */ RedoCommand),
/* harmony export */   "mY": () => (/* binding */ Command),
/* harmony export */   "n_": () => (/* binding */ UndoCommand),
/* harmony export */   "rn": () => (/* binding */ registerMultiEditorAction),
/* harmony export */   "sb": () => (/* binding */ registerModelAndPositionCommand)
/* harmony export */ });
/* unused harmony export ProxyCommand */
/* harmony import */ var _nls_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(71453);
/* harmony import */ var _base_common_uri_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(91134);
/* harmony import */ var _services_codeEditorService_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(95328);
/* harmony import */ var _common_core_position_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(60721);
/* harmony import */ var _common_services_model_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(81431);
/* harmony import */ var _common_services_resolverService_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(90270);
/* harmony import */ var _platform_actions_common_actions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(25749);
/* harmony import */ var _platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(47937);
/* harmony import */ var _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(11703);
/* harmony import */ var _platform_keybinding_common_keybindingsRegistry_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(85377);
/* harmony import */ var _platform_registry_common_platform_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(83717);
/* harmony import */ var _platform_telemetry_common_telemetry_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(94066);
/* harmony import */ var _base_common_types_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(918);
/* harmony import */ var _platform_log_common_log_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(21752);
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var Command=/*#__PURE__*/function(){function Command(opts){_classCallCheck(this,Command);this.id=opts.id;this.precondition=opts.precondition;this._kbOpts=opts.kbOpts;this._menuOpts=opts.menuOpts;this._description=opts.description;}_createClass(Command,[{key:"register",value:function register(){var _this=this;if(Array.isArray(this._menuOpts)){this._menuOpts.forEach(this._registerMenuItem,this);}else if(this._menuOpts){this._registerMenuItem(this._menuOpts);}if(this._kbOpts){var kbOptsArr=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];var _iterator=_createForOfIteratorHelper(kbOptsArr),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var kbOpts=_step.value;var kbWhen=kbOpts.kbExpr;if(this.precondition){if(kbWhen){kbWhen=_platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_6__/* .ContextKeyExpr.and */ .Ao.and(kbWhen,this.precondition);}else{kbWhen=this.precondition;}}var desc={id:this.id,weight:kbOpts.weight,args:kbOpts.args,when:kbWhen,primary:kbOpts.primary,secondary:kbOpts.secondary,win:kbOpts.win,linux:kbOpts.linux,mac:kbOpts.mac};_platform_keybinding_common_keybindingsRegistry_js__WEBPACK_IMPORTED_MODULE_7__/* .KeybindingsRegistry.registerKeybindingRule */ .W.registerKeybindingRule(desc);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}_platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_5__/* .CommandsRegistry.registerCommand */ .P0.registerCommand({id:this.id,handler:function handler(accessor,args){return _this.runCommand(accessor,args);},description:this._description});}},{key:"_registerMenuItem",value:function _registerMenuItem(item){_platform_actions_common_actions_js__WEBPACK_IMPORTED_MODULE_4__/* .MenuRegistry.appendMenuItem */ .BH.appendMenuItem(item.menuId,{group:item.group,command:{id:this.id,title:item.title,icon:item.icon,precondition:this.precondition},when:item.when,order:item.order});}}]);return Command;}();var MultiCommand=/*#__PURE__*/function(_Command){_inherits(MultiCommand,_Command);var _super=_createSuper(MultiCommand);function MultiCommand(){var _this2;_classCallCheck(this,MultiCommand);_this2=_super.apply(this,arguments);_this2._implementations=[];return _this2;}/**
     * A higher priority gets to be looked at first
     */_createClass(MultiCommand,[{key:"addImplementation",value:function addImplementation(priority,name,implementation){var _this3=this;this._implementations.push({priority:priority,name:name,implementation:implementation});this._implementations.sort(function(a,b){return b.priority-a.priority;});return{dispose:function dispose(){for(var i=0;i<_this3._implementations.length;i++){if(_this3._implementations[i].implementation===implementation){_this3._implementations.splice(i,1);return;}}}};}},{key:"runCommand",value:function runCommand(accessor,args){var logService=accessor.get(_platform_log_common_log_js__WEBPACK_IMPORTED_MODULE_10__/* .ILogService */ .VZ);logService.trace("Executing Command '".concat(this.id,"' which has ").concat(this._implementations.length," bound."));var _iterator2=_createForOfIteratorHelper(this._implementations),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var impl=_step2.value;var result=impl.implementation(accessor,args);if(result){logService.trace("Command '".concat(this.id,"' was handled by '").concat(impl.name,"'."));if(typeof result==='boolean'){return;}return result;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}logService.trace("The Command '".concat(this.id,"' was not handled by any implementation."));}}]);return MultiCommand;}(Command);//#endregion
/**
 * A command that delegates to another command's implementation.
 *
 * This lets different commands be registered but share the same implementation
 */var ProxyCommand=/*#__PURE__*/function(_Command2){_inherits(ProxyCommand,_Command2);var _super2=_createSuper(ProxyCommand);function ProxyCommand(command,opts){var _this4;_classCallCheck(this,ProxyCommand);_this4=_super2.call(this,opts);_this4.command=command;return _this4;}_createClass(ProxyCommand,[{key:"runCommand",value:function runCommand(accessor,args){return this.command.runCommand(accessor,args);}}]);return ProxyCommand;}(Command);var EditorCommand=/*#__PURE__*/function(_Command3){_inherits(EditorCommand,_Command3);var _super3=_createSuper(EditorCommand);function EditorCommand(){_classCallCheck(this,EditorCommand);return _super3.apply(this,arguments);}_createClass(EditorCommand,[{key:"runCommand",value:function runCommand(accessor,args){var _this5=this;var codeEditorService=accessor.get(_services_codeEditorService_js__WEBPACK_IMPORTED_MODULE_1__/* .ICodeEditorService */ .$);// Find the editor with text focus or active
var editor=codeEditorService.getFocusedCodeEditor()||codeEditorService.getActiveCodeEditor();if(!editor){// well, at least we tried...
return;}return editor.invokeWithinContext(function(editorAccessor){var kbService=editorAccessor.get(_platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_6__/* .IContextKeyService */ .i6);if(!kbService.contextMatchesRules((0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_11__/* .withNullAsUndefined */ .f6)(_this5.precondition))){// precondition does not hold
return;}return _this5.runEditorCommand(editorAccessor,editor,args);});}}],[{key:"bindToContribution",value:/**
     * Create a command class that is bound to a certain editor contribution.
     */function bindToContribution(controllerGetter){return/*#__PURE__*/function(_EditorCommand){_inherits(EditorControllerCommandImpl,_EditorCommand);var _super4=_createSuper(EditorControllerCommandImpl);function EditorControllerCommandImpl(opts){var _this6;_classCallCheck(this,EditorControllerCommandImpl);_this6=_super4.call(this,opts);_this6._callback=opts.handler;return _this6;}_createClass(EditorControllerCommandImpl,[{key:"runEditorCommand",value:function runEditorCommand(accessor,editor,args){var controller=controllerGetter(editor);if(controller){this._callback(controller,args);}}}]);return EditorControllerCommandImpl;}(EditorCommand);}}]);return EditorCommand;}(Command);var EditorAction=/*#__PURE__*/function(_EditorCommand2){_inherits(EditorAction,_EditorCommand2);var _super5=_createSuper(EditorAction);function EditorAction(opts){var _this7;_classCallCheck(this,EditorAction);_this7=_super5.call(this,EditorAction.convertOptions(opts));_this7.label=opts.label;_this7.alias=opts.alias;return _this7;}_createClass(EditorAction,[{key:"runEditorCommand",value:function runEditorCommand(accessor,editor,args){this.reportTelemetry(accessor,editor);return this.run(accessor,editor,args||{});}},{key:"reportTelemetry",value:function reportTelemetry(accessor,editor){accessor.get(_platform_telemetry_common_telemetry_js__WEBPACK_IMPORTED_MODULE_9__/* .ITelemetryService */ .b).publicLog2('editorActionInvoked',{name:this.label,id:this.id});}}],[{key:"convertOptions",value:function convertOptions(opts){var menuOpts;if(Array.isArray(opts.menuOpts)){menuOpts=opts.menuOpts;}else if(opts.menuOpts){menuOpts=[opts.menuOpts];}else{menuOpts=[];}function withDefaults(item){if(!item.menuId){item.menuId=_platform_actions_common_actions_js__WEBPACK_IMPORTED_MODULE_4__/* .MenuId.EditorContext */ .eH.EditorContext;}if(!item.title){item.title=opts.label;}item.when=_platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_6__/* .ContextKeyExpr.and */ .Ao.and(opts.precondition,item.when);return item;}if(Array.isArray(opts.contextMenuOpts)){var _menuOpts;(_menuOpts=menuOpts).push.apply(_menuOpts,_toConsumableArray(opts.contextMenuOpts.map(withDefaults)));}else if(opts.contextMenuOpts){menuOpts.push(withDefaults(opts.contextMenuOpts));}opts.menuOpts=menuOpts;return opts;}}]);return EditorAction;}(EditorCommand);var MultiEditorAction=/*#__PURE__*/function(_EditorAction){_inherits(MultiEditorAction,_EditorAction);var _super6=_createSuper(MultiEditorAction);function MultiEditorAction(){var _this8;_classCallCheck(this,MultiEditorAction);_this8=_super6.apply(this,arguments);_this8._implementations=[];return _this8;}/**
     * A higher priority gets to be looked at first
     */_createClass(MultiEditorAction,[{key:"addImplementation",value:function addImplementation(priority,implementation){var _this9=this;this._implementations.push([priority,implementation]);this._implementations.sort(function(a,b){return b[0]-a[0];});return{dispose:function dispose(){for(var i=0;i<_this9._implementations.length;i++){if(_this9._implementations[i][1]===implementation){_this9._implementations.splice(i,1);return;}}}};}},{key:"run",value:function run(accessor,editor,args){var _iterator3=_createForOfIteratorHelper(this._implementations),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var impl=_step3.value;var result=impl[1](accessor,editor,args);if(result){if(typeof result==='boolean'){return;}return result;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}}]);return MultiEditorAction;}(EditorAction);//#endregion
// --- Registration of commands and actions
function registerModelAndPositionCommand(id,handler){_platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_5__/* .CommandsRegistry.registerCommand */ .P0.registerCommand(id,function(accessor){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}var resource=args[0],position=args[1];(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_11__/* .assertType */ .p_)(_base_common_uri_js__WEBPACK_IMPORTED_MODULE_0__/* .URI.isUri */ .o.isUri(resource));(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_11__/* .assertType */ .p_)(_common_core_position_js__WEBPACK_IMPORTED_MODULE_12__/* .Position.isIPosition */ .L.isIPosition(position));var model=accessor.get(_common_services_model_js__WEBPACK_IMPORTED_MODULE_2__/* .IModelService */ .q).getModel(resource);if(model){var editorPosition=_common_core_position_js__WEBPACK_IMPORTED_MODULE_12__/* .Position.lift */ .L.lift(position);return handler.apply(void 0,[model,editorPosition].concat(_toConsumableArray(args.slice(2))));}return accessor.get(_common_services_resolverService_js__WEBPACK_IMPORTED_MODULE_3__/* .ITextModelService */ .S).createModelReference(resource).then(function(reference){return new Promise(function(resolve,reject){try{var result=handler(reference.object.textEditorModel,_common_core_position_js__WEBPACK_IMPORTED_MODULE_12__/* .Position.lift */ .L.lift(position),args.slice(2));resolve(result);}catch(err){reject(err);}}).finally(function(){reference.dispose();});});});}function registerModelCommand(id,handler){_platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_5__/* .CommandsRegistry.registerCommand */ .P0.registerCommand(id,function(accessor){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2];}var resource=args[0];(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_11__/* .assertType */ .p_)(_base_common_uri_js__WEBPACK_IMPORTED_MODULE_0__/* .URI.isUri */ .o.isUri(resource));var model=accessor.get(_common_services_model_js__WEBPACK_IMPORTED_MODULE_2__/* .IModelService */ .q).getModel(resource);if(model){return handler.apply(void 0,[model].concat(_toConsumableArray(args.slice(1))));}return accessor.get(_common_services_resolverService_js__WEBPACK_IMPORTED_MODULE_3__/* .ITextModelService */ .S).createModelReference(resource).then(function(reference){return new Promise(function(resolve,reject){try{var result=handler(reference.object.textEditorModel,args.slice(1));resolve(result);}catch(err){reject(err);}}).finally(function(){reference.dispose();});});});}function registerEditorCommand(editorCommand){EditorContributionRegistry.INSTANCE.registerEditorCommand(editorCommand);return editorCommand;}function registerEditorAction(ctor){var action=new ctor();EditorContributionRegistry.INSTANCE.registerEditorAction(action);return action;}function registerMultiEditorAction(action){EditorContributionRegistry.INSTANCE.registerEditorAction(action);return action;}function registerInstantiatedEditorAction(editorAction){EditorContributionRegistry.INSTANCE.registerEditorAction(editorAction);}function registerEditorContribution(id,ctor){EditorContributionRegistry.INSTANCE.registerEditorContribution(id,ctor);}var EditorExtensionsRegistry;(function(EditorExtensionsRegistry){function getEditorCommand(commandId){return EditorContributionRegistry.INSTANCE.getEditorCommand(commandId);}EditorExtensionsRegistry.getEditorCommand=getEditorCommand;function getEditorActions(){return EditorContributionRegistry.INSTANCE.getEditorActions();}EditorExtensionsRegistry.getEditorActions=getEditorActions;function getEditorContributions(){return EditorContributionRegistry.INSTANCE.getEditorContributions();}EditorExtensionsRegistry.getEditorContributions=getEditorContributions;function getSomeEditorContributions(ids){return EditorContributionRegistry.INSTANCE.getEditorContributions().filter(function(c){return ids.indexOf(c.id)>=0;});}EditorExtensionsRegistry.getSomeEditorContributions=getSomeEditorContributions;function getDiffEditorContributions(){return EditorContributionRegistry.INSTANCE.getDiffEditorContributions();}EditorExtensionsRegistry.getDiffEditorContributions=getDiffEditorContributions;})(EditorExtensionsRegistry||(EditorExtensionsRegistry={}));// Editor extension points
var Extensions={EditorCommonContributions:'editor.contributions'};var EditorContributionRegistry=/*#__PURE__*/function(){function EditorContributionRegistry(){_classCallCheck(this,EditorContributionRegistry);this.editorContributions=[];this.diffEditorContributions=[];this.editorActions=[];this.editorCommands=Object.create(null);}_createClass(EditorContributionRegistry,[{key:"registerEditorContribution",value:function registerEditorContribution(id,ctor){this.editorContributions.push({id:id,ctor:ctor});}},{key:"getEditorContributions",value:function getEditorContributions(){return this.editorContributions.slice(0);}},{key:"getDiffEditorContributions",value:function getDiffEditorContributions(){return this.diffEditorContributions.slice(0);}},{key:"registerEditorAction",value:function registerEditorAction(action){action.register();this.editorActions.push(action);}},{key:"getEditorActions",value:function getEditorActions(){return this.editorActions.slice(0);}},{key:"registerEditorCommand",value:function registerEditorCommand(editorCommand){editorCommand.register();this.editorCommands[editorCommand.id]=editorCommand;}},{key:"getEditorCommand",value:function getEditorCommand(commandId){return this.editorCommands[commandId]||null;}}]);return EditorContributionRegistry;}();EditorContributionRegistry.INSTANCE=new EditorContributionRegistry();_platform_registry_common_platform_js__WEBPACK_IMPORTED_MODULE_8__/* .Registry.add */ .B.add(Extensions.EditorCommonContributions,EditorContributionRegistry.INSTANCE);function registerCommand(command){command.register();return command;}var UndoCommand=registerCommand(new MultiCommand({id:'undo',precondition:undefined,kbOpts:{weight:0/* EditorCore */,primary:2048/* CtrlCmd */|56/* KeyZ */},menuOpts:[{menuId:_platform_actions_common_actions_js__WEBPACK_IMPORTED_MODULE_4__/* .MenuId.MenubarEditMenu */ .eH.MenubarEditMenu,group:'1_do',title:_nls_js__WEBPACK_IMPORTED_MODULE_13__/* .localize */ .N({key:'miUndo',comment:['&& denotes a mnemonic']},"&&Undo"),order:1},{menuId:_platform_actions_common_actions_js__WEBPACK_IMPORTED_MODULE_4__/* .MenuId.CommandPalette */ .eH.CommandPalette,group:'',title:_nls_js__WEBPACK_IMPORTED_MODULE_13__/* .localize */ .N('undo',"Undo"),order:1}]}));registerCommand(new ProxyCommand(UndoCommand,{id:'default:undo',precondition:undefined}));var RedoCommand=registerCommand(new MultiCommand({id:'redo',precondition:undefined,kbOpts:{weight:0/* EditorCore */,primary:2048/* CtrlCmd */|55/* KeyY */,secondary:[2048/* CtrlCmd */|1024/* Shift */|56/* KeyZ */],mac:{primary:2048/* CtrlCmd */|1024/* Shift */|56/* KeyZ */}},menuOpts:[{menuId:_platform_actions_common_actions_js__WEBPACK_IMPORTED_MODULE_4__/* .MenuId.MenubarEditMenu */ .eH.MenubarEditMenu,group:'1_do',title:_nls_js__WEBPACK_IMPORTED_MODULE_13__/* .localize */ .N({key:'miRedo',comment:['&& denotes a mnemonic']},"&&Redo"),order:2},{menuId:_platform_actions_common_actions_js__WEBPACK_IMPORTED_MODULE_4__/* .MenuId.CommandPalette */ .eH.CommandPalette,group:'',title:_nls_js__WEBPACK_IMPORTED_MODULE_13__/* .localize */ .N('redo',"Redo"),order:1}]}));registerCommand(new ProxyCommand(RedoCommand,{id:'default:redo',precondition:undefined}));var SelectAllCommand=registerCommand(new MultiCommand({id:'editor.action.selectAll',precondition:undefined,kbOpts:{weight:0/* EditorCore */,kbExpr:null,primary:2048/* CtrlCmd */|31/* KeyA */},menuOpts:[{menuId:_platform_actions_common_actions_js__WEBPACK_IMPORTED_MODULE_4__/* .MenuId.MenubarSelectionMenu */ .eH.MenubarSelectionMenu,group:'1_basic',title:_nls_js__WEBPACK_IMPORTED_MODULE_13__/* .localize */ .N({key:'miSelectAll',comment:['&& denotes a mnemonic']},"&&Select All"),order:1},{menuId:_platform_actions_common_actions_js__WEBPACK_IMPORTED_MODULE_4__/* .MenuId.CommandPalette */ .eH.CommandPalette,group:'',title:_nls_js__WEBPACK_IMPORTED_MODULE_13__/* .localize */ .N('selectAll',"Select All"),order:1}]}));

/***/ }),

/***/ 42210:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "i": () => (/* binding */ AbstractCodeEditorService)
/* harmony export */ });
/* unused harmony export GlobalStyleSheet */
/* harmony import */ var _base_common_event_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(36223);
/* harmony import */ var _base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(19860);
/* harmony import */ var _platform_theme_common_themeService_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(46199);
function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect==="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;}return c>3&&r&&Object.defineProperty(target,key,r),r;};var __param=undefined&&undefined.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex);};};var AbstractCodeEditorService=/*#__PURE__*/function(_Disposable){_inherits(AbstractCodeEditorService,_Disposable);var _super=_createSuper(AbstractCodeEditorService);function AbstractCodeEditorService(_themeService){var _this;_classCallCheck(this,AbstractCodeEditorService);_this=_super.call(this);_this._themeService=_themeService;_this._onCodeEditorAdd=_this._register(new _base_common_event_js__WEBPACK_IMPORTED_MODULE_0__/* .Emitter */ .Q5());_this.onCodeEditorAdd=_this._onCodeEditorAdd.event;_this._onCodeEditorRemove=_this._register(new _base_common_event_js__WEBPACK_IMPORTED_MODULE_0__/* .Emitter */ .Q5());_this.onCodeEditorRemove=_this._onCodeEditorRemove.event;_this._onDiffEditorAdd=_this._register(new _base_common_event_js__WEBPACK_IMPORTED_MODULE_0__/* .Emitter */ .Q5());_this.onDiffEditorAdd=_this._onDiffEditorAdd.event;_this._onDiffEditorRemove=_this._register(new _base_common_event_js__WEBPACK_IMPORTED_MODULE_0__/* .Emitter */ .Q5());_this.onDiffEditorRemove=_this._onDiffEditorRemove.event;_this._decorationOptionProviders=new Map();_this._modelProperties=new Map();_this._codeEditors=Object.create(null);_this._diffEditors=Object.create(null);_this._globalStyleSheet=null;return _this;}_createClass(AbstractCodeEditorService,[{key:"addCodeEditor",value:function addCodeEditor(editor){this._codeEditors[editor.getId()]=editor;this._onCodeEditorAdd.fire(editor);}},{key:"removeCodeEditor",value:function removeCodeEditor(editor){if(delete this._codeEditors[editor.getId()]){this._onCodeEditorRemove.fire(editor);}}},{key:"listCodeEditors",value:function listCodeEditors(){var _this2=this;return Object.keys(this._codeEditors).map(function(id){return _this2._codeEditors[id];});}},{key:"addDiffEditor",value:function addDiffEditor(editor){this._diffEditors[editor.getId()]=editor;this._onDiffEditorAdd.fire(editor);}},{key:"removeDiffEditor",value:function removeDiffEditor(editor){if(delete this._diffEditors[editor.getId()]){this._onDiffEditorRemove.fire(editor);}}},{key:"listDiffEditors",value:function listDiffEditors(){var _this3=this;return Object.keys(this._diffEditors).map(function(id){return _this3._diffEditors[id];});}},{key:"getFocusedCodeEditor",value:function getFocusedCodeEditor(){var editorWithWidgetFocus=null;var editors=this.listCodeEditors();var _iterator=_createForOfIteratorHelper(editors),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var editor=_step.value;if(editor.hasTextFocus()){// bingo!
return editor;}if(editor.hasWidgetFocus()){editorWithWidgetFocus=editor;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return editorWithWidgetFocus;}},{key:"removeDecorationType",value:function removeDecorationType(key){var provider=this._decorationOptionProviders.get(key);if(provider){provider.refCount--;if(provider.refCount<=0){this._decorationOptionProviders.delete(key);provider.dispose();this.listCodeEditors().forEach(function(ed){return ed.removeDecorations(key);});}}}},{key:"setModelProperty",value:function setModelProperty(resource,key,value){var key1=resource.toString();var dest;if(this._modelProperties.has(key1)){dest=this._modelProperties.get(key1);}else{dest=new Map();this._modelProperties.set(key1,dest);}dest.set(key,value);}},{key:"getModelProperty",value:function getModelProperty(resource,key){var key1=resource.toString();if(this._modelProperties.has(key1)){var innerMap=this._modelProperties.get(key1);return innerMap.get(key);}return undefined;}}]);return AbstractCodeEditorService;}(_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_1__/* .Disposable */ .JT);AbstractCodeEditorService=__decorate([__param(0,_platform_theme_common_themeService_js__WEBPACK_IMPORTED_MODULE_2__/* .IThemeService */ .XE)],AbstractCodeEditorService);var GlobalStyleSheet=function GlobalStyleSheet(styleSheet){_classCallCheck(this,GlobalStyleSheet);this._styleSheet=styleSheet;};

/***/ }),

/***/ 89821:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Gl": () => (/* binding */ ResourceTextEdit),
/* harmony export */   "fo": () => (/* binding */ ResourceEdit),
/* harmony export */   "vu": () => (/* binding */ IBulkEditService)
/* harmony export */ });
/* unused harmony export ResourceFileEdit */
/* harmony import */ var _platform_instantiation_common_instantiation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(71896);
/* harmony import */ var _base_common_uri_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(91134);
/* harmony import */ var _base_common_types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(918);
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var IBulkEditService=(0,_platform_instantiation_common_instantiation_js__WEBPACK_IMPORTED_MODULE_0__/* .createDecorator */ .yh)('IWorkspaceEditService');function isWorkspaceFileEdit(thing){return (0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_2__/* .isObject */ .Kn)(thing)&&(Boolean(thing.newUri)||Boolean(thing.oldUri));}function isWorkspaceTextEdit(thing){return (0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_2__/* .isObject */ .Kn)(thing)&&_base_common_uri_js__WEBPACK_IMPORTED_MODULE_1__/* .URI.isUri */ .o.isUri(thing.resource)&&(0,_base_common_types_js__WEBPACK_IMPORTED_MODULE_2__/* .isObject */ .Kn)(thing.edit);}var ResourceEdit=/*#__PURE__*/function(){function ResourceEdit(metadata){_classCallCheck(this,ResourceEdit);this.metadata=metadata;}_createClass(ResourceEdit,null,[{key:"convert",value:function convert(edit){return edit.edits.map(function(edit){if(isWorkspaceTextEdit(edit)){return new ResourceTextEdit(edit.resource,edit.edit,edit.modelVersionId,edit.metadata);}if(isWorkspaceFileEdit(edit)){return new ResourceFileEdit(edit.oldUri,edit.newUri,edit.options,edit.metadata);}throw new Error('Unsupported edit');});}}]);return ResourceEdit;}();var ResourceTextEdit=/*#__PURE__*/function(_ResourceEdit){_inherits(ResourceTextEdit,_ResourceEdit);var _super=_createSuper(ResourceTextEdit);function ResourceTextEdit(resource,textEdit,versionId,metadata){var _this;_classCallCheck(this,ResourceTextEdit);_this=_super.call(this,metadata);_this.resource=resource;_this.textEdit=textEdit;_this.versionId=versionId;return _this;}return ResourceTextEdit;}(ResourceEdit);var ResourceFileEdit=/*#__PURE__*/function(_ResourceEdit2){_inherits(ResourceFileEdit,_ResourceEdit2);var _super2=_createSuper(ResourceFileEdit);function ResourceFileEdit(oldResource,newResource,options,metadata){var _this2;_classCallCheck(this,ResourceFileEdit);_this2=_super2.call(this,metadata);_this2.oldResource=oldResource;_this2.newResource=newResource;_this2.options=options;return _this2;}return ResourceFileEdit;}(ResourceEdit);

/***/ }),

/***/ 95328:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "$": () => (/* binding */ ICodeEditorService)
/* harmony export */ });
/* harmony import */ var _platform_instantiation_common_instantiation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(71896);
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var ICodeEditorService=(0,_platform_instantiation_common_instantiation_js__WEBPACK_IMPORTED_MODULE_0__/* .createDecorator */ .yh)('codeEditorService');

/***/ }),

/***/ 68441:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Q8": () => (/* binding */ EditorWorkerClient),
/* harmony export */   "eu": () => (/* binding */ EditorWorkerService)
/* harmony export */ });
/* unused harmony export EditorWorkerHost */
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92910);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _base_common_async_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(88494);
/* harmony import */ var _base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(19860);
/* harmony import */ var _base_common_worker_simpleWorker_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(19806);
/* harmony import */ var _base_browser_defaultWorkerFactory_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(39193);
/* harmony import */ var _common_core_range_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(96844);
/* harmony import */ var _common_languages_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(98480);
/* harmony import */ var _common_languages_languageConfigurationRegistry_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(71567);
/* harmony import */ var _common_services_editorSimpleWorker_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(7461);
/* harmony import */ var _common_services_model_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(81431);
/* harmony import */ var _common_services_textResourceConfiguration_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(43674);
/* harmony import */ var _base_common_strings_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(41712);
/* harmony import */ var _base_common_arrays_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(92224);
/* harmony import */ var _platform_log_common_log_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(21752);
/* harmony import */ var _base_common_stopwatch_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(76660);
/* harmony import */ var _base_common_errors_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(32314);
function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect==="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;}return c>3&&r&&Object.defineProperty(target,key,r),r;};var __param=undefined&&undefined.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex);};};var __awaiter=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};/**
 * Stop syncing a model to the worker if it was not needed for 1 min.
 */var STOP_SYNC_MODEL_DELTA_TIME_MS=60*1000;/**
 * Stop the worker if it was not needed for 5 min.
 */var STOP_WORKER_DELTA_TIME_MS=5*60*1000;function canSyncModel(modelService,resource){var model=modelService.getModel(resource);if(!model){return false;}if(model.isTooLargeForSyncing()){return false;}return true;}var EditorWorkerService=/*#__PURE__*/function(_Disposable){_inherits(EditorWorkerService,_Disposable);var _super=_createSuper(EditorWorkerService);function EditorWorkerService(modelService,configurationService,logService,languageConfigurationService){var _this;_classCallCheck(this,EditorWorkerService);_this=_super.call(this);_this._modelService=modelService;_this._workerManager=_this._register(new WorkerManager(_this._modelService,languageConfigurationService));_this._logService=logService;// register default link-provider and default completions-provider
_this._register(_common_languages_js__WEBPACK_IMPORTED_MODULE_5__/* .LinkProviderRegistry.register */ .pM.register({language:'*',hasAccessToAllModels:true},{provideLinks:function provideLinks(model,token){if(!canSyncModel(_this._modelService,model.uri)){return Promise.resolve({links:[]});// File too large
}return _this._workerManager.withWorker().then(function(client){return client.computeLinks(model.uri);}).then(function(links){return links&&{links:links};});}}));_this._register(_common_languages_js__WEBPACK_IMPORTED_MODULE_5__/* .CompletionProviderRegistry.register */ .KZ.register('*',new WordBasedCompletionItemProvider(_this._workerManager,configurationService,_this._modelService,languageConfigurationService)));return _this;}_createClass(EditorWorkerService,[{key:"dispose",value:function dispose(){_get(_getPrototypeOf(EditorWorkerService.prototype),"dispose",this).call(this);}},{key:"canComputeUnicodeHighlights",value:function canComputeUnicodeHighlights(uri){return canSyncModel(this._modelService,uri);}},{key:"computedUnicodeHighlights",value:function computedUnicodeHighlights(uri,options,range){return this._workerManager.withWorker().then(function(client){return client.computedUnicodeHighlights(uri,options,range);});}},{key:"computeDiff",value:function computeDiff(original,modified,ignoreTrimWhitespace,maxComputationTime){return this._workerManager.withWorker().then(function(client){return client.computeDiff(original,modified,ignoreTrimWhitespace,maxComputationTime);});}},{key:"computeMoreMinimalEdits",value:function computeMoreMinimalEdits(resource,edits){var _this2=this;if((0,_base_common_arrays_js__WEBPACK_IMPORTED_MODULE_14__/* .isNonEmptyArray */ .Of)(edits)){if(!canSyncModel(this._modelService,resource)){return Promise.resolve(edits);// File too large
}var sw=_base_common_stopwatch_js__WEBPACK_IMPORTED_MODULE_12__/* .StopWatch.create */ .G.create(true);var result=this._workerManager.withWorker().then(function(client){return client.computeMoreMinimalEdits(resource,edits);});result.finally(function(){return _this2._logService.trace('FORMAT#computeMoreMinimalEdits',resource.toString(true),sw.elapsed());});return Promise.race([result,(0,_base_common_async_js__WEBPACK_IMPORTED_MODULE_1__/* .timeout */ .Vs)(1000).then(function(){return edits;})]);}else{return Promise.resolve(undefined);}}},{key:"canNavigateValueSet",value:function canNavigateValueSet(resource){return canSyncModel(this._modelService,resource);}},{key:"navigateValueSet",value:function navigateValueSet(resource,range,up){return this._workerManager.withWorker().then(function(client){return client.navigateValueSet(resource,range,up);});}},{key:"canComputeWordRanges",value:function canComputeWordRanges(resource){return canSyncModel(this._modelService,resource);}},{key:"computeWordRanges",value:function computeWordRanges(resource,range){return this._workerManager.withWorker().then(function(client){return client.computeWordRanges(resource,range);});}}]);return EditorWorkerService;}(_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_2__/* .Disposable */ .JT);EditorWorkerService=__decorate([__param(0,_common_services_model_js__WEBPACK_IMPORTED_MODULE_8__/* .IModelService */ .q),__param(1,_common_services_textResourceConfiguration_js__WEBPACK_IMPORTED_MODULE_9__/* .ITextResourceConfigurationService */ .V),__param(2,_platform_log_common_log_js__WEBPACK_IMPORTED_MODULE_11__/* .ILogService */ .VZ),__param(3,_common_languages_languageConfigurationRegistry_js__WEBPACK_IMPORTED_MODULE_6__/* .ILanguageConfigurationService */ .c_)],EditorWorkerService);var WordBasedCompletionItemProvider=/*#__PURE__*/function(){function WordBasedCompletionItemProvider(workerManager,configurationService,modelService,languageConfigurationService){_classCallCheck(this,WordBasedCompletionItemProvider);this.languageConfigurationService=languageConfigurationService;this._debugDisplayName='wordbasedCompletions';this._workerManager=workerManager;this._configurationService=configurationService;this._modelService=modelService;}_createClass(WordBasedCompletionItemProvider,[{key:"provideCompletionItems",value:function provideCompletionItems(model,position){return __awaiter(this,void 0,void 0,/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee(){var config,models,_iterator,_step,candidate,wordDefRegExp,word,replace,insert,client,data;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config=this._configurationService.getValue(model.uri,position,'editor');if(config.wordBasedSuggestions){_context.next=3;break;}return _context.abrupt("return",undefined);case 3:models=[];if(!(config.wordBasedSuggestionsMode==='currentDocument')){_context.next=8;break;}// only current file and only if not too large
if(canSyncModel(this._modelService,model.uri)){models.push(model.uri);}_context.next=26;break;case 8:// either all files or files of same language
_iterator=_createForOfIteratorHelper(this._modelService.getModels());_context.prev=9;_iterator.s();case 11:if((_step=_iterator.n()).done){_context.next=18;break;}candidate=_step.value;if(canSyncModel(this._modelService,candidate.uri)){_context.next=15;break;}return _context.abrupt("continue",16);case 15:if(candidate===model){models.unshift(candidate.uri);}else if(config.wordBasedSuggestionsMode==='allDocuments'||candidate.getLanguageId()===model.getLanguageId()){models.push(candidate.uri);}case 16:_context.next=11;break;case 18:_context.next=23;break;case 20:_context.prev=20;_context.t0=_context["catch"](9);_iterator.e(_context.t0);case 23:_context.prev=23;_iterator.f();return _context.finish(23);case 26:if(!(models.length===0)){_context.next=28;break;}return _context.abrupt("return",undefined);case 28:wordDefRegExp=this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();word=model.getWordAtPosition(position);replace=!word?_common_core_range_js__WEBPACK_IMPORTED_MODULE_15__/* .Range.fromPositions */ .e.fromPositions(position):new _common_core_range_js__WEBPACK_IMPORTED_MODULE_15__/* .Range */ .e(position.lineNumber,word.startColumn,position.lineNumber,word.endColumn);insert=replace.setEndPosition(position.lineNumber,position.column);_context.next=34;return this._workerManager.withWorker();case 34:client=_context.sent;_context.next=37;return client.textualSuggest(models,word===null||word===void 0?void 0:word.word,wordDefRegExp);case 37:data=_context.sent;if(data){_context.next=40;break;}return _context.abrupt("return",undefined);case 40:return _context.abrupt("return",{duration:data.duration,suggestions:data.words.map(function(word){return{kind:18/* Text */,/* Text */label:word,insertText:word,range:{insert:insert,replace:replace}};})});case 41:case"end":return _context.stop();}}},_callee,this,[[9,20,23,26]]);}));}}]);return WordBasedCompletionItemProvider;}();var WorkerManager=/*#__PURE__*/function(_Disposable2){_inherits(WorkerManager,_Disposable2);var _super2=_createSuper(WorkerManager);function WorkerManager(modelService,languageConfigurationService){var _this3;_classCallCheck(this,WorkerManager);_this3=_super2.call(this);_this3.languageConfigurationService=languageConfigurationService;_this3._modelService=modelService;_this3._editorWorkerClient=null;_this3._lastWorkerUsedTime=new Date().getTime();var stopWorkerInterval=_this3._register(new _base_common_async_js__WEBPACK_IMPORTED_MODULE_1__/* .IntervalTimer */ .zh());stopWorkerInterval.cancelAndSet(function(){return _this3._checkStopIdleWorker();},Math.round(STOP_WORKER_DELTA_TIME_MS/2));_this3._register(_this3._modelService.onModelRemoved(function(_){return _this3._checkStopEmptyWorker();}));return _this3;}_createClass(WorkerManager,[{key:"dispose",value:function dispose(){if(this._editorWorkerClient){this._editorWorkerClient.dispose();this._editorWorkerClient=null;}_get(_getPrototypeOf(WorkerManager.prototype),"dispose",this).call(this);}/**
     * Check if the model service has no more models and stop the worker if that is the case.
     */},{key:"_checkStopEmptyWorker",value:function _checkStopEmptyWorker(){if(!this._editorWorkerClient){return;}var models=this._modelService.getModels();if(models.length===0){// There are no more models => nothing possible for me to do
this._editorWorkerClient.dispose();this._editorWorkerClient=null;}}/**
     * Check if the worker has been idle for a while and then stop it.
     */},{key:"_checkStopIdleWorker",value:function _checkStopIdleWorker(){if(!this._editorWorkerClient){return;}var timeSinceLastWorkerUsedTime=new Date().getTime()-this._lastWorkerUsedTime;if(timeSinceLastWorkerUsedTime>STOP_WORKER_DELTA_TIME_MS){this._editorWorkerClient.dispose();this._editorWorkerClient=null;}}},{key:"withWorker",value:function withWorker(){this._lastWorkerUsedTime=new Date().getTime();if(!this._editorWorkerClient){this._editorWorkerClient=new EditorWorkerClient(this._modelService,false,'editorWorkerService',this.languageConfigurationService);}return Promise.resolve(this._editorWorkerClient);}}]);return WorkerManager;}(_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_2__/* .Disposable */ .JT);var EditorModelManager=/*#__PURE__*/function(_Disposable3){_inherits(EditorModelManager,_Disposable3);var _super3=_createSuper(EditorModelManager);function EditorModelManager(proxy,modelService,keepIdleModels){var _this4;_classCallCheck(this,EditorModelManager);_this4=_super3.call(this);_this4._syncedModels=Object.create(null);_this4._syncedModelsLastUsedTime=Object.create(null);_this4._proxy=proxy;_this4._modelService=modelService;if(!keepIdleModels){var timer=new _base_common_async_js__WEBPACK_IMPORTED_MODULE_1__/* .IntervalTimer */ .zh();timer.cancelAndSet(function(){return _this4._checkStopModelSync();},Math.round(STOP_SYNC_MODEL_DELTA_TIME_MS/2));_this4._register(timer);}return _this4;}_createClass(EditorModelManager,[{key:"dispose",value:function dispose(){for(var modelUrl in this._syncedModels){(0,_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_2__/* .dispose */ .B9)(this._syncedModels[modelUrl]);}this._syncedModels=Object.create(null);this._syncedModelsLastUsedTime=Object.create(null);_get(_getPrototypeOf(EditorModelManager.prototype),"dispose",this).call(this);}},{key:"ensureSyncedResources",value:function ensureSyncedResources(resources,forceLargeModels){var _iterator2=_createForOfIteratorHelper(resources),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var resource=_step2.value;var resourceStr=resource.toString();if(!this._syncedModels[resourceStr]){this._beginModelSync(resource,forceLargeModels);}if(this._syncedModels[resourceStr]){this._syncedModelsLastUsedTime[resourceStr]=new Date().getTime();}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}},{key:"_checkStopModelSync",value:function _checkStopModelSync(){var currentTime=new Date().getTime();var toRemove=[];for(var modelUrl in this._syncedModelsLastUsedTime){var elapsedTime=currentTime-this._syncedModelsLastUsedTime[modelUrl];if(elapsedTime>STOP_SYNC_MODEL_DELTA_TIME_MS){toRemove.push(modelUrl);}}for(var _i=0,_toRemove=toRemove;_i<_toRemove.length;_i++){var e=_toRemove[_i];this._stopModelSync(e);}}},{key:"_beginModelSync",value:function _beginModelSync(resource,forceLargeModels){var _this5=this;var model=this._modelService.getModel(resource);if(!model){return;}if(!forceLargeModels&&model.isTooLargeForSyncing()){return;}var modelUrl=resource.toString();this._proxy.acceptNewModel({url:model.uri.toString(),lines:model.getLinesContent(),EOL:model.getEOL(),versionId:model.getVersionId()});var toDispose=new _base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_2__/* .DisposableStore */ .SL();toDispose.add(model.onDidChangeContent(function(e){_this5._proxy.acceptModelChanged(modelUrl.toString(),e);}));toDispose.add(model.onWillDispose(function(){_this5._stopModelSync(modelUrl);}));toDispose.add((0,_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_2__/* .toDisposable */ .OF)(function(){_this5._proxy.acceptRemovedModel(modelUrl);}));this._syncedModels[modelUrl]=toDispose;}},{key:"_stopModelSync",value:function _stopModelSync(modelUrl){var toDispose=this._syncedModels[modelUrl];delete this._syncedModels[modelUrl];delete this._syncedModelsLastUsedTime[modelUrl];(0,_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_2__/* .dispose */ .B9)(toDispose);}}]);return EditorModelManager;}(_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_2__/* .Disposable */ .JT);var SynchronousWorkerClient=/*#__PURE__*/function(){function SynchronousWorkerClient(instance){_classCallCheck(this,SynchronousWorkerClient);this._instance=instance;this._proxyObj=Promise.resolve(this._instance);}_createClass(SynchronousWorkerClient,[{key:"dispose",value:function dispose(){this._instance.dispose();}},{key:"getProxyObject",value:function getProxyObject(){return this._proxyObj;}}]);return SynchronousWorkerClient;}();var EditorWorkerHost=/*#__PURE__*/function(){function EditorWorkerHost(workerClient){_classCallCheck(this,EditorWorkerHost);this._workerClient=workerClient;}// foreign host request
_createClass(EditorWorkerHost,[{key:"fhr",value:function fhr(method,args){return this._workerClient.fhr(method,args);}}]);return EditorWorkerHost;}();var EditorWorkerClient=/*#__PURE__*/function(_Disposable4){_inherits(EditorWorkerClient,_Disposable4);var _super4=_createSuper(EditorWorkerClient);function EditorWorkerClient(modelService,keepIdleModels,label,languageConfigurationService){var _this6;_classCallCheck(this,EditorWorkerClient);_this6=_super4.call(this);_this6.languageConfigurationService=languageConfigurationService;_this6._disposed=false;_this6._modelService=modelService;_this6._keepIdleModels=keepIdleModels;_this6._workerFactory=new _base_browser_defaultWorkerFactory_js__WEBPACK_IMPORTED_MODULE_4__/* .DefaultWorkerFactory */ .H(label);_this6._worker=null;_this6._modelManager=null;return _this6;}// foreign host request
_createClass(EditorWorkerClient,[{key:"fhr",value:function fhr(method,args){throw new Error("Not implemented!");}},{key:"_getOrCreateWorker",value:function _getOrCreateWorker(){if(!this._worker){try{this._worker=this._register(new _base_common_worker_simpleWorker_js__WEBPACK_IMPORTED_MODULE_3__/* .SimpleWorkerClient */ .PB(this._workerFactory,'vs/editor/common/services/editorSimpleWorker',new EditorWorkerHost(this)));}catch(err){(0,_base_common_worker_simpleWorker_js__WEBPACK_IMPORTED_MODULE_3__/* .logOnceWebWorkerWarning */ .HZ)(err);this._worker=new SynchronousWorkerClient(new _common_services_editorSimpleWorker_js__WEBPACK_IMPORTED_MODULE_7__/* .EditorSimpleWorker */ .ky(new EditorWorkerHost(this),null));}}return this._worker;}},{key:"_getProxy",value:function _getProxy(){var _this7=this;return this._getOrCreateWorker().getProxyObject().then(undefined,function(err){(0,_base_common_worker_simpleWorker_js__WEBPACK_IMPORTED_MODULE_3__/* .logOnceWebWorkerWarning */ .HZ)(err);_this7._worker=new SynchronousWorkerClient(new _common_services_editorSimpleWorker_js__WEBPACK_IMPORTED_MODULE_7__/* .EditorSimpleWorker */ .ky(new EditorWorkerHost(_this7),null));return _this7._getOrCreateWorker().getProxyObject();});}},{key:"_getOrCreateModelManager",value:function _getOrCreateModelManager(proxy){if(!this._modelManager){this._modelManager=this._register(new EditorModelManager(proxy,this._modelService,this._keepIdleModels));}return this._modelManager;}},{key:"_withSyncedResources",value:function _withSyncedResources(resources){var forceLargeModels=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return __awaiter(this,void 0,void 0,/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee2(){var _this8=this;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!this._disposed){_context2.next=2;break;}return _context2.abrupt("return",Promise.reject((0,_base_common_errors_js__WEBPACK_IMPORTED_MODULE_13__/* .canceled */ .F0)()));case 2:return _context2.abrupt("return",this._getProxy().then(function(proxy){_this8._getOrCreateModelManager(proxy).ensureSyncedResources(resources,forceLargeModels);return proxy;}));case 3:case"end":return _context2.stop();}}},_callee2,this);}));}},{key:"computedUnicodeHighlights",value:function computedUnicodeHighlights(uri,options,range){return this._withSyncedResources([uri]).then(function(proxy){return proxy.computeUnicodeHighlights(uri.toString(),options,range);});}},{key:"computeDiff",value:function computeDiff(original,modified,ignoreTrimWhitespace,maxComputationTime){return this._withSyncedResources([original,modified],/* forceLargeModels */true).then(function(proxy){return proxy.computeDiff(original.toString(),modified.toString(),ignoreTrimWhitespace,maxComputationTime);});}},{key:"computeMoreMinimalEdits",value:function computeMoreMinimalEdits(resource,edits){return this._withSyncedResources([resource]).then(function(proxy){return proxy.computeMoreMinimalEdits(resource.toString(),edits);});}},{key:"computeLinks",value:function computeLinks(resource){return this._withSyncedResources([resource]).then(function(proxy){return proxy.computeLinks(resource.toString());});}},{key:"textualSuggest",value:function textualSuggest(resources,leadingWord,wordDefRegExp){return __awaiter(this,void 0,void 0,/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee3(){var proxy,wordDef,wordDefFlags;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this._withSyncedResources(resources);case 2:proxy=_context3.sent;wordDef=wordDefRegExp.source;wordDefFlags=(0,_base_common_strings_js__WEBPACK_IMPORTED_MODULE_10__/* .regExpFlags */ .mr)(wordDefRegExp);return _context3.abrupt("return",proxy.textualSuggest(resources.map(function(r){return r.toString();}),leadingWord,wordDef,wordDefFlags));case 6:case"end":return _context3.stop();}}},_callee3,this);}));}},{key:"computeWordRanges",value:function computeWordRanges(resource,range){var _this9=this;return this._withSyncedResources([resource]).then(function(proxy){var model=_this9._modelService.getModel(resource);if(!model){return Promise.resolve(null);}var wordDefRegExp=_this9.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();var wordDef=wordDefRegExp.source;var wordDefFlags=(0,_base_common_strings_js__WEBPACK_IMPORTED_MODULE_10__/* .regExpFlags */ .mr)(wordDefRegExp);return proxy.computeWordRanges(resource.toString(),range,wordDef,wordDefFlags);});}},{key:"navigateValueSet",value:function navigateValueSet(resource,range,up){var _this10=this;return this._withSyncedResources([resource]).then(function(proxy){var model=_this10._modelService.getModel(resource);if(!model){return null;}var wordDefRegExp=_this10.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();var wordDef=wordDefRegExp.source;var wordDefFlags=(0,_base_common_strings_js__WEBPACK_IMPORTED_MODULE_10__/* .regExpFlags */ .mr)(wordDefRegExp);return proxy.navigateValueSet(resource.toString(),range,up,wordDef,wordDefFlags);});}},{key:"dispose",value:function dispose(){_get(_getPrototypeOf(EditorWorkerClient.prototype),"dispose",this).call(this);this._disposed=true;}}]);return EditorWorkerClient;}(_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_2__/* .Disposable */ .JT);

/***/ }),

/***/ 29733:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "B": () => (/* binding */ OpenerService)
/* harmony export */ });
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92910);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _base_browser_dom_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(20446);
/* harmony import */ var _base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(82643);
/* harmony import */ var _base_common_linkedList_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86164);
/* harmony import */ var _base_common_map_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(46081);
/* harmony import */ var _base_common_marshalling_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(28781);
/* harmony import */ var _base_common_network_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12029);
/* harmony import */ var _base_common_resources_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(74926);
/* harmony import */ var _base_common_uri_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(91134);
/* harmony import */ var _codeEditorService_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(95328);
/* harmony import */ var _platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(47937);
/* harmony import */ var _platform_editor_common_editor_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(95882);
/* harmony import */ var _platform_opener_common_opener_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(58208);
function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect==="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;}return c>3&&r&&Object.defineProperty(target,key,r),r;};var __param=undefined&&undefined.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex);};};var __awaiter=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var CommandOpener=/*#__PURE__*/function(){function CommandOpener(_commandService){_classCallCheck(this,CommandOpener);this._commandService=_commandService;}_createClass(CommandOpener,[{key:"open",value:function open(target,options){return __awaiter(this,void 0,void 0,/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee(){var _this$_commandService;var args;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if((0,_platform_opener_common_opener_js__WEBPACK_IMPORTED_MODULE_12__/* .matchesScheme */ .xn)(target,_base_common_network_js__WEBPACK_IMPORTED_MODULE_6__/* .Schemas.command */ .lg.command)){_context.next=2;break;}return _context.abrupt("return",false);case 2:if(options===null||options===void 0?void 0:options.allowCommands){_context.next=4;break;}return _context.abrupt("return",true);case 4:// run command or bail out if command isn't known
if(typeof target==='string'){target=_base_common_uri_js__WEBPACK_IMPORTED_MODULE_8__/* .URI.parse */ .o.parse(target);}// execute as command
args=[];try{args=(0,_base_common_marshalling_js__WEBPACK_IMPORTED_MODULE_5__/* .parse */ .Q)(decodeURIComponent(target.query));}catch(_a){// ignore and retry
try{args=(0,_base_common_marshalling_js__WEBPACK_IMPORTED_MODULE_5__/* .parse */ .Q)(target.query);}catch(_b){// ignore error
}}if(!Array.isArray(args)){args=[args];}_context.next=10;return(_this$_commandService=this._commandService).executeCommand.apply(_this$_commandService,[target.path].concat(_toConsumableArray(args)));case 10:return _context.abrupt("return",true);case 11:case"end":return _context.stop();}}},_callee,this);}));}}]);return CommandOpener;}();CommandOpener=__decorate([__param(0,_platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_10__/* .ICommandService */ .Hy)],CommandOpener);var EditorOpener=/*#__PURE__*/function(){function EditorOpener(_editorService){_classCallCheck(this,EditorOpener);this._editorService=_editorService;}_createClass(EditorOpener,[{key:"open",value:function open(target,options){return __awaiter(this,void 0,void 0,/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee2(){var selection;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(typeof target==='string'){target=_base_common_uri_js__WEBPACK_IMPORTED_MODULE_8__/* .URI.parse */ .o.parse(target);}selection=(0,_platform_opener_common_opener_js__WEBPACK_IMPORTED_MODULE_12__/* .selectionFragment */ .vO)(target);if(selection){target=target.with({fragment:''});}if(target.scheme===_base_common_network_js__WEBPACK_IMPORTED_MODULE_6__/* .Schemas.file */ .lg.file){target=(0,_base_common_resources_js__WEBPACK_IMPORTED_MODULE_7__/* .normalizePath */ .AH)(target);// workaround for non-normalized paths (https://github.com/microsoft/vscode/issues/12954)
}_context2.next=6;return this._editorService.openCodeEditor({resource:target,options:_extends({selection:selection,context:(options===null||options===void 0?void 0:options.fromUserGesture)?_platform_editor_common_editor_js__WEBPACK_IMPORTED_MODULE_11__/* .EditorOpenContext.USER */ .Y.USER:_platform_editor_common_editor_js__WEBPACK_IMPORTED_MODULE_11__/* .EditorOpenContext.API */ .Y.API},options===null||options===void 0?void 0:options.editorOptions)},this._editorService.getFocusedCodeEditor(),options===null||options===void 0?void 0:options.openToSide);case 6:return _context2.abrupt("return",true);case 7:case"end":return _context2.stop();}}},_callee2,this);}));}}]);return EditorOpener;}();EditorOpener=__decorate([__param(0,_codeEditorService_js__WEBPACK_IMPORTED_MODULE_9__/* .ICodeEditorService */ .$)],EditorOpener);var OpenerService=/*#__PURE__*/function(){function OpenerService(editorService,commandService){var _this=this;_classCallCheck(this,OpenerService);this._openers=new _base_common_linkedList_js__WEBPACK_IMPORTED_MODULE_3__/* .LinkedList */ .S();this._validators=new _base_common_linkedList_js__WEBPACK_IMPORTED_MODULE_3__/* .LinkedList */ .S();this._resolvers=new _base_common_linkedList_js__WEBPACK_IMPORTED_MODULE_3__/* .LinkedList */ .S();this._resolvedUriTargets=new _base_common_map_js__WEBPACK_IMPORTED_MODULE_4__/* .ResourceMap */ .Y9(function(uri){return uri.with({path:null,fragment:null,query:null}).toString();});this._externalOpeners=new _base_common_linkedList_js__WEBPACK_IMPORTED_MODULE_3__/* .LinkedList */ .S();// Default external opener is going through window.open()
this._defaultExternalOpener={openExternal:function openExternal(href){return __awaiter(_this,void 0,void 0,/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee3(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// ensure to open HTTP/HTTPS links into new windows
// to not trigger a navigation. Any other link is
// safe to be set as HREF to prevent a blank window
// from opening.
if((0,_platform_opener_common_opener_js__WEBPACK_IMPORTED_MODULE_12__/* .matchesSomeScheme */ .Gs)(href,_base_common_network_js__WEBPACK_IMPORTED_MODULE_6__/* .Schemas.http */ .lg.http,_base_common_network_js__WEBPACK_IMPORTED_MODULE_6__/* .Schemas.https */ .lg.https)){_base_browser_dom_js__WEBPACK_IMPORTED_MODULE_1__.windowOpenNoOpener(href);}else{window.location.href=href;}return _context3.abrupt("return",true);case 2:case"end":return _context3.stop();}}},_callee3);}));}};// Default opener: any external, maito, http(s), command, and catch-all-editors
this._openers.push({open:function open(target,options){return __awaiter(_this,void 0,void 0,/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee4(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!((options===null||options===void 0?void 0:options.openExternal)||(0,_platform_opener_common_opener_js__WEBPACK_IMPORTED_MODULE_12__/* .matchesSomeScheme */ .Gs)(target,_base_common_network_js__WEBPACK_IMPORTED_MODULE_6__/* .Schemas.mailto */ .lg.mailto,_base_common_network_js__WEBPACK_IMPORTED_MODULE_6__/* .Schemas.http */ .lg.http,_base_common_network_js__WEBPACK_IMPORTED_MODULE_6__/* .Schemas.https */ .lg.https,_base_common_network_js__WEBPACK_IMPORTED_MODULE_6__/* .Schemas.vsls */ .lg.vsls))){_context4.next=4;break;}_context4.next=3;return this._doOpenExternal(target,options);case 3:return _context4.abrupt("return",true);case 4:return _context4.abrupt("return",false);case 5:case"end":return _context4.stop();}}},_callee4,this);}));}});this._openers.push(new CommandOpener(commandService));this._openers.push(new EditorOpener(editorService));}_createClass(OpenerService,[{key:"registerOpener",value:function registerOpener(opener){var remove=this._openers.unshift(opener);return{dispose:remove};}},{key:"registerValidator",value:function registerValidator(validator){var remove=this._validators.push(validator);return{dispose:remove};}},{key:"registerExternalUriResolver",value:function registerExternalUriResolver(resolver){var remove=this._resolvers.push(resolver);return{dispose:remove};}},{key:"setDefaultExternalOpener",value:function setDefaultExternalOpener(externalOpener){this._defaultExternalOpener=externalOpener;}},{key:"registerExternalOpener",value:function registerExternalOpener(opener){var remove=this._externalOpeners.push(opener);return{dispose:remove};}},{key:"open",value:function open(target,options){var _a;return __awaiter(this,void 0,void 0,/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee5(){var targetURI,validationTarget,_iterator,_step,validator,_iterator2,_step2,opener,handled;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:// check with contributed validators
targetURI=typeof target==='string'?_base_common_uri_js__WEBPACK_IMPORTED_MODULE_8__/* .URI.parse */ .o.parse(target):target;// validate against the original URI that this URI resolves to, if one exists
validationTarget=(_a=this._resolvedUriTargets.get(targetURI))!==null&&_a!==void 0?_a:target;_iterator=_createForOfIteratorHelper(this._validators);_context5.prev=3;_iterator.s();case 5:if((_step=_iterator.n()).done){_context5.next=13;break;}validator=_step.value;_context5.next=9;return validator.shouldOpen(validationTarget);case 9:if(_context5.sent){_context5.next=11;break;}return _context5.abrupt("return",false);case 11:_context5.next=5;break;case 13:_context5.next=18;break;case 15:_context5.prev=15;_context5.t0=_context5["catch"](3);_iterator.e(_context5.t0);case 18:_context5.prev=18;_iterator.f();return _context5.finish(18);case 21:// check with contributed openers
_iterator2=_createForOfIteratorHelper(this._openers);_context5.prev=22;_iterator2.s();case 24:if((_step2=_iterator2.n()).done){_context5.next=33;break;}opener=_step2.value;_context5.next=28;return opener.open(target,options);case 28:handled=_context5.sent;if(!handled){_context5.next=31;break;}return _context5.abrupt("return",true);case 31:_context5.next=24;break;case 33:_context5.next=38;break;case 35:_context5.prev=35;_context5.t1=_context5["catch"](22);_iterator2.e(_context5.t1);case 38:_context5.prev=38;_iterator2.f();return _context5.finish(38);case 41:return _context5.abrupt("return",false);case 42:case"end":return _context5.stop();}}},_callee5,this,[[3,15,18,21],[22,35,38,41]]);}));}},{key:"resolveExternalUri",value:function resolveExternalUri(resource,options){return __awaiter(this,void 0,void 0,/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee6(){var _iterator3,_step3,resolver,result;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_iterator3=_createForOfIteratorHelper(this._resolvers);_context6.prev=1;_iterator3.s();case 3:if((_step3=_iterator3.n()).done){_context6.next=18;break;}resolver=_step3.value;_context6.prev=5;_context6.next=8;return resolver.resolveExternalUri(resource,options);case 8:result=_context6.sent;if(!result){_context6.next=12;break;}if(!this._resolvedUriTargets.has(result.resolved)){this._resolvedUriTargets.set(result.resolved,resource);}return _context6.abrupt("return",result);case 12:_context6.next=16;break;case 14:_context6.prev=14;_context6.t0=_context6["catch"](5);case 16:_context6.next=3;break;case 18:_context6.next=23;break;case 20:_context6.prev=20;_context6.t1=_context6["catch"](1);_iterator3.e(_context6.t1);case 23:_context6.prev=23;_iterator3.f();return _context6.finish(23);case 26:throw new Error('Could not resolve external URI: '+resource.toString());case 27:case"end":return _context6.stop();}}},_callee6,this,[[1,20,23,26],[5,14]]);}));}},{key:"_doOpenExternal",value:function _doOpenExternal(resource,options){return __awaiter(this,void 0,void 0,/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee7(){var uri,externalUri,href,preferredOpenerId,_iterator4,_step4,opener,didOpen;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0://todo@jrieken IExternalUriResolver should support `uri: URI | string`
uri=typeof resource==='string'?_base_common_uri_js__WEBPACK_IMPORTED_MODULE_8__/* .URI.parse */ .o.parse(resource):resource;_context7.prev=1;_context7.next=4;return this.resolveExternalUri(uri,options);case 4:externalUri=_context7.sent.resolved;_context7.next=10;break;case 7:_context7.prev=7;_context7.t0=_context7["catch"](1);externalUri=uri;case 10:if(typeof resource==='string'&&uri.toString()===externalUri.toString()){// open the url-string AS IS
href=resource;}else{// open URI using the toString(noEncode)+encodeURI-trick
href=encodeURI(externalUri.toString(true));}if(!(options===null||options===void 0?void 0:options.allowContributedOpeners)){_context7.next=33;break;}preferredOpenerId=typeof(options===null||options===void 0?void 0:options.allowContributedOpeners)==='string'?options===null||options===void 0?void 0:options.allowContributedOpeners:undefined;_iterator4=_createForOfIteratorHelper(this._externalOpeners);_context7.prev=14;_iterator4.s();case 16:if((_step4=_iterator4.n()).done){_context7.next=25;break;}opener=_step4.value;_context7.next=20;return opener.openExternal(href,{sourceUri:uri,preferredOpenerId:preferredOpenerId},_base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_2__/* .CancellationToken.None */ .T.None);case 20:didOpen=_context7.sent;if(!didOpen){_context7.next=23;break;}return _context7.abrupt("return",true);case 23:_context7.next=16;break;case 25:_context7.next=30;break;case 27:_context7.prev=27;_context7.t1=_context7["catch"](14);_iterator4.e(_context7.t1);case 30:_context7.prev=30;_iterator4.f();return _context7.finish(30);case 33:return _context7.abrupt("return",this._defaultExternalOpener.openExternal(href,{sourceUri:uri},_base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_2__/* .CancellationToken.None */ .T.None));case 34:case"end":return _context7.stop();}}},_callee7,this,[[1,7],[14,27,30,33]]);}));}},{key:"dispose",value:function dispose(){this._validators.clear();}}]);return OpenerService;}();OpenerService=__decorate([__param(0,_codeEditorService_js__WEBPACK_IMPORTED_MODULE_9__/* .ICodeEditorService */ .$),__param(1,_platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_10__/* .ICommandService */ .Hy)],OpenerService);

/***/ }),

/***/ 9372:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "j": () => (/* binding */ createWebWorker)
/* harmony export */ });
/* harmony import */ var _editorWorkerService_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(68441);
/* harmony import */ var _base_common_types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(918);
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*//**
 * Create a new web worker that has model syncing capabilities built in.
 * Specify an AMD module to load that will `create` an object that will be proxied.
 */function createWebWorker(modelService,languageConfigurationService,opts){return new MonacoWebWorkerImpl(modelService,languageConfigurationService,opts);}var MonacoWebWorkerImpl=/*#__PURE__*/function(_EditorWorkerClient){_inherits(MonacoWebWorkerImpl,_EditorWorkerClient);var _super=_createSuper(MonacoWebWorkerImpl);function MonacoWebWorkerImpl(modelService,languageConfigurationService,opts){var _this;_classCallCheck(this,MonacoWebWorkerImpl);_this=_super.call(this,modelService,opts.keepIdleModels||false,opts.label,languageConfigurationService);_this._foreignModuleId=opts.moduleId;_this._foreignModuleCreateData=opts.createData||null;_this._foreignModuleHost=opts.host||null;_this._foreignProxy=null;return _this;}// foreign host request
_createClass(MonacoWebWorkerImpl,[{key:"fhr",value:function fhr(method,args){if(!this._foreignModuleHost||typeof this._foreignModuleHost[method]!=='function'){return Promise.reject(new Error('Missing method '+method+' or missing main thread foreign host.'));}try{return Promise.resolve(this._foreignModuleHost[method].apply(this._foreignModuleHost,args));}catch(e){return Promise.reject(e);}}},{key:"_getForeignProxy",value:function _getForeignProxy(){var _this2=this;if(!this._foreignProxy){this._foreignProxy=this._getProxy().then(function(proxy){var foreignHostMethods=_this2._foreignModuleHost?_base_common_types_js__WEBPACK_IMPORTED_MODULE_1__/* .getAllMethodNames */ .$E(_this2._foreignModuleHost):[];return proxy.loadForeignModule(_this2._foreignModuleId,_this2._foreignModuleCreateData,foreignHostMethods).then(function(foreignMethods){_this2._foreignModuleCreateData=null;var proxyMethodRequest=function proxyMethodRequest(method,args){return proxy.fmr(method,args);};var createProxyMethod=function createProxyMethod(method,proxyMethodRequest){return function(){var args=Array.prototype.slice.call(arguments,0);return proxyMethodRequest(method,args);};};var foreignProxy={};var _iterator=_createForOfIteratorHelper(foreignMethods),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var foreignMethod=_step.value;foreignProxy[foreignMethod]=createProxyMethod(foreignMethod,proxyMethodRequest);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return foreignProxy;});});}return this._foreignProxy;}},{key:"getProxy",value:function getProxy(){return this._getForeignProxy();}},{key:"withSyncedResources",value:function withSyncedResources(resources){var _this3=this;return this._withSyncedResources(resources).then(function(_){return _this3.getProxy();});}}]);return MonacoWebWorkerImpl;}(_editorWorkerService_js__WEBPACK_IMPORTED_MODULE_0__/* .EditorWorkerClient */ .Q8);

/***/ }),

/***/ 61196:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (/* binding */ StableEditorScrollState)
/* harmony export */ });
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var StableEditorScrollState=/*#__PURE__*/function(){function StableEditorScrollState(_visiblePosition,_visiblePositionScrollDelta,_cursorPosition){_classCallCheck(this,StableEditorScrollState);this._visiblePosition=_visiblePosition;this._visiblePositionScrollDelta=_visiblePositionScrollDelta;this._cursorPosition=_cursorPosition;}_createClass(StableEditorScrollState,[{key:"restore",value:function restore(editor){if(this._visiblePosition){var visiblePositionScrollTop=editor.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);editor.setScrollTop(visiblePositionScrollTop+this._visiblePositionScrollDelta);}}},{key:"restoreRelativeVerticalPositionOfCursor",value:function restoreRelativeVerticalPositionOfCursor(editor){var currentCursorPosition=editor.getPosition();if(!this._cursorPosition||!currentCursorPosition){return;}var offset=editor.getTopForLineNumber(currentCursorPosition.lineNumber)-editor.getTopForLineNumber(this._cursorPosition.lineNumber);editor.setScrollTop(editor.getScrollTop()+offset);}}],[{key:"capture",value:function capture(editor){var visiblePosition=null;var visiblePositionScrollDelta=0;if(editor.getScrollTop()!==0){var visibleRanges=editor.getVisibleRanges();if(visibleRanges.length>0){visiblePosition=visibleRanges[0].getStartPosition();var visiblePositionScrollTop=editor.getTopForPosition(visiblePosition.lineNumber,visiblePosition.column);visiblePositionScrollDelta=editor.getScrollTop()-visiblePositionScrollTop;}}return new StableEditorScrollState(visiblePosition,visiblePositionScrollDelta,editor.getPosition());}}]);return StableEditorScrollState;}();

/***/ }),

/***/ 62229:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "i": () => (/* binding */ DynamicViewOverlay)
/* harmony export */ });
/* harmony import */ var _common_viewModel_viewEventHandler_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(61952);
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var DynamicViewOverlay=/*#__PURE__*/function(_ViewEventHandler){_inherits(DynamicViewOverlay,_ViewEventHandler);var _super=_createSuper(DynamicViewOverlay);function DynamicViewOverlay(){_classCallCheck(this,DynamicViewOverlay);return _super.apply(this,arguments);}return DynamicViewOverlay;}(_common_viewModel_viewEventHandler_js__WEBPACK_IMPORTED_MODULE_0__/* .ViewEventHandler */ .O);

/***/ }),

/***/ 5395:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CH": () => (/* binding */ VisibleRanges),
/* harmony export */   "CR": () => (/* binding */ FloatHorizontalRange),
/* harmony export */   "D4": () => (/* binding */ HorizontalPosition),
/* harmony export */   "u7": () => (/* binding */ LineVisibleRanges),
/* harmony export */   "xh": () => (/* binding */ RenderingContext),
/* harmony export */   "yu": () => (/* binding */ HorizontalRange)
/* harmony export */ });
/* unused harmony export RestrictedRenderingContext */
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var RestrictedRenderingContext=/*#__PURE__*/function(){function RestrictedRenderingContext(viewLayout,viewportData){_classCallCheck(this,RestrictedRenderingContext);this._restrictedRenderingContextBrand=undefined;this._viewLayout=viewLayout;this.viewportData=viewportData;this.scrollWidth=this._viewLayout.getScrollWidth();this.scrollHeight=this._viewLayout.getScrollHeight();this.visibleRange=this.viewportData.visibleRange;this.bigNumbersDelta=this.viewportData.bigNumbersDelta;var vInfo=this._viewLayout.getCurrentViewport();this.scrollTop=vInfo.top;this.scrollLeft=vInfo.left;this.viewportWidth=vInfo.width;this.viewportHeight=vInfo.height;}_createClass(RestrictedRenderingContext,[{key:"getScrolledTopFromAbsoluteTop",value:function getScrolledTopFromAbsoluteTop(absoluteTop){return absoluteTop-this.scrollTop;}},{key:"getVerticalOffsetForLineNumber",value:function getVerticalOffsetForLineNumber(lineNumber){return this._viewLayout.getVerticalOffsetForLineNumber(lineNumber);}},{key:"getDecorationsInViewport",value:function getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport();}}]);return RestrictedRenderingContext;}();var RenderingContext=/*#__PURE__*/function(_RestrictedRenderingC){_inherits(RenderingContext,_RestrictedRenderingC);var _super=_createSuper(RenderingContext);function RenderingContext(viewLayout,viewportData,viewLines){var _this;_classCallCheck(this,RenderingContext);_this=_super.call(this,viewLayout,viewportData);_this._renderingContextBrand=undefined;_this._viewLines=viewLines;return _this;}_createClass(RenderingContext,[{key:"linesVisibleRangesForRange",value:function linesVisibleRangesForRange(range,includeNewLines){return this._viewLines.linesVisibleRangesForRange(range,includeNewLines);}},{key:"visibleRangeForPosition",value:function visibleRangeForPosition(position){return this._viewLines.visibleRangeForPosition(position);}}]);return RenderingContext;}(RestrictedRenderingContext);var LineVisibleRanges=function LineVisibleRanges(outsideRenderedLine,lineNumber,ranges){_classCallCheck(this,LineVisibleRanges);this.outsideRenderedLine=outsideRenderedLine;this.lineNumber=lineNumber;this.ranges=ranges;};var HorizontalRange=/*#__PURE__*/function(){function HorizontalRange(left,width){_classCallCheck(this,HorizontalRange);this._horizontalRangeBrand=undefined;this.left=Math.round(left);this.width=Math.round(width);}_createClass(HorizontalRange,[{key:"toString",value:function toString(){return"[".concat(this.left,",").concat(this.width,"]");}}],[{key:"from",value:function from(ranges){var result=new Array(ranges.length);for(var i=0,len=ranges.length;i<len;i++){var range=ranges[i];result[i]=new HorizontalRange(range.left,range.width);}return result;}}]);return HorizontalRange;}();var FloatHorizontalRange=/*#__PURE__*/function(){function FloatHorizontalRange(left,width){_classCallCheck(this,FloatHorizontalRange);this._floatHorizontalRangeBrand=undefined;this.left=left;this.width=width;}_createClass(FloatHorizontalRange,[{key:"toString",value:function toString(){return"[".concat(this.left,",").concat(this.width,"]");}}],[{key:"compare",value:function compare(a,b){return a.left-b.left;}}]);return FloatHorizontalRange;}();var HorizontalPosition=function HorizontalPosition(outsideRenderedLine,left){_classCallCheck(this,HorizontalPosition);this.outsideRenderedLine=outsideRenderedLine;this.originalLeft=left;this.left=Math.round(this.originalLeft);};var VisibleRanges=function VisibleRanges(outsideRenderedLine,ranges){_classCallCheck(this,VisibleRanges);this.outsideRenderedLine=outsideRenderedLine;this.ranges=ranges;};

/***/ }),

/***/ 73190:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "E": () => (/* binding */ ViewPart),
/* harmony export */   "K": () => (/* binding */ PartFingerprints)
/* harmony export */ });
/* harmony import */ var _common_viewModel_viewEventHandler_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(61952);
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var ViewPart=/*#__PURE__*/function(_ViewEventHandler){_inherits(ViewPart,_ViewEventHandler);var _super=_createSuper(ViewPart);function ViewPart(context){var _this;_classCallCheck(this,ViewPart);_this=_super.call(this);_this._context=context;_this._context.addEventHandler(_assertThisInitialized(_this));return _this;}_createClass(ViewPart,[{key:"dispose",value:function dispose(){this._context.removeEventHandler(this);_get(_getPrototypeOf(ViewPart.prototype),"dispose",this).call(this);}}]);return ViewPart;}(_common_viewModel_viewEventHandler_js__WEBPACK_IMPORTED_MODULE_0__/* .ViewEventHandler */ .O);var PartFingerprints=/*#__PURE__*/function(){function PartFingerprints(){_classCallCheck(this,PartFingerprints);}_createClass(PartFingerprints,null,[{key:"write",value:function write(target,partId){target.setAttribute('data-mprt',String(partId));}},{key:"read",value:function read(target){var r=target.getAttribute('data-mprt');if(r===null){return 0/* None */;}return parseInt(r,10);}},{key:"collect",value:function collect(child,stopAt){var result=[];var resultLen=0;while(child&&child!==document.body){if(child===stopAt){break;}if(child.nodeType===child.ELEMENT_NODE){result[resultLen++]=this.read(child);}child=child.parentElement;}var r=new Uint8Array(resultLen);for(var i=0;i<resultLen;i++){r[i]=result[resultLen-i-1];}return r;}}]);return PartFingerprints;}();

/***/ }),

/***/ 44739:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "x": () => (/* binding */ LineNumbersOverlay)
/* harmony export */ });
/* harmony import */ var _base_common_platform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(63638);
/* harmony import */ var _view_dynamicViewOverlay_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62229);
/* harmony import */ var _common_core_position_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(60721);
/* harmony import */ var _common_core_editorColorRegistry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62660);
/* harmony import */ var _platform_theme_common_themeService_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(46199);
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var LineNumbersOverlay=/*#__PURE__*/function(_DynamicViewOverlay){_inherits(LineNumbersOverlay,_DynamicViewOverlay);var _super=_createSuper(LineNumbersOverlay);function LineNumbersOverlay(context){var _this;_classCallCheck(this,LineNumbersOverlay);_this=_super.call(this);_this._context=context;_this._readConfig();_this._lastCursorModelPosition=new _common_core_position_js__WEBPACK_IMPORTED_MODULE_4__/* .Position */ .L(1,1);_this._renderResult=null;_this._activeLineNumber=1;_this._context.addEventHandler(_assertThisInitialized(_this));return _this;}_createClass(LineNumbersOverlay,[{key:"_readConfig",value:function _readConfig(){var options=this._context.configuration.options;this._lineHeight=options.get(59/* lineHeight */);var lineNumbers=options.get(60/* lineNumbers */);this._renderLineNumbers=lineNumbers.renderType;this._renderCustomLineNumbers=lineNumbers.renderFn;this._renderFinalNewline=options.get(84/* renderFinalNewline */);var layoutInfo=options.get(131/* layoutInfo */);this._lineNumbersLeft=layoutInfo.lineNumbersLeft;this._lineNumbersWidth=layoutInfo.lineNumbersWidth;}},{key:"dispose",value:function dispose(){this._context.removeEventHandler(this);this._renderResult=null;_get(_getPrototypeOf(LineNumbersOverlay.prototype),"dispose",this).call(this);}// --- begin event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){this._readConfig();return true;}},{key:"onCursorStateChanged",value:function onCursorStateChanged(e){var primaryViewPosition=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(primaryViewPosition);var shouldRender=false;if(this._activeLineNumber!==primaryViewPosition.lineNumber){this._activeLineNumber=primaryViewPosition.lineNumber;shouldRender=true;}if(this._renderLineNumbers===2/* Relative */||this._renderLineNumbers===3/* Interval */){shouldRender=true;}return shouldRender;}},{key:"onFlushed",value:function onFlushed(e){return true;}},{key:"onLinesChanged",value:function onLinesChanged(e){return true;}},{key:"onLinesDeleted",value:function onLinesDeleted(e){return true;}},{key:"onLinesInserted",value:function onLinesInserted(e){return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return e.scrollTopChanged;}},{key:"onZonesChanged",value:function onZonesChanged(e){return true;}// --- end event handlers
},{key:"_getLineRenderLineNumber",value:function _getLineRenderLineNumber(viewLineNumber){var modelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new _common_core_position_js__WEBPACK_IMPORTED_MODULE_4__/* .Position */ .L(viewLineNumber,1));if(modelPosition.column!==1){return'';}var modelLineNumber=modelPosition.lineNumber;if(this._renderCustomLineNumbers){return this._renderCustomLineNumbers(modelLineNumber);}if(this._renderLineNumbers===2/* Relative */){var diff=Math.abs(this._lastCursorModelPosition.lineNumber-modelLineNumber);if(diff===0){return'<span class="relative-current-line-number">'+modelLineNumber+'</span>';}return String(diff);}if(this._renderLineNumbers===3/* Interval */){if(this._lastCursorModelPosition.lineNumber===modelLineNumber){return String(modelLineNumber);}if(modelLineNumber%10===0){return String(modelLineNumber);}return'';}return String(modelLineNumber);}},{key:"prepareRender",value:function prepareRender(ctx){if(this._renderLineNumbers===0/* Off */){this._renderResult=null;return;}var lineHeightClassName=_base_common_platform_js__WEBPACK_IMPORTED_MODULE_0__/* .isLinux */ .IJ?this._lineHeight%2===0?' lh-even':' lh-odd':'';var visibleStartLineNumber=ctx.visibleRange.startLineNumber;var visibleEndLineNumber=ctx.visibleRange.endLineNumber;var common='<div class="'+LineNumbersOverlay.CLASS_NAME+lineHeightClassName+'" style="left:'+this._lineNumbersLeft+'px;width:'+this._lineNumbersWidth+'px;">';var lineCount=this._context.model.getLineCount();var output=[];for(var lineNumber=visibleStartLineNumber;lineNumber<=visibleEndLineNumber;lineNumber++){var lineIndex=lineNumber-visibleStartLineNumber;if(!this._renderFinalNewline){if(lineNumber===lineCount&&this._context.model.getLineLength(lineNumber)===0){// Do not render last (empty) line
output[lineIndex]='';continue;}}var renderLineNumber=this._getLineRenderLineNumber(lineNumber);if(renderLineNumber){if(lineNumber===this._activeLineNumber){output[lineIndex]='<div class="active-line-number '+LineNumbersOverlay.CLASS_NAME+lineHeightClassName+'" style="left:'+this._lineNumbersLeft+'px;width:'+this._lineNumbersWidth+'px;">'+renderLineNumber+'</div>';}else{output[lineIndex]=common+renderLineNumber+'</div>';}}else{output[lineIndex]='';}}this._renderResult=output;}},{key:"render",value:function render(startLineNumber,lineNumber){if(!this._renderResult){return'';}var lineIndex=lineNumber-startLineNumber;if(lineIndex<0||lineIndex>=this._renderResult.length){return'';}return this._renderResult[lineIndex];}}]);return LineNumbersOverlay;}(_view_dynamicViewOverlay_js__WEBPACK_IMPORTED_MODULE_1__/* .DynamicViewOverlay */ .i);LineNumbersOverlay.CLASS_NAME='line-numbers';// theming
(0,_platform_theme_common_themeService_js__WEBPACK_IMPORTED_MODULE_3__/* .registerThemingParticipant */ .Ic)(function(theme,collector){var lineNumbers=theme.getColor(_common_core_editorColorRegistry_js__WEBPACK_IMPORTED_MODULE_2__/* .editorLineNumbers */ .hw);if(lineNumbers){collector.addRule(".monaco-editor .line-numbers { color: ".concat(lineNumbers,"; }"));}var activeLineNumber=theme.getColor(_common_core_editorColorRegistry_js__WEBPACK_IMPORTED_MODULE_2__/* .editorActiveLineNumber */ .DD);if(activeLineNumber){collector.addRule(".monaco-editor .line-numbers.active-line-number { color: ".concat(activeLineNumber,"; }"));}});

/***/ }),

/***/ 23950:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "ZE": () => (/* binding */ DomReadingContext),
  "Nt": () => (/* binding */ ViewLine),
  "ob": () => (/* binding */ ViewLineOptions)
});

// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/browser/browser.js
var browser = __webpack_require__(81447);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/browser/fastDomNode.js
var fastDomNode = __webpack_require__(87980);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/platform.js
var platform = __webpack_require__(63638);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/view/renderingContext.js
var renderingContext = __webpack_require__(5395);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/rangeUtil.js
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var RangeUtil=/*#__PURE__*/function(){function RangeUtil(){_classCallCheck(this,RangeUtil);}_createClass(RangeUtil,null,[{key:"_createRange",value:function _createRange(){if(!this._handyReadyRange){this._handyReadyRange=document.createRange();}return this._handyReadyRange;}},{key:"_detachRange",value:function _detachRange(range,endNode){// Move range out of the span node, IE doesn't like having many ranges in
// the same spot and will act badly for lines containing dashes ('-')
range.selectNodeContents(endNode);}},{key:"_readClientRects",value:function _readClientRects(startElement,startOffset,endElement,endOffset,endNode){var range=this._createRange();try{range.setStart(startElement,startOffset);range.setEnd(endElement,endOffset);return range.getClientRects();}catch(e){// This is life ...
return null;}finally{this._detachRange(range,endNode);}}},{key:"_mergeAdjacentRanges",value:function _mergeAdjacentRanges(ranges){if(ranges.length===1){// There is nothing to merge
return ranges;}ranges.sort(renderingContext/* FloatHorizontalRange.compare */.CR.compare);var result=[];var resultLen=0;var prev=ranges[0];for(var i=1,len=ranges.length;i<len;i++){var range=ranges[i];if(prev.left+prev.width+0.9/* account for browser's rounding errors*/>=range.left){prev.width=Math.max(prev.width,range.left+range.width-prev.left);}else{result[resultLen++]=prev;prev=range;}}result[resultLen++]=prev;return result;}},{key:"_createHorizontalRangesFromClientRects",value:function _createHorizontalRangesFromClientRects(clientRects,clientRectDeltaLeft,clientRectScale){if(!clientRects||clientRects.length===0){return null;}// We go through FloatHorizontalRange because it has been observed in bi-di text
// that the clientRects are not coming in sorted from the browser
var result=[];for(var i=0,len=clientRects.length;i<len;i++){var clientRect=clientRects[i];result[i]=new renderingContext/* FloatHorizontalRange */.CR(Math.max(0,(clientRect.left-clientRectDeltaLeft)/clientRectScale),clientRect.width/clientRectScale);}return this._mergeAdjacentRanges(result);}},{key:"readHorizontalRanges",value:function readHorizontalRanges(domNode,startChildIndex,startOffset,endChildIndex,endOffset,clientRectDeltaLeft,clientRectScale,endNode){// Panic check
var min=0;var max=domNode.children.length-1;if(min>max){return null;}startChildIndex=Math.min(max,Math.max(min,startChildIndex));endChildIndex=Math.min(max,Math.max(min,endChildIndex));if(startChildIndex===endChildIndex&&startOffset===endOffset&&startOffset===0&&!domNode.children[startChildIndex].firstChild){// We must find the position at the beginning of a <span>
// To cover cases of empty <span>s, avoid using a range and use the <span>'s bounding box
var _clientRects=domNode.children[startChildIndex].getClientRects();return this._createHorizontalRangesFromClientRects(_clientRects,clientRectDeltaLeft,clientRectScale);}// If crossing over to a span only to select offset 0, then use the previous span's maximum offset
// Chrome is buggy and doesn't handle 0 offsets well sometimes.
if(startChildIndex!==endChildIndex){if(endChildIndex>0&&endOffset===0){endChildIndex--;endOffset=1073741824/* MAX_SAFE_SMALL_INTEGER */;}}var startElement=domNode.children[startChildIndex].firstChild;var endElement=domNode.children[endChildIndex].firstChild;if(!startElement||!endElement){// When having an empty <span> (without any text content), try to move to the previous <span>
if(!startElement&&startOffset===0&&startChildIndex>0){startElement=domNode.children[startChildIndex-1].firstChild;startOffset=1073741824/* MAX_SAFE_SMALL_INTEGER */;}if(!endElement&&endOffset===0&&endChildIndex>0){endElement=domNode.children[endChildIndex-1].firstChild;endOffset=1073741824/* MAX_SAFE_SMALL_INTEGER */;}}if(!startElement||!endElement){return null;}startOffset=Math.min(startElement.textContent.length,Math.max(0,startOffset));endOffset=Math.min(endElement.textContent.length,Math.max(0,endOffset));var clientRects=this._readClientRects(startElement,startOffset,endElement,endOffset,endNode);return this._createHorizontalRangesFromClientRects(clientRects,clientRectDeltaLeft,clientRectScale);}}]);return RangeUtil;}();
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewLayout/lineDecorations.js
var lineDecorations = __webpack_require__(9098);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewLayout/viewLineRenderer.js
var viewLineRenderer = __webpack_require__(93140);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/theme/common/theme.js
var theme = __webpack_require__(77998);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/config/editorOptions.js
var editorOptions = __webpack_require__(72530);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLine.js
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function viewLine_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function viewLine_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function viewLine_createClass(Constructor,protoProps,staticProps){if(protoProps)viewLine_defineProperties(Constructor.prototype,protoProps);if(staticProps)viewLine_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var canUseFastRenderedViewLine=function(){if(platform/* isNative */.tY){// In VSCode we know very well when the zoom level changes
return true;}if(platform/* isLinux */.IJ||browser.isFirefox||browser.isSafari){// On Linux, it appears that zooming affects char widths (in pixels), which is unexpected.
// --
// Even though we read character widths correctly, having read them at a specific zoom level
// does not mean they are the same at the current zoom level.
// --
// This could be improved if we ever figure out how to get an event when browsers zoom,
// but until then we have to stick with reading client rects.
// --
// The same has been observed with Firefox on Windows7
// --
// The same has been oversved with Safari
return false;}return true;}();var _monospaceAssumptionsAreValid=true;var DomReadingContext=/*#__PURE__*/function(){function DomReadingContext(domNode,endNode){viewLine_classCallCheck(this,DomReadingContext);this._domNode=domNode;this._clientRectDeltaLeft=0;this._clientRectScale=1;this._clientRectRead=false;this.endNode=endNode;}viewLine_createClass(DomReadingContext,[{key:"readClientRect",value:function readClientRect(){if(!this._clientRectRead){this._clientRectRead=true;var rect=this._domNode.getBoundingClientRect();this._clientRectDeltaLeft=rect.left;this._clientRectScale=rect.width/this._domNode.offsetWidth;}}},{key:"clientRectDeltaLeft",get:function get(){if(!this._clientRectRead){this.readClientRect();}return this._clientRectDeltaLeft;}},{key:"clientRectScale",get:function get(){if(!this._clientRectRead){this.readClientRect();}return this._clientRectScale;}}]);return DomReadingContext;}();var ViewLineOptions=/*#__PURE__*/function(){function ViewLineOptions(config,themeType){viewLine_classCallCheck(this,ViewLineOptions);this.themeType=themeType;var options=config.options;var fontInfo=options.get(44/* fontInfo */);this.renderWhitespace=options.get(88/* renderWhitespace */);this.renderControlCharacters=options.get(83/* renderControlCharacters */);this.spaceWidth=fontInfo.spaceWidth;this.middotWidth=fontInfo.middotWidth;this.wsmiddotWidth=fontInfo.wsmiddotWidth;this.useMonospaceOptimizations=fontInfo.isMonospace&&!options.get(29/* disableMonospaceOptimizations */);this.canUseHalfwidthRightwardsArrow=fontInfo.canUseHalfwidthRightwardsArrow;this.lineHeight=options.get(59/* lineHeight */);this.stopRenderingLineAfter=options.get(105/* stopRenderingLineAfter */);this.fontLigatures=options.get(45/* fontLigatures */);}viewLine_createClass(ViewLineOptions,[{key:"equals",value:function equals(other){return this.themeType===other.themeType&&this.renderWhitespace===other.renderWhitespace&&this.renderControlCharacters===other.renderControlCharacters&&this.spaceWidth===other.spaceWidth&&this.middotWidth===other.middotWidth&&this.wsmiddotWidth===other.wsmiddotWidth&&this.useMonospaceOptimizations===other.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===other.canUseHalfwidthRightwardsArrow&&this.lineHeight===other.lineHeight&&this.stopRenderingLineAfter===other.stopRenderingLineAfter&&this.fontLigatures===other.fontLigatures;}}]);return ViewLineOptions;}();var ViewLine=/*#__PURE__*/function(){function ViewLine(options){viewLine_classCallCheck(this,ViewLine);this._options=options;this._isMaybeInvalid=true;this._renderedViewLine=null;}// --- begin IVisibleLineData
viewLine_createClass(ViewLine,[{key:"getDomNode",value:function getDomNode(){if(this._renderedViewLine&&this._renderedViewLine.domNode){return this._renderedViewLine.domNode.domNode;}return null;}},{key:"setDomNode",value:function setDomNode(domNode){if(this._renderedViewLine){this._renderedViewLine.domNode=(0,fastDomNode/* createFastDomNode */.X)(domNode);}else{throw new Error('I have no rendered view line to set the dom node to...');}}},{key:"onContentChanged",value:function onContentChanged(){this._isMaybeInvalid=true;}},{key:"onTokensChanged",value:function onTokensChanged(){this._isMaybeInvalid=true;}},{key:"onDecorationsChanged",value:function onDecorationsChanged(){this._isMaybeInvalid=true;}},{key:"onOptionsChanged",value:function onOptionsChanged(newOptions){this._isMaybeInvalid=true;this._options=newOptions;}},{key:"onSelectionChanged",value:function onSelectionChanged(){if(this._options.themeType===theme/* ColorScheme.HIGH_CONTRAST */.e.HIGH_CONTRAST||this._options.renderWhitespace==='selection'){this._isMaybeInvalid=true;return true;}return false;}},{key:"renderLine",value:function renderLine(lineNumber,deltaTop,viewportData,sb){if(this._isMaybeInvalid===false){// it appears that nothing relevant has changed
return false;}this._isMaybeInvalid=false;var lineData=viewportData.getViewLineRenderingData(lineNumber);var options=this._options;var actualInlineDecorations=lineDecorations/* LineDecoration.filter */.Kp.filter(lineData.inlineDecorations,lineNumber,lineData.minColumn,lineData.maxColumn);// Only send selection information when needed for rendering whitespace
var selectionsOnLine=null;if(options.themeType===theme/* ColorScheme.HIGH_CONTRAST */.e.HIGH_CONTRAST||this._options.renderWhitespace==='selection'){var selections=viewportData.selections;var _iterator=_createForOfIteratorHelper(selections),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var selection=_step.value;if(selection.endLineNumber<lineNumber||selection.startLineNumber>lineNumber){// Selection does not intersect line
continue;}var startColumn=selection.startLineNumber===lineNumber?selection.startColumn:lineData.minColumn;var endColumn=selection.endLineNumber===lineNumber?selection.endColumn:lineData.maxColumn;if(startColumn<endColumn){if(options.themeType===theme/* ColorScheme.HIGH_CONTRAST */.e.HIGH_CONTRAST||this._options.renderWhitespace!=='selection'){actualInlineDecorations.push(new lineDecorations/* LineDecoration */.Kp(startColumn,endColumn,'inline-selected-text',0/* Regular */));}else{if(!selectionsOnLine){selectionsOnLine=[];}selectionsOnLine.push(new viewLineRenderer/* LineRange */.zG(startColumn-1,endColumn-1));}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}var renderLineInput=new viewLineRenderer/* RenderLineInput */.IJ(options.useMonospaceOptimizations,options.canUseHalfwidthRightwardsArrow,lineData.content,lineData.continuesWithWrappedLine,lineData.isBasicASCII,lineData.containsRTL,lineData.minColumn-1,lineData.tokens,actualInlineDecorations,lineData.tabSize,lineData.startVisibleColumn,options.spaceWidth,options.middotWidth,options.wsmiddotWidth,options.stopRenderingLineAfter,options.renderWhitespace,options.renderControlCharacters,options.fontLigatures!==editorOptions/* EditorFontLigatures.OFF */.n0.OFF,selectionsOnLine);if(this._renderedViewLine&&this._renderedViewLine.input.equals(renderLineInput)){// no need to do anything, we have the same render input
return false;}sb.appendASCIIString('<div style="top:');sb.appendASCIIString(String(deltaTop));sb.appendASCIIString('px;height:');sb.appendASCIIString(String(this._options.lineHeight));sb.appendASCIIString('px;" class="');sb.appendASCIIString(ViewLine.CLASS_NAME);sb.appendASCIIString('">');var output=(0,viewLineRenderer/* renderViewLine */.d1)(renderLineInput,sb);sb.appendASCIIString('</div>');var renderedViewLine=null;if(_monospaceAssumptionsAreValid&&canUseFastRenderedViewLine&&lineData.isBasicASCII&&options.useMonospaceOptimizations&&output.containsForeignElements===0/* None */){if(lineData.content.length<300&&renderLineInput.lineTokens.getCount()<100){// Browser rounding errors have been observed in Chrome and IE, so using the fast
// view line only for short lines. Please test before removing the length check...
// ---
// Another rounding error has been observed on Linux in VSCode, where <span> width
// rounding errors add up to an observable large number...
// ---
// Also see another example of rounding errors on Windows in
// https://github.com/microsoft/vscode/issues/33178
renderedViewLine=new FastRenderedViewLine(this._renderedViewLine?this._renderedViewLine.domNode:null,renderLineInput,output.characterMapping);}}if(!renderedViewLine){renderedViewLine=createRenderedLine(this._renderedViewLine?this._renderedViewLine.domNode:null,renderLineInput,output.characterMapping,output.containsRTL,output.containsForeignElements);}this._renderedViewLine=renderedViewLine;return true;}},{key:"layoutLine",value:function layoutLine(lineNumber,deltaTop){if(this._renderedViewLine&&this._renderedViewLine.domNode){this._renderedViewLine.domNode.setTop(deltaTop);this._renderedViewLine.domNode.setHeight(this._options.lineHeight);}}// --- end IVisibleLineData
},{key:"getWidth",value:function getWidth(){if(!this._renderedViewLine){return 0;}return this._renderedViewLine.getWidth();}},{key:"getWidthIsFast",value:function getWidthIsFast(){if(!this._renderedViewLine){return true;}return this._renderedViewLine.getWidthIsFast();}},{key:"needsMonospaceFontCheck",value:function needsMonospaceFontCheck(){if(!this._renderedViewLine){return false;}return this._renderedViewLine instanceof FastRenderedViewLine;}},{key:"monospaceAssumptionsAreValid",value:function monospaceAssumptionsAreValid(){if(!this._renderedViewLine){return _monospaceAssumptionsAreValid;}if(this._renderedViewLine instanceof FastRenderedViewLine){return this._renderedViewLine.monospaceAssumptionsAreValid();}return _monospaceAssumptionsAreValid;}},{key:"onMonospaceAssumptionsInvalidated",value:function onMonospaceAssumptionsInvalidated(){if(this._renderedViewLine&&this._renderedViewLine instanceof FastRenderedViewLine){this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine();}}},{key:"getVisibleRangesForRange",value:function getVisibleRangesForRange(lineNumber,startColumn,endColumn,context){if(!this._renderedViewLine){return null;}startColumn=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,startColumn));endColumn=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,endColumn));var stopRenderingLineAfter=this._renderedViewLine.input.stopRenderingLineAfter;var outsideRenderedLine=false;if(stopRenderingLineAfter!==-1&&startColumn>stopRenderingLineAfter+1&&endColumn>stopRenderingLineAfter+1){// This range is obviously not visible
outsideRenderedLine=true;}if(stopRenderingLineAfter!==-1&&startColumn>stopRenderingLineAfter+1){startColumn=stopRenderingLineAfter+1;}if(stopRenderingLineAfter!==-1&&endColumn>stopRenderingLineAfter+1){endColumn=stopRenderingLineAfter+1;}var horizontalRanges=this._renderedViewLine.getVisibleRangesForRange(lineNumber,startColumn,endColumn,context);if(horizontalRanges&&horizontalRanges.length>0){return new renderingContext/* VisibleRanges */.CH(outsideRenderedLine,horizontalRanges);}return null;}},{key:"getColumnOfNodeOffset",value:function getColumnOfNodeOffset(lineNumber,spanNode,offset){if(!this._renderedViewLine){return 1;}return this._renderedViewLine.getColumnOfNodeOffset(lineNumber,spanNode,offset);}}]);return ViewLine;}();ViewLine.CLASS_NAME='view-line';/**
 * A rendered line which is guaranteed to contain only regular ASCII and is rendered with a monospace font.
 */var FastRenderedViewLine=/*#__PURE__*/function(){function FastRenderedViewLine(domNode,renderLineInput,characterMapping){viewLine_classCallCheck(this,FastRenderedViewLine);this.domNode=domNode;this.input=renderLineInput;this._characterMapping=characterMapping;this._charWidth=renderLineInput.spaceWidth;}viewLine_createClass(FastRenderedViewLine,[{key:"getWidth",value:function getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length));}},{key:"getWidthIsFast",value:function getWidthIsFast(){return true;}},{key:"monospaceAssumptionsAreValid",value:function monospaceAssumptionsAreValid(){if(!this.domNode){return _monospaceAssumptionsAreValid;}var expectedWidth=this.getWidth();var actualWidth=this.domNode.domNode.firstChild.offsetWidth;if(Math.abs(expectedWidth-actualWidth)>=2){// more than 2px off
console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!");_monospaceAssumptionsAreValid=false;}return _monospaceAssumptionsAreValid;}},{key:"toSlowRenderedLine",value:function toSlowRenderedLine(){return createRenderedLine(this.domNode,this.input,this._characterMapping,false,0/* None */);}},{key:"getVisibleRangesForRange",value:function getVisibleRangesForRange(lineNumber,startColumn,endColumn,context){var startPosition=this._getCharPosition(startColumn);var endPosition=this._getCharPosition(endColumn);return[new renderingContext/* FloatHorizontalRange */.CR(startPosition,endPosition-startPosition)];}},{key:"_getCharPosition",value:function _getCharPosition(column){var charOffset=this._characterMapping.getAbsoluteOffset(column);return this._charWidth*charOffset;}},{key:"getColumnOfNodeOffset",value:function getColumnOfNodeOffset(lineNumber,spanNode,offset){var spanNodeTextContentLength=spanNode.textContent.length;var spanIndex=-1;while(spanNode){spanNode=spanNode.previousSibling;spanIndex++;}return this._characterMapping.getColumn(new viewLineRenderer/* DomPosition */.Nd(spanIndex,offset),spanNodeTextContentLength);}}]);return FastRenderedViewLine;}();/**
 * Every time we render a line, we save what we have rendered in an instance of this class.
 */var RenderedViewLine=/*#__PURE__*/function(){function RenderedViewLine(domNode,renderLineInput,characterMapping,containsRTL,containsForeignElements){viewLine_classCallCheck(this,RenderedViewLine);this.domNode=domNode;this.input=renderLineInput;this._characterMapping=characterMapping;this._isWhitespaceOnly=/^\s*$/.test(renderLineInput.lineContent);this._containsForeignElements=containsForeignElements;this._cachedWidth=-1;this._pixelOffsetCache=null;if(!containsRTL||this._characterMapping.length===0/* the line is empty */){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(var column=0,len=this._characterMapping.length;column<=len;column++){this._pixelOffsetCache[column]=-1;}}}// --- Reading from the DOM methods
viewLine_createClass(RenderedViewLine,[{key:"_getReadingTarget",value:function _getReadingTarget(myDomNode){return myDomNode.domNode.firstChild;}/**
     * Width of the line in pixels
     */},{key:"getWidth",value:function getWidth(){if(!this.domNode){return 0;}if(this._cachedWidth===-1){this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth;}return this._cachedWidth;}},{key:"getWidthIsFast",value:function getWidthIsFast(){if(this._cachedWidth===-1){return false;}return true;}/**
     * Visible ranges for a model range
     */},{key:"getVisibleRangesForRange",value:function getVisibleRangesForRange(lineNumber,startColumn,endColumn,context){if(!this.domNode){return null;}if(this._pixelOffsetCache!==null){// the text is LTR
var startOffset=this._readPixelOffset(this.domNode,lineNumber,startColumn,context);if(startOffset===-1){return null;}var endOffset=this._readPixelOffset(this.domNode,lineNumber,endColumn,context);if(endOffset===-1){return null;}return[new renderingContext/* FloatHorizontalRange */.CR(startOffset,endOffset-startOffset)];}return this._readVisibleRangesForRange(this.domNode,lineNumber,startColumn,endColumn,context);}},{key:"_readVisibleRangesForRange",value:function _readVisibleRangesForRange(domNode,lineNumber,startColumn,endColumn,context){if(startColumn===endColumn){var pixelOffset=this._readPixelOffset(domNode,lineNumber,startColumn,context);if(pixelOffset===-1){return null;}else{return[new renderingContext/* FloatHorizontalRange */.CR(pixelOffset,0)];}}else{return this._readRawVisibleRangesForRange(domNode,startColumn,endColumn,context);}}},{key:"_readPixelOffset",value:function _readPixelOffset(domNode,lineNumber,column,context){if(this._characterMapping.length===0){// This line has no content
if(this._containsForeignElements===0/* None */){// We can assume the line is really empty
return 0;}if(this._containsForeignElements===2/* After */){// We have foreign elements after the (empty) line
return 0;}if(this._containsForeignElements===1/* Before */){// We have foreign elements before the (empty) line
return this.getWidth();}// We have foreign elements before & after the (empty) line
var readingTarget=this._getReadingTarget(domNode);if(readingTarget.firstChild){return readingTarget.firstChild.offsetWidth;}else{return 0;}}if(this._pixelOffsetCache!==null){// the text is LTR
var cachedPixelOffset=this._pixelOffsetCache[column];if(cachedPixelOffset!==-1){return cachedPixelOffset;}var result=this._actualReadPixelOffset(domNode,lineNumber,column,context);this._pixelOffsetCache[column]=result;return result;}return this._actualReadPixelOffset(domNode,lineNumber,column,context);}},{key:"_actualReadPixelOffset",value:function _actualReadPixelOffset(domNode,lineNumber,column,context){if(this._characterMapping.length===0){// This line has no content
var _r=RangeUtil.readHorizontalRanges(this._getReadingTarget(domNode),0,0,0,0,context.clientRectDeltaLeft,context.clientRectScale,context.endNode);if(!_r||_r.length===0){return-1;}return _r[0].left;}if(column===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0/* None */){// This branch helps in the case of whitespace only lines which have a width set
return this.getWidth();}var domPosition=this._characterMapping.getDomPosition(column);var r=RangeUtil.readHorizontalRanges(this._getReadingTarget(domNode),domPosition.partIndex,domPosition.charIndex,domPosition.partIndex,domPosition.charIndex,context.clientRectDeltaLeft,context.clientRectScale,context.endNode);if(!r||r.length===0){return-1;}var result=r[0].left;if(this.input.isBasicASCII){var charOffset=this._characterMapping.getAbsoluteOffset(column);var expectedResult=Math.round(this.input.spaceWidth*charOffset);if(Math.abs(expectedResult-result)<=1){return expectedResult;}}return result;}},{key:"_readRawVisibleRangesForRange",value:function _readRawVisibleRangesForRange(domNode,startColumn,endColumn,context){if(startColumn===1&&endColumn===this._characterMapping.length){// This branch helps IE with bidi text & gives a performance boost to other browsers when reading visible ranges for an entire line
return[new renderingContext/* FloatHorizontalRange */.CR(0,this.getWidth())];}var startDomPosition=this._characterMapping.getDomPosition(startColumn);var endDomPosition=this._characterMapping.getDomPosition(endColumn);return RangeUtil.readHorizontalRanges(this._getReadingTarget(domNode),startDomPosition.partIndex,startDomPosition.charIndex,endDomPosition.partIndex,endDomPosition.charIndex,context.clientRectDeltaLeft,context.clientRectScale,context.endNode);}/**
     * Returns the column for the text found at a specific offset inside a rendered dom node
     */},{key:"getColumnOfNodeOffset",value:function getColumnOfNodeOffset(lineNumber,spanNode,offset){var spanNodeTextContentLength=spanNode.textContent.length;var spanIndex=-1;while(spanNode){spanNode=spanNode.previousSibling;spanIndex++;}return this._characterMapping.getColumn(new viewLineRenderer/* DomPosition */.Nd(spanIndex,offset),spanNodeTextContentLength);}}]);return RenderedViewLine;}();var WebKitRenderedViewLine=/*#__PURE__*/function(_RenderedViewLine){_inherits(WebKitRenderedViewLine,_RenderedViewLine);var _super=_createSuper(WebKitRenderedViewLine);function WebKitRenderedViewLine(){viewLine_classCallCheck(this,WebKitRenderedViewLine);return _super.apply(this,arguments);}viewLine_createClass(WebKitRenderedViewLine,[{key:"_readVisibleRangesForRange",value:function _readVisibleRangesForRange(domNode,lineNumber,startColumn,endColumn,context){var output=_get(_getPrototypeOf(WebKitRenderedViewLine.prototype),"_readVisibleRangesForRange",this).call(this,domNode,lineNumber,startColumn,endColumn,context);if(!output||output.length===0||startColumn===endColumn||startColumn===1&&endColumn===this._characterMapping.length){return output;}// WebKit is buggy and returns an expanded range (to contain words in some cases)
// The last client rect is enlarged (I think)
if(!this.input.containsRTL){// This is an attempt to patch things up
// Find position of last column
var endPixelOffset=this._readPixelOffset(domNode,lineNumber,endColumn,context);if(endPixelOffset!==-1){var lastRange=output[output.length-1];if(lastRange.left<endPixelOffset){// Trim down the width of the last visible range to not go after the last column's position
lastRange.width=endPixelOffset-lastRange.left;}}}return output;}}]);return WebKitRenderedViewLine;}(RenderedViewLine);var createRenderedLine=function(){if(browser.isWebKit){return createWebKitRenderedLine;}return createNormalRenderedLine;}();function createWebKitRenderedLine(domNode,renderLineInput,characterMapping,containsRTL,containsForeignElements){return new WebKitRenderedViewLine(domNode,renderLineInput,characterMapping,containsRTL,containsForeignElements);}function createNormalRenderedLine(domNode,renderLineInput,characterMapping,containsRTL,containsForeignElements){return new RenderedViewLine(domNode,renderLineInput,characterMapping,containsRTL,containsForeignElements);}

/***/ }),

/***/ 89284:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (/* binding */ Margin)
/* harmony export */ });
/* harmony import */ var _base_browser_fastDomNode_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87980);
/* harmony import */ var _view_viewPart_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(73190);
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var Margin=/*#__PURE__*/function(_ViewPart){_inherits(Margin,_ViewPart);var _super=_createSuper(Margin);function Margin(context){var _this;_classCallCheck(this,Margin);_this=_super.call(this,context);var options=_this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);_this._canUseLayerHinting=!options.get(28/* disableLayerHinting */);_this._contentLeft=layoutInfo.contentLeft;_this._glyphMarginLeft=layoutInfo.glyphMarginLeft;_this._glyphMarginWidth=layoutInfo.glyphMarginWidth;_this._domNode=(0,_base_browser_fastDomNode_js__WEBPACK_IMPORTED_MODULE_1__/* .createFastDomNode */ .X)(document.createElement('div'));_this._domNode.setClassName(Margin.OUTER_CLASS_NAME);_this._domNode.setPosition('absolute');_this._domNode.setAttribute('role','presentation');_this._domNode.setAttribute('aria-hidden','true');_this._glyphMarginBackgroundDomNode=(0,_base_browser_fastDomNode_js__WEBPACK_IMPORTED_MODULE_1__/* .createFastDomNode */ .X)(document.createElement('div'));_this._glyphMarginBackgroundDomNode.setClassName(Margin.CLASS_NAME);_this._domNode.appendChild(_this._glyphMarginBackgroundDomNode);return _this;}_createClass(Margin,[{key:"dispose",value:function dispose(){_get(_getPrototypeOf(Margin.prototype),"dispose",this).call(this);}},{key:"getDomNode",value:function getDomNode(){return this._domNode;}// --- begin event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);this._canUseLayerHinting=!options.get(28/* disableLayerHinting */);this._contentLeft=layoutInfo.contentLeft;this._glyphMarginLeft=layoutInfo.glyphMarginLeft;this._glyphMarginWidth=layoutInfo.glyphMarginWidth;return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return _get(_getPrototypeOf(Margin.prototype),"onScrollChanged",this).call(this,e)||e.scrollTopChanged;}// --- end event handlers
},{key:"prepareRender",value:function prepareRender(ctx){// Nothing to read
}},{key:"render",value:function render(ctx){this._domNode.setLayerHinting(this._canUseLayerHinting);this._domNode.setContain('strict');var adjustedScrollTop=ctx.scrollTop-ctx.bigNumbersDelta;this._domNode.setTop(-adjustedScrollTop);var height=Math.min(ctx.scrollHeight,1000000);this._domNode.setHeight(height);this._domNode.setWidth(this._contentLeft);this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft);this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth);this._glyphMarginBackgroundDomNode.setHeight(height);}}]);return Margin;}(_view_viewPart_js__WEBPACK_IMPORTED_MODULE_0__/* .ViewPart */ .E);Margin.CLASS_NAME='glyph-margin';Margin.OUTER_CLASS_NAME='margin';

/***/ }),

/***/ 38188:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Gm": () => (/* binding */ CodeEditorWidget)
});

// UNUSED EXPORTS: BooleanEventEmitter, EditorModeContext

// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorations.js
var markerDecorations = __webpack_require__(37768);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js
var editorExtensions = __webpack_require__(79098);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/services/markerDecorations.js
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect==="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;}return c>3&&r&&Object.defineProperty(target,key,r),r;};var __param=undefined&&undefined.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex);};};var MarkerDecorationsContribution=/*#__PURE__*/function(){function MarkerDecorationsContribution(_editor,_markerDecorationsService){// Doesn't do anything, just requires `IMarkerDecorationsService` to make sure it gets instantiated
_classCallCheck(this,MarkerDecorationsContribution);}_createClass(MarkerDecorationsContribution,[{key:"dispose",value:function dispose(){}}]);return MarkerDecorationsContribution;}();MarkerDecorationsContribution.ID='editor.contrib.markerDecorations';MarkerDecorationsContribution=__decorate([__param(1,markerDecorations/* IMarkerDecorationsService */.i)],MarkerDecorationsContribution);(0,editorExtensions/* registerEditorContribution */._K)(MarkerDecorationsContribution.ID,MarkerDecorationsContribution);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/nls.js
var nls = __webpack_require__(71453);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/browser/dom.js
var dom = __webpack_require__(20446);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/errors.js
var errors = __webpack_require__(32314);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/event.js
var common_event = __webpack_require__(36223);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js
var lifecycle = __webpack_require__(19860);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/network.js
var network = __webpack_require__(12029);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/config/editorConfiguration.js + 1 modules
var editorConfiguration = __webpack_require__(80997);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/services/codeEditorService.js
var codeEditorService = __webpack_require__(95328);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/selection.js
var core_selection = __webpack_require__(33199);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/browser/fastDomNode.js
var fastDomNode = __webpack_require__(87980);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/controller/pointerHandler.js + 1 modules
var pointerHandler = __webpack_require__(84149);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/controller/textAreaHandler.js
var textAreaHandler = __webpack_require__(35147);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/controller/coreCommands.js
var coreCommands = __webpack_require__(91973);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/position.js
var core_position = __webpack_require__(60721);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/platform.js
var platform = __webpack_require__(63638);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/view/viewController.js
function viewController_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function viewController_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function viewController_createClass(Constructor,protoProps,staticProps){if(protoProps)viewController_defineProperties(Constructor.prototype,protoProps);if(staticProps)viewController_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var ViewController=/*#__PURE__*/function(){function ViewController(configuration,viewModel,userInputEvents,commandDelegate){viewController_classCallCheck(this,ViewController);this.configuration=configuration;this.viewModel=viewModel;this.userInputEvents=userInputEvents;this.commandDelegate=commandDelegate;}viewController_createClass(ViewController,[{key:"paste",value:function paste(text,pasteOnNewLine,multicursorText,mode){this.commandDelegate.paste(text,pasteOnNewLine,multicursorText,mode);}},{key:"type",value:function type(text){this.commandDelegate.type(text);}},{key:"compositionType",value:function compositionType(text,replacePrevCharCnt,replaceNextCharCnt,positionDelta){this.commandDelegate.compositionType(text,replacePrevCharCnt,replaceNextCharCnt,positionDelta);}},{key:"compositionStart",value:function compositionStart(){this.commandDelegate.startComposition();}},{key:"compositionEnd",value:function compositionEnd(){this.commandDelegate.endComposition();}},{key:"cut",value:function cut(){this.commandDelegate.cut();}},{key:"setSelection",value:function setSelection(modelSelection){coreCommands.CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel,{source:'keyboard',selection:modelSelection});}},{key:"_validateViewColumn",value:function _validateViewColumn(viewPosition){var minColumn=this.viewModel.getLineMinColumn(viewPosition.lineNumber);if(viewPosition.column<minColumn){return new core_position/* Position */.L(viewPosition.lineNumber,minColumn);}return viewPosition;}},{key:"_hasMulticursorModifier",value:function _hasMulticursorModifier(data){switch(this.configuration.options.get(70/* multiCursorModifier */)){case'altKey':return data.altKey;case'ctrlKey':return data.ctrlKey;case'metaKey':return data.metaKey;default:return false;}}},{key:"_hasNonMulticursorModifier",value:function _hasNonMulticursorModifier(data){switch(this.configuration.options.get(70/* multiCursorModifier */)){case'altKey':return data.ctrlKey||data.metaKey;case'ctrlKey':return data.altKey||data.metaKey;case'metaKey':return data.ctrlKey||data.altKey;default:return false;}}},{key:"dispatchMouse",value:function dispatchMouse(data){var options=this.configuration.options;var selectionClipboardIsOn=platform/* isLinux */.IJ&&options.get(96/* selectionClipboard */);var columnSelection=options.get(18/* columnSelection */);if(data.middleButton&&!selectionClipboardIsOn){this._columnSelect(data.position,data.mouseColumn,data.inSelectionMode);}else if(data.startedOnLineNumbers){// If the dragging started on the gutter, then have operations work on the entire line
if(this._hasMulticursorModifier(data)){if(data.inSelectionMode){this._lastCursorLineSelect(data.position);}else{this._createCursor(data.position,true);}}else{if(data.inSelectionMode){this._lineSelectDrag(data.position);}else{this._lineSelect(data.position);}}}else if(data.mouseDownCount>=4){this._selectAll();}else if(data.mouseDownCount===3){if(this._hasMulticursorModifier(data)){if(data.inSelectionMode){this._lastCursorLineSelectDrag(data.position);}else{this._lastCursorLineSelect(data.position);}}else{if(data.inSelectionMode){this._lineSelectDrag(data.position);}else{this._lineSelect(data.position);}}}else if(data.mouseDownCount===2){if(this._hasMulticursorModifier(data)){this._lastCursorWordSelect(data.position);}else{if(data.inSelectionMode){this._wordSelectDrag(data.position);}else{this._wordSelect(data.position);}}}else{if(this._hasMulticursorModifier(data)){if(!this._hasNonMulticursorModifier(data)){if(data.shiftKey){this._columnSelect(data.position,data.mouseColumn,true);}else{// Do multi-cursor operations only when purely alt is pressed
if(data.inSelectionMode){this._lastCursorMoveToSelect(data.position);}else{this._createCursor(data.position,false);}}}}else{if(data.inSelectionMode){if(data.altKey){this._columnSelect(data.position,data.mouseColumn,true);}else{if(columnSelection){this._columnSelect(data.position,data.mouseColumn,true);}else{this._moveToSelect(data.position);}}}else{this.moveTo(data.position);}}}}},{key:"_usualArgs",value:function _usualArgs(viewPosition){viewPosition=this._validateViewColumn(viewPosition);return{source:'mouse',position:this._convertViewToModelPosition(viewPosition),viewPosition:viewPosition};}},{key:"moveTo",value:function moveTo(viewPosition){coreCommands.CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(viewPosition));}},{key:"_moveToSelect",value:function _moveToSelect(viewPosition){coreCommands.CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(viewPosition));}},{key:"_columnSelect",value:function _columnSelect(viewPosition,mouseColumn,doColumnSelect){viewPosition=this._validateViewColumn(viewPosition);coreCommands.CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:'mouse',position:this._convertViewToModelPosition(viewPosition),viewPosition:viewPosition,mouseColumn:mouseColumn,doColumnSelect:doColumnSelect});}},{key:"_createCursor",value:function _createCursor(viewPosition,wholeLine){viewPosition=this._validateViewColumn(viewPosition);coreCommands.CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel,{source:'mouse',position:this._convertViewToModelPosition(viewPosition),viewPosition:viewPosition,wholeLine:wholeLine});}},{key:"_lastCursorMoveToSelect",value:function _lastCursorMoveToSelect(viewPosition){coreCommands.CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(viewPosition));}},{key:"_wordSelect",value:function _wordSelect(viewPosition){coreCommands.CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(viewPosition));}},{key:"_wordSelectDrag",value:function _wordSelectDrag(viewPosition){coreCommands.CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(viewPosition));}},{key:"_lastCursorWordSelect",value:function _lastCursorWordSelect(viewPosition){coreCommands.CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(viewPosition));}},{key:"_lineSelect",value:function _lineSelect(viewPosition){coreCommands.CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(viewPosition));}},{key:"_lineSelectDrag",value:function _lineSelectDrag(viewPosition){coreCommands.CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(viewPosition));}},{key:"_lastCursorLineSelect",value:function _lastCursorLineSelect(viewPosition){coreCommands.CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(viewPosition));}},{key:"_lastCursorLineSelectDrag",value:function _lastCursorLineSelectDrag(viewPosition){coreCommands.CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(viewPosition));}},{key:"_selectAll",value:function _selectAll(){coreCommands.CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel,{source:'mouse'});}// ----------------------
},{key:"_convertViewToModelPosition",value:function _convertViewToModelPosition(viewPosition){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(viewPosition);}},{key:"emitKeyDown",value:function emitKeyDown(e){this.userInputEvents.emitKeyDown(e);}},{key:"emitKeyUp",value:function emitKeyUp(e){this.userInputEvents.emitKeyUp(e);}},{key:"emitContextMenu",value:function emitContextMenu(e){this.userInputEvents.emitContextMenu(e);}},{key:"emitMouseMove",value:function emitMouseMove(e){this.userInputEvents.emitMouseMove(e);}},{key:"emitMouseLeave",value:function emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e);}},{key:"emitMouseUp",value:function emitMouseUp(e){this.userInputEvents.emitMouseUp(e);}},{key:"emitMouseDown",value:function emitMouseDown(e){this.userInputEvents.emitMouseDown(e);}},{key:"emitMouseDrag",value:function emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e);}},{key:"emitMouseDrop",value:function emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e);}},{key:"emitMouseDropCanceled",value:function emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled();}},{key:"emitMouseWheel",value:function emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e);}}]);return ViewController;}();
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/view/viewUserInputEvents.js
function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function viewUserInputEvents_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function viewUserInputEvents_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function viewUserInputEvents_createClass(Constructor,protoProps,staticProps){if(protoProps)viewUserInputEvents_defineProperties(Constructor.prototype,protoProps);if(staticProps)viewUserInputEvents_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var ViewUserInputEvents=/*#__PURE__*/function(){function ViewUserInputEvents(coordinatesConverter){viewUserInputEvents_classCallCheck(this,ViewUserInputEvents);this.onKeyDown=null;this.onKeyUp=null;this.onContextMenu=null;this.onMouseMove=null;this.onMouseLeave=null;this.onMouseDown=null;this.onMouseUp=null;this.onMouseDrag=null;this.onMouseDrop=null;this.onMouseDropCanceled=null;this.onMouseWheel=null;this._coordinatesConverter=coordinatesConverter;}viewUserInputEvents_createClass(ViewUserInputEvents,[{key:"emitKeyDown",value:function emitKeyDown(e){if(this.onKeyDown){this.onKeyDown(e);}}},{key:"emitKeyUp",value:function emitKeyUp(e){if(this.onKeyUp){this.onKeyUp(e);}}},{key:"emitContextMenu",value:function emitContextMenu(e){if(this.onContextMenu){this.onContextMenu(this._convertViewToModelMouseEvent(e));}}},{key:"emitMouseMove",value:function emitMouseMove(e){if(this.onMouseMove){this.onMouseMove(this._convertViewToModelMouseEvent(e));}}},{key:"emitMouseLeave",value:function emitMouseLeave(e){if(this.onMouseLeave){this.onMouseLeave(this._convertViewToModelMouseEvent(e));}}},{key:"emitMouseDown",value:function emitMouseDown(e){if(this.onMouseDown){this.onMouseDown(this._convertViewToModelMouseEvent(e));}}},{key:"emitMouseUp",value:function emitMouseUp(e){if(this.onMouseUp){this.onMouseUp(this._convertViewToModelMouseEvent(e));}}},{key:"emitMouseDrag",value:function emitMouseDrag(e){if(this.onMouseDrag){this.onMouseDrag(this._convertViewToModelMouseEvent(e));}}},{key:"emitMouseDrop",value:function emitMouseDrop(e){if(this.onMouseDrop){this.onMouseDrop(this._convertViewToModelMouseEvent(e));}}},{key:"emitMouseDropCanceled",value:function emitMouseDropCanceled(){if(this.onMouseDropCanceled){this.onMouseDropCanceled();}}},{key:"emitMouseWheel",value:function emitMouseWheel(e){if(this.onMouseWheel){this.onMouseWheel(e);}}},{key:"_convertViewToModelMouseEvent",value:function _convertViewToModelMouseEvent(e){if(e.target){return{event:e.event,target:this._convertViewToModelMouseTarget(e.target)};}return e;}},{key:"_convertViewToModelMouseTarget",value:function _convertViewToModelMouseTarget(target){return ViewUserInputEvents.convertViewToModelMouseTarget(target,this._coordinatesConverter);}}],[{key:"convertViewToModelMouseTarget",value:function convertViewToModelMouseTarget(target,coordinatesConverter){var result=_extends({},target);if(result.position){result.position=coordinatesConverter.convertViewPositionToModelPosition(result.position);}if(result.range){result.range=coordinatesConverter.convertViewRangeToModelRange(result.range);}return result;}}]);return ViewUserInputEvents;}();
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/config/domFontInfo.js
var domFontInfo = __webpack_require__(9217);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/stringBuilder.js
var stringBuilder = __webpack_require__(26644);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/view/viewLayer.js
function viewLayer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function viewLayer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function viewLayer_createClass(Constructor,protoProps,staticProps){if(protoProps)viewLayer_defineProperties(Constructor.prototype,protoProps);if(staticProps)viewLayer_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var _a;var RenderedLinesCollection=/*#__PURE__*/function(){function RenderedLinesCollection(createLine){viewLayer_classCallCheck(this,RenderedLinesCollection);this._createLine=createLine;this._set(1,[]);}viewLayer_createClass(RenderedLinesCollection,[{key:"flush",value:function flush(){this._set(1,[]);}},{key:"_set",value:function _set(rendLineNumberStart,lines){this._lines=lines;this._rendLineNumberStart=rendLineNumberStart;}},{key:"_get",value:function _get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines};}/**
     * @returns Inclusive line number that is inside this collection
     */},{key:"getStartLineNumber",value:function getStartLineNumber(){return this._rendLineNumberStart;}/**
     * @returns Inclusive line number that is inside this collection
     */},{key:"getEndLineNumber",value:function getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1;}},{key:"getCount",value:function getCount(){return this._lines.length;}},{key:"getLine",value:function getLine(lineNumber){var lineIndex=lineNumber-this._rendLineNumberStart;if(lineIndex<0||lineIndex>=this._lines.length){throw new Error('Illegal value for lineNumber');}return this._lines[lineIndex];}/**
     * @returns Lines that were removed from this collection
     */},{key:"onLinesDeleted",value:function onLinesDeleted(deleteFromLineNumber,deleteToLineNumber){if(this.getCount()===0){// no lines
return null;}var startLineNumber=this.getStartLineNumber();var endLineNumber=this.getEndLineNumber();if(deleteToLineNumber<startLineNumber){// deleting above the viewport
var deleteCnt=deleteToLineNumber-deleteFromLineNumber+1;this._rendLineNumberStart-=deleteCnt;return null;}if(deleteFromLineNumber>endLineNumber){// deleted below the viewport
return null;}// Record what needs to be deleted
var deleteStartIndex=0;var deleteCount=0;for(var lineNumber=startLineNumber;lineNumber<=endLineNumber;lineNumber++){var lineIndex=lineNumber-this._rendLineNumberStart;if(deleteFromLineNumber<=lineNumber&&lineNumber<=deleteToLineNumber){// this is a line to be deleted
if(deleteCount===0){// this is the first line to be deleted
deleteStartIndex=lineIndex;deleteCount=1;}else{deleteCount++;}}}// Adjust this._rendLineNumberStart for lines deleted above
if(deleteFromLineNumber<startLineNumber){// Something was deleted above
var deleteAboveCount=0;if(deleteToLineNumber<startLineNumber){// the entire deleted lines are above
deleteAboveCount=deleteToLineNumber-deleteFromLineNumber+1;}else{deleteAboveCount=startLineNumber-deleteFromLineNumber;}this._rendLineNumberStart-=deleteAboveCount;}var deleted=this._lines.splice(deleteStartIndex,deleteCount);return deleted;}},{key:"onLinesChanged",value:function onLinesChanged(changeFromLineNumber,changeToLineNumber){if(this.getCount()===0){// no lines
return false;}var startLineNumber=this.getStartLineNumber();var endLineNumber=this.getEndLineNumber();var someoneNotified=false;for(var changedLineNumber=changeFromLineNumber;changedLineNumber<=changeToLineNumber;changedLineNumber++){if(changedLineNumber>=startLineNumber&&changedLineNumber<=endLineNumber){// Notify the line
this._lines[changedLineNumber-this._rendLineNumberStart].onContentChanged();someoneNotified=true;}}return someoneNotified;}},{key:"onLinesInserted",value:function onLinesInserted(insertFromLineNumber,insertToLineNumber){if(this.getCount()===0){// no lines
return null;}var insertCnt=insertToLineNumber-insertFromLineNumber+1;var startLineNumber=this.getStartLineNumber();var endLineNumber=this.getEndLineNumber();if(insertFromLineNumber<=startLineNumber){// inserting above the viewport
this._rendLineNumberStart+=insertCnt;return null;}if(insertFromLineNumber>endLineNumber){// inserting below the viewport
return null;}if(insertCnt+insertFromLineNumber>endLineNumber){// insert inside the viewport in such a way that all remaining lines are pushed outside
var deleted=this._lines.splice(insertFromLineNumber-this._rendLineNumberStart,endLineNumber-insertFromLineNumber+1);return deleted;}// insert inside the viewport, push out some lines, but not all remaining lines
var newLines=[];for(var i=0;i<insertCnt;i++){newLines[i]=this._createLine();}var insertIndex=insertFromLineNumber-this._rendLineNumberStart;var beforeLines=this._lines.slice(0,insertIndex);var afterLines=this._lines.slice(insertIndex,this._lines.length-insertCnt);var deletedLines=this._lines.slice(this._lines.length-insertCnt,this._lines.length);this._lines=beforeLines.concat(newLines).concat(afterLines);return deletedLines;}},{key:"onTokensChanged",value:function onTokensChanged(ranges){if(this.getCount()===0){// no lines
return false;}var startLineNumber=this.getStartLineNumber();var endLineNumber=this.getEndLineNumber();var notifiedSomeone=false;for(var i=0,len=ranges.length;i<len;i++){var rng=ranges[i];if(rng.toLineNumber<startLineNumber||rng.fromLineNumber>endLineNumber){// range outside viewport
continue;}var from=Math.max(startLineNumber,rng.fromLineNumber);var to=Math.min(endLineNumber,rng.toLineNumber);for(var lineNumber=from;lineNumber<=to;lineNumber++){var lineIndex=lineNumber-this._rendLineNumberStart;this._lines[lineIndex].onTokensChanged();notifiedSomeone=true;}}return notifiedSomeone;}}]);return RenderedLinesCollection;}();var VisibleLinesCollection=/*#__PURE__*/function(){function VisibleLinesCollection(host){var _this=this;viewLayer_classCallCheck(this,VisibleLinesCollection);this._host=host;this.domNode=this._createDomNode();this._linesCollection=new RenderedLinesCollection(function(){return _this._host.createVisibleLine();});}viewLayer_createClass(VisibleLinesCollection,[{key:"_createDomNode",value:function _createDomNode(){var domNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));domNode.setClassName('view-layer');domNode.setPosition('absolute');domNode.domNode.setAttribute('role','presentation');domNode.domNode.setAttribute('aria-hidden','true');return domNode;}// ---- begin view event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){if(e.hasChanged(131/* layoutInfo */)){return true;}return false;}},{key:"onFlushed",value:function onFlushed(e){this._linesCollection.flush();// No need to clear the dom node because a full .innerHTML will occur in ViewLayerRenderer._render
return true;}},{key:"onLinesChanged",value:function onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber);}},{key:"onLinesDeleted",value:function onLinesDeleted(e){var deleted=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(deleted){// Remove from DOM
for(var i=0,len=deleted.length;i<len;i++){var lineDomNode=deleted[i].getDomNode();if(lineDomNode){this.domNode.domNode.removeChild(lineDomNode);}}}return true;}},{key:"onLinesInserted",value:function onLinesInserted(e){var deleted=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(deleted){// Remove from DOM
for(var i=0,len=deleted.length;i<len;i++){var lineDomNode=deleted[i].getDomNode();if(lineDomNode){this.domNode.domNode.removeChild(lineDomNode);}}}return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return e.scrollTopChanged;}},{key:"onTokensChanged",value:function onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges);}},{key:"onZonesChanged",value:function onZonesChanged(e){return true;}// ---- end view event handlers
},{key:"getStartLineNumber",value:function getStartLineNumber(){return this._linesCollection.getStartLineNumber();}},{key:"getEndLineNumber",value:function getEndLineNumber(){return this._linesCollection.getEndLineNumber();}},{key:"getVisibleLine",value:function getVisibleLine(lineNumber){return this._linesCollection.getLine(lineNumber);}},{key:"renderLines",value:function renderLines(viewportData){var inp=this._linesCollection._get();var renderer=new ViewLayerRenderer(this.domNode.domNode,this._host,viewportData);var ctx={rendLineNumberStart:inp.rendLineNumberStart,lines:inp.lines,linesLength:inp.lines.length};// Decide if this render will do a single update (single large .innerHTML) or many updates (inserting/removing dom nodes)
var resCtx=renderer.render(ctx,viewportData.startLineNumber,viewportData.endLineNumber,viewportData.relativeVerticalOffset);this._linesCollection._set(resCtx.rendLineNumberStart,resCtx.lines);}}]);return VisibleLinesCollection;}();var ViewLayerRenderer=/*#__PURE__*/function(){function ViewLayerRenderer(domNode,host,viewportData){viewLayer_classCallCheck(this,ViewLayerRenderer);this.domNode=domNode;this.host=host;this.viewportData=viewportData;}viewLayer_createClass(ViewLayerRenderer,[{key:"render",value:function render(inContext,startLineNumber,stopLineNumber,deltaTop){var ctx={rendLineNumberStart:inContext.rendLineNumberStart,lines:inContext.lines.slice(0),linesLength:inContext.linesLength};if(ctx.rendLineNumberStart+ctx.linesLength-1<startLineNumber||stopLineNumber<ctx.rendLineNumberStart){// There is no overlap whatsoever
ctx.rendLineNumberStart=startLineNumber;ctx.linesLength=stopLineNumber-startLineNumber+1;ctx.lines=[];for(var x=startLineNumber;x<=stopLineNumber;x++){ctx.lines[x-startLineNumber]=this.host.createVisibleLine();}this._finishRendering(ctx,true,deltaTop);return ctx;}// Update lines which will remain untouched
this._renderUntouchedLines(ctx,Math.max(startLineNumber-ctx.rendLineNumberStart,0),Math.min(stopLineNumber-ctx.rendLineNumberStart,ctx.linesLength-1),deltaTop,startLineNumber);if(ctx.rendLineNumberStart>startLineNumber){// Insert lines before
var fromLineNumber=startLineNumber;var toLineNumber=Math.min(stopLineNumber,ctx.rendLineNumberStart-1);if(fromLineNumber<=toLineNumber){this._insertLinesBefore(ctx,fromLineNumber,toLineNumber,deltaTop,startLineNumber);ctx.linesLength+=toLineNumber-fromLineNumber+1;}}else if(ctx.rendLineNumberStart<startLineNumber){// Remove lines before
var removeCnt=Math.min(ctx.linesLength,startLineNumber-ctx.rendLineNumberStart);if(removeCnt>0){this._removeLinesBefore(ctx,removeCnt);ctx.linesLength-=removeCnt;}}ctx.rendLineNumberStart=startLineNumber;if(ctx.rendLineNumberStart+ctx.linesLength-1<stopLineNumber){// Insert lines after
var _fromLineNumber=ctx.rendLineNumberStart+ctx.linesLength;var _toLineNumber=stopLineNumber;if(_fromLineNumber<=_toLineNumber){this._insertLinesAfter(ctx,_fromLineNumber,_toLineNumber,deltaTop,startLineNumber);ctx.linesLength+=_toLineNumber-_fromLineNumber+1;}}else if(ctx.rendLineNumberStart+ctx.linesLength-1>stopLineNumber){// Remove lines after
var _fromLineNumber2=Math.max(0,stopLineNumber-ctx.rendLineNumberStart+1);var _toLineNumber2=ctx.linesLength-1;var _removeCnt=_toLineNumber2-_fromLineNumber2+1;if(_removeCnt>0){this._removeLinesAfter(ctx,_removeCnt);ctx.linesLength-=_removeCnt;}}this._finishRendering(ctx,false,deltaTop);return ctx;}},{key:"_renderUntouchedLines",value:function _renderUntouchedLines(ctx,startIndex,endIndex,deltaTop,deltaLN){var rendLineNumberStart=ctx.rendLineNumberStart;var lines=ctx.lines;for(var i=startIndex;i<=endIndex;i++){var lineNumber=rendLineNumberStart+i;lines[i].layoutLine(lineNumber,deltaTop[lineNumber-deltaLN]);}}},{key:"_insertLinesBefore",value:function _insertLinesBefore(ctx,fromLineNumber,toLineNumber,deltaTop,deltaLN){var newLines=[];var newLinesLen=0;for(var lineNumber=fromLineNumber;lineNumber<=toLineNumber;lineNumber++){newLines[newLinesLen++]=this.host.createVisibleLine();}ctx.lines=newLines.concat(ctx.lines);}},{key:"_removeLinesBefore",value:function _removeLinesBefore(ctx,removeCount){for(var i=0;i<removeCount;i++){var lineDomNode=ctx.lines[i].getDomNode();if(lineDomNode){this.domNode.removeChild(lineDomNode);}}ctx.lines.splice(0,removeCount);}},{key:"_insertLinesAfter",value:function _insertLinesAfter(ctx,fromLineNumber,toLineNumber,deltaTop,deltaLN){var newLines=[];var newLinesLen=0;for(var lineNumber=fromLineNumber;lineNumber<=toLineNumber;lineNumber++){newLines[newLinesLen++]=this.host.createVisibleLine();}ctx.lines=ctx.lines.concat(newLines);}},{key:"_removeLinesAfter",value:function _removeLinesAfter(ctx,removeCount){var removeIndex=ctx.linesLength-removeCount;for(var i=0;i<removeCount;i++){var lineDomNode=ctx.lines[removeIndex+i].getDomNode();if(lineDomNode){this.domNode.removeChild(lineDomNode);}}ctx.lines.splice(removeIndex,removeCount);}},{key:"_finishRenderingNewLines",value:function _finishRenderingNewLines(ctx,domNodeIsEmpty,newLinesHTML,wasNew){if(ViewLayerRenderer._ttPolicy){newLinesHTML=ViewLayerRenderer._ttPolicy.createHTML(newLinesHTML);}var lastChild=this.domNode.lastChild;if(domNodeIsEmpty||!lastChild){this.domNode.innerHTML=newLinesHTML;// explains the ugly casts -> https://github.com/microsoft/vscode/issues/106396#issuecomment-692625393;
}else{lastChild.insertAdjacentHTML('afterend',newLinesHTML);}var currChild=this.domNode.lastChild;for(var i=ctx.linesLength-1;i>=0;i--){var line=ctx.lines[i];if(wasNew[i]){line.setDomNode(currChild);currChild=currChild.previousSibling;}}}},{key:"_finishRenderingInvalidLines",value:function _finishRenderingInvalidLines(ctx,invalidLinesHTML,wasInvalid){var hugeDomNode=document.createElement('div');if(ViewLayerRenderer._ttPolicy){invalidLinesHTML=ViewLayerRenderer._ttPolicy.createHTML(invalidLinesHTML);}hugeDomNode.innerHTML=invalidLinesHTML;for(var i=0;i<ctx.linesLength;i++){var line=ctx.lines[i];if(wasInvalid[i]){var source=hugeDomNode.firstChild;var lineDomNode=line.getDomNode();lineDomNode.parentNode.replaceChild(source,lineDomNode);line.setDomNode(source);}}}},{key:"_finishRendering",value:function _finishRendering(ctx,domNodeIsEmpty,deltaTop){var sb=ViewLayerRenderer._sb;var linesLength=ctx.linesLength;var lines=ctx.lines;var rendLineNumberStart=ctx.rendLineNumberStart;var wasNew=[];{sb.reset();var hadNewLine=false;for(var i=0;i<linesLength;i++){var line=lines[i];wasNew[i]=false;var lineDomNode=line.getDomNode();if(lineDomNode){// line is not new
continue;}var renderResult=line.renderLine(i+rendLineNumberStart,deltaTop[i],this.viewportData,sb);if(!renderResult){// line does not need rendering
continue;}wasNew[i]=true;hadNewLine=true;}if(hadNewLine){this._finishRenderingNewLines(ctx,domNodeIsEmpty,sb.build(),wasNew);}}{sb.reset();var hadInvalidLine=false;var wasInvalid=[];for(var _i=0;_i<linesLength;_i++){var _line=lines[_i];wasInvalid[_i]=false;if(wasNew[_i]){// line was new
continue;}var _renderResult=_line.renderLine(_i+rendLineNumberStart,deltaTop[_i],this.viewportData,sb);if(!_renderResult){// line does not need rendering
continue;}wasInvalid[_i]=true;hadInvalidLine=true;}if(hadInvalidLine){this._finishRenderingInvalidLines(ctx,sb.build(),wasInvalid);}}}}]);return ViewLayerRenderer;}();ViewLayerRenderer._ttPolicy=(_a=window.trustedTypes)===null||_a===void 0?void 0:_a.createPolicy('editorViewLayer',{createHTML:function createHTML(value){return value;}});ViewLayerRenderer._sb=(0,stringBuilder/* createStringBuilder */.l$)(100000);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/view/viewPart.js
var viewPart = __webpack_require__(73190);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/view/viewOverlays.js
function viewOverlays_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){viewOverlays_typeof=function _typeof(obj){return typeof obj;};}else{viewOverlays_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return viewOverlays_typeof(obj);}function viewOverlays_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function viewOverlays_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function viewOverlays_createClass(Constructor,protoProps,staticProps){if(protoProps)viewOverlays_defineProperties(Constructor.prototype,protoProps);if(staticProps)viewOverlays_defineProperties(Constructor,staticProps);return Constructor;}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(viewOverlays_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var ViewOverlays=/*#__PURE__*/function(_ViewPart){_inherits(ViewOverlays,_ViewPart);var _super=_createSuper(ViewOverlays);function ViewOverlays(context){var _this;viewOverlays_classCallCheck(this,ViewOverlays);_this=_super.call(this,context);_this._visibleLines=new VisibleLinesCollection(_assertThisInitialized(_this));_this.domNode=_this._visibleLines.domNode;_this._dynamicOverlays=[];_this._isFocused=false;_this.domNode.setClassName('view-overlays');return _this;}viewOverlays_createClass(ViewOverlays,[{key:"shouldRender",value:function shouldRender(){if(_get(_getPrototypeOf(ViewOverlays.prototype),"shouldRender",this).call(this)){return true;}for(var i=0,len=this._dynamicOverlays.length;i<len;i++){var dynamicOverlay=this._dynamicOverlays[i];if(dynamicOverlay.shouldRender()){return true;}}return false;}},{key:"dispose",value:function dispose(){_get(_getPrototypeOf(ViewOverlays.prototype),"dispose",this).call(this);for(var i=0,len=this._dynamicOverlays.length;i<len;i++){var dynamicOverlay=this._dynamicOverlays[i];dynamicOverlay.dispose();}this._dynamicOverlays=[];}},{key:"getDomNode",value:function getDomNode(){return this.domNode;}// ---- begin IVisibleLinesHost
},{key:"createVisibleLine",value:function createVisibleLine(){return new ViewOverlayLine(this._context.configuration,this._dynamicOverlays);}// ---- end IVisibleLinesHost
},{key:"addDynamicOverlay",value:function addDynamicOverlay(overlay){this._dynamicOverlays.push(overlay);}// ----- event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);var startLineNumber=this._visibleLines.getStartLineNumber();var endLineNumber=this._visibleLines.getEndLineNumber();for(var lineNumber=startLineNumber;lineNumber<=endLineNumber;lineNumber++){var line=this._visibleLines.getVisibleLine(lineNumber);line.onConfigurationChanged(e);}return true;}},{key:"onFlushed",value:function onFlushed(e){return this._visibleLines.onFlushed(e);}},{key:"onFocusChanged",value:function onFocusChanged(e){this._isFocused=e.isFocused;return true;}},{key:"onLinesChanged",value:function onLinesChanged(e){return this._visibleLines.onLinesChanged(e);}},{key:"onLinesDeleted",value:function onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e);}},{key:"onLinesInserted",value:function onLinesInserted(e){return this._visibleLines.onLinesInserted(e);}},{key:"onScrollChanged",value:function onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||true;}},{key:"onTokensChanged",value:function onTokensChanged(e){return this._visibleLines.onTokensChanged(e);}},{key:"onZonesChanged",value:function onZonesChanged(e){return this._visibleLines.onZonesChanged(e);}// ----- end event handlers
},{key:"prepareRender",value:function prepareRender(ctx){var toRender=this._dynamicOverlays.filter(function(overlay){return overlay.shouldRender();});for(var i=0,len=toRender.length;i<len;i++){var dynamicOverlay=toRender[i];dynamicOverlay.prepareRender(ctx);dynamicOverlay.onDidRender();}}},{key:"render",value:function render(ctx){// Overwriting to bypass `shouldRender` flag
this._viewOverlaysRender(ctx);this.domNode.toggleClassName('focused',this._isFocused);}},{key:"_viewOverlaysRender",value:function _viewOverlaysRender(ctx){this._visibleLines.renderLines(ctx.viewportData);}}]);return ViewOverlays;}(viewPart/* ViewPart */.E);var ViewOverlayLine=/*#__PURE__*/function(){function ViewOverlayLine(configuration,dynamicOverlays){viewOverlays_classCallCheck(this,ViewOverlayLine);this._configuration=configuration;this._lineHeight=this._configuration.options.get(59/* lineHeight */);this._dynamicOverlays=dynamicOverlays;this._domNode=null;this._renderedContent=null;}viewOverlays_createClass(ViewOverlayLine,[{key:"getDomNode",value:function getDomNode(){if(!this._domNode){return null;}return this._domNode.domNode;}},{key:"setDomNode",value:function setDomNode(domNode){this._domNode=(0,fastDomNode/* createFastDomNode */.X)(domNode);}},{key:"onContentChanged",value:function onContentChanged(){// Nothing
}},{key:"onTokensChanged",value:function onTokensChanged(){// Nothing
}},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(59/* lineHeight */);}},{key:"renderLine",value:function renderLine(lineNumber,deltaTop,viewportData,sb){var result='';for(var i=0,len=this._dynamicOverlays.length;i<len;i++){var dynamicOverlay=this._dynamicOverlays[i];result+=dynamicOverlay.render(viewportData.startLineNumber,lineNumber);}if(this._renderedContent===result){// No rendering needed
return false;}this._renderedContent=result;sb.appendASCIIString('<div style="position:absolute;top:');sb.appendASCIIString(String(deltaTop));sb.appendASCIIString('px;width:100%;height:');sb.appendASCIIString(String(this._lineHeight));sb.appendASCIIString('px;">');sb.appendASCIIString(result);sb.appendASCIIString('</div>');return true;}},{key:"layoutLine",value:function layoutLine(lineNumber,deltaTop){if(this._domNode){this._domNode.setTop(deltaTop);this._domNode.setHeight(this._lineHeight);}}}]);return ViewOverlayLine;}();var ContentViewOverlays=/*#__PURE__*/function(_ViewOverlays){_inherits(ContentViewOverlays,_ViewOverlays);var _super2=_createSuper(ContentViewOverlays);function ContentViewOverlays(context){var _this2;viewOverlays_classCallCheck(this,ContentViewOverlays);_this2=_super2.call(this,context);var options=_this2._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);_this2._contentWidth=layoutInfo.contentWidth;_this2.domNode.setHeight(0);return _this2;}// --- begin event handlers
viewOverlays_createClass(ContentViewOverlays,[{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);this._contentWidth=layoutInfo.contentWidth;return _get(_getPrototypeOf(ContentViewOverlays.prototype),"onConfigurationChanged",this).call(this,e)||true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return _get(_getPrototypeOf(ContentViewOverlays.prototype),"onScrollChanged",this).call(this,e)||e.scrollWidthChanged;}// --- end event handlers
},{key:"_viewOverlaysRender",value:function _viewOverlaysRender(ctx){_get(_getPrototypeOf(ContentViewOverlays.prototype),"_viewOverlaysRender",this).call(this,ctx);this.domNode.setWidth(Math.max(ctx.scrollWidth,this._contentWidth));}}]);return ContentViewOverlays;}(ViewOverlays);var MarginViewOverlays=/*#__PURE__*/function(_ViewOverlays2){_inherits(MarginViewOverlays,_ViewOverlays2);var _super3=_createSuper(MarginViewOverlays);function MarginViewOverlays(context){var _this3;viewOverlays_classCallCheck(this,MarginViewOverlays);_this3=_super3.call(this,context);var options=_this3._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);_this3._contentLeft=layoutInfo.contentLeft;_this3.domNode.setClassName('margin-view-overlays');_this3.domNode.setWidth(1);(0,domFontInfo/* applyFontInfo */.N)(_this3.domNode,options.get(44/* fontInfo */));return _this3;}viewOverlays_createClass(MarginViewOverlays,[{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;(0,domFontInfo/* applyFontInfo */.N)(this.domNode,options.get(44/* fontInfo */));var layoutInfo=options.get(131/* layoutInfo */);this._contentLeft=layoutInfo.contentLeft;return _get(_getPrototypeOf(MarginViewOverlays.prototype),"onConfigurationChanged",this).call(this,e)||true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return _get(_getPrototypeOf(MarginViewOverlays.prototype),"onScrollChanged",this).call(this,e)||e.scrollHeightChanged;}},{key:"_viewOverlaysRender",value:function _viewOverlaysRender(ctx){_get(_getPrototypeOf(MarginViewOverlays.prototype),"_viewOverlaysRender",this).call(this,ctx);var height=Math.min(ctx.scrollHeight,1000000);this.domNode.setHeight(height);this.domNode.setWidth(this._contentLeft);}}]);return MarginViewOverlays;}(ViewOverlays);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/contentWidgets/contentWidgets.js
function contentWidgets_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){contentWidgets_typeof=function _typeof(obj){return typeof obj;};}else{contentWidgets_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return contentWidgets_typeof(obj);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function contentWidgets_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function contentWidgets_createClass(Constructor,protoProps,staticProps){if(protoProps)contentWidgets_defineProperties(Constructor.prototype,protoProps);if(staticProps)contentWidgets_defineProperties(Constructor,staticProps);return Constructor;}function contentWidgets_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){contentWidgets_get=Reflect.get;}else{contentWidgets_get=function _get(target,property,receiver){var base=contentWidgets_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return contentWidgets_get(target,property,receiver||target);}function contentWidgets_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=contentWidgets_getPrototypeOf(object);if(object===null)break;}return object;}function contentWidgets_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)contentWidgets_setPrototypeOf(subClass,superClass);}function contentWidgets_setPrototypeOf(o,p){contentWidgets_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return contentWidgets_setPrototypeOf(o,p);}function contentWidgets_createSuper(Derived){var hasNativeReflectConstruct=contentWidgets_isNativeReflectConstruct();return function _createSuperInternal(){var Super=contentWidgets_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=contentWidgets_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return contentWidgets_possibleConstructorReturn(this,result);};}function contentWidgets_possibleConstructorReturn(self,call){if(call&&(contentWidgets_typeof(call)==="object"||typeof call==="function")){return call;}return contentWidgets_assertThisInitialized(self);}function contentWidgets_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function contentWidgets_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function contentWidgets_getPrototypeOf(o){contentWidgets_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return contentWidgets_getPrototypeOf(o);}function contentWidgets_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var Coordinate=function Coordinate(top,left){contentWidgets_classCallCheck(this,Coordinate);this._coordinateBrand=undefined;this.top=top;this.left=left;};var ViewContentWidgets=/*#__PURE__*/function(_ViewPart){contentWidgets_inherits(ViewContentWidgets,_ViewPart);var _super=contentWidgets_createSuper(ViewContentWidgets);function ViewContentWidgets(context,viewDomNode){var _this;contentWidgets_classCallCheck(this,ViewContentWidgets);_this=_super.call(this,context);_this._viewDomNode=viewDomNode;_this._widgets={};_this.domNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));viewPart/* PartFingerprints.write */.K.write(_this.domNode,1/* ContentWidgets */);_this.domNode.setClassName('contentWidgets');_this.domNode.setPosition('absolute');_this.domNode.setTop(0);_this.overflowingContentWidgetsDomNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));viewPart/* PartFingerprints.write */.K.write(_this.overflowingContentWidgetsDomNode,2/* OverflowingContentWidgets */);_this.overflowingContentWidgetsDomNode.setClassName('overflowingContentWidgets');return _this;}contentWidgets_createClass(ViewContentWidgets,[{key:"dispose",value:function dispose(){contentWidgets_get(contentWidgets_getPrototypeOf(ViewContentWidgets.prototype),"dispose",this).call(this);this._widgets={};}// --- begin event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var keys=Object.keys(this._widgets);for(var _i=0,_keys=keys;_i<_keys.length;_i++){var widgetId=_keys[_i];this._widgets[widgetId].onConfigurationChanged(e);}return true;}},{key:"onDecorationsChanged",value:function onDecorationsChanged(e){// true for inline decorations that can end up relayouting text
return true;}},{key:"onFlushed",value:function onFlushed(e){return true;}},{key:"onLineMappingChanged",value:function onLineMappingChanged(e){var keys=Object.keys(this._widgets);for(var _i2=0,_keys2=keys;_i2<_keys2.length;_i2++){var widgetId=_keys2[_i2];this._widgets[widgetId].onLineMappingChanged(e);}return true;}},{key:"onLinesChanged",value:function onLinesChanged(e){return true;}},{key:"onLinesDeleted",value:function onLinesDeleted(e){return true;}},{key:"onLinesInserted",value:function onLinesInserted(e){return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return true;}},{key:"onZonesChanged",value:function onZonesChanged(e){return true;}// ---- end view event handlers
},{key:"addWidget",value:function addWidget(_widget){var myWidget=new Widget(this._context,this._viewDomNode,_widget);this._widgets[myWidget.id]=myWidget;if(myWidget.allowEditorOverflow){this.overflowingContentWidgetsDomNode.appendChild(myWidget.domNode);}else{this.domNode.appendChild(myWidget.domNode);}this.setShouldRender();}},{key:"setWidgetPosition",value:function setWidgetPosition(widget,range,preference){var myWidget=this._widgets[widget.getId()];myWidget.setPosition(range,preference);this.setShouldRender();}},{key:"removeWidget",value:function removeWidget(widget){var widgetId=widget.getId();if(this._widgets.hasOwnProperty(widgetId)){var myWidget=this._widgets[widgetId];delete this._widgets[widgetId];var domNode=myWidget.domNode.domNode;domNode.parentNode.removeChild(domNode);domNode.removeAttribute('monaco-visible-content-widget');this.setShouldRender();}}},{key:"shouldSuppressMouseDownOnWidget",value:function shouldSuppressMouseDownOnWidget(widgetId){if(this._widgets.hasOwnProperty(widgetId)){return this._widgets[widgetId].suppressMouseDown;}return false;}},{key:"onBeforeRender",value:function onBeforeRender(viewportData){var keys=Object.keys(this._widgets);for(var _i3=0,_keys3=keys;_i3<_keys3.length;_i3++){var widgetId=_keys3[_i3];this._widgets[widgetId].onBeforeRender(viewportData);}}},{key:"prepareRender",value:function prepareRender(ctx){var keys=Object.keys(this._widgets);for(var _i4=0,_keys4=keys;_i4<_keys4.length;_i4++){var widgetId=_keys4[_i4];this._widgets[widgetId].prepareRender(ctx);}}},{key:"render",value:function render(ctx){var keys=Object.keys(this._widgets);for(var _i5=0,_keys5=keys;_i5<_keys5.length;_i5++){var widgetId=_keys5[_i5];this._widgets[widgetId].render(ctx);}}}]);return ViewContentWidgets;}(viewPart/* ViewPart */.E);var Widget=/*#__PURE__*/function(){function Widget(context,viewDomNode,actual){contentWidgets_classCallCheck(this,Widget);this._context=context;this._viewDomNode=viewDomNode;this._actual=actual;this.domNode=(0,fastDomNode/* createFastDomNode */.X)(this._actual.getDomNode());this.id=this._actual.getId();this.allowEditorOverflow=this._actual.allowEditorOverflow||false;this.suppressMouseDown=this._actual.suppressMouseDown||false;var options=this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);this._fixedOverflowWidgets=options.get(36/* fixedOverflowWidgets */);this._contentWidth=layoutInfo.contentWidth;this._contentLeft=layoutInfo.contentLeft;this._lineHeight=options.get(59/* lineHeight */);this._range=null;this._viewRange=null;this._preference=[];this._cachedDomNodeOffsetWidth=-1;this._cachedDomNodeOffsetHeight=-1;this._maxWidth=this._getMaxWidth();this._isVisible=false;this._renderData=null;this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?'fixed':'absolute');this.domNode.setDisplay('none');this.domNode.setVisibility('hidden');this.domNode.setAttribute('widgetId',this.id);this.domNode.setMaxWidth(this._maxWidth);}contentWidgets_createClass(Widget,[{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;this._lineHeight=options.get(59/* lineHeight */);if(e.hasChanged(131/* layoutInfo */)){var layoutInfo=options.get(131/* layoutInfo */);this._contentLeft=layoutInfo.contentLeft;this._contentWidth=layoutInfo.contentWidth;this._maxWidth=this._getMaxWidth();}}},{key:"onLineMappingChanged",value:function onLineMappingChanged(e){this._setPosition(this._range);}},{key:"_setPosition",value:function _setPosition(range){this._range=range;this._viewRange=null;if(this._range){// Do not trust that widgets give a valid position
var validModelRange=this._context.model.validateModelRange(this._range);if(this._context.model.coordinatesConverter.modelPositionIsVisible(validModelRange.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(validModelRange.getEndPosition())){this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(validModelRange);}}}},{key:"_getMaxWidth",value:function _getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth;}},{key:"setPosition",value:function setPosition(range,preference){this._setPosition(range);this._preference=preference;if(this._viewRange&&this._preference&&this._preference.length>0){// this content widget would like to be visible if possible
// we change it from `display:none` to `display:block` even if it
// might be outside the viewport such that we can measure its size
// in `prepareRender`
this.domNode.setDisplay('block');}else{this.domNode.setDisplay('none');}this._cachedDomNodeOffsetWidth=-1;this._cachedDomNodeOffsetHeight=-1;}},{key:"_layoutBoxInViewport",value:function _layoutBoxInViewport(topLeft,bottomLeft,width,height,ctx){// Our visible box is split horizontally by the current line => 2 boxes
// a) the box above the line
var aboveLineTop=topLeft.top;var heightAboveLine=aboveLineTop;// b) the box under the line
var underLineTop=bottomLeft.top+this._lineHeight;var heightUnderLine=ctx.viewportHeight-underLineTop;var aboveTop=aboveLineTop-height;var fitsAbove=heightAboveLine>=height;var belowTop=underLineTop;var fitsBelow=heightUnderLine>=height;// And its left
var actualAboveLeft=topLeft.left;var actualBelowLeft=bottomLeft.left;if(actualAboveLeft+width>ctx.scrollLeft+ctx.viewportWidth){actualAboveLeft=ctx.scrollLeft+ctx.viewportWidth-width;}if(actualBelowLeft+width>ctx.scrollLeft+ctx.viewportWidth){actualBelowLeft=ctx.scrollLeft+ctx.viewportWidth-width;}if(actualAboveLeft<ctx.scrollLeft){actualAboveLeft=ctx.scrollLeft;}if(actualBelowLeft<ctx.scrollLeft){actualBelowLeft=ctx.scrollLeft;}return{fitsAbove:fitsAbove,aboveTop:aboveTop,aboveLeft:actualAboveLeft,fitsBelow:fitsBelow,belowTop:belowTop,belowLeft:actualBelowLeft};}},{key:"_layoutHorizontalSegmentInPage",value:function _layoutHorizontalSegmentInPage(windowSize,domNodePosition,left,width){// Initially, the limits are defined as the dom node limits
var MIN_LIMIT=Math.max(0,domNodePosition.left-width);var MAX_LIMIT=Math.min(domNodePosition.left+domNodePosition.width+width,windowSize.width);var absoluteLeft=domNodePosition.left+left-dom.StandardWindow.scrollX;if(absoluteLeft+width>MAX_LIMIT){var delta=absoluteLeft-(MAX_LIMIT-width);absoluteLeft-=delta;left-=delta;}if(absoluteLeft<MIN_LIMIT){var _delta=absoluteLeft-MIN_LIMIT;absoluteLeft-=_delta;left-=_delta;}return[left,absoluteLeft];}},{key:"_layoutBoxInPage",value:function _layoutBoxInPage(topLeft,bottomLeft,width,height,ctx){var aboveTop=topLeft.top-height;var belowTop=bottomLeft.top+this._lineHeight;var domNodePosition=dom.getDomNodePagePosition(this._viewDomNode.domNode);var absoluteAboveTop=domNodePosition.top+aboveTop-dom.StandardWindow.scrollY;var absoluteBelowTop=domNodePosition.top+belowTop-dom.StandardWindow.scrollY;var windowSize=dom.getClientArea(document.body);var _this$_layoutHorizont=this._layoutHorizontalSegmentInPage(windowSize,domNodePosition,topLeft.left-ctx.scrollLeft+this._contentLeft,width),_this$_layoutHorizont2=_slicedToArray(_this$_layoutHorizont,2),aboveLeft=_this$_layoutHorizont2[0],absoluteAboveLeft=_this$_layoutHorizont2[1];var _this$_layoutHorizont3=this._layoutHorizontalSegmentInPage(windowSize,domNodePosition,bottomLeft.left-ctx.scrollLeft+this._contentLeft,width),_this$_layoutHorizont4=_slicedToArray(_this$_layoutHorizont3,2),belowLeft=_this$_layoutHorizont4[0],absoluteBelowLeft=_this$_layoutHorizont4[1];// Leave some clearance to the top/bottom
var TOP_PADDING=22;var BOTTOM_PADDING=22;var fitsAbove=absoluteAboveTop>=TOP_PADDING;var fitsBelow=absoluteBelowTop+height<=windowSize.height-BOTTOM_PADDING;if(this._fixedOverflowWidgets){return{fitsAbove:fitsAbove,aboveTop:Math.max(absoluteAboveTop,TOP_PADDING),aboveLeft:absoluteAboveLeft,fitsBelow:fitsBelow,belowTop:absoluteBelowTop,belowLeft:absoluteBelowLeft};}return{fitsAbove:fitsAbove,aboveTop:aboveTop,aboveLeft:aboveLeft,fitsBelow:fitsBelow,belowTop:belowTop,belowLeft:belowLeft};}},{key:"_prepareRenderWidgetAtExactPositionOverflowing",value:function _prepareRenderWidgetAtExactPositionOverflowing(topLeft){return new Coordinate(topLeft.top,topLeft.left+this._contentLeft);}/**
     * Compute `this._topLeft`
     */},{key:"_getTopAndBottomLeft",value:function _getTopAndBottomLeft(ctx){if(!this._viewRange){return[null,null];}var visibleRangesForRange=ctx.linesVisibleRangesForRange(this._viewRange,false);if(!visibleRangesForRange||visibleRangesForRange.length===0){return[null,null];}var firstLine=visibleRangesForRange[0];var lastLine=visibleRangesForRange[0];var _iterator=_createForOfIteratorHelper(visibleRangesForRange),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var visibleRangesForLine=_step.value;if(visibleRangesForLine.lineNumber<firstLine.lineNumber){firstLine=visibleRangesForLine;}if(visibleRangesForLine.lineNumber>lastLine.lineNumber){lastLine=visibleRangesForLine;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}var firstLineMinLeft=1073741824/* MAX_SAFE_SMALL_INTEGER */;//firstLine.Constants.MAX_SAFE_SMALL_INTEGER;
var _iterator2=_createForOfIteratorHelper(firstLine.ranges),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var visibleRange=_step2.value;if(visibleRange.left<firstLineMinLeft){firstLineMinLeft=visibleRange.left;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var lastLineMinLeft=1073741824/* MAX_SAFE_SMALL_INTEGER */;//lastLine.Constants.MAX_SAFE_SMALL_INTEGER;
var _iterator3=_createForOfIteratorHelper(lastLine.ranges),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _visibleRange=_step3.value;if(_visibleRange.left<lastLineMinLeft){lastLineMinLeft=_visibleRange.left;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}var topForPosition=ctx.getVerticalOffsetForLineNumber(firstLine.lineNumber)-ctx.scrollTop;var topLeft=new Coordinate(topForPosition,firstLineMinLeft);var topForBottomLine=ctx.getVerticalOffsetForLineNumber(lastLine.lineNumber)-ctx.scrollTop;var bottomLeft=new Coordinate(topForBottomLine,lastLineMinLeft);return[topLeft,bottomLeft];}},{key:"_prepareRenderWidget",value:function _prepareRenderWidget(ctx){if(!this._preference||this._preference.length===0){return null;}var _this$_getTopAndBotto=this._getTopAndBottomLeft(ctx),_this$_getTopAndBotto2=_slicedToArray(_this$_getTopAndBotto,2),topLeft=_this$_getTopAndBotto2[0],bottomLeft=_this$_getTopAndBotto2[1];if(!topLeft||!bottomLeft){return null;}if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){var preferredDimensions=null;if(typeof this._actual.beforeRender==='function'){preferredDimensions=safeInvoke(this._actual.beforeRender,this._actual);}if(preferredDimensions){this._cachedDomNodeOffsetWidth=preferredDimensions.width;this._cachedDomNodeOffsetHeight=preferredDimensions.height;}else{var domNode=this.domNode.domNode;this._cachedDomNodeOffsetWidth=domNode.offsetWidth;this._cachedDomNodeOffsetHeight=domNode.offsetHeight;}}var placement;if(this.allowEditorOverflow){placement=this._layoutBoxInPage(topLeft,bottomLeft,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,ctx);}else{placement=this._layoutBoxInViewport(topLeft,bottomLeft,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,ctx);}// Do two passes, first for perfect fit, second picks first option
for(var pass=1;pass<=2;pass++){var _iterator4=_createForOfIteratorHelper(this._preference),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var pref=_step4.value;// placement
if(pref===1/* ABOVE */){if(!placement){// Widget outside of viewport
return null;}if(pass===2||placement.fitsAbove){return{coordinate:new Coordinate(placement.aboveTop,placement.aboveLeft),position:1/* ABOVE */};}}else if(pref===2/* BELOW */){if(!placement){// Widget outside of viewport
return null;}if(pass===2||placement.fitsBelow){return{coordinate:new Coordinate(placement.belowTop,placement.belowLeft),position:2/* BELOW */};}}else{if(this.allowEditorOverflow){return{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(topLeft),position:0/* EXACT */};}else{return{coordinate:topLeft,position:0/* EXACT */};}}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}return null;}/**
     * On this first pass, we ensure that the content widget (if it is in the viewport) has the max width set correctly.
     */},{key:"onBeforeRender",value:function onBeforeRender(viewportData){if(!this._viewRange||!this._preference){return;}if(this._viewRange.endLineNumber<viewportData.startLineNumber||this._viewRange.startLineNumber>viewportData.endLineNumber){// Outside of viewport
return;}this.domNode.setMaxWidth(this._maxWidth);}},{key:"prepareRender",value:function prepareRender(ctx){this._renderData=this._prepareRenderWidget(ctx);}},{key:"render",value:function render(ctx){if(!this._renderData){// This widget should be invisible
if(this._isVisible){this.domNode.removeAttribute('monaco-visible-content-widget');this._isVisible=false;this.domNode.setVisibility('hidden');}if(typeof this._actual.afterRender==='function'){safeInvoke(this._actual.afterRender,this._actual,null);}return;}// This widget should be visible
if(this.allowEditorOverflow){this.domNode.setTop(this._renderData.coordinate.top);this.domNode.setLeft(this._renderData.coordinate.left);}else{this.domNode.setTop(this._renderData.coordinate.top+ctx.scrollTop-ctx.bigNumbersDelta);this.domNode.setLeft(this._renderData.coordinate.left);}if(!this._isVisible){this.domNode.setVisibility('inherit');this.domNode.setAttribute('monaco-visible-content-widget','true');this._isVisible=true;}if(typeof this._actual.afterRender==='function'){safeInvoke(this._actual.afterRender,this._actual,this._renderData.position);}}}]);return Widget;}();function safeInvoke(fn,thisArg){try{for(var _len=arguments.length,args=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=arguments[_key];}return fn.call.apply(fn,[thisArg].concat(args));}catch(_a){// ignore
return null;}}
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/view/dynamicViewOverlay.js
var dynamicViewOverlay = __webpack_require__(62229);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/editorColorRegistry.js
var editorColorRegistry = __webpack_require__(62660);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/arrays.js
var arrays = __webpack_require__(92224);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/theme/common/themeService.js
var themeService = __webpack_require__(46199);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/currentLineHighlight/currentLineHighlight.js
function currentLineHighlight_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){currentLineHighlight_typeof=function _typeof(obj){return typeof obj;};}else{currentLineHighlight_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return currentLineHighlight_typeof(obj);}function currentLineHighlight_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function currentLineHighlight_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function currentLineHighlight_createClass(Constructor,protoProps,staticProps){if(protoProps)currentLineHighlight_defineProperties(Constructor.prototype,protoProps);if(staticProps)currentLineHighlight_defineProperties(Constructor,staticProps);return Constructor;}function currentLineHighlight_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){currentLineHighlight_get=Reflect.get;}else{currentLineHighlight_get=function _get(target,property,receiver){var base=currentLineHighlight_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return currentLineHighlight_get(target,property,receiver||target);}function currentLineHighlight_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=currentLineHighlight_getPrototypeOf(object);if(object===null)break;}return object;}function currentLineHighlight_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)currentLineHighlight_setPrototypeOf(subClass,superClass);}function currentLineHighlight_setPrototypeOf(o,p){currentLineHighlight_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return currentLineHighlight_setPrototypeOf(o,p);}function currentLineHighlight_createSuper(Derived){var hasNativeReflectConstruct=currentLineHighlight_isNativeReflectConstruct();return function _createSuperInternal(){var Super=currentLineHighlight_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=currentLineHighlight_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return currentLineHighlight_possibleConstructorReturn(this,result);};}function currentLineHighlight_possibleConstructorReturn(self,call){if(call&&(currentLineHighlight_typeof(call)==="object"||typeof call==="function")){return call;}return currentLineHighlight_assertThisInitialized(self);}function currentLineHighlight_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function currentLineHighlight_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function currentLineHighlight_getPrototypeOf(o){currentLineHighlight_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return currentLineHighlight_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var AbstractLineHighlightOverlay=/*#__PURE__*/function(_DynamicViewOverlay){currentLineHighlight_inherits(AbstractLineHighlightOverlay,_DynamicViewOverlay);var _super=currentLineHighlight_createSuper(AbstractLineHighlightOverlay);function AbstractLineHighlightOverlay(context){var _this;currentLineHighlight_classCallCheck(this,AbstractLineHighlightOverlay);_this=_super.call(this);_this._context=context;var options=_this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);_this._lineHeight=options.get(59/* lineHeight */);_this._renderLineHighlight=options.get(85/* renderLineHighlight */);_this._renderLineHighlightOnlyWhenFocus=options.get(86/* renderLineHighlightOnlyWhenFocus */);_this._contentLeft=layoutInfo.contentLeft;_this._contentWidth=layoutInfo.contentWidth;_this._selectionIsEmpty=true;_this._focused=false;_this._cursorLineNumbers=[1];_this._selections=[new core_selection/* Selection */.Y(1,1,1,1)];_this._renderData=null;_this._context.addEventHandler(currentLineHighlight_assertThisInitialized(_this));return _this;}currentLineHighlight_createClass(AbstractLineHighlightOverlay,[{key:"dispose",value:function dispose(){this._context.removeEventHandler(this);currentLineHighlight_get(currentLineHighlight_getPrototypeOf(AbstractLineHighlightOverlay.prototype),"dispose",this).call(this);}},{key:"_readFromSelections",value:function _readFromSelections(){var hasChanged=false;var cursorsLineNumbers=this._selections.map(function(s){return s.positionLineNumber;});cursorsLineNumbers.sort(function(a,b){return a-b;});if(!arrays/* equals */.fS(this._cursorLineNumbers,cursorsLineNumbers)){this._cursorLineNumbers=cursorsLineNumbers;hasChanged=true;}var selectionIsEmpty=this._selections.every(function(s){return s.isEmpty();});if(this._selectionIsEmpty!==selectionIsEmpty){this._selectionIsEmpty=selectionIsEmpty;hasChanged=true;}return hasChanged;}// --- begin event handlers
},{key:"onThemeChanged",value:function onThemeChanged(e){return this._readFromSelections();}},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);this._lineHeight=options.get(59/* lineHeight */);this._renderLineHighlight=options.get(85/* renderLineHighlight */);this._renderLineHighlightOnlyWhenFocus=options.get(86/* renderLineHighlightOnlyWhenFocus */);this._contentLeft=layoutInfo.contentLeft;this._contentWidth=layoutInfo.contentWidth;return true;}},{key:"onCursorStateChanged",value:function onCursorStateChanged(e){this._selections=e.selections;return this._readFromSelections();}},{key:"onFlushed",value:function onFlushed(e){return true;}},{key:"onLinesDeleted",value:function onLinesDeleted(e){return true;}},{key:"onLinesInserted",value:function onLinesInserted(e){return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged;}},{key:"onZonesChanged",value:function onZonesChanged(e){return true;}},{key:"onFocusChanged",value:function onFocusChanged(e){if(!this._renderLineHighlightOnlyWhenFocus){return false;}this._focused=e.isFocused;return true;}// --- end event handlers
},{key:"prepareRender",value:function prepareRender(ctx){if(!this._shouldRenderThis()){this._renderData=null;return;}var renderedLine=this._renderOne(ctx);var visibleStartLineNumber=ctx.visibleRange.startLineNumber;var visibleEndLineNumber=ctx.visibleRange.endLineNumber;var len=this._cursorLineNumbers.length;var index=0;var renderData=[];for(var lineNumber=visibleStartLineNumber;lineNumber<=visibleEndLineNumber;lineNumber++){var lineIndex=lineNumber-visibleStartLineNumber;while(index<len&&this._cursorLineNumbers[index]<lineNumber){index++;}if(index<len&&this._cursorLineNumbers[index]===lineNumber){renderData[lineIndex]=renderedLine;}else{renderData[lineIndex]='';}}this._renderData=renderData;}},{key:"render",value:function render(startLineNumber,lineNumber){if(!this._renderData){return'';}var lineIndex=lineNumber-startLineNumber;if(lineIndex>=this._renderData.length){return'';}return this._renderData[lineIndex];}},{key:"_shouldRenderInMargin",value:function _shouldRenderInMargin(){return(this._renderLineHighlight==='gutter'||this._renderLineHighlight==='all')&&(!this._renderLineHighlightOnlyWhenFocus||this._focused);}},{key:"_shouldRenderInContent",value:function _shouldRenderInContent(){return(this._renderLineHighlight==='line'||this._renderLineHighlight==='all')&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused);}}]);return AbstractLineHighlightOverlay;}(dynamicViewOverlay/* DynamicViewOverlay */.i);var CurrentLineHighlightOverlay=/*#__PURE__*/function(_AbstractLineHighligh){currentLineHighlight_inherits(CurrentLineHighlightOverlay,_AbstractLineHighligh);var _super2=currentLineHighlight_createSuper(CurrentLineHighlightOverlay);function CurrentLineHighlightOverlay(){currentLineHighlight_classCallCheck(this,CurrentLineHighlightOverlay);return _super2.apply(this,arguments);}currentLineHighlight_createClass(CurrentLineHighlightOverlay,[{key:"_renderOne",value:function _renderOne(ctx){var className='current-line'+(this._shouldRenderOther()?' current-line-both':'');return"<div class=\"".concat(className,"\" style=\"width:").concat(Math.max(ctx.scrollWidth,this._contentWidth),"px; height:").concat(this._lineHeight,"px;\"></div>");}},{key:"_shouldRenderThis",value:function _shouldRenderThis(){return this._shouldRenderInContent();}},{key:"_shouldRenderOther",value:function _shouldRenderOther(){return this._shouldRenderInMargin();}}]);return CurrentLineHighlightOverlay;}(AbstractLineHighlightOverlay);var CurrentLineMarginHighlightOverlay=/*#__PURE__*/function(_AbstractLineHighligh2){currentLineHighlight_inherits(CurrentLineMarginHighlightOverlay,_AbstractLineHighligh2);var _super3=currentLineHighlight_createSuper(CurrentLineMarginHighlightOverlay);function CurrentLineMarginHighlightOverlay(){currentLineHighlight_classCallCheck(this,CurrentLineMarginHighlightOverlay);return _super3.apply(this,arguments);}currentLineHighlight_createClass(CurrentLineMarginHighlightOverlay,[{key:"_renderOne",value:function _renderOne(ctx){var className='current-line'+(this._shouldRenderInMargin()?' current-line-margin':'')+(this._shouldRenderOther()?' current-line-margin-both':'');return"<div class=\"".concat(className,"\" style=\"width:").concat(this._contentLeft,"px; height:").concat(this._lineHeight,"px;\"></div>");}},{key:"_shouldRenderThis",value:function _shouldRenderThis(){return true;}},{key:"_shouldRenderOther",value:function _shouldRenderOther(){return this._shouldRenderInContent();}}]);return CurrentLineMarginHighlightOverlay;}(AbstractLineHighlightOverlay);(0,themeService/* registerThemingParticipant */.Ic)(function(theme,collector){var lineHighlight=theme.getColor(editorColorRegistry/* editorLineHighlight */.Kh);if(lineHighlight){collector.addRule(".monaco-editor .view-overlays .current-line { background-color: ".concat(lineHighlight,"; }"));collector.addRule(".monaco-editor .margin-view-overlays .current-line-margin { background-color: ".concat(lineHighlight,"; border: none; }"));}if(!lineHighlight||lineHighlight.isTransparent()||theme.defines(editorColorRegistry/* editorLineHighlightBorder */.Mm)){var lineHighlightBorder=theme.getColor(editorColorRegistry/* editorLineHighlightBorder */.Mm);if(lineHighlightBorder){collector.addRule(".monaco-editor .view-overlays .current-line { border: 2px solid ".concat(lineHighlightBorder,"; }"));collector.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ".concat(lineHighlightBorder,"; }"));if(theme.type==='hc'){collector.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }");collector.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }");}}}});
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/range.js
var core_range = __webpack_require__(96844);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/view/renderingContext.js
var view_renderingContext = __webpack_require__(5395);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/decorations/decorations.js
function decorations_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){decorations_typeof=function _typeof(obj){return typeof obj;};}else{decorations_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return decorations_typeof(obj);}function decorations_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function decorations_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function decorations_createClass(Constructor,protoProps,staticProps){if(protoProps)decorations_defineProperties(Constructor.prototype,protoProps);if(staticProps)decorations_defineProperties(Constructor,staticProps);return Constructor;}function decorations_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){decorations_get=Reflect.get;}else{decorations_get=function _get(target,property,receiver){var base=decorations_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return decorations_get(target,property,receiver||target);}function decorations_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=decorations_getPrototypeOf(object);if(object===null)break;}return object;}function decorations_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)decorations_setPrototypeOf(subClass,superClass);}function decorations_setPrototypeOf(o,p){decorations_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return decorations_setPrototypeOf(o,p);}function decorations_createSuper(Derived){var hasNativeReflectConstruct=decorations_isNativeReflectConstruct();return function _createSuperInternal(){var Super=decorations_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=decorations_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return decorations_possibleConstructorReturn(this,result);};}function decorations_possibleConstructorReturn(self,call){if(call&&(decorations_typeof(call)==="object"||typeof call==="function")){return call;}return decorations_assertThisInitialized(self);}function decorations_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function decorations_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function decorations_getPrototypeOf(o){decorations_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return decorations_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var DecorationsOverlay=/*#__PURE__*/function(_DynamicViewOverlay){decorations_inherits(DecorationsOverlay,_DynamicViewOverlay);var _super=decorations_createSuper(DecorationsOverlay);function DecorationsOverlay(context){var _this;decorations_classCallCheck(this,DecorationsOverlay);_this=_super.call(this);_this._context=context;var options=_this._context.configuration.options;_this._lineHeight=options.get(59/* lineHeight */);_this._typicalHalfwidthCharacterWidth=options.get(44/* fontInfo */).typicalHalfwidthCharacterWidth;_this._renderResult=null;_this._context.addEventHandler(decorations_assertThisInitialized(_this));return _this;}decorations_createClass(DecorationsOverlay,[{key:"dispose",value:function dispose(){this._context.removeEventHandler(this);this._renderResult=null;decorations_get(decorations_getPrototypeOf(DecorationsOverlay.prototype),"dispose",this).call(this);}// --- begin event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;this._lineHeight=options.get(59/* lineHeight */);this._typicalHalfwidthCharacterWidth=options.get(44/* fontInfo */).typicalHalfwidthCharacterWidth;return true;}},{key:"onDecorationsChanged",value:function onDecorationsChanged(e){return true;}},{key:"onFlushed",value:function onFlushed(e){return true;}},{key:"onLinesChanged",value:function onLinesChanged(e){return true;}},{key:"onLinesDeleted",value:function onLinesDeleted(e){return true;}},{key:"onLinesInserted",value:function onLinesInserted(e){return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged;}},{key:"onZonesChanged",value:function onZonesChanged(e){return true;}// --- end event handlers
},{key:"prepareRender",value:function prepareRender(ctx){var _decorations=ctx.getDecorationsInViewport();// Keep only decorations with `className`
var decorations=[];var decorationsLen=0;for(var i=0,len=_decorations.length;i<len;i++){var d=_decorations[i];if(d.options.className){decorations[decorationsLen++]=d;}}// Sort decorations for consistent render output
decorations=decorations.sort(function(a,b){if(a.options.zIndex<b.options.zIndex){return-1;}if(a.options.zIndex>b.options.zIndex){return 1;}var aClassName=a.options.className;var bClassName=b.options.className;if(aClassName<bClassName){return-1;}if(aClassName>bClassName){return 1;}return core_range/* Range.compareRangesUsingStarts */.e.compareRangesUsingStarts(a.range,b.range);});var visibleStartLineNumber=ctx.visibleRange.startLineNumber;var visibleEndLineNumber=ctx.visibleRange.endLineNumber;var output=[];for(var lineNumber=visibleStartLineNumber;lineNumber<=visibleEndLineNumber;lineNumber++){var lineIndex=lineNumber-visibleStartLineNumber;output[lineIndex]='';}// Render first whole line decorations and then regular decorations
this._renderWholeLineDecorations(ctx,decorations,output);this._renderNormalDecorations(ctx,decorations,output);this._renderResult=output;}},{key:"_renderWholeLineDecorations",value:function _renderWholeLineDecorations(ctx,decorations,output){var lineHeight=String(this._lineHeight);var visibleStartLineNumber=ctx.visibleRange.startLineNumber;var visibleEndLineNumber=ctx.visibleRange.endLineNumber;for(var i=0,lenI=decorations.length;i<lenI;i++){var d=decorations[i];if(!d.options.isWholeLine){continue;}var decorationOutput='<div class="cdr '+d.options.className+'" style="left:0;width:100%;height:'+lineHeight+'px;"></div>';var startLineNumber=Math.max(d.range.startLineNumber,visibleStartLineNumber);var endLineNumber=Math.min(d.range.endLineNumber,visibleEndLineNumber);for(var j=startLineNumber;j<=endLineNumber;j++){var lineIndex=j-visibleStartLineNumber;output[lineIndex]+=decorationOutput;}}}},{key:"_renderNormalDecorations",value:function _renderNormalDecorations(ctx,decorations,output){var lineHeight=String(this._lineHeight);var visibleStartLineNumber=ctx.visibleRange.startLineNumber;var prevClassName=null;var prevShowIfCollapsed=false;var prevRange=null;for(var i=0,lenI=decorations.length;i<lenI;i++){var d=decorations[i];if(d.options.isWholeLine){continue;}var className=d.options.className;var showIfCollapsed=Boolean(d.options.showIfCollapsed);var range=d.range;if(showIfCollapsed&&range.endColumn===1&&range.endLineNumber!==range.startLineNumber){range=new core_range/* Range */.e(range.startLineNumber,range.startColumn,range.endLineNumber-1,this._context.model.getLineMaxColumn(range.endLineNumber-1));}if(prevClassName===className&&prevShowIfCollapsed===showIfCollapsed&&core_range/* Range.areIntersectingOrTouching */.e.areIntersectingOrTouching(prevRange,range)){// merge into previous decoration
prevRange=core_range/* Range.plusRange */.e.plusRange(prevRange,range);continue;}// flush previous decoration
if(prevClassName!==null){this._renderNormalDecoration(ctx,prevRange,prevClassName,prevShowIfCollapsed,lineHeight,visibleStartLineNumber,output);}prevClassName=className;prevShowIfCollapsed=showIfCollapsed;prevRange=range;}if(prevClassName!==null){this._renderNormalDecoration(ctx,prevRange,prevClassName,prevShowIfCollapsed,lineHeight,visibleStartLineNumber,output);}}},{key:"_renderNormalDecoration",value:function _renderNormalDecoration(ctx,range,className,showIfCollapsed,lineHeight,visibleStartLineNumber,output){var linesVisibleRanges=ctx.linesVisibleRangesForRange(range,/*TODO@Alex*/className==='findMatch');if(!linesVisibleRanges){return;}for(var j=0,lenJ=linesVisibleRanges.length;j<lenJ;j++){var lineVisibleRanges=linesVisibleRanges[j];if(lineVisibleRanges.outsideRenderedLine){continue;}var lineIndex=lineVisibleRanges.lineNumber-visibleStartLineNumber;if(showIfCollapsed&&lineVisibleRanges.ranges.length===1){var singleVisibleRange=lineVisibleRanges.ranges[0];if(singleVisibleRange.width<this._typicalHalfwidthCharacterWidth){// collapsed/very small range case => make the decoration visible by expanding its width
// expand its size on both sides (both to the left and to the right, keeping it centered)
var center=Math.round(singleVisibleRange.left+singleVisibleRange.width/2);var left=Math.max(0,Math.round(center-this._typicalHalfwidthCharacterWidth/2));lineVisibleRanges.ranges[0]=new view_renderingContext/* HorizontalRange */.yu(left,this._typicalHalfwidthCharacterWidth);}}for(var k=0,lenK=lineVisibleRanges.ranges.length;k<lenK;k++){var visibleRange=lineVisibleRanges.ranges[k];var decorationOutput='<div class="cdr '+className+'" style="left:'+String(visibleRange.left)+'px;width:'+String(visibleRange.width)+'px;height:'+lineHeight+'px;"></div>';output[lineIndex]+=decorationOutput;}}}},{key:"render",value:function render(startLineNumber,lineNumber){if(!this._renderResult){return'';}var lineIndex=lineNumber-startLineNumber;if(lineIndex<0||lineIndex>=this._renderResult.length){return'';}return this._renderResult[lineIndex];}}]);return DecorationsOverlay;}(dynamicViewOverlay/* DynamicViewOverlay */.i);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollableElement.js + 6 modules
var scrollableElement = __webpack_require__(90935);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/theme/common/colorRegistry.js
var colorRegistry = __webpack_require__(25530);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/editorScrollbar/editorScrollbar.js
function editorScrollbar_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){editorScrollbar_typeof=function _typeof(obj){return typeof obj;};}else{editorScrollbar_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return editorScrollbar_typeof(obj);}function editorScrollbar_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function editorScrollbar_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function editorScrollbar_createClass(Constructor,protoProps,staticProps){if(protoProps)editorScrollbar_defineProperties(Constructor.prototype,protoProps);if(staticProps)editorScrollbar_defineProperties(Constructor,staticProps);return Constructor;}function editorScrollbar_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){editorScrollbar_get=Reflect.get;}else{editorScrollbar_get=function _get(target,property,receiver){var base=editorScrollbar_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return editorScrollbar_get(target,property,receiver||target);}function editorScrollbar_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=editorScrollbar_getPrototypeOf(object);if(object===null)break;}return object;}function editorScrollbar_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)editorScrollbar_setPrototypeOf(subClass,superClass);}function editorScrollbar_setPrototypeOf(o,p){editorScrollbar_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return editorScrollbar_setPrototypeOf(o,p);}function editorScrollbar_createSuper(Derived){var hasNativeReflectConstruct=editorScrollbar_isNativeReflectConstruct();return function _createSuperInternal(){var Super=editorScrollbar_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=editorScrollbar_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return editorScrollbar_possibleConstructorReturn(this,result);};}function editorScrollbar_possibleConstructorReturn(self,call){if(call&&(editorScrollbar_typeof(call)==="object"||typeof call==="function")){return call;}return editorScrollbar_assertThisInitialized(self);}function editorScrollbar_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function editorScrollbar_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function editorScrollbar_getPrototypeOf(o){editorScrollbar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return editorScrollbar_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var EditorScrollbar=/*#__PURE__*/function(_ViewPart){editorScrollbar_inherits(EditorScrollbar,_ViewPart);var _super=editorScrollbar_createSuper(EditorScrollbar);function EditorScrollbar(context,linesContent,viewDomNode,overflowGuardDomNode){var _this;editorScrollbar_classCallCheck(this,EditorScrollbar);_this=_super.call(this,context);var options=_this._context.configuration.options;var scrollbar=options.get(92/* scrollbar */);var mouseWheelScrollSensitivity=options.get(67/* mouseWheelScrollSensitivity */);var fastScrollSensitivity=options.get(34/* fastScrollSensitivity */);var scrollPredominantAxis=options.get(95/* scrollPredominantAxis */);var scrollbarOptions={listenOnDomNode:viewDomNode.domNode,className:'editor-scrollable'+' '+(0,themeService/* getThemeTypeSelector */.m6)(context.theme.type),useShadows:false,lazyRender:true,vertical:scrollbar.vertical,horizontal:scrollbar.horizontal,verticalHasArrows:scrollbar.verticalHasArrows,horizontalHasArrows:scrollbar.horizontalHasArrows,verticalScrollbarSize:scrollbar.verticalScrollbarSize,verticalSliderSize:scrollbar.verticalSliderSize,horizontalScrollbarSize:scrollbar.horizontalScrollbarSize,horizontalSliderSize:scrollbar.horizontalSliderSize,handleMouseWheel:scrollbar.handleMouseWheel,alwaysConsumeMouseWheel:scrollbar.alwaysConsumeMouseWheel,arrowSize:scrollbar.arrowSize,mouseWheelScrollSensitivity:mouseWheelScrollSensitivity,fastScrollSensitivity:fastScrollSensitivity,scrollPredominantAxis:scrollPredominantAxis,scrollByPage:scrollbar.scrollByPage};_this.scrollbar=_this._register(new scrollableElement/* SmoothScrollableElement */.$Z(linesContent.domNode,scrollbarOptions,_this._context.viewLayout.getScrollable()));viewPart/* PartFingerprints.write */.K.write(_this.scrollbar.getDomNode(),5/* ScrollableElement */);_this.scrollbarDomNode=(0,fastDomNode/* createFastDomNode */.X)(_this.scrollbar.getDomNode());_this.scrollbarDomNode.setPosition('absolute');_this._setLayout();// When having a zone widget that calls .focus() on one of its dom elements,
// the browser will try desperately to reveal that dom node, unexpectedly
// changing the .scrollTop of this.linesContent
var onBrowserDesperateReveal=function onBrowserDesperateReveal(domNode,lookAtScrollTop,lookAtScrollLeft){var newScrollPosition={};if(lookAtScrollTop){var deltaTop=domNode.scrollTop;if(deltaTop){newScrollPosition.scrollTop=_this._context.viewLayout.getCurrentScrollTop()+deltaTop;domNode.scrollTop=0;}}if(lookAtScrollLeft){var deltaLeft=domNode.scrollLeft;if(deltaLeft){newScrollPosition.scrollLeft=_this._context.viewLayout.getCurrentScrollLeft()+deltaLeft;domNode.scrollLeft=0;}}_this._context.model.setScrollPosition(newScrollPosition,1/* Immediate */);};// I've seen this happen both on the view dom node & on the lines content dom node.
_this._register(dom.addDisposableListener(viewDomNode.domNode,'scroll',function(e){return onBrowserDesperateReveal(viewDomNode.domNode,true,true);}));_this._register(dom.addDisposableListener(linesContent.domNode,'scroll',function(e){return onBrowserDesperateReveal(linesContent.domNode,true,false);}));_this._register(dom.addDisposableListener(overflowGuardDomNode.domNode,'scroll',function(e){return onBrowserDesperateReveal(overflowGuardDomNode.domNode,true,false);}));_this._register(dom.addDisposableListener(_this.scrollbarDomNode.domNode,'scroll',function(e){return onBrowserDesperateReveal(_this.scrollbarDomNode.domNode,true,false);}));return _this;}editorScrollbar_createClass(EditorScrollbar,[{key:"dispose",value:function dispose(){editorScrollbar_get(editorScrollbar_getPrototypeOf(EditorScrollbar.prototype),"dispose",this).call(this);}},{key:"_setLayout",value:function _setLayout(){var options=this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);this.scrollbarDomNode.setLeft(layoutInfo.contentLeft);var minimap=options.get(65/* minimap */);var side=minimap.side;if(side==='right'){this.scrollbarDomNode.setWidth(layoutInfo.contentWidth+layoutInfo.minimap.minimapWidth);}else{this.scrollbarDomNode.setWidth(layoutInfo.contentWidth);}this.scrollbarDomNode.setHeight(layoutInfo.height);}},{key:"getOverviewRulerLayoutInfo",value:function getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo();}},{key:"getDomNode",value:function getDomNode(){return this.scrollbarDomNode;}},{key:"delegateVerticalScrollbarMouseDown",value:function delegateVerticalScrollbarMouseDown(browserEvent){this.scrollbar.delegateVerticalScrollbarMouseDown(browserEvent);}// --- begin event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){if(e.hasChanged(92/* scrollbar */)||e.hasChanged(67/* mouseWheelScrollSensitivity */)||e.hasChanged(34/* fastScrollSensitivity */)){var options=this._context.configuration.options;var scrollbar=options.get(92/* scrollbar */);var mouseWheelScrollSensitivity=options.get(67/* mouseWheelScrollSensitivity */);var fastScrollSensitivity=options.get(34/* fastScrollSensitivity */);var scrollPredominantAxis=options.get(95/* scrollPredominantAxis */);var newOpts={vertical:scrollbar.vertical,horizontal:scrollbar.horizontal,verticalScrollbarSize:scrollbar.verticalScrollbarSize,horizontalScrollbarSize:scrollbar.horizontalScrollbarSize,scrollByPage:scrollbar.scrollByPage,handleMouseWheel:scrollbar.handleMouseWheel,mouseWheelScrollSensitivity:mouseWheelScrollSensitivity,fastScrollSensitivity:fastScrollSensitivity,scrollPredominantAxis:scrollPredominantAxis};this.scrollbar.updateOptions(newOpts);}if(e.hasChanged(131/* layoutInfo */)){this._setLayout();}return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return true;}},{key:"onThemeChanged",value:function onThemeChanged(e){this.scrollbar.updateClassName('editor-scrollable'+' '+(0,themeService/* getThemeTypeSelector */.m6)(this._context.theme.type));return true;}// --- end event handlers
},{key:"prepareRender",value:function prepareRender(ctx){// Nothing to do
}},{key:"render",value:function render(ctx){this.scrollbar.renderNow();}}]);return EditorScrollbar;}(viewPart/* ViewPart */.E);(0,themeService/* registerThemingParticipant */.Ic)(function(theme,collector){// Scrollbars
var scrollbarShadowColor=theme.getColor(colorRegistry/* scrollbarShadow */._wn);if(scrollbarShadowColor){collector.addRule("\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tbox-shadow: ".concat(scrollbarShadowColor," 0 6px 6px -6px inset;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tbox-shadow: ").concat(scrollbarShadowColor," 6px 0 6px -6px inset;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\tbox-shadow: ").concat(scrollbarShadowColor," 6px 6px 6px -6px inset;\n\t\t\t}\n\t\t"));}var scrollbarSliderBackgroundColor=theme.getColor(colorRegistry/* scrollbarSliderBackground */.etL);if(scrollbarSliderBackgroundColor){collector.addRule("\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\tbackground: ".concat(scrollbarSliderBackgroundColor,";\n\t\t\t}\n\t\t"));}var scrollbarSliderHoverBackgroundColor=theme.getColor(colorRegistry/* scrollbarSliderHoverBackground */.ABB);if(scrollbarSliderHoverBackgroundColor){collector.addRule("\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\tbackground: ".concat(scrollbarSliderHoverBackgroundColor,";\n\t\t\t}\n\t\t"));}var scrollbarSliderActiveBackgroundColor=theme.getColor(colorRegistry/* scrollbarSliderActiveBackground */.ynu);if(scrollbarSliderActiveBackgroundColor){collector.addRule("\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\tbackground: ".concat(scrollbarSliderActiveBackgroundColor,";\n\t\t\t}\n\t\t"));}});
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/glyphMargin/glyphMargin.js
function glyphMargin_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){glyphMargin_typeof=function _typeof(obj){return typeof obj;};}else{glyphMargin_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return glyphMargin_typeof(obj);}function glyphMargin_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){glyphMargin_get=Reflect.get;}else{glyphMargin_get=function _get(target,property,receiver){var base=glyphMargin_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return glyphMargin_get(target,property,receiver||target);}function glyphMargin_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=glyphMargin_getPrototypeOf(object);if(object===null)break;}return object;}function glyphMargin_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function glyphMargin_createClass(Constructor,protoProps,staticProps){if(protoProps)glyphMargin_defineProperties(Constructor.prototype,protoProps);if(staticProps)glyphMargin_defineProperties(Constructor,staticProps);return Constructor;}function glyphMargin_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)glyphMargin_setPrototypeOf(subClass,superClass);}function glyphMargin_setPrototypeOf(o,p){glyphMargin_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return glyphMargin_setPrototypeOf(o,p);}function glyphMargin_createSuper(Derived){var hasNativeReflectConstruct=glyphMargin_isNativeReflectConstruct();return function _createSuperInternal(){var Super=glyphMargin_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=glyphMargin_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return glyphMargin_possibleConstructorReturn(this,result);};}function glyphMargin_possibleConstructorReturn(self,call){if(call&&(glyphMargin_typeof(call)==="object"||typeof call==="function")){return call;}return glyphMargin_assertThisInitialized(self);}function glyphMargin_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function glyphMargin_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function glyphMargin_getPrototypeOf(o){glyphMargin_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return glyphMargin_getPrototypeOf(o);}function glyphMargin_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var DecorationToRender=function DecorationToRender(startLineNumber,endLineNumber,className){glyphMargin_classCallCheck(this,DecorationToRender);this._decorationToRenderBrand=undefined;this.startLineNumber=+startLineNumber;this.endLineNumber=+endLineNumber;this.className=String(className);};var DedupOverlay=/*#__PURE__*/function(_DynamicViewOverlay){glyphMargin_inherits(DedupOverlay,_DynamicViewOverlay);var _super=glyphMargin_createSuper(DedupOverlay);function DedupOverlay(){glyphMargin_classCallCheck(this,DedupOverlay);return _super.apply(this,arguments);}glyphMargin_createClass(DedupOverlay,[{key:"_render",value:function _render(visibleStartLineNumber,visibleEndLineNumber,decorations){var output=[];for(var lineNumber=visibleStartLineNumber;lineNumber<=visibleEndLineNumber;lineNumber++){var lineIndex=lineNumber-visibleStartLineNumber;output[lineIndex]=[];}if(decorations.length===0){return output;}decorations.sort(function(a,b){if(a.className===b.className){if(a.startLineNumber===b.startLineNumber){return a.endLineNumber-b.endLineNumber;}return a.startLineNumber-b.startLineNumber;}return a.className<b.className?-1:1;});var prevClassName=null;var prevEndLineIndex=0;for(var i=0,len=decorations.length;i<len;i++){var d=decorations[i];var className=d.className;var startLineIndex=Math.max(d.startLineNumber,visibleStartLineNumber)-visibleStartLineNumber;var endLineIndex=Math.min(d.endLineNumber,visibleEndLineNumber)-visibleStartLineNumber;if(prevClassName===className){startLineIndex=Math.max(prevEndLineIndex+1,startLineIndex);prevEndLineIndex=Math.max(prevEndLineIndex,endLineIndex);}else{prevClassName=className;prevEndLineIndex=endLineIndex;}for(var _i=startLineIndex;_i<=prevEndLineIndex;_i++){output[_i].push(prevClassName);}}return output;}}]);return DedupOverlay;}(dynamicViewOverlay/* DynamicViewOverlay */.i);var GlyphMarginOverlay=/*#__PURE__*/function(_DedupOverlay){glyphMargin_inherits(GlyphMarginOverlay,_DedupOverlay);var _super2=glyphMargin_createSuper(GlyphMarginOverlay);function GlyphMarginOverlay(context){var _this;glyphMargin_classCallCheck(this,GlyphMarginOverlay);_this=_super2.call(this);_this._context=context;var options=_this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);_this._lineHeight=options.get(59/* lineHeight */);_this._glyphMargin=options.get(50/* glyphMargin */);_this._glyphMarginLeft=layoutInfo.glyphMarginLeft;_this._glyphMarginWidth=layoutInfo.glyphMarginWidth;_this._renderResult=null;_this._context.addEventHandler(glyphMargin_assertThisInitialized(_this));return _this;}glyphMargin_createClass(GlyphMarginOverlay,[{key:"dispose",value:function dispose(){this._context.removeEventHandler(this);this._renderResult=null;glyphMargin_get(glyphMargin_getPrototypeOf(GlyphMarginOverlay.prototype),"dispose",this).call(this);}// --- begin event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);this._lineHeight=options.get(59/* lineHeight */);this._glyphMargin=options.get(50/* glyphMargin */);this._glyphMarginLeft=layoutInfo.glyphMarginLeft;this._glyphMarginWidth=layoutInfo.glyphMarginWidth;return true;}},{key:"onDecorationsChanged",value:function onDecorationsChanged(e){return true;}},{key:"onFlushed",value:function onFlushed(e){return true;}},{key:"onLinesChanged",value:function onLinesChanged(e){return true;}},{key:"onLinesDeleted",value:function onLinesDeleted(e){return true;}},{key:"onLinesInserted",value:function onLinesInserted(e){return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return e.scrollTopChanged;}},{key:"onZonesChanged",value:function onZonesChanged(e){return true;}// --- end event handlers
},{key:"_getDecorations",value:function _getDecorations(ctx){var decorations=ctx.getDecorationsInViewport();var r=[];var rLen=0;for(var i=0,len=decorations.length;i<len;i++){var d=decorations[i];var glyphMarginClassName=d.options.glyphMarginClassName;if(glyphMarginClassName){r[rLen++]=new DecorationToRender(d.range.startLineNumber,d.range.endLineNumber,glyphMarginClassName);}}return r;}},{key:"prepareRender",value:function prepareRender(ctx){if(!this._glyphMargin){this._renderResult=null;return;}var visibleStartLineNumber=ctx.visibleRange.startLineNumber;var visibleEndLineNumber=ctx.visibleRange.endLineNumber;var toRender=this._render(visibleStartLineNumber,visibleEndLineNumber,this._getDecorations(ctx));var lineHeight=this._lineHeight.toString();var left=this._glyphMarginLeft.toString();var width=this._glyphMarginWidth.toString();var common='" style="left:'+left+'px;width:'+width+'px'+';height:'+lineHeight+'px;"></div>';var output=[];for(var lineNumber=visibleStartLineNumber;lineNumber<=visibleEndLineNumber;lineNumber++){var lineIndex=lineNumber-visibleStartLineNumber;var classNames=toRender[lineIndex];if(classNames.length===0){output[lineIndex]='';}else{output[lineIndex]='<div class="cgmr codicon '+classNames.join(' ')+common;}}this._renderResult=output;}},{key:"render",value:function render(startLineNumber,lineNumber){if(!this._renderResult){return'';}var lineIndex=lineNumber-startLineNumber;if(lineIndex<0||lineIndex>=this._renderResult.length){return'';}return this._renderResult[lineIndex];}}]);return GlyphMarginOverlay;}(DedupOverlay);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/types.js
var types = __webpack_require__(918);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/guidesTextModelPart.js + 1 modules
var guidesTextModelPart = __webpack_require__(64263);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/textModelGuides.js
var textModelGuides = __webpack_require__(35933);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/indentGuides/indentGuides.js
function indentGuides_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){indentGuides_typeof=function _typeof(obj){return typeof obj;};}else{indentGuides_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return indentGuides_typeof(obj);}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||indentGuides_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return indentGuides_arrayLikeToArray(arr);}function indentGuides_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=indentGuides_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function indentGuides_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return indentGuides_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return indentGuides_arrayLikeToArray(o,minLen);}function indentGuides_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function indentGuides_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function indentGuides_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function indentGuides_createClass(Constructor,protoProps,staticProps){if(protoProps)indentGuides_defineProperties(Constructor.prototype,protoProps);if(staticProps)indentGuides_defineProperties(Constructor,staticProps);return Constructor;}function indentGuides_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){indentGuides_get=Reflect.get;}else{indentGuides_get=function _get(target,property,receiver){var base=indentGuides_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return indentGuides_get(target,property,receiver||target);}function indentGuides_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=indentGuides_getPrototypeOf(object);if(object===null)break;}return object;}function indentGuides_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)indentGuides_setPrototypeOf(subClass,superClass);}function indentGuides_setPrototypeOf(o,p){indentGuides_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return indentGuides_setPrototypeOf(o,p);}function indentGuides_createSuper(Derived){var hasNativeReflectConstruct=indentGuides_isNativeReflectConstruct();return function _createSuperInternal(){var Super=indentGuides_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=indentGuides_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return indentGuides_possibleConstructorReturn(this,result);};}function indentGuides_possibleConstructorReturn(self,call){if(call&&(indentGuides_typeof(call)==="object"||typeof call==="function")){return call;}return indentGuides_assertThisInitialized(self);}function indentGuides_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function indentGuides_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function indentGuides_getPrototypeOf(o){indentGuides_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return indentGuides_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var IndentGuidesOverlay=/*#__PURE__*/function(_DynamicViewOverlay){indentGuides_inherits(IndentGuidesOverlay,_DynamicViewOverlay);var _super=indentGuides_createSuper(IndentGuidesOverlay);function IndentGuidesOverlay(context){var _this;indentGuides_classCallCheck(this,IndentGuidesOverlay);_this=_super.call(this);_this._context=context;_this._primaryPosition=null;var options=_this._context.configuration.options;var wrappingInfo=options.get(132/* wrappingInfo */);var fontInfo=options.get(44/* fontInfo */);_this._lineHeight=options.get(59/* lineHeight */);_this._spaceWidth=fontInfo.spaceWidth;_this._maxIndentLeft=wrappingInfo.wrappingColumn===-1?-1:wrappingInfo.wrappingColumn*fontInfo.typicalHalfwidthCharacterWidth;_this._bracketPairGuideOptions=options.get(13/* guides */);_this._renderResult=null;_this._context.addEventHandler(indentGuides_assertThisInitialized(_this));return _this;}indentGuides_createClass(IndentGuidesOverlay,[{key:"dispose",value:function dispose(){this._context.removeEventHandler(this);this._renderResult=null;indentGuides_get(indentGuides_getPrototypeOf(IndentGuidesOverlay.prototype),"dispose",this).call(this);}// --- begin event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;var wrappingInfo=options.get(132/* wrappingInfo */);var fontInfo=options.get(44/* fontInfo */);this._lineHeight=options.get(59/* lineHeight */);this._spaceWidth=fontInfo.spaceWidth;this._maxIndentLeft=wrappingInfo.wrappingColumn===-1?-1:wrappingInfo.wrappingColumn*fontInfo.typicalHalfwidthCharacterWidth;this._bracketPairGuideOptions=options.get(13/* guides */);return true;}},{key:"onCursorStateChanged",value:function onCursorStateChanged(e){var _a;var selection=e.selections[0];var newPosition=selection.getPosition();if(!((_a=this._primaryPosition)===null||_a===void 0?void 0:_a.equals(newPosition))){this._primaryPosition=newPosition;return true;}return false;}},{key:"onDecorationsChanged",value:function onDecorationsChanged(e){// true for inline decorations
return true;}},{key:"onFlushed",value:function onFlushed(e){return true;}},{key:"onLinesChanged",value:function onLinesChanged(e){return true;}},{key:"onLinesDeleted",value:function onLinesDeleted(e){return true;}},{key:"onLinesInserted",value:function onLinesInserted(e){return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return e.scrollTopChanged;// || e.scrollWidthChanged;
}},{key:"onZonesChanged",value:function onZonesChanged(e){return true;}},{key:"onLanguageConfigurationChanged",value:function onLanguageConfigurationChanged(e){return true;}// --- end event handlers
},{key:"prepareRender",value:function prepareRender(ctx){var _a,_b,_c,_d;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===false){this._renderResult=null;return;}var visibleStartLineNumber=ctx.visibleRange.startLineNumber;var visibleEndLineNumber=ctx.visibleRange.endLineNumber;var scrollWidth=ctx.scrollWidth;var lineHeight=this._lineHeight;var activeCursorPosition=this._primaryPosition;var indents=this.getGuidesByLine(visibleStartLineNumber,visibleEndLineNumber,activeCursorPosition);var output=[];for(var lineNumber=visibleStartLineNumber;lineNumber<=visibleEndLineNumber;lineNumber++){var lineIndex=lineNumber-visibleStartLineNumber;var indent=indents[lineIndex];var result='';var leftOffset=(_b=(_a=ctx.visibleRangeForPosition(new core_position/* Position */.L(lineNumber,1)))===null||_a===void 0?void 0:_a.left)!==null&&_b!==void 0?_b:0;var _iterator=indentGuides_createForOfIteratorHelper(indent),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var guide=_step.value;var left=leftOffset+(guide.visibleColumn-1)*this._spaceWidth;if(left>scrollWidth||this._maxIndentLeft>0&&left>this._maxIndentLeft){break;}var className=guide.horizontalLine?guide.horizontalLine.top?'horizontal-top':'horizontal-bottom':'vertical';var width=guide.horizontalLine?((_d=(_c=ctx.visibleRangeForPosition(new core_position/* Position */.L(lineNumber,guide.horizontalLine.endColumn)))===null||_c===void 0?void 0:_c.left)!==null&&_d!==void 0?_d:left+this._spaceWidth)-left:this._spaceWidth;result+="<div class=\"core-guide ".concat(guide.className," ").concat(className,"\" style=\"left:").concat(left,"px;height:").concat(lineHeight,"px;width:").concat(width,"px\"></div>");}}catch(err){_iterator.e(err);}finally{_iterator.f();}output[lineIndex]=result;}this._renderResult=output;}},{key:"getGuidesByLine",value:function getGuidesByLine(visibleStartLineNumber,visibleEndLineNumber,activeCursorPosition){var bracketGuides=this._bracketPairGuideOptions.bracketPairs!==false?this._context.model.getBracketGuidesInRangeByLine(visibleStartLineNumber,visibleEndLineNumber,activeCursorPosition,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===true?textModelGuides/* HorizontalGuidesState.Enabled */.s6.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==='active'?textModelGuides/* HorizontalGuidesState.EnabledForActive */.s6.EnabledForActive:textModelGuides/* HorizontalGuidesState.Disabled */.s6.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===true}):null;var indentGuides=this._bracketPairGuideOptions.indentation?this._context.model.getLinesIndentGuides(visibleStartLineNumber,visibleEndLineNumber):null;var activeIndentStartLineNumber=0;var activeIndentEndLineNumber=0;var activeIndentLevel=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&activeCursorPosition){var activeIndentInfo=this._context.model.getActiveIndentGuide(activeCursorPosition.lineNumber,visibleStartLineNumber,visibleEndLineNumber);activeIndentStartLineNumber=activeIndentInfo.startLineNumber;activeIndentEndLineNumber=activeIndentInfo.endLineNumber;activeIndentLevel=activeIndentInfo.indent;}var _this$_context$model$=this._context.model.getTextModelOptions(),indentSize=_this$_context$model$.indentSize;var result=[];for(var lineNumber=visibleStartLineNumber;lineNumber<=visibleEndLineNumber;lineNumber++){var lineGuides=new Array();result.push(lineGuides);var bracketGuidesInLine=bracketGuides?bracketGuides[lineNumber-visibleStartLineNumber]:[];var bracketGuidesInLineQueue=new arrays/* ArrayQueue */.H9(bracketGuidesInLine);var indentGuidesInLine=indentGuides?indentGuides[lineNumber-visibleStartLineNumber]:[];var _loop=function _loop(indentLvl){var indentGuide=(indentLvl-1)*indentSize+1;var isActive=// Disable active indent guide if there are bracket guides.
bracketGuidesInLine.length===0&&activeIndentStartLineNumber<=lineNumber&&lineNumber<=activeIndentEndLineNumber&&indentLvl===activeIndentLevel;lineGuides.push.apply(lineGuides,_toConsumableArray(bracketGuidesInLineQueue.takeWhile(function(g){return g.visibleColumn<indentGuide;})||[]));var peeked=bracketGuidesInLineQueue.peek();if(!peeked||peeked.visibleColumn!==indentGuide||peeked.horizontalLine){lineGuides.push(new textModelGuides/* IndentGuide */.UO(indentGuide,isActive?'core-guide-indent-active':'core-guide-indent',null));}};for(var indentLvl=1;indentLvl<=indentGuidesInLine;indentLvl++){_loop(indentLvl);}lineGuides.push.apply(lineGuides,_toConsumableArray(bracketGuidesInLineQueue.takeWhile(function(g){return true;})||[]));}return result;}},{key:"render",value:function render(startLineNumber,lineNumber){if(!this._renderResult){return'';}var lineIndex=lineNumber-startLineNumber;if(lineIndex<0||lineIndex>=this._renderResult.length){return'';}return this._renderResult[lineIndex];}}]);return IndentGuidesOverlay;}(dynamicViewOverlay/* DynamicViewOverlay */.i);function transparentToUndefined(color){if(color&&color.isTransparent()){return undefined;}return color;}(0,themeService/* registerThemingParticipant */.Ic)(function(theme,collector){var editorIndentGuidesColor=theme.getColor(editorColorRegistry/* editorIndentGuides */.tR);if(editorIndentGuidesColor){collector.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ".concat(editorIndentGuidesColor," inset; }"));}var editorActiveIndentGuidesColor=theme.getColor(editorColorRegistry/* editorActiveIndentGuides */.Ym)||editorIndentGuidesColor;if(editorActiveIndentGuidesColor){collector.addRule(".monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ".concat(editorActiveIndentGuidesColor," inset; }"));}var colors=[{bracketColor:editorColorRegistry/* editorBracketHighlightingForeground1 */.zJ,guideColor:editorColorRegistry/* editorBracketPairGuideBackground1 */.oV,guideColorActive:editorColorRegistry/* editorBracketPairGuideActiveBackground1 */.Qb},{bracketColor:editorColorRegistry/* editorBracketHighlightingForeground2 */.Vs,guideColor:editorColorRegistry/* editorBracketPairGuideBackground2 */.m$,guideColorActive:editorColorRegistry/* editorBracketPairGuideActiveBackground2 */.m3},{bracketColor:editorColorRegistry/* editorBracketHighlightingForeground3 */.CE,guideColor:editorColorRegistry/* editorBracketPairGuideBackground3 */.DS,guideColorActive:editorColorRegistry/* editorBracketPairGuideActiveBackground3 */.To},{bracketColor:editorColorRegistry/* editorBracketHighlightingForeground4 */.UP,guideColor:editorColorRegistry/* editorBracketPairGuideBackground4 */.lS,guideColorActive:editorColorRegistry/* editorBracketPairGuideActiveBackground4 */.L7},{bracketColor:editorColorRegistry/* editorBracketHighlightingForeground5 */.r0,guideColor:editorColorRegistry/* editorBracketPairGuideBackground5 */.Jn,guideColorActive:editorColorRegistry/* editorBracketPairGuideActiveBackground5 */.HV},{bracketColor:editorColorRegistry/* editorBracketHighlightingForeground6 */.m1,guideColor:editorColorRegistry/* editorBracketPairGuideBackground6 */.YF,guideColorActive:editorColorRegistry/* editorBracketPairGuideActiveBackground6 */.f9}];var colorProvider=new guidesTextModelPart/* BracketPairGuidesClassNames */.W();var colorValues=colors.map(function(c){var _a,_b;var bracketColor=theme.getColor(c.bracketColor);var guideColor=theme.getColor(c.guideColor);var guideColorActive=theme.getColor(c.guideColorActive);var effectiveGuideColor=transparentToUndefined((_a=transparentToUndefined(guideColor))!==null&&_a!==void 0?_a:bracketColor===null||bracketColor===void 0?void 0:bracketColor.transparent(0.3));var effectiveGuideColorActive=transparentToUndefined((_b=transparentToUndefined(guideColorActive))!==null&&_b!==void 0?_b:bracketColor);if(!effectiveGuideColor||!effectiveGuideColorActive){return undefined;}return{guideColor:effectiveGuideColor,guideColorActive:effectiveGuideColorActive};}).filter(types/* isDefined */.$K);if(colorValues.length>0){for(var level=0;level<30;level++){var _colors=colorValues[level%colorValues.length];collector.addRule(".monaco-editor .".concat(colorProvider.getInlineClassNameOfLevel(level).replace(/ /g,'.')," { --guide-color: ").concat(_colors.guideColor,"; --guide-color-active: ").concat(_colors.guideColorActive,"; }"));}collector.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }");collector.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }");collector.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }");collector.addRule(".monaco-editor .vertical.".concat(colorProvider.activeClassName," { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }"));collector.addRule(".monaco-editor .horizontal-top.".concat(colorProvider.activeClassName," { border-top: 1px solid var(--guide-color-active); }"));collector.addRule(".monaco-editor .horizontal-bottom.".concat(colorProvider.activeClassName," { border-bottom: 1px solid var(--guide-color-active); }"));}});
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lineNumbers/lineNumbers.js
var lineNumbers = __webpack_require__(44739);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/async.js
var common_async = __webpack_require__(88494);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLine.js + 1 modules
var viewLine = __webpack_require__(23950);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/browser/ui/mouseCursor/mouseCursor.js
var mouseCursor = __webpack_require__(78366);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLines.js
function viewLines_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){viewLines_typeof=function _typeof(obj){return typeof obj;};}else{viewLines_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return viewLines_typeof(obj);}function viewLines_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=viewLines_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function viewLines_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return viewLines_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return viewLines_arrayLikeToArray(o,minLen);}function viewLines_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function viewLines_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){viewLines_get=Reflect.get;}else{viewLines_get=function _get(target,property,receiver){var base=viewLines_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return viewLines_get(target,property,receiver||target);}function viewLines_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=viewLines_getPrototypeOf(object);if(object===null)break;}return object;}function viewLines_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)viewLines_setPrototypeOf(subClass,superClass);}function viewLines_setPrototypeOf(o,p){viewLines_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return viewLines_setPrototypeOf(o,p);}function viewLines_createSuper(Derived){var hasNativeReflectConstruct=viewLines_isNativeReflectConstruct();return function _createSuperInternal(){var Super=viewLines_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=viewLines_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return viewLines_possibleConstructorReturn(this,result);};}function viewLines_possibleConstructorReturn(self,call){if(call&&(viewLines_typeof(call)==="object"||typeof call==="function")){return call;}return viewLines_assertThisInitialized(self);}function viewLines_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function viewLines_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function viewLines_getPrototypeOf(o){viewLines_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return viewLines_getPrototypeOf(o);}function viewLines_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function viewLines_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function viewLines_createClass(Constructor,protoProps,staticProps){if(protoProps)viewLines_defineProperties(Constructor.prototype,protoProps);if(staticProps)viewLines_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var LastRenderedData=/*#__PURE__*/function(){function LastRenderedData(){viewLines_classCallCheck(this,LastRenderedData);this._currentVisibleRange=new core_range/* Range */.e(1,1,1,1);}viewLines_createClass(LastRenderedData,[{key:"getCurrentVisibleRange",value:function getCurrentVisibleRange(){return this._currentVisibleRange;}},{key:"setCurrentVisibleRange",value:function setCurrentVisibleRange(currentVisibleRange){this._currentVisibleRange=currentVisibleRange;}}]);return LastRenderedData;}();var HorizontalRevealRangeRequest=function HorizontalRevealRangeRequest(minimalReveal,lineNumber,startColumn,endColumn,startScrollTop,stopScrollTop,scrollType){viewLines_classCallCheck(this,HorizontalRevealRangeRequest);this.minimalReveal=minimalReveal;this.lineNumber=lineNumber;this.startColumn=startColumn;this.endColumn=endColumn;this.startScrollTop=startScrollTop;this.stopScrollTop=stopScrollTop;this.scrollType=scrollType;this.type='range';this.minLineNumber=lineNumber;this.maxLineNumber=lineNumber;};var HorizontalRevealSelectionsRequest=function HorizontalRevealSelectionsRequest(minimalReveal,selections,startScrollTop,stopScrollTop,scrollType){viewLines_classCallCheck(this,HorizontalRevealSelectionsRequest);this.minimalReveal=minimalReveal;this.selections=selections;this.startScrollTop=startScrollTop;this.stopScrollTop=stopScrollTop;this.scrollType=scrollType;this.type='selections';var minLineNumber=selections[0].startLineNumber;var maxLineNumber=selections[0].endLineNumber;for(var i=1,len=selections.length;i<len;i++){var selection=selections[i];minLineNumber=Math.min(minLineNumber,selection.startLineNumber);maxLineNumber=Math.max(maxLineNumber,selection.endLineNumber);}this.minLineNumber=minLineNumber;this.maxLineNumber=maxLineNumber;};var ViewLines=/*#__PURE__*/function(_ViewPart){viewLines_inherits(ViewLines,_ViewPart);var _super=viewLines_createSuper(ViewLines);function ViewLines(context,linesContent){var _this;viewLines_classCallCheck(this,ViewLines);_this=_super.call(this,context);_this._linesContent=linesContent;_this._textRangeRestingSpot=document.createElement('div');_this._visibleLines=new VisibleLinesCollection(viewLines_assertThisInitialized(_this));_this.domNode=_this._visibleLines.domNode;var conf=_this._context.configuration;var options=_this._context.configuration.options;var fontInfo=options.get(44/* fontInfo */);var wrappingInfo=options.get(132/* wrappingInfo */);var layoutInfo=options.get(131/* layoutInfo */);_this._lineHeight=options.get(59/* lineHeight */);_this._typicalHalfwidthCharacterWidth=fontInfo.typicalHalfwidthCharacterWidth;_this._isViewportWrapping=wrappingInfo.isViewportWrapping;_this._revealHorizontalRightPadding=options.get(89/* revealHorizontalRightPadding */);_this._horizontalScrollbarHeight=layoutInfo.horizontalScrollbarHeight;_this._cursorSurroundingLines=options.get(25/* cursorSurroundingLines */);_this._cursorSurroundingLinesStyle=options.get(26/* cursorSurroundingLinesStyle */);_this._canUseLayerHinting=!options.get(28/* disableLayerHinting */);_this._viewLineOptions=new viewLine/* ViewLineOptions */.ob(conf,_this._context.theme.type);viewPart/* PartFingerprints.write */.K.write(_this.domNode,7/* ViewLines */);_this.domNode.setClassName("view-lines ".concat(mouseCursor/* MOUSE_CURSOR_TEXT_CSS_CLASS_NAME */.S));(0,domFontInfo/* applyFontInfo */.N)(_this.domNode,fontInfo);// --- width & height
_this._maxLineWidth=0;_this._asyncUpdateLineWidths=new common_async/* RunOnceScheduler */.pY(function(){_this._updateLineWidthsSlow();},200);_this._asyncCheckMonospaceFontAssumptions=new common_async/* RunOnceScheduler */.pY(function(){_this._checkMonospaceFontAssumptions();},2000);_this._lastRenderedData=new LastRenderedData();_this._horizontalRevealRequest=null;return _this;}viewLines_createClass(ViewLines,[{key:"dispose",value:function dispose(){this._asyncUpdateLineWidths.dispose();this._asyncCheckMonospaceFontAssumptions.dispose();viewLines_get(viewLines_getPrototypeOf(ViewLines.prototype),"dispose",this).call(this);}},{key:"getDomNode",value:function getDomNode(){return this.domNode;}// ---- begin IVisibleLinesHost
},{key:"createVisibleLine",value:function createVisibleLine(){return new viewLine/* ViewLine */.Nt(this._viewLineOptions);}// ---- end IVisibleLinesHost
// ---- begin view event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);if(e.hasChanged(132/* wrappingInfo */)){this._maxLineWidth=0;}var options=this._context.configuration.options;var fontInfo=options.get(44/* fontInfo */);var wrappingInfo=options.get(132/* wrappingInfo */);var layoutInfo=options.get(131/* layoutInfo */);this._lineHeight=options.get(59/* lineHeight */);this._typicalHalfwidthCharacterWidth=fontInfo.typicalHalfwidthCharacterWidth;this._isViewportWrapping=wrappingInfo.isViewportWrapping;this._revealHorizontalRightPadding=options.get(89/* revealHorizontalRightPadding */);this._horizontalScrollbarHeight=layoutInfo.horizontalScrollbarHeight;this._cursorSurroundingLines=options.get(25/* cursorSurroundingLines */);this._cursorSurroundingLinesStyle=options.get(26/* cursorSurroundingLinesStyle */);this._canUseLayerHinting=!options.get(28/* disableLayerHinting */);(0,domFontInfo/* applyFontInfo */.N)(this.domNode,fontInfo);this._onOptionsMaybeChanged();if(e.hasChanged(131/* layoutInfo */)){this._maxLineWidth=0;}return true;}},{key:"_onOptionsMaybeChanged",value:function _onOptionsMaybeChanged(){var conf=this._context.configuration;var newViewLineOptions=new viewLine/* ViewLineOptions */.ob(conf,this._context.theme.type);if(!this._viewLineOptions.equals(newViewLineOptions)){this._viewLineOptions=newViewLineOptions;var startLineNumber=this._visibleLines.getStartLineNumber();var endLineNumber=this._visibleLines.getEndLineNumber();for(var lineNumber=startLineNumber;lineNumber<=endLineNumber;lineNumber++){var line=this._visibleLines.getVisibleLine(lineNumber);line.onOptionsChanged(this._viewLineOptions);}return true;}return false;}},{key:"onCursorStateChanged",value:function onCursorStateChanged(e){var rendStartLineNumber=this._visibleLines.getStartLineNumber();var rendEndLineNumber=this._visibleLines.getEndLineNumber();var r=false;for(var lineNumber=rendStartLineNumber;lineNumber<=rendEndLineNumber;lineNumber++){r=this._visibleLines.getVisibleLine(lineNumber).onSelectionChanged()||r;}return r;}},{key:"onDecorationsChanged",value:function onDecorationsChanged(e){if(true/*e.inlineDecorationsChanged*/){var rendStartLineNumber=this._visibleLines.getStartLineNumber();var rendEndLineNumber=this._visibleLines.getEndLineNumber();for(var lineNumber=rendStartLineNumber;lineNumber<=rendEndLineNumber;lineNumber++){this._visibleLines.getVisibleLine(lineNumber).onDecorationsChanged();}}return true;}},{key:"onFlushed",value:function onFlushed(e){var shouldRender=this._visibleLines.onFlushed(e);this._maxLineWidth=0;return shouldRender;}},{key:"onLinesChanged",value:function onLinesChanged(e){return this._visibleLines.onLinesChanged(e);}},{key:"onLinesDeleted",value:function onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e);}},{key:"onLinesInserted",value:function onLinesInserted(e){return this._visibleLines.onLinesInserted(e);}},{key:"onRevealRangeRequest",value:function onRevealRangeRequest(e){// Using the future viewport here in order to handle multiple
// incoming reveal range requests that might all desire to be animated
var desiredScrollTop=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(desiredScrollTop===-1){// marker to abort the reveal range request
return false;}// validate the new desired scroll top
var newScrollPosition=this._context.viewLayout.validateScrollPosition({scrollTop:desiredScrollTop});if(e.revealHorizontal){if(e.range&&e.range.startLineNumber!==e.range.endLineNumber){// Two or more lines? => scroll to base (That's how you see most of the two lines)
newScrollPosition={scrollTop:newScrollPosition.scrollTop,scrollLeft:0};}else if(e.range){// We don't necessarily know the horizontal offset of this range since the line might not be in the view...
this._horizontalRevealRequest=new HorizontalRevealRangeRequest(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),newScrollPosition.scrollTop,e.scrollType);}else if(e.selections&&e.selections.length>0){this._horizontalRevealRequest=new HorizontalRevealSelectionsRequest(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),newScrollPosition.scrollTop,e.scrollType);}}else{this._horizontalRevealRequest=null;}var scrollTopDelta=Math.abs(this._context.viewLayout.getCurrentScrollTop()-newScrollPosition.scrollTop);var scrollType=scrollTopDelta<=this._lineHeight?1/* Immediate */:e.scrollType;this._context.model.setScrollPosition(newScrollPosition,scrollType);return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged){// cancel any outstanding horizontal reveal request if someone else scrolls horizontally.
this._horizontalRevealRequest=null;}if(this._horizontalRevealRequest&&e.scrollTopChanged){var min=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);var max=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);if(e.scrollTop<min||e.scrollTop>max){// cancel any outstanding horizontal reveal request if someone else scrolls vertically.
this._horizontalRevealRequest=null;}}this.domNode.setWidth(e.scrollWidth);return this._visibleLines.onScrollChanged(e)||true;}},{key:"onTokensChanged",value:function onTokensChanged(e){return this._visibleLines.onTokensChanged(e);}},{key:"onZonesChanged",value:function onZonesChanged(e){this._context.model.setMaxLineWidth(this._maxLineWidth);return this._visibleLines.onZonesChanged(e);}},{key:"onThemeChanged",value:function onThemeChanged(e){return this._onOptionsMaybeChanged();}// ---- end view event handlers
// ----------- HELPERS FOR OTHERS
},{key:"getPositionFromDOMInfo",value:function getPositionFromDOMInfo(spanNode,offset){var viewLineDomNode=this._getViewLineDomNode(spanNode);if(viewLineDomNode===null){// Couldn't find view line node
return null;}var lineNumber=this._getLineNumberFor(viewLineDomNode);if(lineNumber===-1){// Couldn't find view line node
return null;}if(lineNumber<1||lineNumber>this._context.model.getLineCount()){// lineNumber is outside range
return null;}if(this._context.model.getLineMaxColumn(lineNumber)===1){// Line is empty
return new core_position/* Position */.L(lineNumber,1);}var rendStartLineNumber=this._visibleLines.getStartLineNumber();var rendEndLineNumber=this._visibleLines.getEndLineNumber();if(lineNumber<rendStartLineNumber||lineNumber>rendEndLineNumber){// Couldn't find line
return null;}var column=this._visibleLines.getVisibleLine(lineNumber).getColumnOfNodeOffset(lineNumber,spanNode,offset);var minColumn=this._context.model.getLineMinColumn(lineNumber);if(column<minColumn){column=minColumn;}return new core_position/* Position */.L(lineNumber,column);}},{key:"_getViewLineDomNode",value:function _getViewLineDomNode(node){while(node&&node.nodeType===1){if(node.className===viewLine/* ViewLine.CLASS_NAME */.Nt.CLASS_NAME){return node;}node=node.parentElement;}return null;}/**
     * @returns the line number of this view line dom node.
     */},{key:"_getLineNumberFor",value:function _getLineNumberFor(domNode){var startLineNumber=this._visibleLines.getStartLineNumber();var endLineNumber=this._visibleLines.getEndLineNumber();for(var lineNumber=startLineNumber;lineNumber<=endLineNumber;lineNumber++){var line=this._visibleLines.getVisibleLine(lineNumber);if(domNode===line.getDomNode()){return lineNumber;}}return-1;}},{key:"getLineWidth",value:function getLineWidth(lineNumber){var rendStartLineNumber=this._visibleLines.getStartLineNumber();var rendEndLineNumber=this._visibleLines.getEndLineNumber();if(lineNumber<rendStartLineNumber||lineNumber>rendEndLineNumber){// Couldn't find line
return-1;}return this._visibleLines.getVisibleLine(lineNumber).getWidth();}},{key:"linesVisibleRangesForRange",value:function linesVisibleRangesForRange(_range,includeNewLines){if(this.shouldRender()){// Cannot read from the DOM because it is dirty
// i.e. the model & the dom are out of sync, so I'd be reading something stale
return null;}var originalEndLineNumber=_range.endLineNumber;var range=core_range/* Range.intersectRanges */.e.intersectRanges(_range,this._lastRenderedData.getCurrentVisibleRange());if(!range){return null;}var visibleRanges=[],visibleRangesLen=0;var domReadingContext=new viewLine/* DomReadingContext */.ZE(this.domNode.domNode,this._textRangeRestingSpot);var nextLineModelLineNumber=0;if(includeNewLines){nextLineModelLineNumber=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new core_position/* Position */.L(range.startLineNumber,1)).lineNumber;}var rendStartLineNumber=this._visibleLines.getStartLineNumber();var rendEndLineNumber=this._visibleLines.getEndLineNumber();for(var lineNumber=range.startLineNumber;lineNumber<=range.endLineNumber;lineNumber++){if(lineNumber<rendStartLineNumber||lineNumber>rendEndLineNumber){continue;}var startColumn=lineNumber===range.startLineNumber?range.startColumn:1;var endColumn=lineNumber===range.endLineNumber?range.endColumn:this._context.model.getLineMaxColumn(lineNumber);var visibleRangesForLine=this._visibleLines.getVisibleLine(lineNumber).getVisibleRangesForRange(lineNumber,startColumn,endColumn,domReadingContext);if(!visibleRangesForLine){continue;}if(includeNewLines&&lineNumber<originalEndLineNumber){var currentLineModelLineNumber=nextLineModelLineNumber;nextLineModelLineNumber=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new core_position/* Position */.L(lineNumber+1,1)).lineNumber;if(currentLineModelLineNumber!==nextLineModelLineNumber){visibleRangesForLine.ranges[visibleRangesForLine.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth;}}visibleRanges[visibleRangesLen++]=new view_renderingContext/* LineVisibleRanges */.u7(visibleRangesForLine.outsideRenderedLine,lineNumber,view_renderingContext/* HorizontalRange.from */.yu.from(visibleRangesForLine.ranges));}if(visibleRangesLen===0){return null;}return visibleRanges;}},{key:"_visibleRangesForLineRange",value:function _visibleRangesForLineRange(lineNumber,startColumn,endColumn){if(this.shouldRender()){// Cannot read from the DOM because it is dirty
// i.e. the model & the dom are out of sync, so I'd be reading something stale
return null;}if(lineNumber<this._visibleLines.getStartLineNumber()||lineNumber>this._visibleLines.getEndLineNumber()){return null;}return this._visibleLines.getVisibleLine(lineNumber).getVisibleRangesForRange(lineNumber,startColumn,endColumn,new viewLine/* DomReadingContext */.ZE(this.domNode.domNode,this._textRangeRestingSpot));}},{key:"visibleRangeForPosition",value:function visibleRangeForPosition(position){var visibleRanges=this._visibleRangesForLineRange(position.lineNumber,position.column,position.column);if(!visibleRanges){return null;}return new view_renderingContext/* HorizontalPosition */.D4(visibleRanges.outsideRenderedLine,visibleRanges.ranges[0].left);}// --- implementation
},{key:"updateLineWidths",value:function updateLineWidths(){this._updateLineWidths(false);}/**
     * Updates the max line width if it is fast to compute.
     * Returns true if all lines were taken into account.
     * Returns false if some lines need to be reevaluated (in a slow fashion).
     */},{key:"_updateLineWidthsFast",value:function _updateLineWidthsFast(){return this._updateLineWidths(true);}},{key:"_updateLineWidthsSlow",value:function _updateLineWidthsSlow(){this._updateLineWidths(false);}},{key:"_updateLineWidths",value:function _updateLineWidths(fast){var rendStartLineNumber=this._visibleLines.getStartLineNumber();var rendEndLineNumber=this._visibleLines.getEndLineNumber();var localMaxLineWidth=1;var allWidthsComputed=true;for(var lineNumber=rendStartLineNumber;lineNumber<=rendEndLineNumber;lineNumber++){var visibleLine=this._visibleLines.getVisibleLine(lineNumber);if(fast&&!visibleLine.getWidthIsFast()){// Cannot compute width in a fast way for this line
allWidthsComputed=false;continue;}localMaxLineWidth=Math.max(localMaxLineWidth,visibleLine.getWidth());}if(allWidthsComputed&&rendStartLineNumber===1&&rendEndLineNumber===this._context.model.getLineCount()){// we know the max line width for all the lines
this._maxLineWidth=0;}this._ensureMaxLineWidth(localMaxLineWidth);return allWidthsComputed;}},{key:"_checkMonospaceFontAssumptions",value:function _checkMonospaceFontAssumptions(){// Problems with monospace assumptions are more apparent for longer lines,
// as small rounding errors start to sum up, so we will select the longest
// line for a closer inspection
var longestLineNumber=-1;var longestWidth=-1;var rendStartLineNumber=this._visibleLines.getStartLineNumber();var rendEndLineNumber=this._visibleLines.getEndLineNumber();for(var lineNumber=rendStartLineNumber;lineNumber<=rendEndLineNumber;lineNumber++){var visibleLine=this._visibleLines.getVisibleLine(lineNumber);if(visibleLine.needsMonospaceFontCheck()){var lineWidth=visibleLine.getWidth();if(lineWidth>longestWidth){longestWidth=lineWidth;longestLineNumber=lineNumber;}}}if(longestLineNumber===-1){return;}if(!this._visibleLines.getVisibleLine(longestLineNumber).monospaceAssumptionsAreValid()){for(var _lineNumber=rendStartLineNumber;_lineNumber<=rendEndLineNumber;_lineNumber++){var _visibleLine=this._visibleLines.getVisibleLine(_lineNumber);_visibleLine.onMonospaceAssumptionsInvalidated();}}}},{key:"prepareRender",value:function prepareRender(){throw new Error('Not supported');}},{key:"render",value:function render(){throw new Error('Not supported');}},{key:"renderText",value:function renderText(viewportData){// (1) render lines - ensures lines are in the DOM
this._visibleLines.renderLines(viewportData);this._lastRenderedData.setCurrentVisibleRange(viewportData.visibleRange);this.domNode.setWidth(this._context.viewLayout.getScrollWidth());this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1000000));// (2) compute horizontal scroll position:
//  - this must happen after the lines are in the DOM since it might need a line that rendered just now
//  - it might change `scrollWidth` and `scrollLeft`
if(this._horizontalRevealRequest){var horizontalRevealRequest=this._horizontalRevealRequest;// Check that we have the line that contains the horizontal range in the viewport
if(viewportData.startLineNumber<=horizontalRevealRequest.minLineNumber&&horizontalRevealRequest.maxLineNumber<=viewportData.endLineNumber){this._horizontalRevealRequest=null;// allow `visibleRangesForRange2` to work
this.onDidRender();// compute new scroll position
var newScrollLeft=this._computeScrollLeftToReveal(horizontalRevealRequest);if(newScrollLeft){if(!this._isViewportWrapping){// ensure `scrollWidth` is large enough
this._ensureMaxLineWidth(newScrollLeft.maxHorizontalOffset);}// set `scrollLeft`
this._context.model.setScrollPosition({scrollLeft:newScrollLeft.scrollLeft},horizontalRevealRequest.scrollType);}}}// Update max line width (not so important, it is just so the horizontal scrollbar doesn't get too small)
if(!this._updateLineWidthsFast()){// Computing the width of some lines would be slow => delay it
this._asyncUpdateLineWidths.schedule();}if(platform/* isLinux */.IJ&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){var rendStartLineNumber=this._visibleLines.getStartLineNumber();var rendEndLineNumber=this._visibleLines.getEndLineNumber();for(var lineNumber=rendStartLineNumber;lineNumber<=rendEndLineNumber;lineNumber++){var visibleLine=this._visibleLines.getVisibleLine(lineNumber);if(visibleLine.needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break;}}}// (3) handle scrolling
this._linesContent.setLayerHinting(this._canUseLayerHinting);this._linesContent.setContain('strict');var adjustedScrollTop=this._context.viewLayout.getCurrentScrollTop()-viewportData.bigNumbersDelta;this._linesContent.setTop(-adjustedScrollTop);this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft());}// --- width
},{key:"_ensureMaxLineWidth",value:function _ensureMaxLineWidth(lineWidth){var iLineWidth=Math.ceil(lineWidth);if(this._maxLineWidth<iLineWidth){this._maxLineWidth=iLineWidth;this._context.model.setMaxLineWidth(this._maxLineWidth);}}},{key:"_computeScrollTopToRevealRange",value:function _computeScrollTopToRevealRange(viewport,source,minimalReveal,range,selections,verticalType){var viewportStartY=viewport.top;var viewportHeight=viewport.height;var viewportEndY=viewportStartY+viewportHeight;var boxIsSingleRange;var boxStartY;var boxEndY;if(selections&&selections.length>0){var minLineNumber=selections[0].startLineNumber;var maxLineNumber=selections[0].endLineNumber;for(var i=1,len=selections.length;i<len;i++){var selection=selections[i];minLineNumber=Math.min(minLineNumber,selection.startLineNumber);maxLineNumber=Math.max(maxLineNumber,selection.endLineNumber);}boxIsSingleRange=false;boxStartY=this._context.viewLayout.getVerticalOffsetForLineNumber(minLineNumber);boxEndY=this._context.viewLayout.getVerticalOffsetForLineNumber(maxLineNumber)+this._lineHeight;}else if(range){boxIsSingleRange=true;boxStartY=this._context.viewLayout.getVerticalOffsetForLineNumber(range.startLineNumber);boxEndY=this._context.viewLayout.getVerticalOffsetForLineNumber(range.endLineNumber)+this._lineHeight;}else{return-1;}var shouldIgnoreScrollOff=(source==='mouse'||minimalReveal)&&this._cursorSurroundingLinesStyle==='default';if(!shouldIgnoreScrollOff){var context=Math.min(viewportHeight/this._lineHeight/2,this._cursorSurroundingLines);boxStartY-=context*this._lineHeight;boxEndY+=Math.max(0,context-1)*this._lineHeight;}else{if(!minimalReveal){// Reveal one more line above (this case is hit when dragging)
boxStartY-=this._lineHeight;}}if(verticalType===0/* Simple */||verticalType===4/* Bottom */){// Reveal one line more when the last line would be covered by the scrollbar - arrow down case or revealing a line explicitly at bottom
boxEndY+=minimalReveal?this._horizontalScrollbarHeight:this._lineHeight;}var newScrollTop;if(boxEndY-boxStartY>viewportHeight){// the box is larger than the viewport ... scroll to its top
if(!boxIsSingleRange){// do not reveal multiple cursors if there are more than fit the viewport
return-1;}newScrollTop=boxStartY;}else if(verticalType===5/* NearTop */||verticalType===6/* NearTopIfOutsideViewport */){if(verticalType===6/* NearTopIfOutsideViewport */&&viewportStartY<=boxStartY&&boxEndY<=viewportEndY){// Box is already in the viewport... do nothing
newScrollTop=viewportStartY;}else{// We want a gap that is 20% of the viewport, but with a minimum of 5 lines
var desiredGapAbove=Math.max(5*this._lineHeight,viewportHeight*0.2);// Try to scroll just above the box with the desired gap
var desiredScrollTop=boxStartY-desiredGapAbove;// But ensure that the box is not pushed out of viewport
var minScrollTop=boxEndY-viewportHeight;newScrollTop=Math.max(minScrollTop,desiredScrollTop);}}else if(verticalType===1/* Center */||verticalType===2/* CenterIfOutsideViewport */){if(verticalType===2/* CenterIfOutsideViewport */&&viewportStartY<=boxStartY&&boxEndY<=viewportEndY){// Box is already in the viewport... do nothing
newScrollTop=viewportStartY;}else{// Box is outside the viewport... center it
var boxMiddleY=(boxStartY+boxEndY)/2;newScrollTop=Math.max(0,boxMiddleY-viewportHeight/2);}}else{newScrollTop=this._computeMinimumScrolling(viewportStartY,viewportEndY,boxStartY,boxEndY,verticalType===3/* Top */,verticalType===4/* Bottom */);}return newScrollTop;}},{key:"_computeScrollLeftToReveal",value:function _computeScrollLeftToReveal(horizontalRevealRequest){var viewport=this._context.viewLayout.getCurrentViewport();var viewportStartX=viewport.left;var viewportEndX=viewportStartX+viewport.width;var boxStartX=1073741824/* MAX_SAFE_SMALL_INTEGER */;var boxEndX=0;if(horizontalRevealRequest.type==='range'){var visibleRanges=this._visibleRangesForLineRange(horizontalRevealRequest.lineNumber,horizontalRevealRequest.startColumn,horizontalRevealRequest.endColumn);if(!visibleRanges){return null;}var _iterator=viewLines_createForOfIteratorHelper(visibleRanges.ranges),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var visibleRange=_step.value;boxStartX=Math.min(boxStartX,Math.round(visibleRange.left));boxEndX=Math.max(boxEndX,Math.round(visibleRange.left+visibleRange.width));}}catch(err){_iterator.e(err);}finally{_iterator.f();}}else{var _iterator2=viewLines_createForOfIteratorHelper(horizontalRevealRequest.selections),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var selection=_step2.value;if(selection.startLineNumber!==selection.endLineNumber){return null;}var _visibleRanges=this._visibleRangesForLineRange(selection.startLineNumber,selection.startColumn,selection.endColumn);if(!_visibleRanges){return null;}var _iterator3=viewLines_createForOfIteratorHelper(_visibleRanges.ranges),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _visibleRange=_step3.value;boxStartX=Math.min(boxStartX,Math.round(_visibleRange.left));boxEndX=Math.max(boxEndX,Math.round(_visibleRange.left+_visibleRange.width));}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}if(!horizontalRevealRequest.minimalReveal){boxStartX=Math.max(0,boxStartX-ViewLines.HORIZONTAL_EXTRA_PX);boxEndX+=this._revealHorizontalRightPadding;}if(horizontalRevealRequest.type==='selections'&&boxEndX-boxStartX>viewport.width){return null;}var newScrollLeft=this._computeMinimumScrolling(viewportStartX,viewportEndX,boxStartX,boxEndX);return{scrollLeft:newScrollLeft,maxHorizontalOffset:boxEndX};}},{key:"_computeMinimumScrolling",value:function _computeMinimumScrolling(viewportStart,viewportEnd,boxStart,boxEnd,revealAtStart,revealAtEnd){viewportStart=viewportStart|0;viewportEnd=viewportEnd|0;boxStart=boxStart|0;boxEnd=boxEnd|0;revealAtStart=!!revealAtStart;revealAtEnd=!!revealAtEnd;var viewportLength=viewportEnd-viewportStart;var boxLength=boxEnd-boxStart;if(boxLength<viewportLength){// The box would fit in the viewport
if(revealAtStart){return boxStart;}if(revealAtEnd){return Math.max(0,boxEnd-viewportLength);}if(boxStart<viewportStart){// The box is above the viewport
return boxStart;}else if(boxEnd>viewportEnd){// The box is below the viewport
return Math.max(0,boxEnd-viewportLength);}}else{// The box would not fit in the viewport
// Reveal the beginning of the box
return boxStart;}return viewportStart;}}]);return ViewLines;}(viewPart/* ViewPart */.E);/**
 * Adds this amount of pixels to the right of lines (no-one wants to type near the edge of the viewport)
 */ViewLines.HORIZONTAL_EXTRA_PX=30;
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/linesDecorations/linesDecorations.js
function linesDecorations_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){linesDecorations_typeof=function _typeof(obj){return typeof obj;};}else{linesDecorations_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return linesDecorations_typeof(obj);}function linesDecorations_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function linesDecorations_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function linesDecorations_createClass(Constructor,protoProps,staticProps){if(protoProps)linesDecorations_defineProperties(Constructor.prototype,protoProps);if(staticProps)linesDecorations_defineProperties(Constructor,staticProps);return Constructor;}function linesDecorations_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){linesDecorations_get=Reflect.get;}else{linesDecorations_get=function _get(target,property,receiver){var base=linesDecorations_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return linesDecorations_get(target,property,receiver||target);}function linesDecorations_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=linesDecorations_getPrototypeOf(object);if(object===null)break;}return object;}function linesDecorations_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)linesDecorations_setPrototypeOf(subClass,superClass);}function linesDecorations_setPrototypeOf(o,p){linesDecorations_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return linesDecorations_setPrototypeOf(o,p);}function linesDecorations_createSuper(Derived){var hasNativeReflectConstruct=linesDecorations_isNativeReflectConstruct();return function _createSuperInternal(){var Super=linesDecorations_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=linesDecorations_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return linesDecorations_possibleConstructorReturn(this,result);};}function linesDecorations_possibleConstructorReturn(self,call){if(call&&(linesDecorations_typeof(call)==="object"||typeof call==="function")){return call;}return linesDecorations_assertThisInitialized(self);}function linesDecorations_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function linesDecorations_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function linesDecorations_getPrototypeOf(o){linesDecorations_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return linesDecorations_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var LinesDecorationsOverlay=/*#__PURE__*/function(_DedupOverlay){linesDecorations_inherits(LinesDecorationsOverlay,_DedupOverlay);var _super=linesDecorations_createSuper(LinesDecorationsOverlay);function LinesDecorationsOverlay(context){var _this;linesDecorations_classCallCheck(this,LinesDecorationsOverlay);_this=_super.call(this);_this._context=context;var options=_this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);_this._decorationsLeft=layoutInfo.decorationsLeft;_this._decorationsWidth=layoutInfo.decorationsWidth;_this._renderResult=null;_this._context.addEventHandler(linesDecorations_assertThisInitialized(_this));return _this;}linesDecorations_createClass(LinesDecorationsOverlay,[{key:"dispose",value:function dispose(){this._context.removeEventHandler(this);this._renderResult=null;linesDecorations_get(linesDecorations_getPrototypeOf(LinesDecorationsOverlay.prototype),"dispose",this).call(this);}// --- begin event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);this._decorationsLeft=layoutInfo.decorationsLeft;this._decorationsWidth=layoutInfo.decorationsWidth;return true;}},{key:"onDecorationsChanged",value:function onDecorationsChanged(e){return true;}},{key:"onFlushed",value:function onFlushed(e){return true;}},{key:"onLinesChanged",value:function onLinesChanged(e){return true;}},{key:"onLinesDeleted",value:function onLinesDeleted(e){return true;}},{key:"onLinesInserted",value:function onLinesInserted(e){return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return e.scrollTopChanged;}},{key:"onZonesChanged",value:function onZonesChanged(e){return true;}// --- end event handlers
},{key:"_getDecorations",value:function _getDecorations(ctx){var decorations=ctx.getDecorationsInViewport();var r=[];var rLen=0;for(var i=0,len=decorations.length;i<len;i++){var d=decorations[i];var linesDecorationsClassName=d.options.linesDecorationsClassName;if(linesDecorationsClassName){r[rLen++]=new DecorationToRender(d.range.startLineNumber,d.range.endLineNumber,linesDecorationsClassName);}var firstLineDecorationClassName=d.options.firstLineDecorationClassName;if(firstLineDecorationClassName){r[rLen++]=new DecorationToRender(d.range.startLineNumber,d.range.startLineNumber,firstLineDecorationClassName);}}return r;}},{key:"prepareRender",value:function prepareRender(ctx){var visibleStartLineNumber=ctx.visibleRange.startLineNumber;var visibleEndLineNumber=ctx.visibleRange.endLineNumber;var toRender=this._render(visibleStartLineNumber,visibleEndLineNumber,this._getDecorations(ctx));var left=this._decorationsLeft.toString();var width=this._decorationsWidth.toString();var common='" style="left:'+left+'px;width:'+width+'px;"></div>';var output=[];for(var lineNumber=visibleStartLineNumber;lineNumber<=visibleEndLineNumber;lineNumber++){var lineIndex=lineNumber-visibleStartLineNumber;var classNames=toRender[lineIndex];var lineOutput='';for(var i=0,len=classNames.length;i<len;i++){lineOutput+='<div class="cldr '+classNames[i]+common;}output[lineIndex]=lineOutput;}this._renderResult=output;}},{key:"render",value:function render(startLineNumber,lineNumber){if(!this._renderResult){return'';}return this._renderResult[lineNumber-startLineNumber];}}]);return LinesDecorationsOverlay;}(DedupOverlay);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/margin/margin.js
var margin_margin = __webpack_require__(89284);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/marginDecorations/marginDecorations.js
function marginDecorations_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){marginDecorations_typeof=function _typeof(obj){return typeof obj;};}else{marginDecorations_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return marginDecorations_typeof(obj);}function marginDecorations_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function marginDecorations_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function marginDecorations_createClass(Constructor,protoProps,staticProps){if(protoProps)marginDecorations_defineProperties(Constructor.prototype,protoProps);if(staticProps)marginDecorations_defineProperties(Constructor,staticProps);return Constructor;}function marginDecorations_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){marginDecorations_get=Reflect.get;}else{marginDecorations_get=function _get(target,property,receiver){var base=marginDecorations_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return marginDecorations_get(target,property,receiver||target);}function marginDecorations_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=marginDecorations_getPrototypeOf(object);if(object===null)break;}return object;}function marginDecorations_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)marginDecorations_setPrototypeOf(subClass,superClass);}function marginDecorations_setPrototypeOf(o,p){marginDecorations_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return marginDecorations_setPrototypeOf(o,p);}function marginDecorations_createSuper(Derived){var hasNativeReflectConstruct=marginDecorations_isNativeReflectConstruct();return function _createSuperInternal(){var Super=marginDecorations_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=marginDecorations_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return marginDecorations_possibleConstructorReturn(this,result);};}function marginDecorations_possibleConstructorReturn(self,call){if(call&&(marginDecorations_typeof(call)==="object"||typeof call==="function")){return call;}return marginDecorations_assertThisInitialized(self);}function marginDecorations_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function marginDecorations_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function marginDecorations_getPrototypeOf(o){marginDecorations_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return marginDecorations_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var MarginViewLineDecorationsOverlay=/*#__PURE__*/function(_DedupOverlay){marginDecorations_inherits(MarginViewLineDecorationsOverlay,_DedupOverlay);var _super=marginDecorations_createSuper(MarginViewLineDecorationsOverlay);function MarginViewLineDecorationsOverlay(context){var _this;marginDecorations_classCallCheck(this,MarginViewLineDecorationsOverlay);_this=_super.call(this);_this._context=context;_this._renderResult=null;_this._context.addEventHandler(marginDecorations_assertThisInitialized(_this));return _this;}marginDecorations_createClass(MarginViewLineDecorationsOverlay,[{key:"dispose",value:function dispose(){this._context.removeEventHandler(this);this._renderResult=null;marginDecorations_get(marginDecorations_getPrototypeOf(MarginViewLineDecorationsOverlay.prototype),"dispose",this).call(this);}// --- begin event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){return true;}},{key:"onDecorationsChanged",value:function onDecorationsChanged(e){return true;}},{key:"onFlushed",value:function onFlushed(e){return true;}},{key:"onLinesChanged",value:function onLinesChanged(e){return true;}},{key:"onLinesDeleted",value:function onLinesDeleted(e){return true;}},{key:"onLinesInserted",value:function onLinesInserted(e){return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return e.scrollTopChanged;}},{key:"onZonesChanged",value:function onZonesChanged(e){return true;}// --- end event handlers
},{key:"_getDecorations",value:function _getDecorations(ctx){var decorations=ctx.getDecorationsInViewport();var r=[];var rLen=0;for(var i=0,len=decorations.length;i<len;i++){var d=decorations[i];var marginClassName=d.options.marginClassName;if(marginClassName){r[rLen++]=new DecorationToRender(d.range.startLineNumber,d.range.endLineNumber,marginClassName);}}return r;}},{key:"prepareRender",value:function prepareRender(ctx){var visibleStartLineNumber=ctx.visibleRange.startLineNumber;var visibleEndLineNumber=ctx.visibleRange.endLineNumber;var toRender=this._render(visibleStartLineNumber,visibleEndLineNumber,this._getDecorations(ctx));var output=[];for(var lineNumber=visibleStartLineNumber;lineNumber<=visibleEndLineNumber;lineNumber++){var lineIndex=lineNumber-visibleStartLineNumber;var classNames=toRender[lineIndex];var lineOutput='';for(var i=0,len=classNames.length;i<len;i++){lineOutput+='<div class="cmdr '+classNames[i]+'" style=""></div>';}output[lineIndex]=lineOutput;}this._renderResult=output;}},{key:"render",value:function render(startLineNumber,lineNumber){if(!this._renderResult){return'';}return this._renderResult[lineNumber-startLineNumber];}}]);return MarginViewLineDecorationsOverlay;}(DedupOverlay);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/browser/globalMouseMoveMonitor.js
var globalMouseMoveMonitor = __webpack_require__(95144);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/strings.js
var strings = __webpack_require__(41712);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/config/editorOptions.js
var editorOptions = __webpack_require__(72530);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/rgba.js
var rgba = __webpack_require__(97762);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewModel/minimapTokensColorTracker.js
var minimapTokensColorTracker = __webpack_require__(81108);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewModel/viewModel.js
var viewModel = __webpack_require__(38258);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/browser/touch.js
var touch = __webpack_require__(72843);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimapCharSheet.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var allCharCodes=function(){var v=[];for(var i=32/* START_CH_CODE */;i<=126/* END_CH_CODE */;i++){v.push(i);}v.push(65533/* UNKNOWN_CODE */);return v;}();var getCharIndex=function getCharIndex(chCode,fontScale){chCode-=32/* START_CH_CODE */;if(chCode<0||chCode>96/* CHAR_COUNT */){if(fontScale<=2){// for smaller scales, we can get away with using any ASCII character...
return(chCode+96/* CHAR_COUNT */)%96/* CHAR_COUNT */;}return 96/* CHAR_COUNT */-1;// unknown symbol
}return chCode;};
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/uint.js
var uint = __webpack_require__(54070);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimapCharRenderer.js
function minimapCharRenderer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function minimapCharRenderer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function minimapCharRenderer_createClass(Constructor,protoProps,staticProps){if(protoProps)minimapCharRenderer_defineProperties(Constructor.prototype,protoProps);if(staticProps)minimapCharRenderer_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var MinimapCharRenderer=/*#__PURE__*/function(){function MinimapCharRenderer(charData,scale){minimapCharRenderer_classCallCheck(this,MinimapCharRenderer);this.scale=scale;this._minimapCharRendererBrand=undefined;this.charDataNormal=MinimapCharRenderer.soften(charData,12/15);this.charDataLight=MinimapCharRenderer.soften(charData,50/60);}minimapCharRenderer_createClass(MinimapCharRenderer,[{key:"renderChar",value:function renderChar(target,dx,dy,chCode,color,foregroundAlpha,backgroundColor,backgroundAlpha,fontScale,useLighterFont,force1pxHeight){var charWidth=1/* BASE_CHAR_WIDTH */*this.scale;var charHeight=2/* BASE_CHAR_HEIGHT */*this.scale;var renderHeight=force1pxHeight?1:charHeight;if(dx+charWidth>target.width||dy+renderHeight>target.height){console.warn('bad render request outside image data');return;}var charData=useLighterFont?this.charDataLight:this.charDataNormal;var charIndex=getCharIndex(chCode,fontScale);var destWidth=target.width*4/* RGBA_CHANNELS_CNT */;var backgroundR=backgroundColor.r;var backgroundG=backgroundColor.g;var backgroundB=backgroundColor.b;var deltaR=color.r-backgroundR;var deltaG=color.g-backgroundG;var deltaB=color.b-backgroundB;var destAlpha=Math.max(foregroundAlpha,backgroundAlpha);var dest=target.data;var sourceOffset=charIndex*charWidth*charHeight;var row=dy*destWidth+dx*4/* RGBA_CHANNELS_CNT */;for(var y=0;y<renderHeight;y++){var column=row;for(var x=0;x<charWidth;x++){var c=charData[sourceOffset++]/255*(foregroundAlpha/255);dest[column++]=backgroundR+deltaR*c;dest[column++]=backgroundG+deltaG*c;dest[column++]=backgroundB+deltaB*c;dest[column++]=destAlpha;}row+=destWidth;}}},{key:"blockRenderChar",value:function blockRenderChar(target,dx,dy,color,foregroundAlpha,backgroundColor,backgroundAlpha,force1pxHeight){var charWidth=1/* BASE_CHAR_WIDTH */*this.scale;var charHeight=2/* BASE_CHAR_HEIGHT */*this.scale;var renderHeight=force1pxHeight?1:charHeight;if(dx+charWidth>target.width||dy+renderHeight>target.height){console.warn('bad render request outside image data');return;}var destWidth=target.width*4/* RGBA_CHANNELS_CNT */;var c=0.5*(foregroundAlpha/255);var backgroundR=backgroundColor.r;var backgroundG=backgroundColor.g;var backgroundB=backgroundColor.b;var deltaR=color.r-backgroundR;var deltaG=color.g-backgroundG;var deltaB=color.b-backgroundB;var colorR=backgroundR+deltaR*c;var colorG=backgroundG+deltaG*c;var colorB=backgroundB+deltaB*c;var destAlpha=Math.max(foregroundAlpha,backgroundAlpha);var dest=target.data;var row=dy*destWidth+dx*4/* RGBA_CHANNELS_CNT */;for(var y=0;y<renderHeight;y++){var column=row;for(var x=0;x<charWidth;x++){dest[column++]=colorR;dest[column++]=colorG;dest[column++]=colorB;dest[column++]=destAlpha;}row+=destWidth;}}}],[{key:"soften",value:function soften(input,ratio){var result=new Uint8ClampedArray(input.length);for(var i=0,len=input.length;i<len;i++){result[i]=(0,uint/* toUint8 */.K)(input[i]*ratio);}return result;}}]);return MinimapCharRenderer;}();
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/functional.js
var functional = __webpack_require__(27102);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimapPreBaked.js
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var charTable={'0':0,'1':1,'2':2,'3':3,'4':4,'5':5,'6':6,'7':7,'8':8,'9':9,A:10,B:11,C:12,D:13,E:14,F:15};var decodeData=function decodeData(str){var output=new Uint8ClampedArray(str.length/2);for(var i=0;i<str.length;i+=2){output[i>>1]=charTable[str[i]]<<4|charTable[str[i+1]]&0xF;}return output;};/*
const encodeData = (data: Uint8ClampedArray, length: string) => {
    const chars = '0123456789ABCDEF';
    let output = '';
    for (let i = 0; i < data.length; i++) {
        output += chars[data[i] >> 4] + chars[data[i] & 0xf];
    }
    return output;
};
*/ /**
 * Map of minimap scales to prebaked sample data at those scales. We don't
 * sample much larger data, because then font family becomes visible, which
 * is use-configurable.
 */var prebakedMiniMaps={1:(0,functional/* once */.I)(function(){return decodeData('0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792');}),2:(0,functional/* once */.I)(function(){return decodeData('000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126');})};
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimapCharRendererFactory.js
function minimapCharRendererFactory_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=minimapCharRendererFactory_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function minimapCharRendererFactory_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return minimapCharRendererFactory_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return minimapCharRendererFactory_arrayLikeToArray(o,minLen);}function minimapCharRendererFactory_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function minimapCharRendererFactory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function minimapCharRendererFactory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function minimapCharRendererFactory_createClass(Constructor,protoProps,staticProps){if(protoProps)minimapCharRendererFactory_defineProperties(Constructor.prototype,protoProps);if(staticProps)minimapCharRendererFactory_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*//**
 * Creates character renderers. It takes a 'scale' that determines how large
 * characters should be drawn. Using this, it draws data into a canvas and
 * then downsamples the characters as necessary for the current display.
 * This makes rendering more efficient, rather than drawing a full (tiny)
 * font, or downsampling in real-time.
 */var MinimapCharRendererFactory=/*#__PURE__*/function(){function MinimapCharRendererFactory(){minimapCharRendererFactory_classCallCheck(this,MinimapCharRendererFactory);}minimapCharRendererFactory_createClass(MinimapCharRendererFactory,null,[{key:"create",value:/**
     * Creates a new character renderer factory with the given scale.
     */function create(scale,fontFamily){// renderers are immutable. By default we'll 'create' a new minimap
// character renderer whenever we switch editors, no need to do extra work.
if(this.lastCreated&&scale===this.lastCreated.scale&&fontFamily===this.lastFontFamily){return this.lastCreated;}var factory;if(prebakedMiniMaps[scale]){factory=new MinimapCharRenderer(prebakedMiniMaps[scale](),scale);}else{factory=MinimapCharRendererFactory.createFromSampleData(MinimapCharRendererFactory.createSampleData(fontFamily).data,scale);}this.lastFontFamily=fontFamily;this.lastCreated=factory;return factory;}/**
     * Creates the font sample data, writing to a canvas.
     */},{key:"createSampleData",value:function createSampleData(fontFamily){var canvas=document.createElement('canvas');var ctx=canvas.getContext('2d');canvas.style.height="".concat(16/* SAMPLED_CHAR_HEIGHT */,"px");canvas.height=16/* SAMPLED_CHAR_HEIGHT */;canvas.width=96/* CHAR_COUNT */*10/* SAMPLED_CHAR_WIDTH */;canvas.style.width=96/* CHAR_COUNT */*10/* SAMPLED_CHAR_WIDTH */+'px';ctx.fillStyle='#ffffff';ctx.font="bold ".concat(16/* SAMPLED_CHAR_HEIGHT */,"px ",fontFamily);ctx.textBaseline='middle';var x=0;var _iterator=minimapCharRendererFactory_createForOfIteratorHelper(allCharCodes),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var code=_step.value;ctx.fillText(String.fromCharCode(code),x,16/* SAMPLED_CHAR_HEIGHT *//2);x+=10/* SAMPLED_CHAR_WIDTH */;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return ctx.getImageData(0,0,96/* CHAR_COUNT */*10/* SAMPLED_CHAR_WIDTH */,16/* SAMPLED_CHAR_HEIGHT */);}/**
     * Creates a character renderer from the canvas sample data.
     */},{key:"createFromSampleData",value:function createFromSampleData(source,scale){var expectedLength=16/* SAMPLED_CHAR_HEIGHT */*10/* SAMPLED_CHAR_WIDTH */*4/* RGBA_CHANNELS_CNT */*96/* CHAR_COUNT */;if(source.length!==expectedLength){throw new Error('Unexpected source in MinimapCharRenderer');}var charData=MinimapCharRendererFactory._downsample(source,scale);return new MinimapCharRenderer(charData,scale);}},{key:"_downsampleChar",value:function _downsampleChar(source,sourceOffset,dest,destOffset,scale){var width=1/* BASE_CHAR_WIDTH */*scale;var height=2/* BASE_CHAR_HEIGHT */*scale;var targetIndex=destOffset;var brightest=0;// This is essentially an ad-hoc rescaling algorithm. Standard approaches
// like bicubic interpolation are awesome for scaling between image sizes,
// but don't work so well when scaling to very small pixel values, we end
// up with blurry, indistinct forms.
//
// The approach taken here is simply mapping each source pixel to the target
// pixels, and taking the weighted values for all pixels in each, and then
// averaging them out. Finally we apply an intensity boost in _downsample,
// since when scaling to the smallest pixel sizes there's more black space
// which causes characters to be much less distinct.
for(var y=0;y<height;y++){// 1. For this destination pixel, get the source pixels we're sampling
// from (x1, y1) to the next pixel (x2, y2)
var sourceY1=y/height*16/* SAMPLED_CHAR_HEIGHT */;var sourceY2=(y+1)/height*16/* SAMPLED_CHAR_HEIGHT */;for(var x=0;x<width;x++){var sourceX1=x/width*10/* SAMPLED_CHAR_WIDTH */;var sourceX2=(x+1)/width*10/* SAMPLED_CHAR_WIDTH */;// 2. Sample all of them, summing them up and weighting them. Similar
// to bilinear interpolation.
var value=0;var samples=0;for(var sy=sourceY1;sy<sourceY2;sy++){var sourceRow=sourceOffset+Math.floor(sy)*3840/* RGBA_SAMPLED_ROW_WIDTH */;var yBalance=1-(sy-Math.floor(sy));for(var sx=sourceX1;sx<sourceX2;sx++){var xBalance=1-(sx-Math.floor(sx));var sourceIndex=sourceRow+Math.floor(sx)*4/* RGBA_CHANNELS_CNT */;var weight=xBalance*yBalance;samples+=weight;value+=source[sourceIndex]*source[sourceIndex+3]/255*weight;}}var final=value/samples;brightest=Math.max(brightest,final);dest[targetIndex++]=(0,uint/* toUint8 */.K)(final);}}return brightest;}},{key:"_downsample",value:function _downsample(data,scale){var pixelsPerCharacter=2/* BASE_CHAR_HEIGHT */*scale*1/* BASE_CHAR_WIDTH */*scale;var resultLen=pixelsPerCharacter*96/* CHAR_COUNT */;var result=new Uint8ClampedArray(resultLen);var resultOffset=0;var sourceOffset=0;var brightest=0;for(var charIndex=0;charIndex<96/* CHAR_COUNT */;charIndex++){brightest=Math.max(brightest,this._downsampleChar(data,sourceOffset,result,resultOffset,scale));resultOffset+=pixelsPerCharacter;sourceOffset+=10/* SAMPLED_CHAR_WIDTH */*4/* RGBA_CHANNELS_CNT */;}if(brightest>0){var adjust=255/brightest;for(var i=0;i<resultLen;i++){result[i]*=adjust;}}return result;}}]);return MinimapCharRendererFactory;}();
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model.js
var model = __webpack_require__(16227);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js
function minimap_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){minimap_typeof=function _typeof(obj){return typeof obj;};}else{minimap_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return minimap_typeof(obj);}function minimap_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=minimap_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function minimap_slicedToArray(arr,i){return minimap_arrayWithHoles(arr)||minimap_iterableToArrayLimit(arr,i)||minimap_unsupportedIterableToArray(arr,i)||minimap_nonIterableRest();}function minimap_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function minimap_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return minimap_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return minimap_arrayLikeToArray(o,minLen);}function minimap_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function minimap_iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function minimap_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _get2(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get2=Reflect.get;}else{_get2=function _get(target,property,receiver){var base=minimap_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get2(target,property,receiver||target);}function minimap_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=minimap_getPrototypeOf(object);if(object===null)break;}return object;}function minimap_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)minimap_setPrototypeOf(subClass,superClass);}function minimap_setPrototypeOf(o,p){minimap_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return minimap_setPrototypeOf(o,p);}function minimap_createSuper(Derived){var hasNativeReflectConstruct=minimap_isNativeReflectConstruct();return function _createSuperInternal(){var Super=minimap_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=minimap_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return minimap_possibleConstructorReturn(this,result);};}function minimap_possibleConstructorReturn(self,call){if(call&&(minimap_typeof(call)==="object"||typeof call==="function")){return call;}return minimap_assertThisInitialized(self);}function minimap_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function minimap_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function minimap_getPrototypeOf(o){minimap_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return minimap_getPrototypeOf(o);}function minimap_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function minimap_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function minimap_createClass(Constructor,protoProps,staticProps){if(protoProps)minimap_defineProperties(Constructor.prototype,protoProps);if(staticProps)minimap_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*//**
 * The orthogonal distance to the slider at which dragging "resets". This implements "snapping"
 */var MOUSE_DRAG_RESET_DISTANCE=140;var GUTTER_DECORATION_WIDTH=2;var MinimapOptions=/*#__PURE__*/function(){function MinimapOptions(configuration,theme,tokensColorTracker){var _this=this;minimap_classCallCheck(this,MinimapOptions);var options=configuration.options;var pixelRatio=options.get(129/* pixelRatio */);var layoutInfo=options.get(131/* layoutInfo */);var minimapLayout=layoutInfo.minimap;var fontInfo=options.get(44/* fontInfo */);var minimapOpts=options.get(65/* minimap */);this.renderMinimap=minimapLayout.renderMinimap;this.size=minimapOpts.size;this.minimapHeightIsEditorHeight=minimapLayout.minimapHeightIsEditorHeight;this.scrollBeyondLastLine=options.get(94/* scrollBeyondLastLine */);this.showSlider=minimapOpts.showSlider;this.pixelRatio=pixelRatio;this.typicalHalfwidthCharacterWidth=fontInfo.typicalHalfwidthCharacterWidth;this.lineHeight=options.get(59/* lineHeight */);this.minimapLeft=minimapLayout.minimapLeft;this.minimapWidth=minimapLayout.minimapWidth;this.minimapHeight=layoutInfo.height;this.canvasInnerWidth=minimapLayout.minimapCanvasInnerWidth;this.canvasInnerHeight=minimapLayout.minimapCanvasInnerHeight;this.canvasOuterWidth=minimapLayout.minimapCanvasOuterWidth;this.canvasOuterHeight=minimapLayout.minimapCanvasOuterHeight;this.isSampling=minimapLayout.minimapIsSampling;this.editorHeight=layoutInfo.height;this.fontScale=minimapLayout.minimapScale;this.minimapLineHeight=minimapLayout.minimapLineHeight;this.minimapCharWidth=1/* BASE_CHAR_WIDTH */*this.fontScale;this.charRenderer=(0,functional/* once */.I)(function(){return MinimapCharRendererFactory.create(_this.fontScale,fontInfo.fontFamily);});this.defaultBackgroundColor=tokensColorTracker.getColor(2/* DefaultBackground */);this.backgroundColor=MinimapOptions._getMinimapBackground(theme,this.defaultBackgroundColor);this.foregroundAlpha=MinimapOptions._getMinimapForegroundOpacity(theme);}minimap_createClass(MinimapOptions,[{key:"equals",value:function equals(other){return this.renderMinimap===other.renderMinimap&&this.size===other.size&&this.minimapHeightIsEditorHeight===other.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===other.scrollBeyondLastLine&&this.showSlider===other.showSlider&&this.pixelRatio===other.pixelRatio&&this.typicalHalfwidthCharacterWidth===other.typicalHalfwidthCharacterWidth&&this.lineHeight===other.lineHeight&&this.minimapLeft===other.minimapLeft&&this.minimapWidth===other.minimapWidth&&this.minimapHeight===other.minimapHeight&&this.canvasInnerWidth===other.canvasInnerWidth&&this.canvasInnerHeight===other.canvasInnerHeight&&this.canvasOuterWidth===other.canvasOuterWidth&&this.canvasOuterHeight===other.canvasOuterHeight&&this.isSampling===other.isSampling&&this.editorHeight===other.editorHeight&&this.fontScale===other.fontScale&&this.minimapLineHeight===other.minimapLineHeight&&this.minimapCharWidth===other.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(other.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(other.backgroundColor)&&this.foregroundAlpha===other.foregroundAlpha;}}],[{key:"_getMinimapBackground",value:function _getMinimapBackground(theme,defaultBackgroundColor){var themeColor=theme.getColor(colorRegistry/* minimapBackground */.kVY);if(themeColor){return new rgba/* RGBA8 */.h(themeColor.rgba.r,themeColor.rgba.g,themeColor.rgba.b,Math.round(255*themeColor.rgba.a));}return defaultBackgroundColor;}},{key:"_getMinimapForegroundOpacity",value:function _getMinimapForegroundOpacity(theme){var themeColor=theme.getColor(colorRegistry/* minimapForegroundOpacity */.Itd);if(themeColor){return rgba/* RGBA8._clamp */.h._clamp(Math.round(255*themeColor.rgba.a));}return 255;}}]);return MinimapOptions;}();var MinimapLayout=/*#__PURE__*/function(){function MinimapLayout(scrollTop,scrollHeight,sliderNeeded,computedSliderRatio,sliderTop,sliderHeight,startLineNumber,endLineNumber){minimap_classCallCheck(this,MinimapLayout);this.scrollTop=scrollTop;this.scrollHeight=scrollHeight;this.sliderNeeded=sliderNeeded;this._computedSliderRatio=computedSliderRatio;this.sliderTop=sliderTop;this.sliderHeight=sliderHeight;this.startLineNumber=startLineNumber;this.endLineNumber=endLineNumber;}/**
     * Compute a desired `scrollPosition` such that the slider moves by `delta`.
     */minimap_createClass(MinimapLayout,[{key:"getDesiredScrollTopFromDelta",value:function getDesiredScrollTopFromDelta(delta){return Math.round(this.scrollTop+delta/this._computedSliderRatio);}},{key:"getDesiredScrollTopFromTouchLocation",value:function getDesiredScrollTopFromTouchLocation(pageY){return Math.round((pageY-this.sliderHeight/2)/this._computedSliderRatio);}}],[{key:"create",value:function create(options,viewportStartLineNumber,viewportEndLineNumber,viewportStartLineNumberVerticalOffset,viewportHeight,viewportContainsWhitespaceGaps,lineCount,realLineCount,scrollTop,scrollHeight,previousLayout){var pixelRatio=options.pixelRatio;var minimapLineHeight=options.minimapLineHeight;var minimapLinesFitting=Math.floor(options.canvasInnerHeight/minimapLineHeight);var lineHeight=options.lineHeight;if(options.minimapHeightIsEditorHeight){var logicalScrollHeight=realLineCount*options.lineHeight+(options.scrollBeyondLastLine?viewportHeight-options.lineHeight:0);var _sliderHeight=Math.max(1,Math.floor(viewportHeight*viewportHeight/logicalScrollHeight));var _maxMinimapSliderTop=Math.max(0,options.minimapHeight-_sliderHeight);// The slider can move from 0 to `maxMinimapSliderTop`
// in the same way `scrollTop` can move from 0 to `scrollHeight` - `viewportHeight`.
var _computedSliderRatio=_maxMinimapSliderTop/(scrollHeight-viewportHeight);var _sliderTop=scrollTop*_computedSliderRatio;var sliderNeeded=_maxMinimapSliderTop>0;var maxLinesFitting=Math.floor(options.canvasInnerHeight/options.minimapLineHeight);return new MinimapLayout(scrollTop,scrollHeight,sliderNeeded,_computedSliderRatio,_sliderTop,_sliderHeight,1,Math.min(lineCount,maxLinesFitting));}// The visible line count in a viewport can change due to a number of reasons:
//  a) with the same viewport width, different scroll positions can result in partial lines being visible:
//    e.g. for a line height of 20, and a viewport height of 600
//          * scrollTop = 0  => visible lines are [1, 30]
//          * scrollTop = 10 => visible lines are [1, 31] (with lines 1 and 31 partially visible)
//          * scrollTop = 20 => visible lines are [2, 31]
//  b) whitespace gaps might make their way in the viewport (which results in a decrease in the visible line count)
//  c) we could be in the scroll beyond last line case (which also results in a decrease in the visible line count, down to possibly only one line being visible)
// We must first establish a desirable slider height.
var sliderHeight;if(viewportContainsWhitespaceGaps&&viewportEndLineNumber!==lineCount){// case b) from above: there are whitespace gaps in the viewport.
// In this case, the height of the slider directly reflects the visible line count.
var viewportLineCount=viewportEndLineNumber-viewportStartLineNumber+1;sliderHeight=Math.floor(viewportLineCount*minimapLineHeight/pixelRatio);}else{// The slider has a stable height
var expectedViewportLineCount=viewportHeight/lineHeight;sliderHeight=Math.floor(expectedViewportLineCount*minimapLineHeight/pixelRatio);}var maxMinimapSliderTop;if(options.scrollBeyondLastLine){// The minimap slider, when dragged all the way down, will contain the last line at its top
maxMinimapSliderTop=(lineCount-1)*minimapLineHeight/pixelRatio;}else{// The minimap slider, when dragged all the way down, will contain the last line at its bottom
maxMinimapSliderTop=Math.max(0,lineCount*minimapLineHeight/pixelRatio-sliderHeight);}maxMinimapSliderTop=Math.min(options.minimapHeight-sliderHeight,maxMinimapSliderTop);// The slider can move from 0 to `maxMinimapSliderTop`
// in the same way `scrollTop` can move from 0 to `scrollHeight` - `viewportHeight`.
var computedSliderRatio=maxMinimapSliderTop/(scrollHeight-viewportHeight);var sliderTop=scrollTop*computedSliderRatio;var extraLinesAtTheBottom=0;if(options.scrollBeyondLastLine){var _expectedViewportLineCount=viewportHeight/lineHeight;extraLinesAtTheBottom=_expectedViewportLineCount-1;}if(minimapLinesFitting>=lineCount+extraLinesAtTheBottom){// All lines fit in the minimap
var startLineNumber=1;var endLineNumber=lineCount;var _sliderNeeded=maxMinimapSliderTop>0;return new MinimapLayout(scrollTop,scrollHeight,_sliderNeeded,computedSliderRatio,sliderTop,sliderHeight,startLineNumber,endLineNumber);}else{var _startLineNumber=Math.max(1,Math.floor(viewportStartLineNumber-sliderTop*pixelRatio/minimapLineHeight));// Avoid flickering caused by a partial viewport start line
// by being consistent w.r.t. the previous layout decision
if(previousLayout&&previousLayout.scrollHeight===scrollHeight){if(previousLayout.scrollTop>scrollTop){// Scrolling up => never increase `startLineNumber`
_startLineNumber=Math.min(_startLineNumber,previousLayout.startLineNumber);}if(previousLayout.scrollTop<scrollTop){// Scrolling down => never decrease `startLineNumber`
_startLineNumber=Math.max(_startLineNumber,previousLayout.startLineNumber);}}var _endLineNumber=Math.min(lineCount,_startLineNumber+minimapLinesFitting-1);var partialLine=(scrollTop-viewportStartLineNumberVerticalOffset)/lineHeight;var sliderTopAligned=(viewportStartLineNumber-_startLineNumber+partialLine)*minimapLineHeight/pixelRatio;return new MinimapLayout(scrollTop,scrollHeight,true,computedSliderRatio,sliderTopAligned,sliderHeight,_startLineNumber,_endLineNumber);}}}]);return MinimapLayout;}();var MinimapLine=/*#__PURE__*/function(){function MinimapLine(dy){minimap_classCallCheck(this,MinimapLine);this.dy=dy;}minimap_createClass(MinimapLine,[{key:"onContentChanged",value:function onContentChanged(){this.dy=-1;}},{key:"onTokensChanged",value:function onTokensChanged(){this.dy=-1;}}]);return MinimapLine;}();MinimapLine.INVALID=new MinimapLine(-1);var RenderData=/*#__PURE__*/function(){function RenderData(renderedLayout,imageData,lines){minimap_classCallCheck(this,RenderData);this.renderedLayout=renderedLayout;this._imageData=imageData;this._renderedLines=new RenderedLinesCollection(function(){return MinimapLine.INVALID;});this._renderedLines._set(renderedLayout.startLineNumber,lines);}/**
     * Check if the current RenderData matches accurately the new desired layout and no painting is needed.
     */minimap_createClass(RenderData,[{key:"linesEquals",value:function linesEquals(layout){if(!this.scrollEquals(layout)){return false;}var tmp=this._renderedLines._get();var lines=tmp.lines;for(var i=0,len=lines.length;i<len;i++){if(lines[i].dy===-1){// This line is invalid
return false;}}return true;}/**
     * Check if the current RenderData matches the new layout's scroll position
     */},{key:"scrollEquals",value:function scrollEquals(layout){return this.renderedLayout.startLineNumber===layout.startLineNumber&&this.renderedLayout.endLineNumber===layout.endLineNumber;}},{key:"_get",value:function _get(){var tmp=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:tmp.rendLineNumberStart,lines:tmp.lines};}},{key:"onLinesChanged",value:function onLinesChanged(changeFromLineNumber,changeToLineNumber){return this._renderedLines.onLinesChanged(changeFromLineNumber,changeToLineNumber);}},{key:"onLinesDeleted",value:function onLinesDeleted(deleteFromLineNumber,deleteToLineNumber){this._renderedLines.onLinesDeleted(deleteFromLineNumber,deleteToLineNumber);}},{key:"onLinesInserted",value:function onLinesInserted(insertFromLineNumber,insertToLineNumber){this._renderedLines.onLinesInserted(insertFromLineNumber,insertToLineNumber);}},{key:"onTokensChanged",value:function onTokensChanged(ranges){return this._renderedLines.onTokensChanged(ranges);}}]);return RenderData;}();/**
 * Some sort of double buffering.
 *
 * Keeps two buffers around that will be rotated for painting.
 * Always gives a buffer that is filled with the background color.
 */var MinimapBuffers=/*#__PURE__*/function(){function MinimapBuffers(ctx,WIDTH,HEIGHT,background){minimap_classCallCheck(this,MinimapBuffers);this._backgroundFillData=MinimapBuffers._createBackgroundFillData(WIDTH,HEIGHT,background);this._buffers=[ctx.createImageData(WIDTH,HEIGHT),ctx.createImageData(WIDTH,HEIGHT)];this._lastUsedBuffer=0;}minimap_createClass(MinimapBuffers,[{key:"getBuffer",value:function getBuffer(){// rotate buffers
this._lastUsedBuffer=1-this._lastUsedBuffer;var result=this._buffers[this._lastUsedBuffer];// fill with background color
result.data.set(this._backgroundFillData);return result;}}],[{key:"_createBackgroundFillData",value:function _createBackgroundFillData(WIDTH,HEIGHT,background){var backgroundR=background.r;var backgroundG=background.g;var backgroundB=background.b;var backgroundA=background.a;var result=new Uint8ClampedArray(WIDTH*HEIGHT*4);var offset=0;for(var i=0;i<HEIGHT;i++){for(var j=0;j<WIDTH;j++){result[offset]=backgroundR;result[offset+1]=backgroundG;result[offset+2]=backgroundB;result[offset+3]=backgroundA;offset+=4;}}return result;}}]);return MinimapBuffers;}();var MinimapSamplingState=/*#__PURE__*/function(){function MinimapSamplingState(samplingRatio,minimapLines){minimap_classCallCheck(this,MinimapSamplingState);this.samplingRatio=samplingRatio;this.minimapLines=minimapLines;}minimap_createClass(MinimapSamplingState,[{key:"modelLineToMinimapLine",value:function modelLineToMinimapLine(lineNumber){return Math.min(this.minimapLines.length,Math.max(1,Math.round(lineNumber/this.samplingRatio)));}/**
     * Will return null if the model line ranges are not intersecting with a sampled model line.
     */},{key:"modelLineRangeToMinimapLineRange",value:function modelLineRangeToMinimapLineRange(fromLineNumber,toLineNumber){var fromLineIndex=this.modelLineToMinimapLine(fromLineNumber)-1;while(fromLineIndex>0&&this.minimapLines[fromLineIndex-1]>=fromLineNumber){fromLineIndex--;}var toLineIndex=this.modelLineToMinimapLine(toLineNumber)-1;while(toLineIndex+1<this.minimapLines.length&&this.minimapLines[toLineIndex+1]<=toLineNumber){toLineIndex++;}if(fromLineIndex===toLineIndex){var sampledLineNumber=this.minimapLines[fromLineIndex];if(sampledLineNumber<fromLineNumber||sampledLineNumber>toLineNumber){// This line is not part of the sampled lines ==> nothing to do
return null;}}return[fromLineIndex+1,toLineIndex+1];}/**
     * Will always return a range, even if it is not intersecting with a sampled model line.
     */},{key:"decorationLineRangeToMinimapLineRange",value:function decorationLineRangeToMinimapLineRange(startLineNumber,endLineNumber){var minimapLineStart=this.modelLineToMinimapLine(startLineNumber);var minimapLineEnd=this.modelLineToMinimapLine(endLineNumber);if(startLineNumber!==endLineNumber&&minimapLineEnd===minimapLineStart){if(minimapLineEnd===this.minimapLines.length){if(minimapLineStart>1){minimapLineStart--;}}else{minimapLineEnd++;}}return[minimapLineStart,minimapLineEnd];}},{key:"onLinesDeleted",value:function onLinesDeleted(e){// have the mapping be sticky
var deletedLineCount=e.toLineNumber-e.fromLineNumber+1;var changeStartIndex=this.minimapLines.length;var changeEndIndex=0;for(var i=this.minimapLines.length-1;i>=0;i--){if(this.minimapLines[i]<e.fromLineNumber){break;}if(this.minimapLines[i]<=e.toLineNumber){// this line got deleted => move to previous available
this.minimapLines[i]=Math.max(1,e.fromLineNumber-1);changeStartIndex=Math.min(changeStartIndex,i);changeEndIndex=Math.max(changeEndIndex,i);}else{this.minimapLines[i]-=deletedLineCount;}}return[changeStartIndex,changeEndIndex];}},{key:"onLinesInserted",value:function onLinesInserted(e){// have the mapping be sticky
var insertedLineCount=e.toLineNumber-e.fromLineNumber+1;for(var i=this.minimapLines.length-1;i>=0;i--){if(this.minimapLines[i]<e.fromLineNumber){break;}this.minimapLines[i]+=insertedLineCount;}}}],[{key:"compute",value:function compute(options,viewLineCount,oldSamplingState){if(options.renderMinimap===0/* None */||!options.isSampling){return[null,[]];}// ratio is intentionally not part of the layout to avoid the layout changing all the time
// so we need to recompute it again...
var pixelRatio=options.pixelRatio;var lineHeight=options.lineHeight;var scrollBeyondLastLine=options.scrollBeyondLastLine;var _EditorLayoutInfoComp=editorOptions/* EditorLayoutInfoComputer.computeContainedMinimapLineCount */.gk.computeContainedMinimapLineCount({viewLineCount:viewLineCount,scrollBeyondLastLine:scrollBeyondLastLine,height:options.editorHeight,lineHeight:lineHeight,pixelRatio:pixelRatio}),minimapLineCount=_EditorLayoutInfoComp.minimapLineCount;var ratio=viewLineCount/minimapLineCount;var halfRatio=ratio/2;if(!oldSamplingState||oldSamplingState.minimapLines.length===0){var _result=[];_result[0]=1;if(minimapLineCount>1){for(var i=0,lastIndex=minimapLineCount-1;i<lastIndex;i++){_result[i]=Math.round(i*ratio+halfRatio);}_result[minimapLineCount-1]=viewLineCount;}return[new MinimapSamplingState(ratio,_result),[]];}var oldMinimapLines=oldSamplingState.minimapLines;var oldLength=oldMinimapLines.length;var result=[];var oldIndex=0;var oldDeltaLineCount=0;var minViewLineNumber=1;var MAX_EVENT_COUNT=10;// generate at most 10 events, if there are more than 10 changes, just flush all previous data
var events=[];var lastEvent=null;for(var _i=0;_i<minimapLineCount;_i++){var fromViewLineNumber=Math.max(minViewLineNumber,Math.round(_i*ratio));var toViewLineNumber=Math.max(fromViewLineNumber,Math.round((_i+1)*ratio));while(oldIndex<oldLength&&oldMinimapLines[oldIndex]<fromViewLineNumber){if(events.length<MAX_EVENT_COUNT){var oldMinimapLineNumber=oldIndex+1+oldDeltaLineCount;if(lastEvent&&lastEvent.type==='deleted'&&lastEvent._oldIndex===oldIndex-1){lastEvent.deleteToLineNumber++;}else{lastEvent={type:'deleted',_oldIndex:oldIndex,deleteFromLineNumber:oldMinimapLineNumber,deleteToLineNumber:oldMinimapLineNumber};events.push(lastEvent);}oldDeltaLineCount--;}oldIndex++;}var selectedViewLineNumber=void 0;if(oldIndex<oldLength&&oldMinimapLines[oldIndex]<=toViewLineNumber){// reuse the old sampled line
selectedViewLineNumber=oldMinimapLines[oldIndex];oldIndex++;}else{if(_i===0){selectedViewLineNumber=1;}else if(_i+1===minimapLineCount){selectedViewLineNumber=viewLineCount;}else{selectedViewLineNumber=Math.round(_i*ratio+halfRatio);}if(events.length<MAX_EVENT_COUNT){var _oldMinimapLineNumber=oldIndex+1+oldDeltaLineCount;if(lastEvent&&lastEvent.type==='inserted'&&lastEvent._i===_i-1){lastEvent.insertToLineNumber++;}else{lastEvent={type:'inserted',_i:_i,insertFromLineNumber:_oldMinimapLineNumber,insertToLineNumber:_oldMinimapLineNumber};events.push(lastEvent);}oldDeltaLineCount++;}}result[_i]=selectedViewLineNumber;minViewLineNumber=selectedViewLineNumber;}if(events.length<MAX_EVENT_COUNT){while(oldIndex<oldLength){var _oldMinimapLineNumber2=oldIndex+1+oldDeltaLineCount;if(lastEvent&&lastEvent.type==='deleted'&&lastEvent._oldIndex===oldIndex-1){lastEvent.deleteToLineNumber++;}else{lastEvent={type:'deleted',_oldIndex:oldIndex,deleteFromLineNumber:_oldMinimapLineNumber2,deleteToLineNumber:_oldMinimapLineNumber2};events.push(lastEvent);}oldDeltaLineCount--;oldIndex++;}}else{// too many events, just give up
events=[{type:'flush'}];}return[new MinimapSamplingState(ratio,result),events];}}]);return MinimapSamplingState;}();var Minimap=/*#__PURE__*/function(_ViewPart){minimap_inherits(Minimap,_ViewPart);var _super=minimap_createSuper(Minimap);function Minimap(context){var _this2;minimap_classCallCheck(this,Minimap);_this2=_super.call(this,context);_this2.tokensColorTracker=minimapTokensColorTracker/* MinimapTokensColorTracker.getInstance */.E.getInstance();_this2._selections=[];_this2._minimapSelections=null;_this2.options=new MinimapOptions(_this2._context.configuration,_this2._context.theme,_this2.tokensColorTracker);var _MinimapSamplingState=MinimapSamplingState.compute(_this2.options,_this2._context.model.getLineCount(),null),_MinimapSamplingState2=minimap_slicedToArray(_MinimapSamplingState,1),samplingState=_MinimapSamplingState2[0];_this2._samplingState=samplingState;_this2._shouldCheckSampling=false;_this2._actual=new InnerMinimap(context.theme,minimap_assertThisInitialized(_this2));return _this2;}minimap_createClass(Minimap,[{key:"dispose",value:function dispose(){this._actual.dispose();_get2(minimap_getPrototypeOf(Minimap.prototype),"dispose",this).call(this);}},{key:"getDomNode",value:function getDomNode(){return this._actual.getDomNode();}},{key:"_onOptionsMaybeChanged",value:function _onOptionsMaybeChanged(){var opts=new MinimapOptions(this._context.configuration,this._context.theme,this.tokensColorTracker);if(this.options.equals(opts)){return false;}this.options=opts;this._recreateLineSampling();this._actual.onDidChangeOptions();return true;}// ---- begin view event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){return this._onOptionsMaybeChanged();}},{key:"onCursorStateChanged",value:function onCursorStateChanged(e){this._selections=e.selections;this._minimapSelections=null;return this._actual.onSelectionChanged();}},{key:"onDecorationsChanged",value:function onDecorationsChanged(e){if(e.affectsMinimap){return this._actual.onDecorationsChanged();}return false;}},{key:"onFlushed",value:function onFlushed(e){if(this._samplingState){this._shouldCheckSampling=true;}return this._actual.onFlushed();}},{key:"onLinesChanged",value:function onLinesChanged(e){if(this._samplingState){var minimapLineRange=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);if(minimapLineRange){return this._actual.onLinesChanged(minimapLineRange[0],minimapLineRange[1]);}else{return false;}}else{return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber);}}},{key:"onLinesDeleted",value:function onLinesDeleted(e){if(this._samplingState){var _this$_samplingState$=this._samplingState.onLinesDeleted(e),_this$_samplingState$2=minimap_slicedToArray(_this$_samplingState$,2),changeStartIndex=_this$_samplingState$2[0],changeEndIndex=_this$_samplingState$2[1];if(changeStartIndex<=changeEndIndex){this._actual.onLinesChanged(changeStartIndex+1,changeEndIndex+1);}this._shouldCheckSampling=true;return true;}else{return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber);}}},{key:"onLinesInserted",value:function onLinesInserted(e){if(this._samplingState){this._samplingState.onLinesInserted(e);this._shouldCheckSampling=true;return true;}else{return this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber);}}},{key:"onScrollChanged",value:function onScrollChanged(e){return this._actual.onScrollChanged();}},{key:"onThemeChanged",value:function onThemeChanged(e){this._context.model.invalidateMinimapColorCache();this._actual.onThemeChanged();this._onOptionsMaybeChanged();return true;}},{key:"onTokensChanged",value:function onTokensChanged(e){if(this._samplingState){var ranges=[];var _iterator=minimap_createForOfIteratorHelper(e.ranges),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var range=_step.value;var minimapLineRange=this._samplingState.modelLineRangeToMinimapLineRange(range.fromLineNumber,range.toLineNumber);if(minimapLineRange){ranges.push({fromLineNumber:minimapLineRange[0],toLineNumber:minimapLineRange[1]});}}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(ranges.length){return this._actual.onTokensChanged(ranges);}else{return false;}}else{return this._actual.onTokensChanged(e.ranges);}}},{key:"onTokensColorsChanged",value:function onTokensColorsChanged(e){this._onOptionsMaybeChanged();return this._actual.onTokensColorsChanged();}},{key:"onZonesChanged",value:function onZonesChanged(e){return this._actual.onZonesChanged();}// --- end event handlers
},{key:"prepareRender",value:function prepareRender(ctx){if(this._shouldCheckSampling){this._shouldCheckSampling=false;this._recreateLineSampling();}}},{key:"render",value:function render(ctx){var viewportStartLineNumber=ctx.visibleRange.startLineNumber;var viewportEndLineNumber=ctx.visibleRange.endLineNumber;if(this._samplingState){viewportStartLineNumber=this._samplingState.modelLineToMinimapLine(viewportStartLineNumber);viewportEndLineNumber=this._samplingState.modelLineToMinimapLine(viewportEndLineNumber);}var minimapCtx={viewportContainsWhitespaceGaps:ctx.viewportData.whitespaceViewportData.length>0,scrollWidth:ctx.scrollWidth,scrollHeight:ctx.scrollHeight,viewportStartLineNumber:viewportStartLineNumber,viewportEndLineNumber:viewportEndLineNumber,viewportStartLineNumberVerticalOffset:ctx.getVerticalOffsetForLineNumber(viewportStartLineNumber),scrollTop:ctx.scrollTop,scrollLeft:ctx.scrollLeft,viewportWidth:ctx.viewportWidth,viewportHeight:ctx.viewportHeight};this._actual.render(minimapCtx);}//#region IMinimapModel
},{key:"_recreateLineSampling",value:function _recreateLineSampling(){this._minimapSelections=null;var wasSampling=Boolean(this._samplingState);var _MinimapSamplingState3=MinimapSamplingState.compute(this.options,this._context.model.getLineCount(),this._samplingState),_MinimapSamplingState4=minimap_slicedToArray(_MinimapSamplingState3,2),samplingState=_MinimapSamplingState4[0],events=_MinimapSamplingState4[1];this._samplingState=samplingState;if(wasSampling&&this._samplingState){// was sampling, is sampling
var _iterator2=minimap_createForOfIteratorHelper(events),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var event=_step2.value;switch(event.type){case'deleted':this._actual.onLinesDeleted(event.deleteFromLineNumber,event.deleteToLineNumber);break;case'inserted':this._actual.onLinesInserted(event.insertFromLineNumber,event.insertToLineNumber);break;case'flush':this._actual.onFlushed();break;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}}},{key:"getLineCount",value:function getLineCount(){if(this._samplingState){return this._samplingState.minimapLines.length;}return this._context.model.getLineCount();}},{key:"getRealLineCount",value:function getRealLineCount(){return this._context.model.getLineCount();}},{key:"getLineContent",value:function getLineContent(lineNumber){if(this._samplingState){return this._context.model.getLineContent(this._samplingState.minimapLines[lineNumber-1]);}return this._context.model.getLineContent(lineNumber);}},{key:"getLineMaxColumn",value:function getLineMaxColumn(lineNumber){if(this._samplingState){return this._context.model.getLineMaxColumn(this._samplingState.minimapLines[lineNumber-1]);}return this._context.model.getLineMaxColumn(lineNumber);}},{key:"getMinimapLinesRenderingData",value:function getMinimapLinesRenderingData(startLineNumber,endLineNumber,needed){if(this._samplingState){var result=[];for(var lineIndex=0,lineCount=endLineNumber-startLineNumber+1;lineIndex<lineCount;lineIndex++){if(needed[lineIndex]){result[lineIndex]=this._context.model.getViewLineData(this._samplingState.minimapLines[startLineNumber+lineIndex-1]);}else{result[lineIndex]=null;}}return result;}return this._context.model.getMinimapLinesRenderingData(startLineNumber,endLineNumber,needed).data;}},{key:"getSelections",value:function getSelections(){if(this._minimapSelections===null){if(this._samplingState){this._minimapSelections=[];var _iterator3=minimap_createForOfIteratorHelper(this._selections),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var selection=_step3.value;var _this$_samplingState$3=this._samplingState.decorationLineRangeToMinimapLineRange(selection.startLineNumber,selection.endLineNumber),_this$_samplingState$4=minimap_slicedToArray(_this$_samplingState$3,2),minimapLineStart=_this$_samplingState$4[0],minimapLineEnd=_this$_samplingState$4[1];this._minimapSelections.push(new core_selection/* Selection */.Y(minimapLineStart,selection.startColumn,minimapLineEnd,selection.endColumn));}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}else{this._minimapSelections=this._selections;}}return this._minimapSelections;}},{key:"getMinimapDecorationsInViewport",value:function getMinimapDecorationsInViewport(startLineNumber,endLineNumber){var visibleRange;if(this._samplingState){var modelStartLineNumber=this._samplingState.minimapLines[startLineNumber-1];var modelEndLineNumber=this._samplingState.minimapLines[endLineNumber-1];visibleRange=new core_range/* Range */.e(modelStartLineNumber,1,modelEndLineNumber,this._context.model.getLineMaxColumn(modelEndLineNumber));}else{visibleRange=new core_range/* Range */.e(startLineNumber,1,endLineNumber,this._context.model.getLineMaxColumn(endLineNumber));}var decorations=this._context.model.getDecorationsInViewport(visibleRange);if(this._samplingState){var result=[];var _iterator4=minimap_createForOfIteratorHelper(decorations),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var decoration=_step4.value;if(!decoration.options.minimap){continue;}var range=decoration.range;var minimapStartLineNumber=this._samplingState.modelLineToMinimapLine(range.startLineNumber);var minimapEndLineNumber=this._samplingState.modelLineToMinimapLine(range.endLineNumber);result.push(new viewModel/* ViewModelDecoration */.$l(new core_range/* Range */.e(minimapStartLineNumber,range.startColumn,minimapEndLineNumber,range.endColumn),decoration.options));}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return result;}return decorations;}},{key:"getOptions",value:function getOptions(){return this._context.model.getTextModelOptions();}},{key:"revealLineNumber",value:function revealLineNumber(lineNumber){if(this._samplingState){lineNumber=this._samplingState.minimapLines[lineNumber-1];}this._context.model.revealRange('mouse',false,new core_range/* Range */.e(lineNumber,1,lineNumber,1),1/* Center */,0/* Smooth */);}},{key:"setScrollTop",value:function setScrollTop(scrollTop){this._context.model.setScrollPosition({scrollTop:scrollTop},1/* Immediate */);}}]);return Minimap;}(viewPart/* ViewPart */.E);var InnerMinimap=/*#__PURE__*/function(_Disposable){minimap_inherits(InnerMinimap,_Disposable);var _super2=minimap_createSuper(InnerMinimap);function InnerMinimap(theme,model){var _this3;minimap_classCallCheck(this,InnerMinimap);_this3=_super2.call(this);_this3._renderDecorations=false;_this3._gestureInProgress=false;_this3._theme=theme;_this3._model=model;_this3._lastRenderData=null;_this3._buffers=null;_this3._selectionColor=_this3._theme.getColor(colorRegistry/* minimapSelection */.ov3);_this3._domNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));viewPart/* PartFingerprints.write */.K.write(_this3._domNode,8/* Minimap */);_this3._domNode.setClassName(_this3._getMinimapDomNodeClassName());_this3._domNode.setPosition('absolute');_this3._domNode.setAttribute('role','presentation');_this3._domNode.setAttribute('aria-hidden','true');_this3._shadow=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this3._shadow.setClassName('minimap-shadow-hidden');_this3._domNode.appendChild(_this3._shadow);_this3._canvas=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('canvas'));_this3._canvas.setPosition('absolute');_this3._canvas.setLeft(0);_this3._domNode.appendChild(_this3._canvas);_this3._decorationsCanvas=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('canvas'));_this3._decorationsCanvas.setPosition('absolute');_this3._decorationsCanvas.setClassName('minimap-decorations-layer');_this3._decorationsCanvas.setLeft(0);_this3._domNode.appendChild(_this3._decorationsCanvas);_this3._slider=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this3._slider.setPosition('absolute');_this3._slider.setClassName('minimap-slider');_this3._slider.setLayerHinting(true);_this3._slider.setContain('strict');_this3._domNode.appendChild(_this3._slider);_this3._sliderHorizontal=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this3._sliderHorizontal.setPosition('absolute');_this3._sliderHorizontal.setClassName('minimap-slider-horizontal');_this3._slider.appendChild(_this3._sliderHorizontal);_this3._applyLayout();_this3._mouseDownListener=dom.addStandardDisposableListener(_this3._domNode.domNode,'mousedown',function(e){e.preventDefault();var renderMinimap=_this3._model.options.renderMinimap;if(renderMinimap===0/* None */){return;}if(!_this3._lastRenderData){return;}if(_this3._model.options.size!=='proportional'){if(e.leftButton&&_this3._lastRenderData){// pretend the click occurred in the center of the slider
var position=dom.getDomNodePagePosition(_this3._slider.domNode);var initialPosY=position.top+position.height/2;_this3._startSliderDragging(e.buttons,e.posx,initialPosY,e.posy,_this3._lastRenderData.renderedLayout);}return;}var minimapLineHeight=_this3._model.options.minimapLineHeight;var internalOffsetY=_this3._model.options.canvasInnerHeight/_this3._model.options.canvasOuterHeight*e.browserEvent.offsetY;var lineIndex=Math.floor(internalOffsetY/minimapLineHeight);var lineNumber=lineIndex+_this3._lastRenderData.renderedLayout.startLineNumber;lineNumber=Math.min(lineNumber,_this3._model.getLineCount());_this3._model.revealLineNumber(lineNumber);});_this3._sliderMouseMoveMonitor=new globalMouseMoveMonitor/* GlobalMouseMoveMonitor */.Z();_this3._sliderMouseDownListener=dom.addStandardDisposableListener(_this3._slider.domNode,'mousedown',function(e){e.preventDefault();e.stopPropagation();if(e.leftButton&&_this3._lastRenderData){_this3._startSliderDragging(e.buttons,e.posx,e.posy,e.posy,_this3._lastRenderData.renderedLayout);}});_this3._gestureDisposable=touch/* Gesture.addTarget */.o.addTarget(_this3._domNode.domNode);_this3._sliderTouchStartListener=dom.addDisposableListener(_this3._domNode.domNode,touch/* EventType.Start */.t.Start,function(e){e.preventDefault();e.stopPropagation();if(_this3._lastRenderData){_this3._slider.toggleClassName('active',true);_this3._gestureInProgress=true;_this3.scrollDueToTouchEvent(e);}},{passive:false});_this3._sliderTouchMoveListener=dom.addDisposableListener(_this3._domNode.domNode,touch/* EventType.Change */.t.Change,function(e){e.preventDefault();e.stopPropagation();if(_this3._lastRenderData&&_this3._gestureInProgress){_this3.scrollDueToTouchEvent(e);}},{passive:false});_this3._sliderTouchEndListener=dom.addStandardDisposableListener(_this3._domNode.domNode,touch/* EventType.End */.t.End,function(e){e.preventDefault();e.stopPropagation();_this3._gestureInProgress=false;_this3._slider.toggleClassName('active',false);});return _this3;}minimap_createClass(InnerMinimap,[{key:"_startSliderDragging",value:function _startSliderDragging(initialButtons,initialPosX,initialPosY,posy,initialSliderState){var _this4=this;this._slider.toggleClassName('active',true);var handleMouseMove=function handleMouseMove(posy,posx){var mouseOrthogonalDelta=Math.abs(posx-initialPosX);if(platform/* isWindows */.ED&&mouseOrthogonalDelta>MOUSE_DRAG_RESET_DISTANCE){// The mouse has wondered away from the scrollbar => reset dragging
_this4._model.setScrollTop(initialSliderState.scrollTop);return;}var mouseDelta=posy-initialPosY;_this4._model.setScrollTop(initialSliderState.getDesiredScrollTopFromDelta(mouseDelta));};if(posy!==initialPosY){handleMouseMove(posy,initialPosX);}this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,initialButtons,globalMouseMoveMonitor/* standardMouseMoveMerger */.e,function(mouseMoveData){return handleMouseMove(mouseMoveData.posy,mouseMoveData.posx);},function(){_this4._slider.toggleClassName('active',false);});}},{key:"scrollDueToTouchEvent",value:function scrollDueToTouchEvent(touch){var startY=this._domNode.domNode.getBoundingClientRect().top;var scrollTop=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(touch.pageY-startY);this._model.setScrollTop(scrollTop);}},{key:"dispose",value:function dispose(){this._mouseDownListener.dispose();this._sliderMouseMoveMonitor.dispose();this._sliderMouseDownListener.dispose();this._gestureDisposable.dispose();this._sliderTouchStartListener.dispose();this._sliderTouchMoveListener.dispose();this._sliderTouchEndListener.dispose();_get2(minimap_getPrototypeOf(InnerMinimap.prototype),"dispose",this).call(this);}},{key:"_getMinimapDomNodeClassName",value:function _getMinimapDomNodeClassName(){if(this._model.options.showSlider==='always'){return'minimap slider-always';}return'minimap slider-mouseover';}},{key:"getDomNode",value:function getDomNode(){return this._domNode;}},{key:"_applyLayout",value:function _applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft);this._domNode.setWidth(this._model.options.minimapWidth);this._domNode.setHeight(this._model.options.minimapHeight);this._shadow.setHeight(this._model.options.minimapHeight);this._canvas.setWidth(this._model.options.canvasOuterWidth);this._canvas.setHeight(this._model.options.canvasOuterHeight);this._canvas.domNode.width=this._model.options.canvasInnerWidth;this._canvas.domNode.height=this._model.options.canvasInnerHeight;this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth);this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight);this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth;this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight;this._slider.setWidth(this._model.options.minimapWidth);}},{key:"_getBuffer",value:function _getBuffer(){if(!this._buffers){if(this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0){this._buffers=new MinimapBuffers(this._canvas.domNode.getContext('2d'),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor);}}return this._buffers?this._buffers.getBuffer():null;}// ---- begin view event handlers
},{key:"onDidChangeOptions",value:function onDidChangeOptions(){this._lastRenderData=null;this._buffers=null;this._applyLayout();this._domNode.setClassName(this._getMinimapDomNodeClassName());}},{key:"onSelectionChanged",value:function onSelectionChanged(){this._renderDecorations=true;return true;}},{key:"onDecorationsChanged",value:function onDecorationsChanged(){this._renderDecorations=true;return true;}},{key:"onFlushed",value:function onFlushed(){this._lastRenderData=null;return true;}},{key:"onLinesChanged",value:function onLinesChanged(changeFromLineNumber,changeToLineNumber){if(this._lastRenderData){return this._lastRenderData.onLinesChanged(changeFromLineNumber,changeToLineNumber);}return false;}},{key:"onLinesDeleted",value:function onLinesDeleted(deleteFromLineNumber,deleteToLineNumber){if(this._lastRenderData){this._lastRenderData.onLinesDeleted(deleteFromLineNumber,deleteToLineNumber);}return true;}},{key:"onLinesInserted",value:function onLinesInserted(insertFromLineNumber,insertToLineNumber){if(this._lastRenderData){this._lastRenderData.onLinesInserted(insertFromLineNumber,insertToLineNumber);}return true;}},{key:"onScrollChanged",value:function onScrollChanged(){this._renderDecorations=true;return true;}},{key:"onThemeChanged",value:function onThemeChanged(){this._selectionColor=this._theme.getColor(colorRegistry/* minimapSelection */.ov3);this._renderDecorations=true;return true;}},{key:"onTokensChanged",value:function onTokensChanged(ranges){if(this._lastRenderData){return this._lastRenderData.onTokensChanged(ranges);}return false;}},{key:"onTokensColorsChanged",value:function onTokensColorsChanged(){this._lastRenderData=null;this._buffers=null;return true;}},{key:"onZonesChanged",value:function onZonesChanged(){this._lastRenderData=null;return true;}// --- end event handlers
},{key:"render",value:function render(renderingCtx){var renderMinimap=this._model.options.renderMinimap;if(renderMinimap===0/* None */){this._shadow.setClassName('minimap-shadow-hidden');this._sliderHorizontal.setWidth(0);this._sliderHorizontal.setHeight(0);return;}if(renderingCtx.scrollLeft+renderingCtx.viewportWidth>=renderingCtx.scrollWidth){this._shadow.setClassName('minimap-shadow-hidden');}else{this._shadow.setClassName('minimap-shadow-visible');}var layout=MinimapLayout.create(this._model.options,renderingCtx.viewportStartLineNumber,renderingCtx.viewportEndLineNumber,renderingCtx.viewportStartLineNumberVerticalOffset,renderingCtx.viewportHeight,renderingCtx.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),renderingCtx.scrollTop,renderingCtx.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(layout.sliderNeeded?'block':'none');this._slider.setTop(layout.sliderTop);this._slider.setHeight(layout.sliderHeight);// Compute horizontal slider coordinates
this._sliderHorizontal.setLeft(0);this._sliderHorizontal.setWidth(this._model.options.minimapWidth);this._sliderHorizontal.setTop(0);this._sliderHorizontal.setHeight(layout.sliderHeight);this.renderDecorations(layout);this._lastRenderData=this.renderLines(layout);}},{key:"renderDecorations",value:function renderDecorations(layout){if(this._renderDecorations){this._renderDecorations=false;var selections=this._model.getSelections();selections.sort(core_range/* Range.compareRangesUsingStarts */.e.compareRangesUsingStarts);var decorations=this._model.getMinimapDecorationsInViewport(layout.startLineNumber,layout.endLineNumber);decorations.sort(function(a,b){return(a.options.zIndex||0)-(b.options.zIndex||0);});var _this$_model$options=this._model.options,canvasInnerWidth=_this$_model$options.canvasInnerWidth,canvasInnerHeight=_this$_model$options.canvasInnerHeight;var lineHeight=this._model.options.minimapLineHeight;var characterWidth=this._model.options.minimapCharWidth;var tabSize=this._model.getOptions().tabSize;var canvasContext=this._decorationsCanvas.domNode.getContext('2d');canvasContext.clearRect(0,0,canvasInnerWidth,canvasInnerHeight);// We first need to render line highlights and then render decorations on top of those.
// But we need to pick a single color for each line, and use that as a line highlight.
// This needs to be the color of the decoration with the highest `zIndex`, but priority
// is given to the selection.
var highlightedLines=new ContiguousLineMap(layout.startLineNumber,layout.endLineNumber,false);this._renderSelectionLineHighlights(canvasContext,selections,highlightedLines,layout,lineHeight);this._renderDecorationsLineHighlights(canvasContext,decorations,highlightedLines,layout,lineHeight);var lineOffsetMap=new ContiguousLineMap(layout.startLineNumber,layout.endLineNumber,null);this._renderSelectionsHighlights(canvasContext,selections,lineOffsetMap,layout,lineHeight,tabSize,characterWidth,canvasInnerWidth);this._renderDecorationsHighlights(canvasContext,decorations,lineOffsetMap,layout,lineHeight,tabSize,characterWidth,canvasInnerWidth);}}},{key:"_renderSelectionLineHighlights",value:function _renderSelectionLineHighlights(canvasContext,selections,highlightedLines,layout,lineHeight){if(!this._selectionColor||this._selectionColor.isTransparent()){return;}canvasContext.fillStyle=this._selectionColor.transparent(0.5).toString();var y1=0;var y2=0;var _iterator5=minimap_createForOfIteratorHelper(selections),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var selection=_step5.value;var startLineNumber=Math.max(layout.startLineNumber,selection.startLineNumber);var endLineNumber=Math.min(layout.endLineNumber,selection.endLineNumber);if(startLineNumber>endLineNumber){// entirely outside minimap's viewport
continue;}for(var line=startLineNumber;line<=endLineNumber;line++){highlightedLines.set(line,true);}var yy1=(startLineNumber-layout.startLineNumber)*lineHeight;var yy2=(endLineNumber-layout.startLineNumber)*lineHeight+lineHeight;if(y2>=yy1){// merge into previous
y2=yy2;}else{if(y2>y1){// flush
canvasContext.fillRect(editorOptions/* MINIMAP_GUTTER_WIDTH */.y0,y1,canvasContext.canvas.width,y2-y1);}y1=yy1;y2=yy2;}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}if(y2>y1){// flush
canvasContext.fillRect(editorOptions/* MINIMAP_GUTTER_WIDTH */.y0,y1,canvasContext.canvas.width,y2-y1);}}},{key:"_renderDecorationsLineHighlights",value:function _renderDecorationsLineHighlights(canvasContext,decorations,highlightedLines,layout,lineHeight){var highlightColors=new Map();// Loop backwards to hit first decorations with higher `zIndex`
for(var i=decorations.length-1;i>=0;i--){var decoration=decorations[i];var minimapOptions=decoration.options.minimap;if(!minimapOptions||minimapOptions.position!==model/* MinimapPosition.Inline */.F5.Inline){continue;}var startLineNumber=Math.max(layout.startLineNumber,decoration.range.startLineNumber);var endLineNumber=Math.min(layout.endLineNumber,decoration.range.endLineNumber);if(startLineNumber>endLineNumber){// entirely outside minimap's viewport
continue;}var decorationColor=minimapOptions.getColor(this._theme.value);if(!decorationColor||decorationColor.isTransparent()){continue;}var highlightColor=highlightColors.get(decorationColor.toString());if(!highlightColor){highlightColor=decorationColor.transparent(0.5).toString();highlightColors.set(decorationColor.toString(),highlightColor);}canvasContext.fillStyle=highlightColor;for(var line=startLineNumber;line<=endLineNumber;line++){if(highlightedLines.has(line)){continue;}highlightedLines.set(line,true);var y=(startLineNumber-layout.startLineNumber)*lineHeight;canvasContext.fillRect(editorOptions/* MINIMAP_GUTTER_WIDTH */.y0,y,canvasContext.canvas.width,lineHeight);}}}},{key:"_renderSelectionsHighlights",value:function _renderSelectionsHighlights(canvasContext,selections,lineOffsetMap,layout,lineHeight,tabSize,characterWidth,canvasInnerWidth){if(!this._selectionColor||this._selectionColor.isTransparent()){return;}var _iterator6=minimap_createForOfIteratorHelper(selections),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var selection=_step6.value;var startLineNumber=Math.max(layout.startLineNumber,selection.startLineNumber);var endLineNumber=Math.min(layout.endLineNumber,selection.endLineNumber);if(startLineNumber>endLineNumber){// entirely outside minimap's viewport
continue;}for(var line=startLineNumber;line<=endLineNumber;line++){this.renderDecorationOnLine(canvasContext,lineOffsetMap,selection,this._selectionColor,layout,line,lineHeight,lineHeight,tabSize,characterWidth,canvasInnerWidth);}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}},{key:"_renderDecorationsHighlights",value:function _renderDecorationsHighlights(canvasContext,decorations,lineOffsetMap,layout,lineHeight,tabSize,characterWidth,canvasInnerWidth){// Loop forwards to hit first decorations with lower `zIndex`
var _iterator7=minimap_createForOfIteratorHelper(decorations),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var decoration=_step7.value;var minimapOptions=decoration.options.minimap;if(!minimapOptions){continue;}var startLineNumber=Math.max(layout.startLineNumber,decoration.range.startLineNumber);var endLineNumber=Math.min(layout.endLineNumber,decoration.range.endLineNumber);if(startLineNumber>endLineNumber){// entirely outside minimap's viewport
continue;}var decorationColor=minimapOptions.getColor(this._theme.value);if(!decorationColor||decorationColor.isTransparent()){continue;}for(var line=startLineNumber;line<=endLineNumber;line++){switch(minimapOptions.position){case model/* MinimapPosition.Inline */.F5.Inline:this.renderDecorationOnLine(canvasContext,lineOffsetMap,decoration.range,decorationColor,layout,line,lineHeight,lineHeight,tabSize,characterWidth,canvasInnerWidth);continue;case model/* MinimapPosition.Gutter */.F5.Gutter:{var y=(line-layout.startLineNumber)*lineHeight;var x=2;this.renderDecoration(canvasContext,decorationColor,x,y,GUTTER_DECORATION_WIDTH,lineHeight);continue;}}}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}},{key:"renderDecorationOnLine",value:function renderDecorationOnLine(canvasContext,lineOffsetMap,decorationRange,decorationColor,layout,lineNumber,height,lineHeight,tabSize,charWidth,canvasInnerWidth){var y=(lineNumber-layout.startLineNumber)*lineHeight;// Skip rendering the line if it's vertically outside our viewport
if(y+height<0||y>this._model.options.canvasInnerHeight){return;}var startLineNumber=decorationRange.startLineNumber,endLineNumber=decorationRange.endLineNumber;var startColumn=startLineNumber===lineNumber?decorationRange.startColumn:1;var endColumn=endLineNumber===lineNumber?decorationRange.endColumn:this._model.getLineMaxColumn(lineNumber);var x1=this.getXOffsetForPosition(lineOffsetMap,lineNumber,startColumn,tabSize,charWidth,canvasInnerWidth);var x2=this.getXOffsetForPosition(lineOffsetMap,lineNumber,endColumn,tabSize,charWidth,canvasInnerWidth);this.renderDecoration(canvasContext,decorationColor,x1,y,x2-x1,height);}},{key:"getXOffsetForPosition",value:function getXOffsetForPosition(lineOffsetMap,lineNumber,column,tabSize,charWidth,canvasInnerWidth){if(column===1){return editorOptions/* MINIMAP_GUTTER_WIDTH */.y0;}var minimumXOffset=(column-1)*charWidth;if(minimumXOffset>=canvasInnerWidth){// there is no need to look at actual characters,
// as this column is certainly after the minimap width
return canvasInnerWidth;}// Cache line offset data so that it is only read once per line
var lineIndexToXOffset=lineOffsetMap.get(lineNumber);if(!lineIndexToXOffset){var lineData=this._model.getLineContent(lineNumber);lineIndexToXOffset=[editorOptions/* MINIMAP_GUTTER_WIDTH */.y0];var prevx=editorOptions/* MINIMAP_GUTTER_WIDTH */.y0;for(var i=1;i<lineData.length+1;i++){var charCode=lineData.charCodeAt(i-1);var dx=charCode===9/* Tab */?tabSize*charWidth:strings/* isFullWidthCharacter */.K7(charCode)?2*charWidth:charWidth;var x=prevx+dx;if(x>=canvasInnerWidth){// no need to keep on going, as we've hit the canvas width
lineIndexToXOffset[i]=canvasInnerWidth;break;}lineIndexToXOffset[i]=x;prevx=x;}lineOffsetMap.set(lineNumber,lineIndexToXOffset);}if(column-1<lineIndexToXOffset.length){return lineIndexToXOffset[column-1];}// goes over the canvas width
return canvasInnerWidth;}},{key:"renderDecoration",value:function renderDecoration(canvasContext,decorationColor,x,y,width,height){canvasContext.fillStyle=decorationColor&&decorationColor.toString()||'';canvasContext.fillRect(x,y,width,height);}},{key:"renderLines",value:function renderLines(layout){var startLineNumber=layout.startLineNumber;var endLineNumber=layout.endLineNumber;var minimapLineHeight=this._model.options.minimapLineHeight;// Check if nothing changed w.r.t. lines from last frame
if(this._lastRenderData&&this._lastRenderData.linesEquals(layout)){var _lastData=this._lastRenderData._get();// Nice!! Nothing changed from last frame
return new RenderData(layout,_lastData.imageData,_lastData.lines);}// Oh well!! We need to repaint some lines...
var imageData=this._getBuffer();if(!imageData){// 0 width or 0 height canvas, nothing to do
return null;}// Render untouched lines by using last rendered data.
var _InnerMinimap$_render=InnerMinimap._renderUntouchedLines(imageData,startLineNumber,endLineNumber,minimapLineHeight,this._lastRenderData),_InnerMinimap$_render2=minimap_slicedToArray(_InnerMinimap$_render,3),_dirtyY1=_InnerMinimap$_render2[0],_dirtyY2=_InnerMinimap$_render2[1],needed=_InnerMinimap$_render2[2];// Fetch rendering info from view model for rest of lines that need rendering.
var lineInfo=this._model.getMinimapLinesRenderingData(startLineNumber,endLineNumber,needed);var tabSize=this._model.getOptions().tabSize;var defaultBackground=this._model.options.defaultBackgroundColor;var background=this._model.options.backgroundColor;var foregroundAlpha=this._model.options.foregroundAlpha;var tokensColorTracker=this._model.tokensColorTracker;var useLighterFont=tokensColorTracker.backgroundIsLight();var renderMinimap=this._model.options.renderMinimap;var charRenderer=this._model.options.charRenderer();var fontScale=this._model.options.fontScale;var minimapCharWidth=this._model.options.minimapCharWidth;var baseCharHeight=renderMinimap===1/* Text */?2/* BASE_CHAR_HEIGHT */:2/* BASE_CHAR_HEIGHT */+1;var renderMinimapLineHeight=baseCharHeight*fontScale;var innerLinePadding=minimapLineHeight>renderMinimapLineHeight?Math.floor((minimapLineHeight-renderMinimapLineHeight)/2):0;// Render the rest of lines
var backgroundA=background.a/255;var renderBackground=new rgba/* RGBA8 */.h(Math.round((background.r-defaultBackground.r)*backgroundA+defaultBackground.r),Math.round((background.g-defaultBackground.g)*backgroundA+defaultBackground.g),Math.round((background.b-defaultBackground.b)*backgroundA+defaultBackground.b),255);var dy=0;var renderedLines=[];for(var lineIndex=0,lineCount=endLineNumber-startLineNumber+1;lineIndex<lineCount;lineIndex++){if(needed[lineIndex]){InnerMinimap._renderLine(imageData,renderBackground,background.a,useLighterFont,renderMinimap,minimapCharWidth,tokensColorTracker,foregroundAlpha,charRenderer,dy,innerLinePadding,tabSize,lineInfo[lineIndex],fontScale,minimapLineHeight);}renderedLines[lineIndex]=new MinimapLine(dy);dy+=minimapLineHeight;}var dirtyY1=_dirtyY1===-1?0:_dirtyY1;var dirtyY2=_dirtyY2===-1?imageData.height:_dirtyY2;var dirtyHeight=dirtyY2-dirtyY1;// Finally, paint to the canvas
var ctx=this._canvas.domNode.getContext('2d');ctx.putImageData(imageData,0,0,0,dirtyY1,imageData.width,dirtyHeight);// Save rendered data for reuse on next frame if possible
return new RenderData(layout,imageData,renderedLines);}}],[{key:"_renderUntouchedLines",value:function _renderUntouchedLines(target,startLineNumber,endLineNumber,minimapLineHeight,lastRenderData){var needed=[];if(!lastRenderData){for(var i=0,len=endLineNumber-startLineNumber+1;i<len;i++){needed[i]=true;}return[-1,-1,needed];}var _lastData=lastRenderData._get();var lastTargetData=_lastData.imageData.data;var lastStartLineNumber=_lastData.rendLineNumberStart;var lastLines=_lastData.lines;var lastLinesLength=lastLines.length;var WIDTH=target.width;var targetData=target.data;var maxDestPixel=(endLineNumber-startLineNumber+1)*minimapLineHeight*WIDTH*4;var dirtyPixel1=-1;// the pixel offset up to which all the data is equal to the prev frame
var dirtyPixel2=-1;// the pixel offset after which all the data is equal to the prev frame
var copySourceStart=-1;var copySourceEnd=-1;var copyDestStart=-1;var copyDestEnd=-1;var dest_dy=0;for(var lineNumber=startLineNumber;lineNumber<=endLineNumber;lineNumber++){var lineIndex=lineNumber-startLineNumber;var lastLineIndex=lineNumber-lastStartLineNumber;var source_dy=lastLineIndex>=0&&lastLineIndex<lastLinesLength?lastLines[lastLineIndex].dy:-1;if(source_dy===-1){needed[lineIndex]=true;dest_dy+=minimapLineHeight;continue;}var sourceStart=source_dy*WIDTH*4;var sourceEnd=(source_dy+minimapLineHeight)*WIDTH*4;var destStart=dest_dy*WIDTH*4;var destEnd=(dest_dy+minimapLineHeight)*WIDTH*4;if(copySourceEnd===sourceStart&&copyDestEnd===destStart){// contiguous zone => extend copy request
copySourceEnd=sourceEnd;copyDestEnd=destEnd;}else{if(copySourceStart!==-1){// flush existing copy request
targetData.set(lastTargetData.subarray(copySourceStart,copySourceEnd),copyDestStart);if(dirtyPixel1===-1&&copySourceStart===0&&copySourceStart===copyDestStart){dirtyPixel1=copySourceEnd;}if(dirtyPixel2===-1&&copySourceEnd===maxDestPixel&&copySourceStart===copyDestStart){dirtyPixel2=copySourceStart;}}copySourceStart=sourceStart;copySourceEnd=sourceEnd;copyDestStart=destStart;copyDestEnd=destEnd;}needed[lineIndex]=false;dest_dy+=minimapLineHeight;}if(copySourceStart!==-1){// flush existing copy request
targetData.set(lastTargetData.subarray(copySourceStart,copySourceEnd),copyDestStart);if(dirtyPixel1===-1&&copySourceStart===0&&copySourceStart===copyDestStart){dirtyPixel1=copySourceEnd;}if(dirtyPixel2===-1&&copySourceEnd===maxDestPixel&&copySourceStart===copyDestStart){dirtyPixel2=copySourceStart;}}var dirtyY1=dirtyPixel1===-1?-1:dirtyPixel1/(WIDTH*4);var dirtyY2=dirtyPixel2===-1?-1:dirtyPixel2/(WIDTH*4);return[dirtyY1,dirtyY2,needed];}},{key:"_renderLine",value:function _renderLine(target,backgroundColor,backgroundAlpha,useLighterFont,renderMinimap,charWidth,colorTracker,foregroundAlpha,minimapCharRenderer,dy,innerLinePadding,tabSize,lineData,fontScale,minimapLineHeight){var content=lineData.content;var tokens=lineData.tokens;var maxDx=target.width-charWidth;var force1pxHeight=minimapLineHeight===1;var dx=editorOptions/* MINIMAP_GUTTER_WIDTH */.y0;var charIndex=0;var tabsCharDelta=0;for(var tokenIndex=0,tokensLen=tokens.getCount();tokenIndex<tokensLen;tokenIndex++){var tokenEndIndex=tokens.getEndOffset(tokenIndex);var tokenColorId=tokens.getForeground(tokenIndex);var tokenColor=colorTracker.getColor(tokenColorId);for(;charIndex<tokenEndIndex;charIndex++){if(dx>maxDx){// hit edge of minimap
return;}var charCode=content.charCodeAt(charIndex);if(charCode===9/* Tab */){var insertSpacesCount=tabSize-(charIndex+tabsCharDelta)%tabSize;tabsCharDelta+=insertSpacesCount-1;// No need to render anything since tab is invisible
dx+=insertSpacesCount*charWidth;}else if(charCode===32/* Space */){// No need to render anything since space is invisible
dx+=charWidth;}else{// Render twice for a full width character
var count=strings/* isFullWidthCharacter */.K7(charCode)?2:1;for(var i=0;i<count;i++){if(renderMinimap===2/* Blocks */){minimapCharRenderer.blockRenderChar(target,dx,dy+innerLinePadding,tokenColor,foregroundAlpha,backgroundColor,backgroundAlpha,force1pxHeight);}else{// RenderMinimap.Text
minimapCharRenderer.renderChar(target,dx,dy+innerLinePadding,charCode,tokenColor,foregroundAlpha,backgroundColor,backgroundAlpha,fontScale,useLighterFont,force1pxHeight);}dx+=charWidth;if(dx>maxDx){// hit edge of minimap
return;}}}}}}}]);return InnerMinimap;}(lifecycle/* Disposable */.JT);var ContiguousLineMap=/*#__PURE__*/function(){function ContiguousLineMap(startLineNumber,endLineNumber,defaultValue){minimap_classCallCheck(this,ContiguousLineMap);this._startLineNumber=startLineNumber;this._endLineNumber=endLineNumber;this._defaultValue=defaultValue;this._values=[];for(var i=0,count=this._endLineNumber-this._startLineNumber+1;i<count;i++){this._values[i]=defaultValue;}}minimap_createClass(ContiguousLineMap,[{key:"has",value:function has(lineNumber){return this.get(lineNumber)!==this._defaultValue;}},{key:"set",value:function set(lineNumber,value){if(lineNumber<this._startLineNumber||lineNumber>this._endLineNumber){return;}this._values[lineNumber-this._startLineNumber]=value;}},{key:"get",value:function get(lineNumber){if(lineNumber<this._startLineNumber||lineNumber>this._endLineNumber){return this._defaultValue;}return this._values[lineNumber-this._startLineNumber];}}]);return ContiguousLineMap;}();(0,themeService/* registerThemingParticipant */.Ic)(function(theme,collector){var sliderBackground=theme.getColor(colorRegistry/* minimapSliderBackground */.CA6);if(sliderBackground){collector.addRule(".monaco-editor .minimap-slider .minimap-slider-horizontal { background: ".concat(sliderBackground,"; }"));}var sliderHoverBackground=theme.getColor(colorRegistry/* minimapSliderHoverBackground */.Xy4);if(sliderHoverBackground){collector.addRule(".monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ".concat(sliderHoverBackground,"; }"));}var sliderActiveBackground=theme.getColor(colorRegistry/* minimapSliderActiveBackground */.brw);if(sliderActiveBackground){collector.addRule(".monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ".concat(sliderActiveBackground,"; }"));}var shadow=theme.getColor(colorRegistry/* scrollbarShadow */._wn);if(shadow){collector.addRule(".monaco-editor .minimap-shadow-visible { box-shadow: ".concat(shadow," -6px 0 6px -6px inset; }"));}});
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/overlayWidgets/overlayWidgets.js
function overlayWidgets_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){overlayWidgets_typeof=function _typeof(obj){return typeof obj;};}else{overlayWidgets_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return overlayWidgets_typeof(obj);}function overlayWidgets_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function overlayWidgets_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function overlayWidgets_createClass(Constructor,protoProps,staticProps){if(protoProps)overlayWidgets_defineProperties(Constructor.prototype,protoProps);if(staticProps)overlayWidgets_defineProperties(Constructor,staticProps);return Constructor;}function overlayWidgets_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){overlayWidgets_get=Reflect.get;}else{overlayWidgets_get=function _get(target,property,receiver){var base=overlayWidgets_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return overlayWidgets_get(target,property,receiver||target);}function overlayWidgets_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=overlayWidgets_getPrototypeOf(object);if(object===null)break;}return object;}function overlayWidgets_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)overlayWidgets_setPrototypeOf(subClass,superClass);}function overlayWidgets_setPrototypeOf(o,p){overlayWidgets_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return overlayWidgets_setPrototypeOf(o,p);}function overlayWidgets_createSuper(Derived){var hasNativeReflectConstruct=overlayWidgets_isNativeReflectConstruct();return function _createSuperInternal(){var Super=overlayWidgets_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=overlayWidgets_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return overlayWidgets_possibleConstructorReturn(this,result);};}function overlayWidgets_possibleConstructorReturn(self,call){if(call&&(overlayWidgets_typeof(call)==="object"||typeof call==="function")){return call;}return overlayWidgets_assertThisInitialized(self);}function overlayWidgets_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function overlayWidgets_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function overlayWidgets_getPrototypeOf(o){overlayWidgets_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return overlayWidgets_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var ViewOverlayWidgets=/*#__PURE__*/function(_ViewPart){overlayWidgets_inherits(ViewOverlayWidgets,_ViewPart);var _super=overlayWidgets_createSuper(ViewOverlayWidgets);function ViewOverlayWidgets(context){var _this;overlayWidgets_classCallCheck(this,ViewOverlayWidgets);_this=_super.call(this,context);var options=_this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);_this._widgets={};_this._verticalScrollbarWidth=layoutInfo.verticalScrollbarWidth;_this._minimapWidth=layoutInfo.minimap.minimapWidth;_this._horizontalScrollbarHeight=layoutInfo.horizontalScrollbarHeight;_this._editorHeight=layoutInfo.height;_this._editorWidth=layoutInfo.width;_this._domNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));viewPart/* PartFingerprints.write */.K.write(_this._domNode,4/* OverlayWidgets */);_this._domNode.setClassName('overlayWidgets');return _this;}overlayWidgets_createClass(ViewOverlayWidgets,[{key:"dispose",value:function dispose(){overlayWidgets_get(overlayWidgets_getPrototypeOf(ViewOverlayWidgets.prototype),"dispose",this).call(this);this._widgets={};}},{key:"getDomNode",value:function getDomNode(){return this._domNode;}// ---- begin view event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);this._verticalScrollbarWidth=layoutInfo.verticalScrollbarWidth;this._minimapWidth=layoutInfo.minimap.minimapWidth;this._horizontalScrollbarHeight=layoutInfo.horizontalScrollbarHeight;this._editorHeight=layoutInfo.height;this._editorWidth=layoutInfo.width;return true;}// ---- end view event handlers
},{key:"addWidget",value:function addWidget(widget){var domNode=(0,fastDomNode/* createFastDomNode */.X)(widget.getDomNode());this._widgets[widget.getId()]={widget:widget,preference:null,domNode:domNode};// This is sync because a widget wants to be in the dom
domNode.setPosition('absolute');domNode.setAttribute('widgetId',widget.getId());this._domNode.appendChild(domNode);this.setShouldRender();}},{key:"setWidgetPosition",value:function setWidgetPosition(widget,preference){var widgetData=this._widgets[widget.getId()];if(widgetData.preference===preference){return false;}widgetData.preference=preference;this.setShouldRender();return true;}},{key:"removeWidget",value:function removeWidget(widget){var widgetId=widget.getId();if(this._widgets.hasOwnProperty(widgetId)){var widgetData=this._widgets[widgetId];var domNode=widgetData.domNode.domNode;delete this._widgets[widgetId];domNode.parentNode.removeChild(domNode);this.setShouldRender();}}},{key:"_renderWidget",value:function _renderWidget(widgetData){var domNode=widgetData.domNode;if(widgetData.preference===null){domNode.unsetTop();return;}if(widgetData.preference===0/* TOP_RIGHT_CORNER */){domNode.setTop(0);domNode.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);}else if(widgetData.preference===1/* BOTTOM_RIGHT_CORNER */){var widgetHeight=domNode.domNode.clientHeight;domNode.setTop(this._editorHeight-widgetHeight-2*this._horizontalScrollbarHeight);domNode.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);}else if(widgetData.preference===2/* TOP_CENTER */){domNode.setTop(0);domNode.domNode.style.right='50%';}}},{key:"prepareRender",value:function prepareRender(ctx){// Nothing to read
}},{key:"render",value:function render(ctx){this._domNode.setWidth(this._editorWidth);var keys=Object.keys(this._widgets);for(var i=0,len=keys.length;i<len;i++){var widgetId=keys[i];this._renderWidget(this._widgets[widgetId]);}}}]);return ViewOverlayWidgets;}(viewPart/* ViewPart */.E);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/color.js
var color = __webpack_require__(65142);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages.js + 2 modules
var languages = __webpack_require__(98480);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/overviewRuler/decorationsOverviewRuler.js
function decorationsOverviewRuler_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){decorationsOverviewRuler_typeof=function _typeof(obj){return typeof obj;};}else{decorationsOverviewRuler_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return decorationsOverviewRuler_typeof(obj);}function decorationsOverviewRuler_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=decorationsOverviewRuler_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function decorationsOverviewRuler_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){decorationsOverviewRuler_get=Reflect.get;}else{decorationsOverviewRuler_get=function _get(target,property,receiver){var base=decorationsOverviewRuler_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return decorationsOverviewRuler_get(target,property,receiver||target);}function decorationsOverviewRuler_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=decorationsOverviewRuler_getPrototypeOf(object);if(object===null)break;}return object;}function decorationsOverviewRuler_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)decorationsOverviewRuler_setPrototypeOf(subClass,superClass);}function decorationsOverviewRuler_setPrototypeOf(o,p){decorationsOverviewRuler_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return decorationsOverviewRuler_setPrototypeOf(o,p);}function decorationsOverviewRuler_createSuper(Derived){var hasNativeReflectConstruct=decorationsOverviewRuler_isNativeReflectConstruct();return function _createSuperInternal(){var Super=decorationsOverviewRuler_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=decorationsOverviewRuler_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return decorationsOverviewRuler_possibleConstructorReturn(this,result);};}function decorationsOverviewRuler_possibleConstructorReturn(self,call){if(call&&(decorationsOverviewRuler_typeof(call)==="object"||typeof call==="function")){return call;}return decorationsOverviewRuler_assertThisInitialized(self);}function decorationsOverviewRuler_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function decorationsOverviewRuler_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function decorationsOverviewRuler_getPrototypeOf(o){decorationsOverviewRuler_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return decorationsOverviewRuler_getPrototypeOf(o);}function decorationsOverviewRuler_slicedToArray(arr,i){return decorationsOverviewRuler_arrayWithHoles(arr)||decorationsOverviewRuler_iterableToArrayLimit(arr,i)||decorationsOverviewRuler_unsupportedIterableToArray(arr,i)||decorationsOverviewRuler_nonIterableRest();}function decorationsOverviewRuler_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function decorationsOverviewRuler_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return decorationsOverviewRuler_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return decorationsOverviewRuler_arrayLikeToArray(o,minLen);}function decorationsOverviewRuler_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function decorationsOverviewRuler_iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function decorationsOverviewRuler_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function decorationsOverviewRuler_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function decorationsOverviewRuler_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function decorationsOverviewRuler_createClass(Constructor,protoProps,staticProps){if(protoProps)decorationsOverviewRuler_defineProperties(Constructor.prototype,protoProps);if(staticProps)decorationsOverviewRuler_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var Settings=/*#__PURE__*/function(){function Settings(config,theme){decorationsOverviewRuler_classCallCheck(this,Settings);var options=config.options;this.lineHeight=options.get(59/* lineHeight */);this.pixelRatio=options.get(129/* pixelRatio */);this.overviewRulerLanes=options.get(74/* overviewRulerLanes */);this.renderBorder=options.get(73/* overviewRulerBorder */);var borderColor=theme.getColor(editorColorRegistry/* editorOverviewRulerBorder */.zw);this.borderColor=borderColor?borderColor.toString():null;this.hideCursor=options.get(52/* hideCursorInOverviewRuler */);var cursorColor=theme.getColor(editorColorRegistry/* editorCursorForeground */.n0);this.cursorColor=cursorColor?cursorColor.transparent(0.7).toString():null;this.themeType=theme.type;var minimapOpts=options.get(65/* minimap */);var minimapEnabled=minimapOpts.enabled;var minimapSide=minimapOpts.side;var backgroundColor=minimapEnabled?theme.getColor(editorColorRegistry/* editorOverviewRulerBackground */.e_)||languages/* TokenizationRegistry.getDefaultBackground */.RW.getDefaultBackground():null;if(backgroundColor===null||minimapSide==='left'){this.backgroundColor=null;}else{this.backgroundColor=color/* Color.Format.CSS.formatHex */.Il.Format.CSS.formatHex(backgroundColor);}var layoutInfo=options.get(131/* layoutInfo */);var position=layoutInfo.overviewRuler;this.top=position.top;this.right=position.right;this.domWidth=position.width;this.domHeight=position.height;if(this.overviewRulerLanes===0){// overview ruler is off
this.canvasWidth=0;this.canvasHeight=0;}else{this.canvasWidth=this.domWidth*this.pixelRatio|0;this.canvasHeight=this.domHeight*this.pixelRatio|0;}var _this$_initLanes=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes),_this$_initLanes2=decorationsOverviewRuler_slicedToArray(_this$_initLanes,2),x=_this$_initLanes2[0],w=_this$_initLanes2[1];this.x=x;this.w=w;}decorationsOverviewRuler_createClass(Settings,[{key:"_initLanes",value:function _initLanes(canvasLeftOffset,canvasWidth,laneCount){var remainingWidth=canvasWidth-canvasLeftOffset;if(laneCount>=3){var leftWidth=Math.floor(remainingWidth/3);var rightWidth=Math.floor(remainingWidth/3);var centerWidth=remainingWidth-leftWidth-rightWidth;var leftOffset=canvasLeftOffset;var centerOffset=leftOffset+leftWidth;var rightOffset=leftOffset+leftWidth+centerWidth;return[[0,leftOffset,centerOffset,leftOffset,rightOffset,leftOffset,centerOffset,leftOffset// Left | Center | Right
],[0,leftWidth,centerWidth,leftWidth+centerWidth,rightWidth,leftWidth+centerWidth+rightWidth,centerWidth+rightWidth,leftWidth+centerWidth+rightWidth// Left | Center | Right
]];}else if(laneCount===2){var _leftWidth=Math.floor(remainingWidth/2);var _rightWidth=remainingWidth-_leftWidth;var _leftOffset=canvasLeftOffset;var _rightOffset=_leftOffset+_leftWidth;return[[0,_leftOffset,_leftOffset,_leftOffset,_rightOffset,_leftOffset,_leftOffset,_leftOffset// Left | Center | Right
],[0,_leftWidth,_leftWidth,_leftWidth,_rightWidth,_leftWidth+_rightWidth,_leftWidth+_rightWidth,_leftWidth+_rightWidth// Left | Center | Right
]];}else{var offset=canvasLeftOffset;var width=remainingWidth;return[[0,offset,offset,offset,offset,offset,offset,offset// Left | Center | Right
],[0,width,width,width,width,width,width,width// Left | Center | Right
]];}}},{key:"equals",value:function equals(other){return this.lineHeight===other.lineHeight&&this.pixelRatio===other.pixelRatio&&this.overviewRulerLanes===other.overviewRulerLanes&&this.renderBorder===other.renderBorder&&this.borderColor===other.borderColor&&this.hideCursor===other.hideCursor&&this.cursorColor===other.cursorColor&&this.themeType===other.themeType&&this.backgroundColor===other.backgroundColor&&this.top===other.top&&this.right===other.right&&this.domWidth===other.domWidth&&this.domHeight===other.domHeight&&this.canvasWidth===other.canvasWidth&&this.canvasHeight===other.canvasHeight;}}]);return Settings;}();var DecorationsOverviewRuler=/*#__PURE__*/function(_ViewPart){decorationsOverviewRuler_inherits(DecorationsOverviewRuler,_ViewPart);var _super=decorationsOverviewRuler_createSuper(DecorationsOverviewRuler);function DecorationsOverviewRuler(context){var _this;decorationsOverviewRuler_classCallCheck(this,DecorationsOverviewRuler);_this=_super.call(this,context);_this._domNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('canvas'));_this._domNode.setClassName('decorationsOverviewRuler');_this._domNode.setPosition('absolute');_this._domNode.setLayerHinting(true);_this._domNode.setContain('strict');_this._domNode.setAttribute('aria-hidden','true');_this._updateSettings(false);_this._tokensColorTrackerListener=languages/* TokenizationRegistry.onDidChange */.RW.onDidChange(function(e){if(e.changedColorMap){_this._updateSettings(true);}});_this._cursorPositions=[];return _this;}decorationsOverviewRuler_createClass(DecorationsOverviewRuler,[{key:"dispose",value:function dispose(){decorationsOverviewRuler_get(decorationsOverviewRuler_getPrototypeOf(DecorationsOverviewRuler.prototype),"dispose",this).call(this);this._tokensColorTrackerListener.dispose();}},{key:"_updateSettings",value:function _updateSettings(renderNow){var newSettings=new Settings(this._context.configuration,this._context.theme);if(this._settings&&this._settings.equals(newSettings)){// nothing to do
return false;}this._settings=newSettings;this._domNode.setTop(this._settings.top);this._domNode.setRight(this._settings.right);this._domNode.setWidth(this._settings.domWidth);this._domNode.setHeight(this._settings.domHeight);this._domNode.domNode.width=this._settings.canvasWidth;this._domNode.domNode.height=this._settings.canvasHeight;if(renderNow){this._render();}return true;}// ---- begin view event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){return this._updateSettings(false);}},{key:"onCursorStateChanged",value:function onCursorStateChanged(e){this._cursorPositions=[];for(var i=0,len=e.selections.length;i<len;i++){this._cursorPositions[i]=e.selections[i].getPosition();}this._cursorPositions.sort(core_position/* Position.compare */.L.compare);return true;}},{key:"onDecorationsChanged",value:function onDecorationsChanged(e){if(e.affectsOverviewRuler){return true;}return false;}},{key:"onFlushed",value:function onFlushed(e){return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return e.scrollHeightChanged;}},{key:"onZonesChanged",value:function onZonesChanged(e){return true;}},{key:"onThemeChanged",value:function onThemeChanged(e){// invalidate color cache
this._context.model.invalidateOverviewRulerColorCache();return this._updateSettings(false);}// ---- end view event handlers
},{key:"getDomNode",value:function getDomNode(){return this._domNode.domNode;}},{key:"prepareRender",value:function prepareRender(ctx){// Nothing to read
}},{key:"render",value:function render(editorCtx){this._render();}},{key:"_render",value:function _render(){if(this._settings.overviewRulerLanes===0){// overview ruler is off
this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:'');this._domNode.setDisplay('none');return;}this._domNode.setDisplay('block');var canvasWidth=this._settings.canvasWidth;var canvasHeight=this._settings.canvasHeight;var lineHeight=this._settings.lineHeight;var viewLayout=this._context.viewLayout;var outerHeight=this._context.viewLayout.getScrollHeight();var heightRatio=canvasHeight/outerHeight;var decorations=this._context.model.getAllOverviewRulerDecorations(this._context.theme);var minDecorationHeight=6/* MIN_DECORATION_HEIGHT */*this._settings.pixelRatio|0;var halfMinDecorationHeight=minDecorationHeight/2|0;var canvasCtx=this._domNode.domNode.getContext('2d');if(this._settings.backgroundColor===null){canvasCtx.clearRect(0,0,canvasWidth,canvasHeight);}else{canvasCtx.fillStyle=this._settings.backgroundColor;canvasCtx.fillRect(0,0,canvasWidth,canvasHeight);}var x=this._settings.x;var w=this._settings.w;decorations.sort(viewModel/* OverviewRulerDecorationsGroup.cmp */.SQ.cmp);var _iterator=decorationsOverviewRuler_createForOfIteratorHelper(decorations),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var decorationGroup=_step.value;var color=decorationGroup.color;var decorationGroupData=decorationGroup.data;canvasCtx.fillStyle=color;var prevLane=0;var _prevY=0;var _prevY2=0;for(var _i2=0,_len=decorationGroupData.length/3;_i2<_len;_i2++){var lane=decorationGroupData[3*_i2];var startLineNumber=decorationGroupData[3*_i2+1];var endLineNumber=decorationGroupData[3*_i2+2];var _y=viewLayout.getVerticalOffsetForLineNumber(startLineNumber)*heightRatio|0;var _y2=(viewLayout.getVerticalOffsetForLineNumber(endLineNumber)+lineHeight)*heightRatio|0;var height=_y2-_y;if(height<minDecorationHeight){var _yCenter=(_y+_y2)/2|0;if(_yCenter<halfMinDecorationHeight){_yCenter=halfMinDecorationHeight;}else if(_yCenter+halfMinDecorationHeight>canvasHeight){_yCenter=canvasHeight-halfMinDecorationHeight;}_y=_yCenter-halfMinDecorationHeight;_y2=_yCenter+halfMinDecorationHeight;}if(_y>_prevY2+1||lane!==prevLane){// flush prev
if(_i2!==0){canvasCtx.fillRect(x[prevLane],_prevY,w[prevLane],_prevY2-_prevY);}prevLane=lane;_prevY=_y;_prevY2=_y2;}else{// merge into prev
if(_y2>_prevY2){_prevY2=_y2;}}}canvasCtx.fillRect(x[prevLane],_prevY,w[prevLane],_prevY2-_prevY);}// Draw cursors
}catch(err){_iterator.e(err);}finally{_iterator.f();}if(!this._settings.hideCursor&&this._settings.cursorColor){var cursorHeight=2*this._settings.pixelRatio|0;var halfCursorHeight=cursorHeight/2|0;var cursorX=this._settings.x[7/* Full */];var cursorW=this._settings.w[7/* Full */];canvasCtx.fillStyle=this._settings.cursorColor;var prevY1=-100;var prevY2=-100;for(var i=0,len=this._cursorPositions.length;i<len;i++){var cursor=this._cursorPositions[i];var yCenter=viewLayout.getVerticalOffsetForLineNumber(cursor.lineNumber)*heightRatio|0;if(yCenter<halfCursorHeight){yCenter=halfCursorHeight;}else if(yCenter+halfCursorHeight>canvasHeight){yCenter=canvasHeight-halfCursorHeight;}var y1=yCenter-halfCursorHeight;var y2=y1+cursorHeight;if(y1>prevY2+1){// flush prev
if(i!==0){canvasCtx.fillRect(cursorX,prevY1,cursorW,prevY2-prevY1);}prevY1=y1;prevY2=y2;}else{// merge into prev
if(y2>prevY2){prevY2=y2;}}}canvasCtx.fillRect(cursorX,prevY1,cursorW,prevY2-prevY1);}if(this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0){canvasCtx.beginPath();canvasCtx.lineWidth=1;canvasCtx.strokeStyle=this._settings.borderColor;canvasCtx.moveTo(0,0);canvasCtx.lineTo(0,canvasHeight);canvasCtx.stroke();canvasCtx.moveTo(0,0);canvasCtx.lineTo(canvasWidth,0);canvasCtx.stroke();}}}]);return DecorationsOverviewRuler;}(viewPart/* ViewPart */.E);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewModel/overviewZoneManager.js
var overviewZoneManager = __webpack_require__(56745);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewModel/viewEventHandler.js
var viewEventHandler = __webpack_require__(61952);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/overviewRuler/overviewRuler.js
function overviewRuler_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){overviewRuler_typeof=function _typeof(obj){return typeof obj;};}else{overviewRuler_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return overviewRuler_typeof(obj);}function overviewRuler_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=overviewRuler_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function overviewRuler_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return overviewRuler_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return overviewRuler_arrayLikeToArray(o,minLen);}function overviewRuler_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function overviewRuler_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function overviewRuler_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function overviewRuler_createClass(Constructor,protoProps,staticProps){if(protoProps)overviewRuler_defineProperties(Constructor.prototype,protoProps);if(staticProps)overviewRuler_defineProperties(Constructor,staticProps);return Constructor;}function overviewRuler_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){overviewRuler_get=Reflect.get;}else{overviewRuler_get=function _get(target,property,receiver){var base=overviewRuler_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return overviewRuler_get(target,property,receiver||target);}function overviewRuler_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=overviewRuler_getPrototypeOf(object);if(object===null)break;}return object;}function overviewRuler_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)overviewRuler_setPrototypeOf(subClass,superClass);}function overviewRuler_setPrototypeOf(o,p){overviewRuler_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return overviewRuler_setPrototypeOf(o,p);}function overviewRuler_createSuper(Derived){var hasNativeReflectConstruct=overviewRuler_isNativeReflectConstruct();return function _createSuperInternal(){var Super=overviewRuler_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=overviewRuler_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return overviewRuler_possibleConstructorReturn(this,result);};}function overviewRuler_possibleConstructorReturn(self,call){if(call&&(overviewRuler_typeof(call)==="object"||typeof call==="function")){return call;}return overviewRuler_assertThisInitialized(self);}function overviewRuler_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function overviewRuler_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function overviewRuler_getPrototypeOf(o){overviewRuler_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return overviewRuler_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var OverviewRuler=/*#__PURE__*/function(_ViewEventHandler){overviewRuler_inherits(OverviewRuler,_ViewEventHandler);var _super=overviewRuler_createSuper(OverviewRuler);function OverviewRuler(context,cssClassName){var _this;overviewRuler_classCallCheck(this,OverviewRuler);_this=_super.call(this);_this._context=context;var options=_this._context.configuration.options;_this._domNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('canvas'));_this._domNode.setClassName(cssClassName);_this._domNode.setPosition('absolute');_this._domNode.setLayerHinting(true);_this._domNode.setContain('strict');_this._zoneManager=new overviewZoneManager/* OverviewZoneManager */.Tj(function(lineNumber){return _this._context.viewLayout.getVerticalOffsetForLineNumber(lineNumber);});_this._zoneManager.setDOMWidth(0);_this._zoneManager.setDOMHeight(0);_this._zoneManager.setOuterHeight(_this._context.viewLayout.getScrollHeight());_this._zoneManager.setLineHeight(options.get(59/* lineHeight */));_this._zoneManager.setPixelRatio(options.get(129/* pixelRatio */));_this._context.addEventHandler(overviewRuler_assertThisInitialized(_this));return _this;}overviewRuler_createClass(OverviewRuler,[{key:"dispose",value:function dispose(){this._context.removeEventHandler(this);overviewRuler_get(overviewRuler_getPrototypeOf(OverviewRuler.prototype),"dispose",this).call(this);}// ---- begin view event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;if(e.hasChanged(59/* lineHeight */)){this._zoneManager.setLineHeight(options.get(59/* lineHeight */));this._render();}if(e.hasChanged(129/* pixelRatio */)){this._zoneManager.setPixelRatio(options.get(129/* pixelRatio */));this._domNode.setWidth(this._zoneManager.getDOMWidth());this._domNode.setHeight(this._zoneManager.getDOMHeight());this._domNode.domNode.width=this._zoneManager.getCanvasWidth();this._domNode.domNode.height=this._zoneManager.getCanvasHeight();this._render();}return true;}},{key:"onFlushed",value:function onFlushed(e){this._render();return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){if(e.scrollHeightChanged){this._zoneManager.setOuterHeight(e.scrollHeight);this._render();}return true;}},{key:"onZonesChanged",value:function onZonesChanged(e){this._render();return true;}// ---- end view event handlers
},{key:"getDomNode",value:function getDomNode(){return this._domNode.domNode;}},{key:"setLayout",value:function setLayout(position){this._domNode.setTop(position.top);this._domNode.setRight(position.right);var hasChanged=false;hasChanged=this._zoneManager.setDOMWidth(position.width)||hasChanged;hasChanged=this._zoneManager.setDOMHeight(position.height)||hasChanged;if(hasChanged){this._domNode.setWidth(this._zoneManager.getDOMWidth());this._domNode.setHeight(this._zoneManager.getDOMHeight());this._domNode.domNode.width=this._zoneManager.getCanvasWidth();this._domNode.domNode.height=this._zoneManager.getCanvasHeight();this._render();}}},{key:"setZones",value:function setZones(zones){this._zoneManager.setZones(zones);this._render();}},{key:"_render",value:function _render(){if(this._zoneManager.getOuterHeight()===0){return false;}var width=this._zoneManager.getCanvasWidth();var height=this._zoneManager.getCanvasHeight();var colorZones=this._zoneManager.resolveColorZones();var id2Color=this._zoneManager.getId2Color();var ctx=this._domNode.domNode.getContext('2d');ctx.clearRect(0,0,width,height);if(colorZones.length>0){this._renderOneLane(ctx,colorZones,id2Color,width);}return true;}},{key:"_renderOneLane",value:function _renderOneLane(ctx,colorZones,id2Color,width){var currentColorId=0;var currentFrom=0;var currentTo=0;var _iterator=overviewRuler_createForOfIteratorHelper(colorZones),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var zone=_step.value;var zoneColorId=zone.colorId;var zoneFrom=zone.from;var zoneTo=zone.to;if(zoneColorId!==currentColorId){ctx.fillRect(0,currentFrom,width,currentTo-currentFrom);currentColorId=zoneColorId;ctx.fillStyle=id2Color[currentColorId];currentFrom=zoneFrom;currentTo=zoneTo;}else{if(currentTo>=zoneFrom){currentTo=Math.max(currentTo,zoneTo);}else{ctx.fillRect(0,currentFrom,width,currentTo-currentFrom);currentFrom=zoneFrom;currentTo=zoneTo;}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}ctx.fillRect(0,currentFrom,width,currentTo-currentFrom);}}]);return OverviewRuler;}(viewEventHandler/* ViewEventHandler */.O);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/rulers/rulers.js
function rulers_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){rulers_typeof=function _typeof(obj){return typeof obj;};}else{rulers_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return rulers_typeof(obj);}function rulers_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function rulers_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function rulers_createClass(Constructor,protoProps,staticProps){if(protoProps)rulers_defineProperties(Constructor.prototype,protoProps);if(staticProps)rulers_defineProperties(Constructor,staticProps);return Constructor;}function rulers_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){rulers_get=Reflect.get;}else{rulers_get=function _get(target,property,receiver){var base=rulers_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return rulers_get(target,property,receiver||target);}function rulers_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=rulers_getPrototypeOf(object);if(object===null)break;}return object;}function rulers_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)rulers_setPrototypeOf(subClass,superClass);}function rulers_setPrototypeOf(o,p){rulers_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return rulers_setPrototypeOf(o,p);}function rulers_createSuper(Derived){var hasNativeReflectConstruct=rulers_isNativeReflectConstruct();return function _createSuperInternal(){var Super=rulers_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=rulers_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return rulers_possibleConstructorReturn(this,result);};}function rulers_possibleConstructorReturn(self,call){if(call&&(rulers_typeof(call)==="object"||typeof call==="function")){return call;}return rulers_assertThisInitialized(self);}function rulers_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function rulers_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function rulers_getPrototypeOf(o){rulers_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return rulers_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var Rulers=/*#__PURE__*/function(_ViewPart){rulers_inherits(Rulers,_ViewPart);var _super=rulers_createSuper(Rulers);function Rulers(context){var _this;rulers_classCallCheck(this,Rulers);_this=_super.call(this,context);_this.domNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this.domNode.setAttribute('role','presentation');_this.domNode.setAttribute('aria-hidden','true');_this.domNode.setClassName('view-rulers');_this._renderedRulers=[];var options=_this._context.configuration.options;_this._rulers=options.get(91/* rulers */);_this._typicalHalfwidthCharacterWidth=options.get(44/* fontInfo */).typicalHalfwidthCharacterWidth;return _this;}rulers_createClass(Rulers,[{key:"dispose",value:function dispose(){rulers_get(rulers_getPrototypeOf(Rulers.prototype),"dispose",this).call(this);}// --- begin event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;this._rulers=options.get(91/* rulers */);this._typicalHalfwidthCharacterWidth=options.get(44/* fontInfo */).typicalHalfwidthCharacterWidth;return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return e.scrollHeightChanged;}// --- end event handlers
},{key:"prepareRender",value:function prepareRender(ctx){// Nothing to read
}},{key:"_ensureRulersCount",value:function _ensureRulersCount(){var currentCount=this._renderedRulers.length;var desiredCount=this._rulers.length;if(currentCount===desiredCount){// Nothing to do
return;}if(currentCount<desiredCount){var _this$_context$model$=this._context.model.getTextModelOptions(),tabSize=_this$_context$model$.tabSize;var rulerWidth=tabSize;var addCount=desiredCount-currentCount;while(addCount>0){var node=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));node.setClassName('view-ruler');node.setWidth(rulerWidth);this.domNode.appendChild(node);this._renderedRulers.push(node);addCount--;}return;}var removeCount=currentCount-desiredCount;while(removeCount>0){var _node=this._renderedRulers.pop();this.domNode.removeChild(_node);removeCount--;}}},{key:"render",value:function render(ctx){this._ensureRulersCount();for(var i=0,len=this._rulers.length;i<len;i++){var node=this._renderedRulers[i];var ruler=this._rulers[i];node.setBoxShadow(ruler.color?"1px 0 0 0 ".concat(ruler.color," inset"):"");node.setHeight(Math.min(ctx.scrollHeight,1000000));node.setLeft(ruler.column*this._typicalHalfwidthCharacterWidth);}}}]);return Rulers;}(viewPart/* ViewPart */.E);(0,themeService/* registerThemingParticipant */.Ic)(function(theme,collector){var rulerColor=theme.getColor(editorColorRegistry/* editorRuler */.zk);if(rulerColor){collector.addRule(".monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ".concat(rulerColor," inset; }"));}});
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/scrollDecoration/scrollDecoration.js
function scrollDecoration_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){scrollDecoration_typeof=function _typeof(obj){return typeof obj;};}else{scrollDecoration_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return scrollDecoration_typeof(obj);}function scrollDecoration_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function scrollDecoration_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function scrollDecoration_createClass(Constructor,protoProps,staticProps){if(protoProps)scrollDecoration_defineProperties(Constructor.prototype,protoProps);if(staticProps)scrollDecoration_defineProperties(Constructor,staticProps);return Constructor;}function scrollDecoration_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){scrollDecoration_get=Reflect.get;}else{scrollDecoration_get=function _get(target,property,receiver){var base=scrollDecoration_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return scrollDecoration_get(target,property,receiver||target);}function scrollDecoration_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=scrollDecoration_getPrototypeOf(object);if(object===null)break;}return object;}function scrollDecoration_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)scrollDecoration_setPrototypeOf(subClass,superClass);}function scrollDecoration_setPrototypeOf(o,p){scrollDecoration_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return scrollDecoration_setPrototypeOf(o,p);}function scrollDecoration_createSuper(Derived){var hasNativeReflectConstruct=scrollDecoration_isNativeReflectConstruct();return function _createSuperInternal(){var Super=scrollDecoration_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=scrollDecoration_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return scrollDecoration_possibleConstructorReturn(this,result);};}function scrollDecoration_possibleConstructorReturn(self,call){if(call&&(scrollDecoration_typeof(call)==="object"||typeof call==="function")){return call;}return scrollDecoration_assertThisInitialized(self);}function scrollDecoration_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function scrollDecoration_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function scrollDecoration_getPrototypeOf(o){scrollDecoration_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return scrollDecoration_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var ScrollDecorationViewPart=/*#__PURE__*/function(_ViewPart){scrollDecoration_inherits(ScrollDecorationViewPart,_ViewPart);var _super=scrollDecoration_createSuper(ScrollDecorationViewPart);function ScrollDecorationViewPart(context){var _this;scrollDecoration_classCallCheck(this,ScrollDecorationViewPart);_this=_super.call(this,context);_this._scrollTop=0;_this._width=0;_this._updateWidth();_this._shouldShow=false;var options=_this._context.configuration.options;var scrollbar=options.get(92/* scrollbar */);_this._useShadows=scrollbar.useShadows;_this._domNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this._domNode.setAttribute('role','presentation');_this._domNode.setAttribute('aria-hidden','true');return _this;}scrollDecoration_createClass(ScrollDecorationViewPart,[{key:"dispose",value:function dispose(){scrollDecoration_get(scrollDecoration_getPrototypeOf(ScrollDecorationViewPart.prototype),"dispose",this).call(this);}},{key:"_updateShouldShow",value:function _updateShouldShow(){var newShouldShow=this._useShadows&&this._scrollTop>0;if(this._shouldShow!==newShouldShow){this._shouldShow=newShouldShow;return true;}return false;}},{key:"getDomNode",value:function getDomNode(){return this._domNode;}},{key:"_updateWidth",value:function _updateWidth(){var options=this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);if(layoutInfo.minimap.renderMinimap===0||layoutInfo.minimap.minimapWidth>0&&layoutInfo.minimap.minimapLeft===0){this._width=layoutInfo.width;}else{this._width=layoutInfo.width-layoutInfo.minimap.minimapWidth-layoutInfo.verticalScrollbarWidth;}}// --- begin event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;var scrollbar=options.get(92/* scrollbar */);this._useShadows=scrollbar.useShadows;this._updateWidth();this._updateShouldShow();return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){this._scrollTop=e.scrollTop;return this._updateShouldShow();}// --- end event handlers
},{key:"prepareRender",value:function prepareRender(ctx){// Nothing to read
}},{key:"render",value:function render(ctx){this._domNode.setWidth(this._width);this._domNode.setClassName(this._shouldShow?'scroll-decoration':'');}}]);return ScrollDecorationViewPart;}(viewPart/* ViewPart */.E);(0,themeService/* registerThemingParticipant */.Ic)(function(theme,collector){var shadow=theme.getColor(colorRegistry/* scrollbarShadow */._wn);if(shadow){collector.addRule(".monaco-editor .scroll-decoration { box-shadow: ".concat(shadow," 0 6px 6px -6px inset; }"));}});
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/selections/selections.js
function selections_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){selections_typeof=function _typeof(obj){return typeof obj;};}else{selections_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return selections_typeof(obj);}function selections_slicedToArray(arr,i){return selections_arrayWithHoles(arr)||selections_iterableToArrayLimit(arr,i)||selections_unsupportedIterableToArray(arr,i)||selections_nonIterableRest();}function selections_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function selections_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return selections_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return selections_arrayLikeToArray(o,minLen);}function selections_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function selections_iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function selections_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function selections_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function selections_createClass(Constructor,protoProps,staticProps){if(protoProps)selections_defineProperties(Constructor.prototype,protoProps);if(staticProps)selections_defineProperties(Constructor,staticProps);return Constructor;}function selections_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){selections_get=Reflect.get;}else{selections_get=function _get(target,property,receiver){var base=selections_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return selections_get(target,property,receiver||target);}function selections_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=selections_getPrototypeOf(object);if(object===null)break;}return object;}function selections_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)selections_setPrototypeOf(subClass,superClass);}function selections_setPrototypeOf(o,p){selections_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return selections_setPrototypeOf(o,p);}function selections_createSuper(Derived){var hasNativeReflectConstruct=selections_isNativeReflectConstruct();return function _createSuperInternal(){var Super=selections_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=selections_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return selections_possibleConstructorReturn(this,result);};}function selections_possibleConstructorReturn(self,call){if(call&&(selections_typeof(call)==="object"||typeof call==="function")){return call;}return selections_assertThisInitialized(self);}function selections_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function selections_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function selections_getPrototypeOf(o){selections_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return selections_getPrototypeOf(o);}function selections_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var HorizontalRangeWithStyle=function HorizontalRangeWithStyle(other){selections_classCallCheck(this,HorizontalRangeWithStyle);this.left=other.left;this.width=other.width;this.startStyle=null;this.endStyle=null;};var LineVisibleRangesWithStyle=function LineVisibleRangesWithStyle(lineNumber,ranges){selections_classCallCheck(this,LineVisibleRangesWithStyle);this.lineNumber=lineNumber;this.ranges=ranges;};function toStyledRange(item){return new HorizontalRangeWithStyle(item);}function toStyled(item){return new LineVisibleRangesWithStyle(item.lineNumber,item.ranges.map(toStyledRange));}var SelectionsOverlay=/*#__PURE__*/function(_DynamicViewOverlay){selections_inherits(SelectionsOverlay,_DynamicViewOverlay);var _super=selections_createSuper(SelectionsOverlay);function SelectionsOverlay(context){var _this;selections_classCallCheck(this,SelectionsOverlay);_this=_super.call(this);_this._previousFrameVisibleRangesWithStyle=[];_this._context=context;var options=_this._context.configuration.options;_this._lineHeight=options.get(59/* lineHeight */);_this._roundedSelection=options.get(90/* roundedSelection */);_this._typicalHalfwidthCharacterWidth=options.get(44/* fontInfo */).typicalHalfwidthCharacterWidth;_this._selections=[];_this._renderResult=null;_this._context.addEventHandler(selections_assertThisInitialized(_this));return _this;}selections_createClass(SelectionsOverlay,[{key:"dispose",value:function dispose(){this._context.removeEventHandler(this);this._renderResult=null;selections_get(selections_getPrototypeOf(SelectionsOverlay.prototype),"dispose",this).call(this);}// --- begin event handlers
},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;this._lineHeight=options.get(59/* lineHeight */);this._roundedSelection=options.get(90/* roundedSelection */);this._typicalHalfwidthCharacterWidth=options.get(44/* fontInfo */).typicalHalfwidthCharacterWidth;return true;}},{key:"onCursorStateChanged",value:function onCursorStateChanged(e){this._selections=e.selections.slice(0);return true;}},{key:"onDecorationsChanged",value:function onDecorationsChanged(e){// true for inline decorations that can end up relayouting text
return true;//e.inlineDecorationsChanged;
}},{key:"onFlushed",value:function onFlushed(e){return true;}},{key:"onLinesChanged",value:function onLinesChanged(e){return true;}},{key:"onLinesDeleted",value:function onLinesDeleted(e){return true;}},{key:"onLinesInserted",value:function onLinesInserted(e){return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return e.scrollTopChanged;}},{key:"onZonesChanged",value:function onZonesChanged(e){return true;}// --- end event handlers
},{key:"_visibleRangesHaveGaps",value:function _visibleRangesHaveGaps(linesVisibleRanges){for(var i=0,len=linesVisibleRanges.length;i<len;i++){var lineVisibleRanges=linesVisibleRanges[i];if(lineVisibleRanges.ranges.length>1){// There are two ranges on the same line
return true;}}return false;}},{key:"_enrichVisibleRangesWithStyle",value:function _enrichVisibleRangesWithStyle(viewport,linesVisibleRanges,previousFrame){var epsilon=this._typicalHalfwidthCharacterWidth/4;var previousFrameTop=null;var previousFrameBottom=null;if(previousFrame&&previousFrame.length>0&&linesVisibleRanges.length>0){var topLineNumber=linesVisibleRanges[0].lineNumber;if(topLineNumber===viewport.startLineNumber){for(var i=0;!previousFrameTop&&i<previousFrame.length;i++){if(previousFrame[i].lineNumber===topLineNumber){previousFrameTop=previousFrame[i].ranges[0];}}}var bottomLineNumber=linesVisibleRanges[linesVisibleRanges.length-1].lineNumber;if(bottomLineNumber===viewport.endLineNumber){for(var _i=previousFrame.length-1;!previousFrameBottom&&_i>=0;_i--){if(previousFrame[_i].lineNumber===bottomLineNumber){previousFrameBottom=previousFrame[_i].ranges[0];}}}if(previousFrameTop&&!previousFrameTop.startStyle){previousFrameTop=null;}if(previousFrameBottom&&!previousFrameBottom.startStyle){previousFrameBottom=null;}}for(var _i2=0,len=linesVisibleRanges.length;_i2<len;_i2++){// We know for a fact that there is precisely one range on each line
var curLineRange=linesVisibleRanges[_i2].ranges[0];var curLeft=curLineRange.left;var curRight=curLineRange.left+curLineRange.width;var startStyle={top:0/* EXTERN */,bottom:0/* EXTERN */};var endStyle={top:0/* EXTERN */,bottom:0/* EXTERN */};if(_i2>0){// Look above
var prevLeft=linesVisibleRanges[_i2-1].ranges[0].left;var prevRight=linesVisibleRanges[_i2-1].ranges[0].left+linesVisibleRanges[_i2-1].ranges[0].width;if(abs(curLeft-prevLeft)<epsilon){startStyle.top=2/* FLAT */;}else if(curLeft>prevLeft){startStyle.top=1/* INTERN */;}if(abs(curRight-prevRight)<epsilon){endStyle.top=2/* FLAT */;}else if(prevLeft<curRight&&curRight<prevRight){endStyle.top=1/* INTERN */;}}else if(previousFrameTop){// Accept some hiccups near the viewport edges to save on repaints
startStyle.top=previousFrameTop.startStyle.top;endStyle.top=previousFrameTop.endStyle.top;}if(_i2+1<len){// Look below
var nextLeft=linesVisibleRanges[_i2+1].ranges[0].left;var nextRight=linesVisibleRanges[_i2+1].ranges[0].left+linesVisibleRanges[_i2+1].ranges[0].width;if(abs(curLeft-nextLeft)<epsilon){startStyle.bottom=2/* FLAT */;}else if(nextLeft<curLeft&&curLeft<nextRight){startStyle.bottom=1/* INTERN */;}if(abs(curRight-nextRight)<epsilon){endStyle.bottom=2/* FLAT */;}else if(curRight<nextRight){endStyle.bottom=1/* INTERN */;}}else if(previousFrameBottom){// Accept some hiccups near the viewport edges to save on repaints
startStyle.bottom=previousFrameBottom.startStyle.bottom;endStyle.bottom=previousFrameBottom.endStyle.bottom;}curLineRange.startStyle=startStyle;curLineRange.endStyle=endStyle;}}},{key:"_getVisibleRangesWithStyle",value:function _getVisibleRangesWithStyle(selection,ctx,previousFrame){var _linesVisibleRanges=ctx.linesVisibleRangesForRange(selection,true)||[];var linesVisibleRanges=_linesVisibleRanges.map(toStyled);var visibleRangesHaveGaps=this._visibleRangesHaveGaps(linesVisibleRanges);if(!visibleRangesHaveGaps&&this._roundedSelection){this._enrichVisibleRangesWithStyle(ctx.visibleRange,linesVisibleRanges,previousFrame);}// The visible ranges are sorted TOP-BOTTOM and LEFT-RIGHT
return linesVisibleRanges;}},{key:"_createSelectionPiece",value:function _createSelectionPiece(top,height,className,left,width){return'<div class="cslr '+className+'" style="top:'+top.toString()+'px;left:'+left.toString()+'px;width:'+width.toString()+'px;height:'+height+'px;"></div>';}},{key:"_actualRenderOneSelection",value:function _actualRenderOneSelection(output2,visibleStartLineNumber,hasMultipleSelections,visibleRanges){if(visibleRanges.length===0){return;}var visibleRangesHaveStyle=!!visibleRanges[0].ranges[0].startStyle;var fullLineHeight=this._lineHeight.toString();var reducedLineHeight=(this._lineHeight-1).toString();var firstLineNumber=visibleRanges[0].lineNumber;var lastLineNumber=visibleRanges[visibleRanges.length-1].lineNumber;for(var i=0,len=visibleRanges.length;i<len;i++){var lineVisibleRanges=visibleRanges[i];var lineNumber=lineVisibleRanges.lineNumber;var lineIndex=lineNumber-visibleStartLineNumber;var lineHeight=hasMultipleSelections?lineNumber===lastLineNumber||lineNumber===firstLineNumber?reducedLineHeight:fullLineHeight:fullLineHeight;var top=hasMultipleSelections?lineNumber===firstLineNumber?1:0:0;var innerCornerOutput='';var restOfSelectionOutput='';for(var j=0,lenJ=lineVisibleRanges.ranges.length;j<lenJ;j++){var visibleRange=lineVisibleRanges.ranges[j];if(visibleRangesHaveStyle){var startStyle=visibleRange.startStyle;var endStyle=visibleRange.endStyle;if(startStyle.top===1/* INTERN */||startStyle.bottom===1/* INTERN */){// Reverse rounded corner to the left
// First comes the selection (blue layer)
innerCornerOutput+=this._createSelectionPiece(top,lineHeight,SelectionsOverlay.SELECTION_CLASS_NAME,visibleRange.left-SelectionsOverlay.ROUNDED_PIECE_WIDTH,SelectionsOverlay.ROUNDED_PIECE_WIDTH);// Second comes the background (white layer) with inverse border radius
var _className=SelectionsOverlay.EDITOR_BACKGROUND_CLASS_NAME;if(startStyle.top===1/* INTERN */){_className+=' '+SelectionsOverlay.SELECTION_TOP_RIGHT;}if(startStyle.bottom===1/* INTERN */){_className+=' '+SelectionsOverlay.SELECTION_BOTTOM_RIGHT;}innerCornerOutput+=this._createSelectionPiece(top,lineHeight,_className,visibleRange.left-SelectionsOverlay.ROUNDED_PIECE_WIDTH,SelectionsOverlay.ROUNDED_PIECE_WIDTH);}if(endStyle.top===1/* INTERN */||endStyle.bottom===1/* INTERN */){// Reverse rounded corner to the right
// First comes the selection (blue layer)
innerCornerOutput+=this._createSelectionPiece(top,lineHeight,SelectionsOverlay.SELECTION_CLASS_NAME,visibleRange.left+visibleRange.width,SelectionsOverlay.ROUNDED_PIECE_WIDTH);// Second comes the background (white layer) with inverse border radius
var _className2=SelectionsOverlay.EDITOR_BACKGROUND_CLASS_NAME;if(endStyle.top===1/* INTERN */){_className2+=' '+SelectionsOverlay.SELECTION_TOP_LEFT;}if(endStyle.bottom===1/* INTERN */){_className2+=' '+SelectionsOverlay.SELECTION_BOTTOM_LEFT;}innerCornerOutput+=this._createSelectionPiece(top,lineHeight,_className2,visibleRange.left+visibleRange.width,SelectionsOverlay.ROUNDED_PIECE_WIDTH);}}var className=SelectionsOverlay.SELECTION_CLASS_NAME;if(visibleRangesHaveStyle){var _startStyle=visibleRange.startStyle;var _endStyle=visibleRange.endStyle;if(_startStyle.top===0/* EXTERN */){className+=' '+SelectionsOverlay.SELECTION_TOP_LEFT;}if(_startStyle.bottom===0/* EXTERN */){className+=' '+SelectionsOverlay.SELECTION_BOTTOM_LEFT;}if(_endStyle.top===0/* EXTERN */){className+=' '+SelectionsOverlay.SELECTION_TOP_RIGHT;}if(_endStyle.bottom===0/* EXTERN */){className+=' '+SelectionsOverlay.SELECTION_BOTTOM_RIGHT;}}restOfSelectionOutput+=this._createSelectionPiece(top,lineHeight,className,visibleRange.left,visibleRange.width);}output2[lineIndex][0]+=innerCornerOutput;output2[lineIndex][1]+=restOfSelectionOutput;}}},{key:"prepareRender",value:function prepareRender(ctx){// Build HTML for inner corners separate from HTML for the rest of selections,
// as the inner corner HTML can interfere with that of other selections.
// In final render, make sure to place the inner corner HTML before the rest of selection HTML. See issue #77777.
var output=[];var visibleStartLineNumber=ctx.visibleRange.startLineNumber;var visibleEndLineNumber=ctx.visibleRange.endLineNumber;for(var lineNumber=visibleStartLineNumber;lineNumber<=visibleEndLineNumber;lineNumber++){var lineIndex=lineNumber-visibleStartLineNumber;output[lineIndex]=['',''];}var thisFrameVisibleRangesWithStyle=[];for(var i=0,len=this._selections.length;i<len;i++){var selection=this._selections[i];if(selection.isEmpty()){thisFrameVisibleRangesWithStyle[i]=null;continue;}var visibleRangesWithStyle=this._getVisibleRangesWithStyle(selection,ctx,this._previousFrameVisibleRangesWithStyle[i]);thisFrameVisibleRangesWithStyle[i]=visibleRangesWithStyle;this._actualRenderOneSelection(output,visibleStartLineNumber,this._selections.length>1,visibleRangesWithStyle);}this._previousFrameVisibleRangesWithStyle=thisFrameVisibleRangesWithStyle;this._renderResult=output.map(function(_ref){var _ref2=selections_slicedToArray(_ref,2),internalCorners=_ref2[0],restOfSelection=_ref2[1];return internalCorners+restOfSelection;});}},{key:"render",value:function render(startLineNumber,lineNumber){if(!this._renderResult){return'';}var lineIndex=lineNumber-startLineNumber;if(lineIndex<0||lineIndex>=this._renderResult.length){return'';}return this._renderResult[lineIndex];}}]);return SelectionsOverlay;}(dynamicViewOverlay/* DynamicViewOverlay */.i);SelectionsOverlay.SELECTION_CLASS_NAME='selected-text';SelectionsOverlay.SELECTION_TOP_LEFT='top-left-radius';SelectionsOverlay.SELECTION_BOTTOM_LEFT='bottom-left-radius';SelectionsOverlay.SELECTION_TOP_RIGHT='top-right-radius';SelectionsOverlay.SELECTION_BOTTOM_RIGHT='bottom-right-radius';SelectionsOverlay.EDITOR_BACKGROUND_CLASS_NAME='monaco-editor-background';SelectionsOverlay.ROUNDED_PIECE_WIDTH=10;(0,themeService/* registerThemingParticipant */.Ic)(function(theme,collector){var editorSelectionColor=theme.getColor(colorRegistry/* editorSelectionBackground */.hEj);if(editorSelectionColor){collector.addRule(".monaco-editor .focused .selected-text { background-color: ".concat(editorSelectionColor,"; }"));}var editorInactiveSelectionColor=theme.getColor(colorRegistry/* editorInactiveSelection */.ES4);if(editorInactiveSelectionColor){collector.addRule(".monaco-editor .selected-text { background-color: ".concat(editorInactiveSelectionColor,"; }"));}var editorSelectionForegroundColor=theme.getColor(colorRegistry/* editorSelectionForeground */.yb5);if(editorSelectionForegroundColor&&!editorSelectionForegroundColor.isTransparent()){collector.addRule(".monaco-editor .view-line span.inline-selected-text { color: ".concat(editorSelectionForegroundColor,"; }"));}});function abs(n){return n<0?-n:n;}
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/viewCursors/viewCursor.js
function viewCursor_slicedToArray(arr,i){return viewCursor_arrayWithHoles(arr)||viewCursor_iterableToArrayLimit(arr,i)||viewCursor_unsupportedIterableToArray(arr,i)||viewCursor_nonIterableRest();}function viewCursor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function viewCursor_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return viewCursor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return viewCursor_arrayLikeToArray(o,minLen);}function viewCursor_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function viewCursor_iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function viewCursor_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function viewCursor_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function viewCursor_createClass(Constructor,protoProps,staticProps){if(protoProps)viewCursor_defineProperties(Constructor.prototype,protoProps);if(staticProps)viewCursor_defineProperties(Constructor,staticProps);return Constructor;}function viewCursor_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var ViewCursorRenderData=function ViewCursorRenderData(top,left,width,height,textContent,textContentClassName){viewCursor_classCallCheck(this,ViewCursorRenderData);this.top=top;this.left=left;this.width=width;this.height=height;this.textContent=textContent;this.textContentClassName=textContentClassName;};var ViewCursor=/*#__PURE__*/function(){function ViewCursor(context){viewCursor_classCallCheck(this,ViewCursor);this._context=context;var options=this._context.configuration.options;var fontInfo=options.get(44/* fontInfo */);this._cursorStyle=options.get(24/* cursorStyle */);this._lineHeight=options.get(59/* lineHeight */);this._typicalHalfwidthCharacterWidth=fontInfo.typicalHalfwidthCharacterWidth;this._lineCursorWidth=Math.min(options.get(27/* cursorWidth */),this._typicalHalfwidthCharacterWidth);this._isVisible=true;// Create the dom node
this._domNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));this._domNode.setClassName("cursor ".concat(mouseCursor/* MOUSE_CURSOR_TEXT_CSS_CLASS_NAME */.S));this._domNode.setHeight(this._lineHeight);this._domNode.setTop(0);this._domNode.setLeft(0);(0,domFontInfo/* applyFontInfo */.N)(this._domNode,fontInfo);this._domNode.setDisplay('none');this._position=new core_position/* Position */.L(1,1);this._lastRenderedContent='';this._renderData=null;}viewCursor_createClass(ViewCursor,[{key:"getDomNode",value:function getDomNode(){return this._domNode;}},{key:"getPosition",value:function getPosition(){return this._position;}},{key:"show",value:function show(){if(!this._isVisible){this._domNode.setVisibility('inherit');this._isVisible=true;}}},{key:"hide",value:function hide(){if(this._isVisible){this._domNode.setVisibility('hidden');this._isVisible=false;}}},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;var fontInfo=options.get(44/* fontInfo */);this._cursorStyle=options.get(24/* cursorStyle */);this._lineHeight=options.get(59/* lineHeight */);this._typicalHalfwidthCharacterWidth=fontInfo.typicalHalfwidthCharacterWidth;this._lineCursorWidth=Math.min(options.get(27/* cursorWidth */),this._typicalHalfwidthCharacterWidth);(0,domFontInfo/* applyFontInfo */.N)(this._domNode,fontInfo);return true;}},{key:"onCursorPositionChanged",value:function onCursorPositionChanged(position){this._position=position;return true;}/**
     * If `this._position` is inside a grapheme, returns the position where the grapheme starts.
     * Also returns the next grapheme.
     */},{key:"_getGraphemeAwarePosition",value:function _getGraphemeAwarePosition(){var _this$_position=this._position,lineNumber=_this$_position.lineNumber,column=_this$_position.column;var lineContent=this._context.model.getLineContent(lineNumber);var _strings$getCharConta=strings/* getCharContainingOffset */.J_(lineContent,column-1),_strings$getCharConta2=viewCursor_slicedToArray(_strings$getCharConta,2),startOffset=_strings$getCharConta2[0],endOffset=_strings$getCharConta2[1];return[new core_position/* Position */.L(lineNumber,startOffset+1),lineContent.substring(startOffset,endOffset)];}},{key:"_prepareRender",value:function _prepareRender(ctx){var textContent='';var _this$_getGraphemeAwa=this._getGraphemeAwarePosition(),_this$_getGraphemeAwa2=viewCursor_slicedToArray(_this$_getGraphemeAwa,2),position=_this$_getGraphemeAwa2[0],nextGrapheme=_this$_getGraphemeAwa2[1];if(this._cursorStyle===editorOptions/* TextEditorCursorStyle.Line */.d2.Line||this._cursorStyle===editorOptions/* TextEditorCursorStyle.LineThin */.d2.LineThin){var visibleRange=ctx.visibleRangeForPosition(position);if(!visibleRange||visibleRange.outsideRenderedLine){// Outside viewport
return null;}var _width;if(this._cursorStyle===editorOptions/* TextEditorCursorStyle.Line */.d2.Line){_width=dom.computeScreenAwareSize(this._lineCursorWidth>0?this._lineCursorWidth:2);if(_width>2){textContent=nextGrapheme;}}else{_width=dom.computeScreenAwareSize(1);}var left=visibleRange.left;if(_width>=2&&left>=1){// try to center cursor
left-=1;}var _top=ctx.getVerticalOffsetForLineNumber(position.lineNumber)-ctx.bigNumbersDelta;return new ViewCursorRenderData(_top,left,_width,this._lineHeight,textContent,'');}var visibleRangeForCharacter=ctx.linesVisibleRangesForRange(new core_range/* Range */.e(position.lineNumber,position.column,position.lineNumber,position.column+nextGrapheme.length),false);if(!visibleRangeForCharacter||visibleRangeForCharacter.length===0){// Outside viewport
return null;}var firstVisibleRangeForCharacter=visibleRangeForCharacter[0];if(firstVisibleRangeForCharacter.outsideRenderedLine||firstVisibleRangeForCharacter.ranges.length===0){// Outside viewport
return null;}var range=firstVisibleRangeForCharacter.ranges[0];var width=range.width<1?this._typicalHalfwidthCharacterWidth:range.width;var textContentClassName='';if(this._cursorStyle===editorOptions/* TextEditorCursorStyle.Block */.d2.Block){var lineData=this._context.model.getViewLineData(position.lineNumber);textContent=nextGrapheme;var tokenIndex=lineData.tokens.findTokenIndexAtOffset(position.column-1);textContentClassName=lineData.tokens.getClassName(tokenIndex);}var top=ctx.getVerticalOffsetForLineNumber(position.lineNumber)-ctx.bigNumbersDelta;var height=this._lineHeight;// Underline might interfere with clicking
if(this._cursorStyle===editorOptions/* TextEditorCursorStyle.Underline */.d2.Underline||this._cursorStyle===editorOptions/* TextEditorCursorStyle.UnderlineThin */.d2.UnderlineThin){top+=this._lineHeight-2;height=2;}return new ViewCursorRenderData(top,range.left,width,height,textContent,textContentClassName);}},{key:"prepareRender",value:function prepareRender(ctx){this._renderData=this._prepareRender(ctx);}},{key:"render",value:function render(ctx){if(!this._renderData){this._domNode.setDisplay('none');return null;}if(this._lastRenderedContent!==this._renderData.textContent){this._lastRenderedContent=this._renderData.textContent;this._domNode.domNode.textContent=this._lastRenderedContent;}this._domNode.setClassName("cursor ".concat(mouseCursor/* MOUSE_CURSOR_TEXT_CSS_CLASS_NAME */.S," ").concat(this._renderData.textContentClassName));this._domNode.setDisplay('block');this._domNode.setTop(this._renderData.top);this._domNode.setLeft(this._renderData.left);this._domNode.setWidth(this._renderData.width);this._domNode.setLineHeight(this._renderData.height);this._domNode.setHeight(this._renderData.height);return{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2};}}]);return ViewCursor;}();
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/viewCursors/viewCursors.js
function viewCursors_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){viewCursors_typeof=function _typeof(obj){return typeof obj;};}else{viewCursors_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return viewCursors_typeof(obj);}function viewCursors_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=viewCursors_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function viewCursors_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return viewCursors_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return viewCursors_arrayLikeToArray(o,minLen);}function viewCursors_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function viewCursors_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function viewCursors_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function viewCursors_createClass(Constructor,protoProps,staticProps){if(protoProps)viewCursors_defineProperties(Constructor.prototype,protoProps);if(staticProps)viewCursors_defineProperties(Constructor,staticProps);return Constructor;}function viewCursors_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){viewCursors_get=Reflect.get;}else{viewCursors_get=function _get(target,property,receiver){var base=viewCursors_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return viewCursors_get(target,property,receiver||target);}function viewCursors_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=viewCursors_getPrototypeOf(object);if(object===null)break;}return object;}function viewCursors_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)viewCursors_setPrototypeOf(subClass,superClass);}function viewCursors_setPrototypeOf(o,p){viewCursors_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return viewCursors_setPrototypeOf(o,p);}function viewCursors_createSuper(Derived){var hasNativeReflectConstruct=viewCursors_isNativeReflectConstruct();return function _createSuperInternal(){var Super=viewCursors_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=viewCursors_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return viewCursors_possibleConstructorReturn(this,result);};}function viewCursors_possibleConstructorReturn(self,call){if(call&&(viewCursors_typeof(call)==="object"||typeof call==="function")){return call;}return viewCursors_assertThisInitialized(self);}function viewCursors_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function viewCursors_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function viewCursors_getPrototypeOf(o){viewCursors_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return viewCursors_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var ViewCursors=/*#__PURE__*/function(_ViewPart){viewCursors_inherits(ViewCursors,_ViewPart);var _super=viewCursors_createSuper(ViewCursors);function ViewCursors(context){var _this;viewCursors_classCallCheck(this,ViewCursors);_this=_super.call(this,context);var options=_this._context.configuration.options;_this._readOnly=options.get(81/* readOnly */);_this._cursorBlinking=options.get(22/* cursorBlinking */);_this._cursorStyle=options.get(24/* cursorStyle */);_this._cursorSmoothCaretAnimation=options.get(23/* cursorSmoothCaretAnimation */);_this._selectionIsEmpty=true;_this._isComposingInput=false;_this._isVisible=false;_this._primaryCursor=new ViewCursor(_this._context);_this._secondaryCursors=[];_this._renderData=[];_this._domNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this._domNode.setAttribute('role','presentation');_this._domNode.setAttribute('aria-hidden','true');_this._updateDomClassName();_this._domNode.appendChild(_this._primaryCursor.getDomNode());_this._startCursorBlinkAnimation=new common_async/* TimeoutTimer */._F();_this._cursorFlatBlinkInterval=new common_async/* IntervalTimer */.zh();_this._blinkingEnabled=false;_this._editorHasFocus=false;_this._updateBlinking();return _this;}viewCursors_createClass(ViewCursors,[{key:"dispose",value:function dispose(){viewCursors_get(viewCursors_getPrototypeOf(ViewCursors.prototype),"dispose",this).call(this);this._startCursorBlinkAnimation.dispose();this._cursorFlatBlinkInterval.dispose();}},{key:"getDomNode",value:function getDomNode(){return this._domNode;}// --- begin event handlers
},{key:"onCompositionStart",value:function onCompositionStart(e){this._isComposingInput=true;this._updateBlinking();return true;}},{key:"onCompositionEnd",value:function onCompositionEnd(e){this._isComposingInput=false;this._updateBlinking();return true;}},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;this._readOnly=options.get(81/* readOnly */);this._cursorBlinking=options.get(22/* cursorBlinking */);this._cursorStyle=options.get(24/* cursorStyle */);this._cursorSmoothCaretAnimation=options.get(23/* cursorSmoothCaretAnimation */);this._updateBlinking();this._updateDomClassName();this._primaryCursor.onConfigurationChanged(e);for(var i=0,len=this._secondaryCursors.length;i<len;i++){this._secondaryCursors[i].onConfigurationChanged(e);}return true;}},{key:"_onCursorPositionChanged",value:function _onCursorPositionChanged(position,secondaryPositions){this._primaryCursor.onCursorPositionChanged(position);this._updateBlinking();if(this._secondaryCursors.length<secondaryPositions.length){// Create new cursors
var addCnt=secondaryPositions.length-this._secondaryCursors.length;for(var i=0;i<addCnt;i++){var newCursor=new ViewCursor(this._context);this._domNode.domNode.insertBefore(newCursor.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling);this._secondaryCursors.push(newCursor);}}else if(this._secondaryCursors.length>secondaryPositions.length){// Remove some cursors
var removeCnt=this._secondaryCursors.length-secondaryPositions.length;for(var _i=0;_i<removeCnt;_i++){this._domNode.removeChild(this._secondaryCursors[0].getDomNode());this._secondaryCursors.splice(0,1);}}for(var _i2=0;_i2<secondaryPositions.length;_i2++){this._secondaryCursors[_i2].onCursorPositionChanged(secondaryPositions[_i2]);}}},{key:"onCursorStateChanged",value:function onCursorStateChanged(e){var positions=[];for(var i=0,len=e.selections.length;i<len;i++){positions[i]=e.selections[i].getPosition();}this._onCursorPositionChanged(positions[0],positions.slice(1));var selectionIsEmpty=e.selections[0].isEmpty();if(this._selectionIsEmpty!==selectionIsEmpty){this._selectionIsEmpty=selectionIsEmpty;this._updateDomClassName();}return true;}},{key:"onDecorationsChanged",value:function onDecorationsChanged(e){// true for inline decorations that can end up relayouting text
return true;}},{key:"onFlushed",value:function onFlushed(e){return true;}},{key:"onFocusChanged",value:function onFocusChanged(e){this._editorHasFocus=e.isFocused;this._updateBlinking();return false;}},{key:"onLinesChanged",value:function onLinesChanged(e){return true;}},{key:"onLinesDeleted",value:function onLinesDeleted(e){return true;}},{key:"onLinesInserted",value:function onLinesInserted(e){return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return true;}},{key:"onTokensChanged",value:function onTokensChanged(e){var shouldRender=function shouldRender(position){for(var i=0,len=e.ranges.length;i<len;i++){if(e.ranges[i].fromLineNumber<=position.lineNumber&&position.lineNumber<=e.ranges[i].toLineNumber){return true;}}return false;};if(shouldRender(this._primaryCursor.getPosition())){return true;}var _iterator=viewCursors_createForOfIteratorHelper(this._secondaryCursors),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var secondaryCursor=_step.value;if(shouldRender(secondaryCursor.getPosition())){return true;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return false;}},{key:"onZonesChanged",value:function onZonesChanged(e){return true;}// --- end event handlers
// ---- blinking logic
},{key:"_getCursorBlinking",value:function _getCursorBlinking(){if(this._isComposingInput){// avoid double cursors
return 0/* Hidden */;}if(!this._editorHasFocus){return 0/* Hidden */;}if(this._readOnly){return 5/* Solid */;}return this._cursorBlinking;}},{key:"_updateBlinking",value:function _updateBlinking(){var _this2=this;this._startCursorBlinkAnimation.cancel();this._cursorFlatBlinkInterval.cancel();var blinkingStyle=this._getCursorBlinking();// hidden and solid are special as they involve no animations
var isHidden=blinkingStyle===0/* Hidden */;var isSolid=blinkingStyle===5/* Solid */;if(isHidden){this._hide();}else{this._show();}this._blinkingEnabled=false;this._updateDomClassName();if(!isHidden&&!isSolid){if(blinkingStyle===1/* Blink */){// flat blinking is handled by JavaScript to save battery life due to Chromium step timing issue https://bugs.chromium.org/p/chromium/issues/detail?id=361587
this._cursorFlatBlinkInterval.cancelAndSet(function(){if(_this2._isVisible){_this2._hide();}else{_this2._show();}},ViewCursors.BLINK_INTERVAL);}else{this._startCursorBlinkAnimation.setIfNotSet(function(){_this2._blinkingEnabled=true;_this2._updateDomClassName();},ViewCursors.BLINK_INTERVAL);}}}// --- end blinking logic
},{key:"_updateDomClassName",value:function _updateDomClassName(){this._domNode.setClassName(this._getClassName());}},{key:"_getClassName",value:function _getClassName(){var result='cursors-layer';if(!this._selectionIsEmpty){result+=' has-selection';}switch(this._cursorStyle){case editorOptions/* TextEditorCursorStyle.Line */.d2.Line:result+=' cursor-line-style';break;case editorOptions/* TextEditorCursorStyle.Block */.d2.Block:result+=' cursor-block-style';break;case editorOptions/* TextEditorCursorStyle.Underline */.d2.Underline:result+=' cursor-underline-style';break;case editorOptions/* TextEditorCursorStyle.LineThin */.d2.LineThin:result+=' cursor-line-thin-style';break;case editorOptions/* TextEditorCursorStyle.BlockOutline */.d2.BlockOutline:result+=' cursor-block-outline-style';break;case editorOptions/* TextEditorCursorStyle.UnderlineThin */.d2.UnderlineThin:result+=' cursor-underline-thin-style';break;default:result+=' cursor-line-style';}if(this._blinkingEnabled){switch(this._getCursorBlinking()){case 1/* Blink */:result+=' cursor-blink';break;case 2/* Smooth */:result+=' cursor-smooth';break;case 3/* Phase */:result+=' cursor-phase';break;case 4/* Expand */:result+=' cursor-expand';break;case 5/* Solid */:result+=' cursor-solid';break;default:result+=' cursor-solid';}}else{result+=' cursor-solid';}if(this._cursorSmoothCaretAnimation){result+=' cursor-smooth-caret-animation';}return result;}},{key:"_show",value:function _show(){this._primaryCursor.show();for(var i=0,len=this._secondaryCursors.length;i<len;i++){this._secondaryCursors[i].show();}this._isVisible=true;}},{key:"_hide",value:function _hide(){this._primaryCursor.hide();for(var i=0,len=this._secondaryCursors.length;i<len;i++){this._secondaryCursors[i].hide();}this._isVisible=false;}// ---- IViewPart implementation
},{key:"prepareRender",value:function prepareRender(ctx){this._primaryCursor.prepareRender(ctx);for(var i=0,len=this._secondaryCursors.length;i<len;i++){this._secondaryCursors[i].prepareRender(ctx);}}},{key:"render",value:function render(ctx){var renderData=[];var renderDataLen=0;var primaryRenderData=this._primaryCursor.render(ctx);if(primaryRenderData){renderData[renderDataLen++]=primaryRenderData;}for(var i=0,len=this._secondaryCursors.length;i<len;i++){var secondaryRenderData=this._secondaryCursors[i].render(ctx);if(secondaryRenderData){renderData[renderDataLen++]=secondaryRenderData;}}this._renderData=renderData;}},{key:"getLastRenderData",value:function getLastRenderData(){return this._renderData;}}]);return ViewCursors;}(viewPart/* ViewPart */.E);ViewCursors.BLINK_INTERVAL=500;(0,themeService/* registerThemingParticipant */.Ic)(function(theme,collector){var caret=theme.getColor(editorColorRegistry/* editorCursorForeground */.n0);if(caret){var caretBackground=theme.getColor(editorColorRegistry/* editorCursorBackground */.fY);if(!caretBackground){caretBackground=caret.opposite();}collector.addRule(".monaco-editor .cursors-layer .cursor { background-color: ".concat(caret,"; border-color: ").concat(caret,"; color: ").concat(caretBackground,"; }"));if(theme.type==='hc'){collector.addRule(".monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ".concat(caretBackground,"; border-right: 1px solid ").concat(caretBackground,"; }"));}}});
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/viewZones/viewZones.js
function viewZones_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){viewZones_typeof=function _typeof(obj){return typeof obj;};}else{viewZones_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return viewZones_typeof(obj);}function viewZones_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=viewZones_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function viewZones_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return viewZones_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return viewZones_arrayLikeToArray(o,minLen);}function viewZones_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function viewZones_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function viewZones_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function viewZones_createClass(Constructor,protoProps,staticProps){if(protoProps)viewZones_defineProperties(Constructor.prototype,protoProps);if(staticProps)viewZones_defineProperties(Constructor,staticProps);return Constructor;}function viewZones_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){viewZones_get=Reflect.get;}else{viewZones_get=function _get(target,property,receiver){var base=viewZones_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return viewZones_get(target,property,receiver||target);}function viewZones_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=viewZones_getPrototypeOf(object);if(object===null)break;}return object;}function viewZones_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)viewZones_setPrototypeOf(subClass,superClass);}function viewZones_setPrototypeOf(o,p){viewZones_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return viewZones_setPrototypeOf(o,p);}function viewZones_createSuper(Derived){var hasNativeReflectConstruct=viewZones_isNativeReflectConstruct();return function _createSuperInternal(){var Super=viewZones_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=viewZones_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return viewZones_possibleConstructorReturn(this,result);};}function viewZones_possibleConstructorReturn(self,call){if(call&&(viewZones_typeof(call)==="object"||typeof call==="function")){return call;}return viewZones_assertThisInitialized(self);}function viewZones_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function viewZones_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function viewZones_getPrototypeOf(o){viewZones_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return viewZones_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var invalidFunc=function invalidFunc(){throw new Error("Invalid change accessor");};var ViewZones=/*#__PURE__*/function(_ViewPart){viewZones_inherits(ViewZones,_ViewPart);var _super=viewZones_createSuper(ViewZones);function ViewZones(context){var _this;viewZones_classCallCheck(this,ViewZones);_this=_super.call(this,context);var options=_this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);_this._lineHeight=options.get(59/* lineHeight */);_this._contentWidth=layoutInfo.contentWidth;_this._contentLeft=layoutInfo.contentLeft;_this.domNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this.domNode.setClassName('view-zones');_this.domNode.setPosition('absolute');_this.domNode.setAttribute('role','presentation');_this.domNode.setAttribute('aria-hidden','true');_this.marginDomNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this.marginDomNode.setClassName('margin-view-zones');_this.marginDomNode.setPosition('absolute');_this.marginDomNode.setAttribute('role','presentation');_this.marginDomNode.setAttribute('aria-hidden','true');_this._zones={};return _this;}viewZones_createClass(ViewZones,[{key:"dispose",value:function dispose(){viewZones_get(viewZones_getPrototypeOf(ViewZones.prototype),"dispose",this).call(this);this._zones={};}// ---- begin view event handlers
},{key:"_recomputeWhitespacesProps",value:function _recomputeWhitespacesProps(){var _this2=this;var whitespaces=this._context.viewLayout.getWhitespaces();var oldWhitespaces=new Map();var _iterator=viewZones_createForOfIteratorHelper(whitespaces),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var whitespace=_step.value;oldWhitespaces.set(whitespace.id,whitespace);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var hadAChange=false;this._context.model.changeWhitespace(function(whitespaceAccessor){var keys=Object.keys(_this2._zones);for(var i=0,len=keys.length;i<len;i++){var id=keys[i];var zone=_this2._zones[id];var props=_this2._computeWhitespaceProps(zone.delegate);zone.isInHiddenArea=props.isInHiddenArea;var oldWhitespace=oldWhitespaces.get(id);if(oldWhitespace&&(oldWhitespace.afterLineNumber!==props.afterViewLineNumber||oldWhitespace.height!==props.heightInPx)){whitespaceAccessor.changeOneWhitespace(id,props.afterViewLineNumber,props.heightInPx);_this2._safeCallOnComputedHeight(zone.delegate,props.heightInPx);hadAChange=true;}}});return hadAChange;}},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){var options=this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);this._lineHeight=options.get(59/* lineHeight */);this._contentWidth=layoutInfo.contentWidth;this._contentLeft=layoutInfo.contentLeft;if(e.hasChanged(59/* lineHeight */)){this._recomputeWhitespacesProps();}return true;}},{key:"onLineMappingChanged",value:function onLineMappingChanged(e){return this._recomputeWhitespacesProps();}},{key:"onLinesDeleted",value:function onLinesDeleted(e){return true;}},{key:"onScrollChanged",value:function onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged;}},{key:"onZonesChanged",value:function onZonesChanged(e){return true;}},{key:"onLinesInserted",value:function onLinesInserted(e){return true;}// ---- end view event handlers
},{key:"_getZoneOrdinal",value:function _getZoneOrdinal(zone){if(typeof zone.afterColumn!=='undefined'){return zone.afterColumn;}return 10000;}},{key:"_computeWhitespaceProps",value:function _computeWhitespaceProps(zone){if(zone.afterLineNumber===0){return{isInHiddenArea:false,afterViewLineNumber:0,heightInPx:this._heightInPixels(zone),minWidthInPx:this._minWidthInPixels(zone)};}var zoneAfterModelPosition;if(typeof zone.afterColumn!=='undefined'){zoneAfterModelPosition=this._context.model.validateModelPosition({lineNumber:zone.afterLineNumber,column:zone.afterColumn});}else{var validAfterLineNumber=this._context.model.validateModelPosition({lineNumber:zone.afterLineNumber,column:1}).lineNumber;zoneAfterModelPosition=new core_position/* Position */.L(validAfterLineNumber,this._context.model.getModelLineMaxColumn(validAfterLineNumber));}var zoneBeforeModelPosition;if(zoneAfterModelPosition.column===this._context.model.getModelLineMaxColumn(zoneAfterModelPosition.lineNumber)){zoneBeforeModelPosition=this._context.model.validateModelPosition({lineNumber:zoneAfterModelPosition.lineNumber+1,column:1});}else{zoneBeforeModelPosition=this._context.model.validateModelPosition({lineNumber:zoneAfterModelPosition.lineNumber,column:zoneAfterModelPosition.column+1});}var viewPosition=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(zoneAfterModelPosition,zone.afterColumnAffinity);var isVisible=this._context.model.coordinatesConverter.modelPositionIsVisible(zoneBeforeModelPosition);return{isInHiddenArea:!isVisible,afterViewLineNumber:viewPosition.lineNumber,heightInPx:isVisible?this._heightInPixels(zone):0,minWidthInPx:this._minWidthInPixels(zone)};}},{key:"changeViewZones",value:function changeViewZones(callback){var _this3=this;var zonesHaveChanged=false;this._context.model.changeWhitespace(function(whitespaceAccessor){var changeAccessor={addZone:function addZone(zone){zonesHaveChanged=true;return _this3._addZone(whitespaceAccessor,zone);},removeZone:function removeZone(id){if(!id){return;}zonesHaveChanged=_this3._removeZone(whitespaceAccessor,id)||zonesHaveChanged;},layoutZone:function layoutZone(id){if(!id){return;}zonesHaveChanged=_this3._layoutZone(whitespaceAccessor,id)||zonesHaveChanged;}};safeInvoke1Arg(callback,changeAccessor);// Invalidate changeAccessor
changeAccessor.addZone=invalidFunc;changeAccessor.removeZone=invalidFunc;changeAccessor.layoutZone=invalidFunc;});return zonesHaveChanged;}},{key:"_addZone",value:function _addZone(whitespaceAccessor,zone){var props=this._computeWhitespaceProps(zone);var whitespaceId=whitespaceAccessor.insertWhitespace(props.afterViewLineNumber,this._getZoneOrdinal(zone),props.heightInPx,props.minWidthInPx);var myZone={whitespaceId:whitespaceId,delegate:zone,isInHiddenArea:props.isInHiddenArea,isVisible:false,domNode:(0,fastDomNode/* createFastDomNode */.X)(zone.domNode),marginDomNode:zone.marginDomNode?(0,fastDomNode/* createFastDomNode */.X)(zone.marginDomNode):null};this._safeCallOnComputedHeight(myZone.delegate,props.heightInPx);myZone.domNode.setPosition('absolute');myZone.domNode.domNode.style.width='100%';myZone.domNode.setDisplay('none');myZone.domNode.setAttribute('monaco-view-zone',myZone.whitespaceId);this.domNode.appendChild(myZone.domNode);if(myZone.marginDomNode){myZone.marginDomNode.setPosition('absolute');myZone.marginDomNode.domNode.style.width='100%';myZone.marginDomNode.setDisplay('none');myZone.marginDomNode.setAttribute('monaco-view-zone',myZone.whitespaceId);this.marginDomNode.appendChild(myZone.marginDomNode);}this._zones[myZone.whitespaceId]=myZone;this.setShouldRender();return myZone.whitespaceId;}},{key:"_removeZone",value:function _removeZone(whitespaceAccessor,id){if(this._zones.hasOwnProperty(id)){var zone=this._zones[id];delete this._zones[id];whitespaceAccessor.removeWhitespace(zone.whitespaceId);zone.domNode.removeAttribute('monaco-visible-view-zone');zone.domNode.removeAttribute('monaco-view-zone');zone.domNode.domNode.parentNode.removeChild(zone.domNode.domNode);if(zone.marginDomNode){zone.marginDomNode.removeAttribute('monaco-visible-view-zone');zone.marginDomNode.removeAttribute('monaco-view-zone');zone.marginDomNode.domNode.parentNode.removeChild(zone.marginDomNode.domNode);}this.setShouldRender();return true;}return false;}},{key:"_layoutZone",value:function _layoutZone(whitespaceAccessor,id){if(this._zones.hasOwnProperty(id)){var zone=this._zones[id];var props=this._computeWhitespaceProps(zone.delegate);zone.isInHiddenArea=props.isInHiddenArea;// const newOrdinal = this._getZoneOrdinal(zone.delegate);
whitespaceAccessor.changeOneWhitespace(zone.whitespaceId,props.afterViewLineNumber,props.heightInPx);// TODO@Alex: change `newOrdinal` too
this._safeCallOnComputedHeight(zone.delegate,props.heightInPx);this.setShouldRender();return true;}return false;}},{key:"shouldSuppressMouseDownOnViewZone",value:function shouldSuppressMouseDownOnViewZone(id){if(this._zones.hasOwnProperty(id)){var zone=this._zones[id];return Boolean(zone.delegate.suppressMouseDown);}return false;}},{key:"_heightInPixels",value:function _heightInPixels(zone){if(typeof zone.heightInPx==='number'){return zone.heightInPx;}if(typeof zone.heightInLines==='number'){return this._lineHeight*zone.heightInLines;}return this._lineHeight;}},{key:"_minWidthInPixels",value:function _minWidthInPixels(zone){if(typeof zone.minWidthInPx==='number'){return zone.minWidthInPx;}return 0;}},{key:"_safeCallOnComputedHeight",value:function _safeCallOnComputedHeight(zone,height){if(typeof zone.onComputedHeight==='function'){try{zone.onComputedHeight(height);}catch(e){(0,errors/* onUnexpectedError */.dL)(e);}}}},{key:"_safeCallOnDomNodeTop",value:function _safeCallOnDomNodeTop(zone,top){if(typeof zone.onDomNodeTop==='function'){try{zone.onDomNodeTop(top);}catch(e){(0,errors/* onUnexpectedError */.dL)(e);}}}},{key:"prepareRender",value:function prepareRender(ctx){// Nothing to read
}},{key:"render",value:function render(ctx){var visibleWhitespaces=ctx.viewportData.whitespaceViewportData;var visibleZones={};var hasVisibleZone=false;var _iterator2=viewZones_createForOfIteratorHelper(visibleWhitespaces),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var visibleWhitespace=_step2.value;if(this._zones[visibleWhitespace.id].isInHiddenArea){continue;}visibleZones[visibleWhitespace.id]=visibleWhitespace;hasVisibleZone=true;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var keys=Object.keys(this._zones);for(var i=0,len=keys.length;i<len;i++){var id=keys[i];var zone=this._zones[id];var newTop=0;var newHeight=0;var newDisplay='none';if(visibleZones.hasOwnProperty(id)){newTop=visibleZones[id].verticalOffset-ctx.bigNumbersDelta;newHeight=visibleZones[id].height;newDisplay='block';// zone is visible
if(!zone.isVisible){zone.domNode.setAttribute('monaco-visible-view-zone','true');zone.isVisible=true;}this._safeCallOnDomNodeTop(zone.delegate,ctx.getScrolledTopFromAbsoluteTop(visibleZones[id].verticalOffset));}else{if(zone.isVisible){zone.domNode.removeAttribute('monaco-visible-view-zone');zone.isVisible=false;}this._safeCallOnDomNodeTop(zone.delegate,ctx.getScrolledTopFromAbsoluteTop(-1000000));}zone.domNode.setTop(newTop);zone.domNode.setHeight(newHeight);zone.domNode.setDisplay(newDisplay);if(zone.marginDomNode){zone.marginDomNode.setTop(newTop);zone.marginDomNode.setHeight(newHeight);zone.marginDomNode.setDisplay(newDisplay);}}if(hasVisibleZone){this.domNode.setWidth(Math.max(ctx.scrollWidth,this._contentWidth));this.marginDomNode.setWidth(this._contentLeft);}}}]);return ViewZones;}(viewPart/* ViewPart */.E);function safeInvoke1Arg(func,arg1){try{return func(arg1);}catch(e){(0,errors/* onUnexpectedError */.dL)(e);}}
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewModel/viewContext.js
var viewContext = __webpack_require__(71574);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewLayout/viewLinesViewportData.js
var viewLinesViewportData = __webpack_require__(32177);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/controller/mouseTarget.js
var mouseTarget = __webpack_require__(41033);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/view/view.js
function view_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){view_typeof=function _typeof(obj){return typeof obj;};}else{view_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return view_typeof(obj);}function view_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=view_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function view_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return view_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return view_arrayLikeToArray(o,minLen);}function view_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function view_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function view_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function view_createClass(Constructor,protoProps,staticProps){if(protoProps)view_defineProperties(Constructor.prototype,protoProps);if(staticProps)view_defineProperties(Constructor,staticProps);return Constructor;}function view_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){view_get=Reflect.get;}else{view_get=function _get(target,property,receiver){var base=view_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return view_get(target,property,receiver||target);}function view_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=view_getPrototypeOf(object);if(object===null)break;}return object;}function view_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)view_setPrototypeOf(subClass,superClass);}function view_setPrototypeOf(o,p){view_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return view_setPrototypeOf(o,p);}function view_createSuper(Derived){var hasNativeReflectConstruct=view_isNativeReflectConstruct();return function _createSuperInternal(){var Super=view_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=view_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return view_possibleConstructorReturn(this,result);};}function view_possibleConstructorReturn(self,call){if(call&&(view_typeof(call)==="object"||typeof call==="function")){return call;}return view_assertThisInitialized(self);}function view_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function view_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function view_getPrototypeOf(o){view_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return view_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var View=/*#__PURE__*/function(_ViewEventHandler){view_inherits(View,_ViewEventHandler);var _super=view_createSuper(View);function View(commandDelegate,configuration,themeService,model,userInputEvents,overflowWidgetsDomNode){var _this;view_classCallCheck(this,View);_this=_super.call(this);_this._selections=[new core_selection/* Selection */.Y(1,1,1,1)];_this._renderAnimationFrame=null;var viewController=new ViewController(configuration,model,userInputEvents,commandDelegate);// The view context is passed on to most classes (basically to reduce param. counts in ctors)
_this._context=new viewContext/* ViewContext */.A(configuration,themeService.getColorTheme(),model);// Ensure the view is the first event handler in order to update the layout
_this._context.addEventHandler(view_assertThisInitialized(_this));_this._register(themeService.onDidColorThemeChange(function(theme){_this._context.theme.update(theme);_this._context.model.onDidColorThemeChange();_this.render(true,false);}));_this._viewParts=[];// Keyboard handler
_this._textAreaHandler=new textAreaHandler/* TextAreaHandler */.H(_this._context,viewController,_this._createTextAreaHandlerHelper());_this._viewParts.push(_this._textAreaHandler);// These two dom nodes must be constructed up front, since references are needed in the layout provider (scrolling & co.)
_this._linesContent=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this._linesContent.setClassName('lines-content'+' monaco-editor-background');_this._linesContent.setPosition('absolute');_this.domNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this.domNode.setClassName(_this._getEditorClassName());// Set role 'code' for better screen reader support https://github.com/microsoft/vscode/issues/93438
_this.domNode.setAttribute('role','code');_this._overflowGuardContainer=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));viewPart/* PartFingerprints.write */.K.write(_this._overflowGuardContainer,3/* OverflowGuard */);_this._overflowGuardContainer.setClassName('overflow-guard');_this._scrollbar=new EditorScrollbar(_this._context,_this._linesContent,_this.domNode,_this._overflowGuardContainer);_this._viewParts.push(_this._scrollbar);// View Lines
_this._viewLines=new ViewLines(_this._context,_this._linesContent);// View Zones
_this._viewZones=new ViewZones(_this._context);_this._viewParts.push(_this._viewZones);// Decorations overview ruler
var decorationsOverviewRuler=new DecorationsOverviewRuler(_this._context);_this._viewParts.push(decorationsOverviewRuler);var scrollDecoration=new ScrollDecorationViewPart(_this._context);_this._viewParts.push(scrollDecoration);var contentViewOverlays=new ContentViewOverlays(_this._context);_this._viewParts.push(contentViewOverlays);contentViewOverlays.addDynamicOverlay(new CurrentLineHighlightOverlay(_this._context));contentViewOverlays.addDynamicOverlay(new SelectionsOverlay(_this._context));contentViewOverlays.addDynamicOverlay(new IndentGuidesOverlay(_this._context));contentViewOverlays.addDynamicOverlay(new DecorationsOverlay(_this._context));var marginViewOverlays=new MarginViewOverlays(_this._context);_this._viewParts.push(marginViewOverlays);marginViewOverlays.addDynamicOverlay(new CurrentLineMarginHighlightOverlay(_this._context));marginViewOverlays.addDynamicOverlay(new GlyphMarginOverlay(_this._context));marginViewOverlays.addDynamicOverlay(new MarginViewLineDecorationsOverlay(_this._context));marginViewOverlays.addDynamicOverlay(new LinesDecorationsOverlay(_this._context));marginViewOverlays.addDynamicOverlay(new lineNumbers/* LineNumbersOverlay */.x(_this._context));var margin=new margin_margin/* Margin */.Z(_this._context);margin.getDomNode().appendChild(_this._viewZones.marginDomNode);margin.getDomNode().appendChild(marginViewOverlays.getDomNode());_this._viewParts.push(margin);// Content widgets
_this._contentWidgets=new ViewContentWidgets(_this._context,_this.domNode);_this._viewParts.push(_this._contentWidgets);_this._viewCursors=new ViewCursors(_this._context);_this._viewParts.push(_this._viewCursors);// Overlay widgets
_this._overlayWidgets=new ViewOverlayWidgets(_this._context);_this._viewParts.push(_this._overlayWidgets);var rulers=new Rulers(_this._context);_this._viewParts.push(rulers);var minimap=new Minimap(_this._context);_this._viewParts.push(minimap);// -------------- Wire dom nodes up
if(decorationsOverviewRuler){var overviewRulerData=_this._scrollbar.getOverviewRulerLayoutInfo();overviewRulerData.parent.insertBefore(decorationsOverviewRuler.getDomNode(),overviewRulerData.insertBefore);}_this._linesContent.appendChild(contentViewOverlays.getDomNode());_this._linesContent.appendChild(rulers.domNode);_this._linesContent.appendChild(_this._viewZones.domNode);_this._linesContent.appendChild(_this._viewLines.getDomNode());_this._linesContent.appendChild(_this._contentWidgets.domNode);_this._linesContent.appendChild(_this._viewCursors.getDomNode());_this._overflowGuardContainer.appendChild(margin.getDomNode());_this._overflowGuardContainer.appendChild(_this._scrollbar.getDomNode());_this._overflowGuardContainer.appendChild(scrollDecoration.getDomNode());_this._overflowGuardContainer.appendChild(_this._textAreaHandler.textArea);_this._overflowGuardContainer.appendChild(_this._textAreaHandler.textAreaCover);_this._overflowGuardContainer.appendChild(_this._overlayWidgets.getDomNode());_this._overflowGuardContainer.appendChild(minimap.getDomNode());_this.domNode.appendChild(_this._overflowGuardContainer);if(overflowWidgetsDomNode){overflowWidgetsDomNode.appendChild(_this._contentWidgets.overflowingContentWidgetsDomNode.domNode);}else{_this.domNode.appendChild(_this._contentWidgets.overflowingContentWidgetsDomNode);}_this._applyLayout();// Pointer handler
_this._pointerHandler=_this._register(new pointerHandler/* PointerHandler */.a(_this._context,viewController,_this._createPointerHandlerHelper()));return _this;}view_createClass(View,[{key:"_flushAccumulatedAndRenderNow",value:function _flushAccumulatedAndRenderNow(){this._renderNow();}},{key:"_createPointerHandlerHelper",value:function _createPointerHandlerHelper(){var _this2=this;return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:function focusTextArea(){_this2.focus();},dispatchTextAreaEvent:function dispatchTextAreaEvent(event){_this2._textAreaHandler.textArea.domNode.dispatchEvent(event);},getLastRenderData:function getLastRenderData(){var lastViewCursorsRenderData=_this2._viewCursors.getLastRenderData()||[];var lastTextareaPosition=_this2._textAreaHandler.getLastRenderData();return new mouseTarget/* PointerHandlerLastRenderData */.sB(lastViewCursorsRenderData,lastTextareaPosition);},shouldSuppressMouseDownOnViewZone:function shouldSuppressMouseDownOnViewZone(viewZoneId){return _this2._viewZones.shouldSuppressMouseDownOnViewZone(viewZoneId);},shouldSuppressMouseDownOnWidget:function shouldSuppressMouseDownOnWidget(widgetId){return _this2._contentWidgets.shouldSuppressMouseDownOnWidget(widgetId);},getPositionFromDOMInfo:function getPositionFromDOMInfo(spanNode,offset){_this2._flushAccumulatedAndRenderNow();return _this2._viewLines.getPositionFromDOMInfo(spanNode,offset);},visibleRangeForPosition:function visibleRangeForPosition(lineNumber,column){_this2._flushAccumulatedAndRenderNow();return _this2._viewLines.visibleRangeForPosition(new core_position/* Position */.L(lineNumber,column));},getLineWidth:function getLineWidth(lineNumber){_this2._flushAccumulatedAndRenderNow();return _this2._viewLines.getLineWidth(lineNumber);}};}},{key:"_createTextAreaHandlerHelper",value:function _createTextAreaHandlerHelper(){var _this3=this;return{visibleRangeForPosition:function visibleRangeForPosition(position){_this3._flushAccumulatedAndRenderNow();return _this3._viewLines.visibleRangeForPosition(position);}};}},{key:"_applyLayout",value:function _applyLayout(){var options=this._context.configuration.options;var layoutInfo=options.get(131/* layoutInfo */);this.domNode.setWidth(layoutInfo.width);this.domNode.setHeight(layoutInfo.height);this._overflowGuardContainer.setWidth(layoutInfo.width);this._overflowGuardContainer.setHeight(layoutInfo.height);this._linesContent.setWidth(1000000);this._linesContent.setHeight(1000000);}},{key:"_getEditorClassName",value:function _getEditorClassName(){var focused=this._textAreaHandler.isFocused()?' focused':'';return this._context.configuration.options.get(128/* editorClassName */)+' '+(0,themeService/* getThemeTypeSelector */.m6)(this._context.theme.type)+focused;}// --- begin event handlers
},{key:"handleEvents",value:function handleEvents(events){view_get(view_getPrototypeOf(View.prototype),"handleEvents",this).call(this,events);this._scheduleRender();}},{key:"onConfigurationChanged",value:function onConfigurationChanged(e){this.domNode.setClassName(this._getEditorClassName());this._applyLayout();return false;}},{key:"onCursorStateChanged",value:function onCursorStateChanged(e){this._selections=e.selections;return false;}},{key:"onFocusChanged",value:function onFocusChanged(e){this.domNode.setClassName(this._getEditorClassName());return false;}},{key:"onThemeChanged",value:function onThemeChanged(e){this.domNode.setClassName(this._getEditorClassName());return false;}// --- end event handlers
},{key:"dispose",value:function dispose(){if(this._renderAnimationFrame!==null){this._renderAnimationFrame.dispose();this._renderAnimationFrame=null;}this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove();this._context.removeEventHandler(this);this._viewLines.dispose();// Destroy view parts
var _iterator=view_createForOfIteratorHelper(this._viewParts),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var viewPart=_step.value;viewPart.dispose();}}catch(err){_iterator.e(err);}finally{_iterator.f();}view_get(view_getPrototypeOf(View.prototype),"dispose",this).call(this);}},{key:"_scheduleRender",value:function _scheduleRender(){if(this._renderAnimationFrame===null){this._renderAnimationFrame=dom.runAtThisOrScheduleAtNextAnimationFrame(this._onRenderScheduled.bind(this),100);}}},{key:"_onRenderScheduled",value:function _onRenderScheduled(){this._renderAnimationFrame=null;this._flushAccumulatedAndRenderNow();}},{key:"_renderNow",value:function _renderNow(){var _this4=this;safeInvokeNoArg(function(){return _this4._actualRender();});}},{key:"_getViewPartsToRender",value:function _getViewPartsToRender(){var result=[];var resultLen=0;var _iterator2=view_createForOfIteratorHelper(this._viewParts),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var viewPart=_step2.value;if(viewPart.shouldRender()){result[resultLen++]=viewPart;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return result;}},{key:"_actualRender",value:function _actualRender(){if(!dom.isInDOM(this.domNode.domNode)){return;}var viewPartsToRender=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&viewPartsToRender.length===0){// Nothing to render
return;}var partialViewportData=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(partialViewportData.startLineNumber,partialViewportData.endLineNumber,partialViewportData.centeredLineNumber);var viewportData=new viewLinesViewportData/* ViewportData */.x(this._selections,partialViewportData,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);if(this._contentWidgets.shouldRender()){// Give the content widgets a chance to set their max width before a possible synchronous layout
this._contentWidgets.onBeforeRender(viewportData);}if(this._viewLines.shouldRender()){this._viewLines.renderText(viewportData);this._viewLines.onDidRender();// Rendering of viewLines might cause scroll events to occur, so collect view parts to render again
viewPartsToRender=this._getViewPartsToRender();}var renderingContext=new view_renderingContext/* RenderingContext */.xh(this._context.viewLayout,viewportData,this._viewLines);// Render the rest of the parts
var _iterator3=view_createForOfIteratorHelper(viewPartsToRender),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var viewPart=_step3.value;viewPart.prepareRender(renderingContext);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}var _iterator4=view_createForOfIteratorHelper(viewPartsToRender),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _viewPart=_step4.value;_viewPart.render(renderingContext);_viewPart.onDidRender();}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}// --- BEGIN CodeEditor helpers
},{key:"delegateVerticalScrollbarMouseDown",value:function delegateVerticalScrollbarMouseDown(browserEvent){this._scrollbar.delegateVerticalScrollbarMouseDown(browserEvent);}},{key:"restoreState",value:function restoreState(scrollPosition){this._context.model.setScrollPosition({scrollTop:scrollPosition.scrollTop},1/* Immediate */);this._context.model.tokenizeViewport();this._renderNow();this._viewLines.updateLineWidths();this._context.model.setScrollPosition({scrollLeft:scrollPosition.scrollLeft},1/* Immediate */);}},{key:"getOffsetForColumn",value:function getOffsetForColumn(modelLineNumber,modelColumn){var modelPosition=this._context.model.validateModelPosition({lineNumber:modelLineNumber,column:modelColumn});var viewPosition=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);this._flushAccumulatedAndRenderNow();var visibleRange=this._viewLines.visibleRangeForPosition(new core_position/* Position */.L(viewPosition.lineNumber,viewPosition.column));if(!visibleRange){return-1;}return visibleRange.left;}},{key:"getTargetAtClientPoint",value:function getTargetAtClientPoint(clientX,clientY){var mouseTarget=this._pointerHandler.getTargetAtClientPoint(clientX,clientY);if(!mouseTarget){return null;}return ViewUserInputEvents.convertViewToModelMouseTarget(mouseTarget,this._context.model.coordinatesConverter);}},{key:"createOverviewRuler",value:function createOverviewRuler(cssClassName){return new OverviewRuler(this._context,cssClassName);}},{key:"change",value:function change(callback){this._viewZones.changeViewZones(callback);this._scheduleRender();}},{key:"render",value:function render(now,everything){if(everything){// Force everything to render...
this._viewLines.forceShouldRender();var _iterator5=view_createForOfIteratorHelper(this._viewParts),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var viewPart=_step5.value;viewPart.forceShouldRender();}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}if(now){this._flushAccumulatedAndRenderNow();}else{this._scheduleRender();}}},{key:"focus",value:function focus(){this._textAreaHandler.focusTextArea();}},{key:"isFocused",value:function isFocused(){return this._textAreaHandler.isFocused();}},{key:"setAriaOptions",value:function setAriaOptions(options){this._textAreaHandler.setAriaOptions(options);}},{key:"addContentWidget",value:function addContentWidget(widgetData){this._contentWidgets.addWidget(widgetData.widget);this.layoutContentWidget(widgetData);this._scheduleRender();}},{key:"layoutContentWidget",value:function layoutContentWidget(widgetData){var newRange=widgetData.position?widgetData.position.range||null:null;if(newRange===null){var newPosition=widgetData.position?widgetData.position.position:null;if(newPosition!==null){newRange=new core_range/* Range */.e(newPosition.lineNumber,newPosition.column,newPosition.lineNumber,newPosition.column);}}var newPreference=widgetData.position?widgetData.position.preference:null;this._contentWidgets.setWidgetPosition(widgetData.widget,newRange,newPreference);this._scheduleRender();}},{key:"removeContentWidget",value:function removeContentWidget(widgetData){this._contentWidgets.removeWidget(widgetData.widget);this._scheduleRender();}},{key:"addOverlayWidget",value:function addOverlayWidget(widgetData){this._overlayWidgets.addWidget(widgetData.widget);this.layoutOverlayWidget(widgetData);this._scheduleRender();}},{key:"layoutOverlayWidget",value:function layoutOverlayWidget(widgetData){var newPreference=widgetData.position?widgetData.position.preference:null;var shouldRender=this._overlayWidgets.setWidgetPosition(widgetData.widget,newPreference);if(shouldRender){this._scheduleRender();}}},{key:"removeOverlayWidget",value:function removeOverlayWidget(widgetData){this._overlayWidgets.removeWidget(widgetData.widget);this._scheduleRender();}}]);return View;}(viewEventHandler/* ViewEventHandler */.O);function safeInvokeNoArg(func){try{return func();}catch(e){(0,errors/* onUnexpectedError */.dL)(e);}}
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/cursor/cursor.js + 2 modules
var cursor = __webpack_require__(43828);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/cursorColumns.js
var cursorColumns = __webpack_require__(44847);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/editorAction.js
var editorAction = __webpack_require__(23596);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/editorCommon.js
var editorCommon = __webpack_require__(69400);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/editorContextKeys.js
var editorContextKeys = __webpack_require__(48919);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewModel/viewModelImpl.js + 4 modules
var viewModelImpl = __webpack_require__(73693);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/commands/common/commands.js
var commands = __webpack_require__(47937);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/contextkey/common/contextkey.js
var contextkey = __webpack_require__(11703);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/instantiation/common/instantiation.js
var instantiation = __webpack_require__(71896);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/instantiation/common/serviceCollection.js
var serviceCollection = __webpack_require__(87230);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/notification/common/notification.js
var notification = __webpack_require__(73766);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/accessibility/common/accessibility.js
var accessibility = __webpack_require__(10304);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewModel/monospaceLineBreaksComputer.js
var monospaceLineBreaksComputer = __webpack_require__(58399);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/textModelEvents.js
var textModelEvents = __webpack_require__(59311);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewModel/modelLineProjectionData.js
var modelLineProjectionData = __webpack_require__(24619);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/view/domLineBreaksComputer.js
function domLineBreaksComputer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function domLineBreaksComputer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function domLineBreaksComputer_createClass(Constructor,protoProps,staticProps){if(protoProps)domLineBreaksComputer_defineProperties(Constructor.prototype,protoProps);if(staticProps)domLineBreaksComputer_defineProperties(Constructor,staticProps);return Constructor;}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var domLineBreaksComputer_a;var ttPolicy=(domLineBreaksComputer_a=window.trustedTypes)===null||domLineBreaksComputer_a===void 0?void 0:domLineBreaksComputer_a.createPolicy('domLineBreaksComputer',{createHTML:function createHTML(value){return value;}});var DOMLineBreaksComputerFactory=/*#__PURE__*/function(){function DOMLineBreaksComputerFactory(){domLineBreaksComputer_classCallCheck(this,DOMLineBreaksComputerFactory);}domLineBreaksComputer_createClass(DOMLineBreaksComputerFactory,[{key:"createLineBreaksComputer",value:function createLineBreaksComputer(fontInfo,tabSize,wrappingColumn,wrappingIndent){var requests=[];var injectedTexts=[];return{addRequest:function addRequest(lineText,injectedText,previousLineBreakData){requests.push(lineText);injectedTexts.push(injectedText);},finalize:function finalize(){return createLineBreaks(requests,fontInfo,tabSize,wrappingColumn,wrappingIndent,injectedTexts);}};}}],[{key:"create",value:function create(){return new DOMLineBreaksComputerFactory();}}]);return DOMLineBreaksComputerFactory;}();function createLineBreaks(requests,fontInfo,tabSize,firstLineBreakColumn,wrappingIndent,injectedTextsPerLine){var _a;function createEmptyLineBreakWithPossiblyInjectedText(requestIdx){var injectedTexts=injectedTextsPerLine[requestIdx];if(injectedTexts){var lineText=textModelEvents/* LineInjectedText.applyInjectedText */.gk.applyInjectedText(requests[requestIdx],injectedTexts);var injectionOptions=injectedTexts.map(function(t){return t.options;});var injectionOffsets=injectedTexts.map(function(text){return text.column-1;});// creating a `LineBreakData` with an invalid `breakOffsetsVisibleColumn` is OK
// because `breakOffsetsVisibleColumn` will never be used because it contains injected text
return new modelLineProjectionData/* ModelLineProjectionData */.gD(injectionOffsets,injectionOptions,[lineText.length],[],0);}else{return null;}}if(firstLineBreakColumn===-1){var _result=[];for(var i=0,len=requests.length;i<len;i++){_result[i]=createEmptyLineBreakWithPossiblyInjectedText(i);}return _result;}var overallWidth=Math.round(firstLineBreakColumn*fontInfo.typicalHalfwidthCharacterWidth);var additionalIndent=wrappingIndent===3/* DeepIndent */?2:wrappingIndent===2/* Indent */?1:0;var additionalIndentSize=Math.round(tabSize*additionalIndent);var additionalIndentLength=Math.ceil(fontInfo.spaceWidth*additionalIndentSize);var containerDomNode=document.createElement('div');(0,domFontInfo/* applyFontInfo */.N)(containerDomNode,fontInfo);var sb=(0,stringBuilder/* createStringBuilder */.l$)(10000);var firstNonWhitespaceIndices=[];var wrappedTextIndentLengths=[];var renderLineContents=[];var allCharOffsets=[];var allVisibleColumns=[];for(var _i=0;_i<requests.length;_i++){var lineContent=textModelEvents/* LineInjectedText.applyInjectedText */.gk.applyInjectedText(requests[_i],injectedTextsPerLine[_i]);var firstNonWhitespaceIndex=0;var wrappedTextIndentLength=0;var width=overallWidth;if(wrappingIndent!==0/* None */){firstNonWhitespaceIndex=strings/* firstNonWhitespaceIndex */.LC(lineContent);if(firstNonWhitespaceIndex===-1){// all whitespace line
firstNonWhitespaceIndex=0;}else{// Track existing indent
for(var _i2=0;_i2<firstNonWhitespaceIndex;_i2++){var charWidth=lineContent.charCodeAt(_i2)===9/* Tab */?tabSize-wrappedTextIndentLength%tabSize:1;wrappedTextIndentLength+=charWidth;}var indentWidth=Math.ceil(fontInfo.spaceWidth*wrappedTextIndentLength);// Force sticking to beginning of line if no character would fit except for the indentation
if(indentWidth+fontInfo.typicalFullwidthCharacterWidth>overallWidth){firstNonWhitespaceIndex=0;wrappedTextIndentLength=0;}else{width=overallWidth-indentWidth;}}}var renderLineContent=lineContent.substr(firstNonWhitespaceIndex);var tmp=renderLine(renderLineContent,wrappedTextIndentLength,tabSize,width,sb,additionalIndentLength);firstNonWhitespaceIndices[_i]=firstNonWhitespaceIndex;wrappedTextIndentLengths[_i]=wrappedTextIndentLength;renderLineContents[_i]=renderLineContent;allCharOffsets[_i]=tmp[0];allVisibleColumns[_i]=tmp[1];}var html=sb.build();var trustedhtml=(_a=ttPolicy===null||ttPolicy===void 0?void 0:ttPolicy.createHTML(html))!==null&&_a!==void 0?_a:html;containerDomNode.innerHTML=trustedhtml;containerDomNode.style.position='absolute';containerDomNode.style.top='10000';containerDomNode.style.wordWrap='break-word';document.body.appendChild(containerDomNode);var range=document.createRange();var lineDomNodes=Array.prototype.slice.call(containerDomNode.children,0);var result=[];for(var _i3=0;_i3<requests.length;_i3++){var lineDomNode=lineDomNodes[_i3];var breakOffsets=readLineBreaks(range,lineDomNode,renderLineContents[_i3],allCharOffsets[_i3]);if(breakOffsets===null){result[_i3]=createEmptyLineBreakWithPossiblyInjectedText(_i3);continue;}var _firstNonWhitespaceIndex=firstNonWhitespaceIndices[_i3];var _wrappedTextIndentLength=wrappedTextIndentLengths[_i3]+additionalIndentSize;var visibleColumns=allVisibleColumns[_i3];var breakOffsetsVisibleColumn=[];for(var j=0,_len=breakOffsets.length;j<_len;j++){breakOffsetsVisibleColumn[j]=visibleColumns[breakOffsets[j]];}if(_firstNonWhitespaceIndex!==0){// All break offsets are relative to the renderLineContent, make them absolute again
for(var _j=0,_len2=breakOffsets.length;_j<_len2;_j++){breakOffsets[_j]+=_firstNonWhitespaceIndex;}}var injectionOptions=void 0;var injectionOffsets=void 0;var curInjectedTexts=injectedTextsPerLine[_i3];if(curInjectedTexts){injectionOptions=curInjectedTexts.map(function(t){return t.options;});injectionOffsets=curInjectedTexts.map(function(text){return text.column-1;});}else{injectionOptions=null;injectionOffsets=null;}result[_i3]=new modelLineProjectionData/* ModelLineProjectionData */.gD(injectionOffsets,injectionOptions,breakOffsets,breakOffsetsVisibleColumn,_wrappedTextIndentLength);}document.body.removeChild(containerDomNode);return result;}function renderLine(lineContent,initialVisibleColumn,tabSize,width,sb,wrappingIndentLength){if(wrappingIndentLength!==0){var hangingOffset=String(wrappingIndentLength);sb.appendASCIIString('<div style="text-indent: -');sb.appendASCIIString(hangingOffset);sb.appendASCIIString('px; padding-left: ');sb.appendASCIIString(hangingOffset);sb.appendASCIIString('px; box-sizing: border-box; width:');}else{sb.appendASCIIString('<div style="width:');}sb.appendASCIIString(String(width));sb.appendASCIIString('px;">');// if (containsRTL) {
// 	sb.appendASCIIString('" dir="ltr');
// }
var len=lineContent.length;var visibleColumn=initialVisibleColumn;var charOffset=0;var charOffsets=[];var visibleColumns=[];var nextCharCode=0<len?lineContent.charCodeAt(0):0/* Null */;sb.appendASCIIString('<span>');for(var charIndex=0;charIndex<len;charIndex++){if(charIndex!==0&&charIndex%16384/* SPAN_MODULO_LIMIT */===0){sb.appendASCIIString('</span><span>');}charOffsets[charIndex]=charOffset;visibleColumns[charIndex]=visibleColumn;var charCode=nextCharCode;nextCharCode=charIndex+1<len?lineContent.charCodeAt(charIndex+1):0/* Null */;var producedCharacters=1;var charWidth=1;switch(charCode){case 9/* Tab */:producedCharacters=tabSize-visibleColumn%tabSize;charWidth=producedCharacters;for(var space=1;space<=producedCharacters;space++){if(space<producedCharacters){sb.write1(0xA0);// &nbsp;
}else{sb.appendASCII(32/* Space */);}}break;case 32/* Space */:if(nextCharCode===32/* Space */){sb.write1(0xA0);// &nbsp;
}else{sb.appendASCII(32/* Space */);}break;case 60/* LessThan */:sb.appendASCIIString('&lt;');break;case 62/* GreaterThan */:sb.appendASCIIString('&gt;');break;case 38/* Ampersand */:sb.appendASCIIString('&amp;');break;case 0/* Null */:sb.appendASCIIString('&#00;');break;case 65279/* UTF8_BOM */:case 8232/* LINE_SEPARATOR */:case 8233/* PARAGRAPH_SEPARATOR */:case 133/* NEXT_LINE */:sb.write1(0xFFFD);break;default:if(strings/* isFullWidthCharacter */.K7(charCode)){charWidth++;}if(charCode<32){sb.write1(9216+charCode);}else{sb.write1(charCode);}}charOffset+=producedCharacters;visibleColumn+=charWidth;}sb.appendASCIIString('</span>');charOffsets[lineContent.length]=charOffset;visibleColumns[lineContent.length]=visibleColumn;sb.appendASCIIString('</div>');return[charOffsets,visibleColumns];}function readLineBreaks(range,lineDomNode,lineContent,charOffsets){if(lineContent.length<=1){return null;}var spans=Array.prototype.slice.call(lineDomNode.children,0);var breakOffsets=[];try{discoverBreaks(range,spans,charOffsets,0,null,lineContent.length-1,null,breakOffsets);}catch(err){console.log(err);return null;}if(breakOffsets.length===0){return null;}breakOffsets.push(lineContent.length);return breakOffsets;}function discoverBreaks(range,spans,charOffsets,low,lowRects,high,highRects,result){if(low===high){return;}lowRects=lowRects||readClientRect(range,spans,charOffsets[low],charOffsets[low+1]);highRects=highRects||readClientRect(range,spans,charOffsets[high],charOffsets[high+1]);if(Math.abs(lowRects[0].top-highRects[0].top)<=0.1){// same line
return;}// there is at least one line break between these two offsets
if(low+1===high){// the two characters are adjacent, so the line break must be exactly between them
result.push(high);return;}var mid=low+(high-low)/2|0;var midRects=readClientRect(range,spans,charOffsets[mid],charOffsets[mid+1]);discoverBreaks(range,spans,charOffsets,low,lowRects,mid,midRects,result);discoverBreaks(range,spans,charOffsets,mid,midRects,high,highRects,result);}function readClientRect(range,spans,startOffset,endOffset){range.setStart(spans[startOffset/16384/* SPAN_MODULO_LIMIT */|0].firstChild,startOffset%16384/* SPAN_MODULO_LIMIT */);range.setEnd(spans[endOffset/16384/* SPAN_MODULO_LIMIT */|0].firstChild,endOffset%16384/* SPAN_MODULO_LIMIT */);return range.getClientRects();}
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/cursor/cursorWordOperations.js
var cursorWordOperations = __webpack_require__(178);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/languages/languageConfigurationRegistry.js + 4 modules
var languageConfigurationRegistry = __webpack_require__(71567);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorWidget.js
function codeEditorWidget_slicedToArray(arr,i){return codeEditorWidget_arrayWithHoles(arr)||codeEditorWidget_iterableToArrayLimit(arr,i)||codeEditorWidget_unsupportedIterableToArray(arr,i)||codeEditorWidget_nonIterableRest();}function codeEditorWidget_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function codeEditorWidget_iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function codeEditorWidget_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function codeEditorWidget_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=codeEditorWidget_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function codeEditorWidget_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return codeEditorWidget_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return codeEditorWidget_arrayLikeToArray(o,minLen);}function codeEditorWidget_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function codeEditorWidget_extends(){codeEditorWidget_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return codeEditorWidget_extends.apply(this,arguments);}function codeEditorWidget_get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){codeEditorWidget_get=Reflect.get;}else{codeEditorWidget_get=function _get(target,property,receiver){var base=codeEditorWidget_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return codeEditorWidget_get(target,property,receiver||target);}function codeEditorWidget_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=codeEditorWidget_getPrototypeOf(object);if(object===null)break;}return object;}function codeEditorWidget_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)codeEditorWidget_setPrototypeOf(subClass,superClass);}function codeEditorWidget_setPrototypeOf(o,p){codeEditorWidget_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return codeEditorWidget_setPrototypeOf(o,p);}function codeEditorWidget_createSuper(Derived){var hasNativeReflectConstruct=codeEditorWidget_isNativeReflectConstruct();return function _createSuperInternal(){var Super=codeEditorWidget_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=codeEditorWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return codeEditorWidget_possibleConstructorReturn(this,result);};}function codeEditorWidget_possibleConstructorReturn(self,call){if(call&&(codeEditorWidget_typeof(call)==="object"||typeof call==="function")){return call;}return codeEditorWidget_assertThisInitialized(self);}function codeEditorWidget_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function codeEditorWidget_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function codeEditorWidget_getPrototypeOf(o){codeEditorWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return codeEditorWidget_getPrototypeOf(o);}function codeEditorWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function codeEditorWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function codeEditorWidget_createClass(Constructor,protoProps,staticProps){if(protoProps)codeEditorWidget_defineProperties(Constructor.prototype,protoProps);if(staticProps)codeEditorWidget_defineProperties(Constructor,staticProps);return Constructor;}function codeEditorWidget_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){codeEditorWidget_typeof=function _typeof(obj){return typeof obj;};}else{codeEditorWidget_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return codeEditorWidget_typeof(obj);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var codeEditorWidget_decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect==="undefined"?"undefined":codeEditorWidget_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;}return c>3&&r&&Object.defineProperty(target,key,r),r;};var codeEditorWidget_param=undefined&&undefined.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex);};};var EDITOR_ID=0;var ModelData=/*#__PURE__*/function(){function ModelData(model,viewModel,view,hasRealView,listenersToRemove){codeEditorWidget_classCallCheck(this,ModelData);this.model=model;this.viewModel=viewModel;this.view=view;this.hasRealView=hasRealView;this.listenersToRemove=listenersToRemove;}codeEditorWidget_createClass(ModelData,[{key:"dispose",value:function dispose(){(0,lifecycle/* dispose */.B9)(this.listenersToRemove);this.model.onBeforeDetached();if(this.hasRealView){this.view.dispose();}this.viewModel.dispose();}}]);return ModelData;}();var CodeEditorWidget=/*#__PURE__*/function(_Disposable){codeEditorWidget_inherits(CodeEditorWidget,_Disposable);var _super=codeEditorWidget_createSuper(CodeEditorWidget);function CodeEditorWidget(domElement,_options,codeEditorWidgetOptions,instantiationService,codeEditorService,commandService,contextKeyService,themeService,notificationService,accessibilityService,languageConfigurationService){var _this;codeEditorWidget_classCallCheck(this,CodeEditorWidget);_this=_super.call(this);_this.languageConfigurationService=languageConfigurationService;//#region Eventing
_this._onDidDispose=_this._register(new common_event/* Emitter */.Q5());_this.onDidDispose=_this._onDidDispose.event;_this._onDidChangeModelContent=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeModelContent=_this._onDidChangeModelContent.event;_this._onDidChangeModelLanguage=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeModelLanguage=_this._onDidChangeModelLanguage.event;_this._onDidChangeModelLanguageConfiguration=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeModelLanguageConfiguration=_this._onDidChangeModelLanguageConfiguration.event;_this._onDidChangeModelOptions=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeModelOptions=_this._onDidChangeModelOptions.event;_this._onDidChangeModelDecorations=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeModelDecorations=_this._onDidChangeModelDecorations.event;_this._onDidChangeConfiguration=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeConfiguration=_this._onDidChangeConfiguration.event;_this._onDidChangeModel=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeModel=_this._onDidChangeModel.event;_this._onDidChangeCursorPosition=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeCursorPosition=_this._onDidChangeCursorPosition.event;_this._onDidChangeCursorSelection=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeCursorSelection=_this._onDidChangeCursorSelection.event;_this._onDidAttemptReadOnlyEdit=_this._register(new common_event/* Emitter */.Q5());_this.onDidAttemptReadOnlyEdit=_this._onDidAttemptReadOnlyEdit.event;_this._onDidLayoutChange=_this._register(new common_event/* Emitter */.Q5());_this.onDidLayoutChange=_this._onDidLayoutChange.event;_this._editorTextFocus=_this._register(new BooleanEventEmitter());_this.onDidFocusEditorText=_this._editorTextFocus.onDidChangeToTrue;_this.onDidBlurEditorText=_this._editorTextFocus.onDidChangeToFalse;_this._editorWidgetFocus=_this._register(new BooleanEventEmitter());_this.onDidFocusEditorWidget=_this._editorWidgetFocus.onDidChangeToTrue;_this.onDidBlurEditorWidget=_this._editorWidgetFocus.onDidChangeToFalse;_this._onWillType=_this._register(new common_event/* Emitter */.Q5());_this.onWillType=_this._onWillType.event;_this._onDidType=_this._register(new common_event/* Emitter */.Q5());_this.onDidType=_this._onDidType.event;_this._onDidCompositionStart=_this._register(new common_event/* Emitter */.Q5());_this.onDidCompositionStart=_this._onDidCompositionStart.event;_this._onDidCompositionEnd=_this._register(new common_event/* Emitter */.Q5());_this.onDidCompositionEnd=_this._onDidCompositionEnd.event;_this._onDidPaste=_this._register(new common_event/* Emitter */.Q5());_this.onDidPaste=_this._onDidPaste.event;_this._onMouseUp=_this._register(new common_event/* Emitter */.Q5());_this.onMouseUp=_this._onMouseUp.event;_this._onMouseDown=_this._register(new common_event/* Emitter */.Q5());_this.onMouseDown=_this._onMouseDown.event;_this._onMouseDrag=_this._register(new common_event/* Emitter */.Q5());_this.onMouseDrag=_this._onMouseDrag.event;_this._onMouseDrop=_this._register(new common_event/* Emitter */.Q5());_this.onMouseDrop=_this._onMouseDrop.event;_this._onMouseDropCanceled=_this._register(new common_event/* Emitter */.Q5());_this.onMouseDropCanceled=_this._onMouseDropCanceled.event;_this._onContextMenu=_this._register(new common_event/* Emitter */.Q5());_this.onContextMenu=_this._onContextMenu.event;_this._onMouseMove=_this._register(new common_event/* Emitter */.Q5());_this.onMouseMove=_this._onMouseMove.event;_this._onMouseLeave=_this._register(new common_event/* Emitter */.Q5());_this.onMouseLeave=_this._onMouseLeave.event;_this._onMouseWheel=_this._register(new common_event/* Emitter */.Q5());_this.onMouseWheel=_this._onMouseWheel.event;_this._onKeyUp=_this._register(new common_event/* Emitter */.Q5());_this.onKeyUp=_this._onKeyUp.event;_this._onKeyDown=_this._register(new common_event/* Emitter */.Q5());_this.onKeyDown=_this._onKeyDown.event;_this._onDidContentSizeChange=_this._register(new common_event/* Emitter */.Q5());_this.onDidContentSizeChange=_this._onDidContentSizeChange.event;_this._onDidScrollChange=_this._register(new common_event/* Emitter */.Q5());_this.onDidScrollChange=_this._onDidScrollChange.event;_this._onDidChangeViewZones=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeViewZones=_this._onDidChangeViewZones.event;_this._onDidChangeHiddenAreas=_this._register(new common_event/* Emitter */.Q5());_this.onDidChangeHiddenAreas=_this._onDidChangeHiddenAreas.event;_this._bannerDomNode=null;var options=codeEditorWidget_extends({},_options);_this._domElement=domElement;_this._overflowWidgetsDomNode=options.overflowWidgetsDomNode;delete options.overflowWidgetsDomNode;_this._id=++EDITOR_ID;_this._decorationTypeKeysToIds={};_this._decorationTypeSubtypes={};_this._telemetryData=codeEditorWidgetOptions.telemetryData;_this._configuration=_this._register(_this._createConfiguration(codeEditorWidgetOptions.isSimpleWidget||false,options,accessibilityService));_this._register(_this._configuration.onDidChange(function(e){_this._onDidChangeConfiguration.fire(e);var options=_this._configuration.options;if(e.hasChanged(131/* layoutInfo */)){var layoutInfo=options.get(131/* layoutInfo */);_this._onDidLayoutChange.fire(layoutInfo);}}));_this._contextKeyService=_this._register(contextKeyService.createScoped(_this._domElement));_this._notificationService=notificationService;_this._codeEditorService=codeEditorService;_this._commandService=commandService;_this._themeService=themeService;_this._register(new EditorContextKeysManager(codeEditorWidget_assertThisInitialized(_this),_this._contextKeyService));_this._register(new EditorModeContext(codeEditorWidget_assertThisInitialized(_this),_this._contextKeyService));_this._instantiationService=instantiationService.createChild(new serviceCollection/* ServiceCollection */.y([contextkey/* IContextKeyService */.i6,_this._contextKeyService]));_this._modelData=null;_this._contributions={};_this._actions={};_this._focusTracker=new CodeEditorWidgetFocusTracker(domElement);_this._register(_this._focusTracker.onChange(function(){_this._editorWidgetFocus.setValue(_this._focusTracker.hasFocus());}));_this._contentWidgets={};_this._overlayWidgets={};var contributions;if(Array.isArray(codeEditorWidgetOptions.contributions)){contributions=codeEditorWidgetOptions.contributions;}else{contributions=editorExtensions/* EditorExtensionsRegistry.getEditorContributions */.Uc.getEditorContributions();}var _iterator=codeEditorWidget_createForOfIteratorHelper(contributions),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var desc=_step.value;if(_this._contributions[desc.id]){(0,errors/* onUnexpectedError */.dL)(new Error("Cannot have two contributions with the same id ".concat(desc.id)));continue;}try{var contribution=_this._instantiationService.createInstance(desc.ctor,codeEditorWidget_assertThisInitialized(_this));_this._contributions[desc.id]=contribution;}catch(err){(0,errors/* onUnexpectedError */.dL)(err);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}editorExtensions/* EditorExtensionsRegistry.getEditorActions */.Uc.getEditorActions().forEach(function(action){if(_this._actions[action.id]){(0,errors/* onUnexpectedError */.dL)(new Error("Cannot have two actions with the same id ".concat(action.id)));return;}var internalAction=new editorAction/* InternalEditorAction */.p(action.id,action.label,action.alias,(0,types/* withNullAsUndefined */.f6)(action.precondition),function(){return _this._instantiationService.invokeFunction(function(accessor){return Promise.resolve(action.runEditorCommand(accessor,codeEditorWidget_assertThisInitialized(_this),null));});},_this._contextKeyService);_this._actions[internalAction.id]=internalAction;});_this._codeEditorService.addCodeEditor(codeEditorWidget_assertThisInitialized(_this));return _this;}//#endregion
codeEditorWidget_createClass(CodeEditorWidget,[{key:"isSimpleWidget",get:function get(){return this._configuration.isSimpleWidget;}},{key:"_createConfiguration",value:function _createConfiguration(isSimpleWidget,options,accessibilityService){return new editorConfiguration/* EditorConfiguration */.z(isSimpleWidget,options,this._domElement,accessibilityService);}},{key:"getId",value:function getId(){return this.getEditorType()+':'+this._id;}},{key:"getEditorType",value:function getEditorType(){return editorCommon/* EditorType.ICodeEditor */.g.ICodeEditor;}},{key:"dispose",value:function dispose(){this._codeEditorService.removeCodeEditor(this);this._focusTracker.dispose();var keys=Object.keys(this._contributions);for(var i=0,len=keys.length;i<len;i++){var contributionId=keys[i];this._contributions[contributionId].dispose();}this._contributions={};this._actions={};this._contentWidgets={};this._overlayWidgets={};this._removeDecorationTypes();this._postDetachModelCleanup(this._detachModel());this._onDidDispose.fire();codeEditorWidget_get(codeEditorWidget_getPrototypeOf(CodeEditorWidget.prototype),"dispose",this).call(this);}},{key:"invokeWithinContext",value:function invokeWithinContext(fn){return this._instantiationService.invokeFunction(fn);}},{key:"updateOptions",value:function updateOptions(newOptions){this._configuration.updateOptions(newOptions||{});}},{key:"getOptions",value:function getOptions(){return this._configuration.options;}},{key:"getOption",value:function getOption(id){return this._configuration.options.get(id);}},{key:"getRawOptions",value:function getRawOptions(){return this._configuration.getRawOptions();}},{key:"getOverflowWidgetsDomNode",value:function getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode;}},{key:"getConfiguredWordAtPosition",value:function getConfiguredWordAtPosition(position){if(!this._modelData){return null;}return cursorWordOperations/* WordOperations.getWordAtPosition */.w.getWordAtPosition(this._modelData.model,this._configuration.options.get(117/* wordSeparators */),position);}},{key:"getValue",value:function getValue(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!this._modelData){return'';}var preserveBOM=options&&options.preserveBOM?true:false;var eolPreference=0/* TextDefined */;if(options&&options.lineEnding&&options.lineEnding==='\n'){eolPreference=1/* LF */;}else if(options&&options.lineEnding&&options.lineEnding==='\r\n'){eolPreference=2/* CRLF */;}return this._modelData.model.getValue(eolPreference,preserveBOM);}},{key:"setValue",value:function setValue(newValue){if(!this._modelData){return;}this._modelData.model.setValue(newValue);}},{key:"getModel",value:function getModel(){if(!this._modelData){return null;}return this._modelData.model;}},{key:"setModel",value:function setModel(){var _model=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var model=_model;if(this._modelData===null&&model===null){// Current model is the new model
return;}if(this._modelData&&this._modelData.model===model){// Current model is the new model
return;}var hasTextFocus=this.hasTextFocus();var detachedModel=this._detachModel();this._attachModel(model);if(hasTextFocus&&this.hasModel()){this.focus();}var e={oldModelUrl:detachedModel?detachedModel.uri:null,newModelUrl:model?model.uri:null};this._removeDecorationTypes();this._onDidChangeModel.fire(e);this._postDetachModelCleanup(detachedModel);}},{key:"_removeDecorationTypes",value:function _removeDecorationTypes(){this._decorationTypeKeysToIds={};if(this._decorationTypeSubtypes){for(var decorationType in this._decorationTypeSubtypes){var subTypes=this._decorationTypeSubtypes[decorationType];for(var subType in subTypes){this._removeDecorationType(decorationType+'-'+subType);}}this._decorationTypeSubtypes={};}}},{key:"getVisibleRanges",value:function getVisibleRanges(){if(!this._modelData){return[];}return this._modelData.viewModel.getVisibleRanges();}},{key:"getVisibleRangesPlusViewportAboveBelow",value:function getVisibleRangesPlusViewportAboveBelow(){if(!this._modelData){return[];}return this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow();}},{key:"getWhitespaces",value:function getWhitespaces(){if(!this._modelData){return[];}return this._modelData.viewModel.viewLayout.getWhitespaces();}},{key:"getTopForLineNumber",value:function getTopForLineNumber(lineNumber){if(!this._modelData){return-1;}return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData,lineNumber,1);}},{key:"getTopForPosition",value:function getTopForPosition(lineNumber,column){if(!this._modelData){return-1;}return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData,lineNumber,column);}},{key:"setHiddenAreas",value:function setHiddenAreas(ranges){if(this._modelData){this._modelData.viewModel.setHiddenAreas(ranges.map(function(r){return core_range/* Range.lift */.e.lift(r);}));}}},{key:"getVisibleColumnFromPosition",value:function getVisibleColumnFromPosition(rawPosition){if(!this._modelData){return rawPosition.column;}var position=this._modelData.model.validatePosition(rawPosition);var tabSize=this._modelData.model.getOptions().tabSize;return cursorColumns/* CursorColumns.visibleColumnFromColumn */.i.visibleColumnFromColumn(this._modelData.model.getLineContent(position.lineNumber),position.column,tabSize)+1;}},{key:"getPosition",value:function getPosition(){if(!this._modelData){return null;}return this._modelData.viewModel.getPosition();}},{key:"setPosition",value:function setPosition(position){if(!this._modelData){return;}if(!core_position/* Position.isIPosition */.L.isIPosition(position)){throw new Error('Invalid arguments');}this._modelData.viewModel.setSelections('api',[{selectionStartLineNumber:position.lineNumber,selectionStartColumn:position.column,positionLineNumber:position.lineNumber,positionColumn:position.column}]);}},{key:"_sendRevealRange",value:function _sendRevealRange(modelRange,verticalType,revealHorizontal,scrollType){if(!this._modelData){return;}if(!core_range/* Range.isIRange */.e.isIRange(modelRange)){throw new Error('Invalid arguments');}var validatedModelRange=this._modelData.model.validateRange(modelRange);var viewRange=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(validatedModelRange);this._modelData.viewModel.revealRange('api',revealHorizontal,viewRange,verticalType,scrollType);}},{key:"revealLine",value:function revealLine(lineNumber)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._revealLine(lineNumber,0/* Simple */,scrollType);}},{key:"revealLineInCenter",value:function revealLineInCenter(lineNumber)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._revealLine(lineNumber,1/* Center */,scrollType);}},{key:"revealLineInCenterIfOutsideViewport",value:function revealLineInCenterIfOutsideViewport(lineNumber)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._revealLine(lineNumber,2/* CenterIfOutsideViewport */,scrollType);}},{key:"revealLineNearTop",value:function revealLineNearTop(lineNumber)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._revealLine(lineNumber,5/* NearTop */,scrollType);}},{key:"_revealLine",value:function _revealLine(lineNumber,revealType,scrollType){if(typeof lineNumber!=='number'){throw new Error('Invalid arguments');}this._sendRevealRange(new core_range/* Range */.e(lineNumber,1,lineNumber,1),revealType,false,scrollType);}},{key:"revealPosition",value:function revealPosition(position)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._revealPosition(position,0/* Simple */,true,scrollType);}},{key:"revealPositionInCenter",value:function revealPositionInCenter(position)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._revealPosition(position,1/* Center */,true,scrollType);}},{key:"revealPositionInCenterIfOutsideViewport",value:function revealPositionInCenterIfOutsideViewport(position)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._revealPosition(position,2/* CenterIfOutsideViewport */,true,scrollType);}},{key:"revealPositionNearTop",value:function revealPositionNearTop(position)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._revealPosition(position,5/* NearTop */,true,scrollType);}},{key:"_revealPosition",value:function _revealPosition(position,verticalType,revealHorizontal,scrollType){if(!core_position/* Position.isIPosition */.L.isIPosition(position)){throw new Error('Invalid arguments');}this._sendRevealRange(new core_range/* Range */.e(position.lineNumber,position.column,position.lineNumber,position.column),verticalType,revealHorizontal,scrollType);}},{key:"getSelection",value:function getSelection(){if(!this._modelData){return null;}return this._modelData.viewModel.getSelection();}},{key:"getSelections",value:function getSelections(){if(!this._modelData){return null;}return this._modelData.viewModel.getSelections();}},{key:"setSelection",value:function setSelection(something){var isSelection=core_selection/* Selection.isISelection */.Y.isISelection(something);var isRange=core_range/* Range.isIRange */.e.isIRange(something);if(!isSelection&&!isRange){throw new Error('Invalid arguments');}if(isSelection){this._setSelectionImpl(something);}else if(isRange){// act as if it was an IRange
var selection={selectionStartLineNumber:something.startLineNumber,selectionStartColumn:something.startColumn,positionLineNumber:something.endLineNumber,positionColumn:something.endColumn};this._setSelectionImpl(selection);}}},{key:"_setSelectionImpl",value:function _setSelectionImpl(sel){if(!this._modelData){return;}var selection=new core_selection/* Selection */.Y(sel.selectionStartLineNumber,sel.selectionStartColumn,sel.positionLineNumber,sel.positionColumn);this._modelData.viewModel.setSelections('api',[selection]);}},{key:"revealLines",value:function revealLines(startLineNumber,endLineNumber)/* Smooth */{var scrollType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this._revealLines(startLineNumber,endLineNumber,0/* Simple */,scrollType);}},{key:"revealLinesInCenter",value:function revealLinesInCenter(startLineNumber,endLineNumber)/* Smooth */{var scrollType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this._revealLines(startLineNumber,endLineNumber,1/* Center */,scrollType);}},{key:"revealLinesInCenterIfOutsideViewport",value:function revealLinesInCenterIfOutsideViewport(startLineNumber,endLineNumber)/* Smooth */{var scrollType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this._revealLines(startLineNumber,endLineNumber,2/* CenterIfOutsideViewport */,scrollType);}},{key:"revealLinesNearTop",value:function revealLinesNearTop(startLineNumber,endLineNumber)/* Smooth */{var scrollType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this._revealLines(startLineNumber,endLineNumber,5/* NearTop */,scrollType);}},{key:"_revealLines",value:function _revealLines(startLineNumber,endLineNumber,verticalType,scrollType){if(typeof startLineNumber!=='number'||typeof endLineNumber!=='number'){throw new Error('Invalid arguments');}this._sendRevealRange(new core_range/* Range */.e(startLineNumber,1,endLineNumber,1),verticalType,false,scrollType);}},{key:"revealRange",value:function revealRange(range){var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var revealVerticalInCenter=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var revealHorizontal=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;this._revealRange(range,revealVerticalInCenter?1/* Center */:0/* Simple */,revealHorizontal,scrollType);}},{key:"revealRangeInCenter",value:function revealRangeInCenter(range)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._revealRange(range,1/* Center */,true,scrollType);}},{key:"revealRangeInCenterIfOutsideViewport",value:function revealRangeInCenterIfOutsideViewport(range)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._revealRange(range,2/* CenterIfOutsideViewport */,true,scrollType);}},{key:"revealRangeNearTop",value:function revealRangeNearTop(range)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._revealRange(range,5/* NearTop */,true,scrollType);}},{key:"revealRangeNearTopIfOutsideViewport",value:function revealRangeNearTopIfOutsideViewport(range)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._revealRange(range,6/* NearTopIfOutsideViewport */,true,scrollType);}},{key:"revealRangeAtTop",value:function revealRangeAtTop(range)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._revealRange(range,3/* Top */,true,scrollType);}},{key:"_revealRange",value:function _revealRange(range,verticalType,revealHorizontal,scrollType){if(!core_range/* Range.isIRange */.e.isIRange(range)){throw new Error('Invalid arguments');}this._sendRevealRange(core_range/* Range.lift */.e.lift(range),verticalType,revealHorizontal,scrollType);}},{key:"setSelections",value:function setSelections(ranges)/* NotSet */{var source=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'api';var reason=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!this._modelData){return;}if(!ranges||ranges.length===0){throw new Error('Invalid arguments');}for(var i=0,len=ranges.length;i<len;i++){if(!core_selection/* Selection.isISelection */.Y.isISelection(ranges[i])){throw new Error('Invalid arguments');}}this._modelData.viewModel.setSelections(source,ranges,reason);}},{key:"getContentWidth",value:function getContentWidth(){if(!this._modelData){return-1;}return this._modelData.viewModel.viewLayout.getContentWidth();}},{key:"getScrollWidth",value:function getScrollWidth(){if(!this._modelData){return-1;}return this._modelData.viewModel.viewLayout.getScrollWidth();}},{key:"getScrollLeft",value:function getScrollLeft(){if(!this._modelData){return-1;}return this._modelData.viewModel.viewLayout.getCurrentScrollLeft();}},{key:"getContentHeight",value:function getContentHeight(){if(!this._modelData){return-1;}return this._modelData.viewModel.viewLayout.getContentHeight();}},{key:"getScrollHeight",value:function getScrollHeight(){if(!this._modelData){return-1;}return this._modelData.viewModel.viewLayout.getScrollHeight();}},{key:"getScrollTop",value:function getScrollTop(){if(!this._modelData){return-1;}return this._modelData.viewModel.viewLayout.getCurrentScrollTop();}},{key:"setScrollLeft",value:function setScrollLeft(newScrollLeft)/* Immediate */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;if(!this._modelData){return;}if(typeof newScrollLeft!=='number'){throw new Error('Invalid arguments');}this._modelData.viewModel.setScrollPosition({scrollLeft:newScrollLeft},scrollType);}},{key:"setScrollTop",value:function setScrollTop(newScrollTop)/* Immediate */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;if(!this._modelData){return;}if(typeof newScrollTop!=='number'){throw new Error('Invalid arguments');}this._modelData.viewModel.setScrollPosition({scrollTop:newScrollTop},scrollType);}},{key:"setScrollPosition",value:function setScrollPosition(position)/* Immediate */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;if(!this._modelData){return;}this._modelData.viewModel.setScrollPosition(position,scrollType);}},{key:"saveViewState",value:function saveViewState(){if(!this._modelData){return null;}var contributionsState={};var keys=Object.keys(this._contributions);for(var _i=0,_keys=keys;_i<_keys.length;_i++){var id=_keys[_i];var contribution=this._contributions[id];if(typeof contribution.saveViewState==='function'){contributionsState[id]=contribution.saveViewState();}}var cursorState=this._modelData.viewModel.saveCursorState();var viewState=this._modelData.viewModel.saveState();return{cursorState:cursorState,viewState:viewState,contributionsState:contributionsState};}},{key:"restoreViewState",value:function restoreViewState(s){if(!this._modelData||!this._modelData.hasRealView){return;}var codeEditorState=s;if(codeEditorState&&codeEditorState.cursorState&&codeEditorState.viewState){var cursorState=codeEditorState.cursorState;if(Array.isArray(cursorState)){this._modelData.viewModel.restoreCursorState(cursorState);}else{// Backwards compatibility
this._modelData.viewModel.restoreCursorState([cursorState]);}var contributionsState=codeEditorState.contributionsState||{};var keys=Object.keys(this._contributions);for(var i=0,len=keys.length;i<len;i++){var id=keys[i];var contribution=this._contributions[id];if(typeof contribution.restoreViewState==='function'){contribution.restoreViewState(contributionsState[id]);}}var reducedState=this._modelData.viewModel.reduceRestoreState(codeEditorState.viewState);this._modelData.view.restoreState(reducedState);}}},{key:"getContribution",value:function getContribution(id){return this._contributions[id]||null;}},{key:"getActions",value:function getActions(){var result=[];var keys=Object.keys(this._actions);for(var i=0,len=keys.length;i<len;i++){var id=keys[i];result.push(this._actions[id]);}return result;}},{key:"getSupportedActions",value:function getSupportedActions(){var result=this.getActions();result=result.filter(function(action){return action.isSupported();});return result;}},{key:"getAction",value:function getAction(id){return this._actions[id]||null;}},{key:"trigger",value:function trigger(source,handlerId,payload){payload=payload||{};switch(handlerId){case"compositionStart"/* CompositionStart */:this._startComposition();return;case"compositionEnd"/* CompositionEnd */:this._endComposition(source);return;case"type"/* Type */:{var args=payload;this._type(source,args.text||'');return;}case"replacePreviousChar"/* ReplacePreviousChar */:{var _args=payload;this._compositionType(source,_args.text||'',_args.replaceCharCnt||0,0,0);return;}case"compositionType"/* CompositionType */:{var _args2=payload;this._compositionType(source,_args2.text||'',_args2.replacePrevCharCnt||0,_args2.replaceNextCharCnt||0,_args2.positionDelta||0);return;}case"paste"/* Paste */:{var _args3=payload;this._paste(source,_args3.text||'',_args3.pasteOnNewLine||false,_args3.multicursorText||null,_args3.mode||null);return;}case"cut"/* Cut */:this._cut(source);return;}var action=this.getAction(handlerId);if(action){Promise.resolve(action.run()).then(undefined,errors/* onUnexpectedError */.dL);return;}if(!this._modelData){return;}if(this._triggerEditorCommand(source,handlerId,payload)){return;}this._triggerCommand(handlerId,payload);}},{key:"_triggerCommand",value:function _triggerCommand(handlerId,payload){this._commandService.executeCommand(handlerId,payload);}},{key:"_startComposition",value:function _startComposition(){if(!this._modelData){return;}this._modelData.viewModel.startComposition();this._onDidCompositionStart.fire();}},{key:"_endComposition",value:function _endComposition(source){if(!this._modelData){return;}this._modelData.viewModel.endComposition(source);this._onDidCompositionEnd.fire();}},{key:"_type",value:function _type(source,text){if(!this._modelData||text.length===0){return;}if(source==='keyboard'){this._onWillType.fire(text);}this._modelData.viewModel.type(text,source);if(source==='keyboard'){this._onDidType.fire(text);}}},{key:"_compositionType",value:function _compositionType(source,text,replacePrevCharCnt,replaceNextCharCnt,positionDelta){if(!this._modelData){return;}this._modelData.viewModel.compositionType(text,replacePrevCharCnt,replaceNextCharCnt,positionDelta,source);}},{key:"_paste",value:function _paste(source,text,pasteOnNewLine,multicursorText,mode){if(!this._modelData||text.length===0){return;}var startPosition=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(text,pasteOnNewLine,multicursorText,source);var endPosition=this._modelData.viewModel.getSelection().getStartPosition();if(source==='keyboard'){this._onDidPaste.fire({range:new core_range/* Range */.e(startPosition.lineNumber,startPosition.column,endPosition.lineNumber,endPosition.column),languageId:mode});}}},{key:"_cut",value:function _cut(source){if(!this._modelData){return;}this._modelData.viewModel.cut(source);}},{key:"_triggerEditorCommand",value:function _triggerEditorCommand(source,handlerId,payload){var _this2=this;var command=editorExtensions/* EditorExtensionsRegistry.getEditorCommand */.Uc.getEditorCommand(handlerId);if(command){payload=payload||{};payload.source=source;this._instantiationService.invokeFunction(function(accessor){Promise.resolve(command.runEditorCommand(accessor,_this2,payload)).then(undefined,errors/* onUnexpectedError */.dL);});return true;}return false;}},{key:"_getViewModel",value:function _getViewModel(){if(!this._modelData){return null;}return this._modelData.viewModel;}},{key:"pushUndoStop",value:function pushUndoStop(){if(!this._modelData){return false;}if(this._configuration.options.get(81/* readOnly */)){// read only editor => sorry!
return false;}this._modelData.model.pushStackElement();return true;}},{key:"popUndoStop",value:function popUndoStop(){if(!this._modelData){return false;}if(this._configuration.options.get(81/* readOnly */)){// read only editor => sorry!
return false;}this._modelData.model.popStackElement();return true;}},{key:"executeEdits",value:function executeEdits(source,edits,endCursorState){if(!this._modelData){return false;}if(this._configuration.options.get(81/* readOnly */)){// read only editor => sorry!
return false;}var cursorStateComputer;if(!endCursorState){cursorStateComputer=function cursorStateComputer(){return null;};}else if(Array.isArray(endCursorState)){cursorStateComputer=function cursorStateComputer(){return endCursorState;};}else{cursorStateComputer=endCursorState;}this._modelData.viewModel.executeEdits(source,edits,cursorStateComputer);return true;}},{key:"executeCommand",value:function executeCommand(source,command){if(!this._modelData){return;}this._modelData.viewModel.executeCommand(command,source);}},{key:"executeCommands",value:function executeCommands(source,commands){if(!this._modelData){return;}this._modelData.viewModel.executeCommands(commands,source);}},{key:"changeDecorations",value:function changeDecorations(callback){if(!this._modelData){// callback will not be called
return null;}return this._modelData.model.changeDecorations(callback,this._id);}},{key:"getLineDecorations",value:function getLineDecorations(lineNumber){if(!this._modelData){return null;}return this._modelData.model.getLineDecorations(lineNumber,this._id,(0,editorOptions/* filterValidationDecorations */.$J)(this._configuration.options));}},{key:"getDecorationsInRange",value:function getDecorationsInRange(range){if(!this._modelData){return null;}return this._modelData.model.getDecorationsInRange(range,this._id,(0,editorOptions/* filterValidationDecorations */.$J)(this._configuration.options));}},{key:"deltaDecorations",value:function deltaDecorations(oldDecorations,newDecorations){if(!this._modelData){return[];}if(oldDecorations.length===0&&newDecorations.length===0){return oldDecorations;}return this._modelData.model.deltaDecorations(oldDecorations,newDecorations,this._id);}},{key:"removeDecorations",value:function removeDecorations(decorationTypeKey){// remove decorations for type and sub type
var oldDecorationsIds=this._decorationTypeKeysToIds[decorationTypeKey];if(oldDecorationsIds){this.deltaDecorations(oldDecorationsIds,[]);}if(this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey)){delete this._decorationTypeKeysToIds[decorationTypeKey];}if(this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey)){delete this._decorationTypeSubtypes[decorationTypeKey];}}},{key:"getLayoutInfo",value:function getLayoutInfo(){var options=this._configuration.options;var layoutInfo=options.get(131/* layoutInfo */);return layoutInfo;}},{key:"createOverviewRuler",value:function createOverviewRuler(cssClassName){if(!this._modelData||!this._modelData.hasRealView){return null;}return this._modelData.view.createOverviewRuler(cssClassName);}},{key:"getContainerDomNode",value:function getContainerDomNode(){return this._domElement;}},{key:"getDomNode",value:function getDomNode(){if(!this._modelData||!this._modelData.hasRealView){return null;}return this._modelData.view.domNode.domNode;}},{key:"delegateVerticalScrollbarMouseDown",value:function delegateVerticalScrollbarMouseDown(browserEvent){if(!this._modelData||!this._modelData.hasRealView){return;}this._modelData.view.delegateVerticalScrollbarMouseDown(browserEvent);}},{key:"layout",value:function layout(dimension){this._configuration.observeContainer(dimension);this.render();}},{key:"focus",value:function focus(){if(!this._modelData||!this._modelData.hasRealView){return;}this._modelData.view.focus();}},{key:"hasTextFocus",value:function hasTextFocus(){if(!this._modelData||!this._modelData.hasRealView){return false;}return this._modelData.view.isFocused();}},{key:"hasWidgetFocus",value:function hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus();}},{key:"addContentWidget",value:function addContentWidget(widget){var widgetData={widget:widget,position:widget.getPosition()};if(this._contentWidgets.hasOwnProperty(widget.getId())){console.warn('Overwriting a content widget with the same id.');}this._contentWidgets[widget.getId()]=widgetData;if(this._modelData&&this._modelData.hasRealView){this._modelData.view.addContentWidget(widgetData);}}},{key:"layoutContentWidget",value:function layoutContentWidget(widget){var widgetId=widget.getId();if(this._contentWidgets.hasOwnProperty(widgetId)){var widgetData=this._contentWidgets[widgetId];widgetData.position=widget.getPosition();if(this._modelData&&this._modelData.hasRealView){this._modelData.view.layoutContentWidget(widgetData);}}}},{key:"removeContentWidget",value:function removeContentWidget(widget){var widgetId=widget.getId();if(this._contentWidgets.hasOwnProperty(widgetId)){var widgetData=this._contentWidgets[widgetId];delete this._contentWidgets[widgetId];if(this._modelData&&this._modelData.hasRealView){this._modelData.view.removeContentWidget(widgetData);}}}},{key:"addOverlayWidget",value:function addOverlayWidget(widget){var widgetData={widget:widget,position:widget.getPosition()};if(this._overlayWidgets.hasOwnProperty(widget.getId())){console.warn('Overwriting an overlay widget with the same id.');}this._overlayWidgets[widget.getId()]=widgetData;if(this._modelData&&this._modelData.hasRealView){this._modelData.view.addOverlayWidget(widgetData);}}},{key:"layoutOverlayWidget",value:function layoutOverlayWidget(widget){var widgetId=widget.getId();if(this._overlayWidgets.hasOwnProperty(widgetId)){var widgetData=this._overlayWidgets[widgetId];widgetData.position=widget.getPosition();if(this._modelData&&this._modelData.hasRealView){this._modelData.view.layoutOverlayWidget(widgetData);}}}},{key:"removeOverlayWidget",value:function removeOverlayWidget(widget){var widgetId=widget.getId();if(this._overlayWidgets.hasOwnProperty(widgetId)){var widgetData=this._overlayWidgets[widgetId];delete this._overlayWidgets[widgetId];if(this._modelData&&this._modelData.hasRealView){this._modelData.view.removeOverlayWidget(widgetData);}}}},{key:"changeViewZones",value:function changeViewZones(callback){if(!this._modelData||!this._modelData.hasRealView){return;}this._modelData.view.change(callback);}},{key:"getTargetAtClientPoint",value:function getTargetAtClientPoint(clientX,clientY){if(!this._modelData||!this._modelData.hasRealView){return null;}return this._modelData.view.getTargetAtClientPoint(clientX,clientY);}},{key:"getScrolledVisiblePosition",value:function getScrolledVisiblePosition(rawPosition){if(!this._modelData||!this._modelData.hasRealView){return null;}var position=this._modelData.model.validatePosition(rawPosition);var options=this._configuration.options;var layoutInfo=options.get(131/* layoutInfo */);var top=CodeEditorWidget._getVerticalOffsetForPosition(this._modelData,position.lineNumber,position.column)-this.getScrollTop();var left=this._modelData.view.getOffsetForColumn(position.lineNumber,position.column)+layoutInfo.glyphMarginWidth+layoutInfo.lineNumbersWidth+layoutInfo.decorationsWidth-this.getScrollLeft();return{top:top,left:left,height:options.get(59/* lineHeight */)};}},{key:"getOffsetForColumn",value:function getOffsetForColumn(lineNumber,column){if(!this._modelData||!this._modelData.hasRealView){return-1;}return this._modelData.view.getOffsetForColumn(lineNumber,column);}},{key:"render",value:function render(){var forceRedraw=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!this._modelData||!this._modelData.hasRealView){return;}this._modelData.view.render(true,forceRedraw);}},{key:"setAriaOptions",value:function setAriaOptions(options){if(!this._modelData||!this._modelData.hasRealView){return;}this._modelData.view.setAriaOptions(options);}},{key:"applyFontInfo",value:function applyFontInfo(target){(0,domFontInfo/* applyFontInfo */.N)(target,this._configuration.options.get(44/* fontInfo */));}},{key:"setBanner",value:function setBanner(domNode,domNodeHeight){if(this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)){this._domElement.removeChild(this._bannerDomNode);}this._bannerDomNode=domNode;this._configuration.setReservedHeight(domNode?domNodeHeight:0);if(this._bannerDomNode){this._domElement.prepend(this._bannerDomNode);}}},{key:"_attachModel",value:function _attachModel(model){var _this3=this;if(!model){this._modelData=null;return;}var listenersToRemove=[];this._domElement.setAttribute('data-mode-id',model.getLanguageId());this._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());this._configuration.setModelLineCount(model.getLineCount());model.onBeforeAttached();var viewModel=new viewModelImpl/* ViewModel */.j(this._id,this._configuration,model,DOMLineBreaksComputerFactory.create(),monospaceLineBreaksComputer/* MonospaceLineBreaksComputerFactory.create */.p.create(this._configuration.options),function(callback){return dom.scheduleAtNextAnimationFrame(callback);},this.languageConfigurationService);listenersToRemove.push(model.onDidChangeDecorations(function(e){return _this3._onDidChangeModelDecorations.fire(e);}));listenersToRemove.push(model.onDidChangeLanguage(function(e){_this3._domElement.setAttribute('data-mode-id',model.getLanguageId());_this3._onDidChangeModelLanguage.fire(e);}));listenersToRemove.push(model.onDidChangeLanguageConfiguration(function(e){return _this3._onDidChangeModelLanguageConfiguration.fire(e);}));listenersToRemove.push(model.onDidChangeContent(function(e){return _this3._onDidChangeModelContent.fire(e);}));listenersToRemove.push(model.onDidChangeOptions(function(e){return _this3._onDidChangeModelOptions.fire(e);}));// Someone might destroy the model from under the editor, so prevent any exceptions by setting a null model
listenersToRemove.push(model.onWillDispose(function(){return _this3.setModel(null);}));listenersToRemove.push(viewModel.onEvent(function(e){switch(e.kind){case 0/* ContentSizeChanged */:_this3._onDidContentSizeChange.fire(e);break;case 1/* FocusChanged */:_this3._editorTextFocus.setValue(e.hasFocus);break;case 2/* ScrollChanged */:_this3._onDidScrollChange.fire(e);break;case 3/* ViewZonesChanged */:_this3._onDidChangeViewZones.fire();break;case 4/* HiddenAreasChanged */:_this3._onDidChangeHiddenAreas.fire();break;case 5/* ReadOnlyEditAttempt */:_this3._onDidAttemptReadOnlyEdit.fire();break;case 6/* CursorStateChanged */:{if(e.reachedMaxCursorCount){_this3._notificationService.warn(nls/* localize */.N('cursors.maximum',"The number of cursors has been limited to {0}.",cursor/* CursorsController.MAX_CURSOR_COUNT */.U.MAX_CURSOR_COUNT));}var positions=[];for(var i=0,len=e.selections.length;i<len;i++){positions[i]=e.selections[i].getPosition();}var e1={position:positions[0],secondaryPositions:positions.slice(1),reason:e.reason,source:e.source};_this3._onDidChangeCursorPosition.fire(e1);var e2={selection:e.selections[0],secondarySelections:e.selections.slice(1),modelVersionId:e.modelVersionId,oldSelections:e.oldSelections,oldModelVersionId:e.oldModelVersionId,source:e.source,reason:e.reason};_this3._onDidChangeCursorSelection.fire(e2);break;}}}));var _this$_createView=this._createView(viewModel),_this$_createView2=codeEditorWidget_slicedToArray(_this$_createView,2),view=_this$_createView2[0],hasRealView=_this$_createView2[1];if(hasRealView){this._domElement.appendChild(view.domNode.domNode);var keys=Object.keys(this._contentWidgets);for(var i=0,len=keys.length;i<len;i++){var widgetId=keys[i];view.addContentWidget(this._contentWidgets[widgetId]);}keys=Object.keys(this._overlayWidgets);for(var _i2=0,_len=keys.length;_i2<_len;_i2++){var _widgetId=keys[_i2];view.addOverlayWidget(this._overlayWidgets[_widgetId]);}view.render(false,true);view.domNode.domNode.setAttribute('data-uri',model.uri.toString());}this._modelData=new ModelData(model,viewModel,view,hasRealView,listenersToRemove);}},{key:"_createView",value:function _createView(viewModel){var _this4=this;var commandDelegate;if(this.isSimpleWidget){commandDelegate={paste:function paste(text,pasteOnNewLine,multicursorText,mode){_this4._paste('keyboard',text,pasteOnNewLine,multicursorText,mode);},type:function type(text){_this4._type('keyboard',text);},compositionType:function compositionType(text,replacePrevCharCnt,replaceNextCharCnt,positionDelta){_this4._compositionType('keyboard',text,replacePrevCharCnt,replaceNextCharCnt,positionDelta);},startComposition:function startComposition(){_this4._startComposition();},endComposition:function endComposition(){_this4._endComposition('keyboard');},cut:function cut(){_this4._cut('keyboard');}};}else{commandDelegate={paste:function paste(text,pasteOnNewLine,multicursorText,mode){var payload={text:text,pasteOnNewLine:pasteOnNewLine,multicursorText:multicursorText,mode:mode};_this4._commandService.executeCommand("paste"/* Paste */,payload);},type:function type(text){var payload={text:text};_this4._commandService.executeCommand("type"/* Type */,payload);},compositionType:function compositionType(text,replacePrevCharCnt,replaceNextCharCnt,positionDelta){// Try if possible to go through the existing `replacePreviousChar` command
if(replaceNextCharCnt||positionDelta){// must be handled through the new command
var payload={text:text,replacePrevCharCnt:replacePrevCharCnt,replaceNextCharCnt:replaceNextCharCnt,positionDelta:positionDelta};_this4._commandService.executeCommand("compositionType"/* CompositionType */,payload);}else{var _payload={text:text,replaceCharCnt:replacePrevCharCnt};_this4._commandService.executeCommand("replacePreviousChar"/* ReplacePreviousChar */,_payload);}},startComposition:function startComposition(){_this4._commandService.executeCommand("compositionStart"/* CompositionStart */,{});},endComposition:function endComposition(){_this4._commandService.executeCommand("compositionEnd"/* CompositionEnd */,{});},cut:function cut(){_this4._commandService.executeCommand("cut"/* Cut */,{});}};}var viewUserInputEvents=new ViewUserInputEvents(viewModel.coordinatesConverter);viewUserInputEvents.onKeyDown=function(e){return _this4._onKeyDown.fire(e);};viewUserInputEvents.onKeyUp=function(e){return _this4._onKeyUp.fire(e);};viewUserInputEvents.onContextMenu=function(e){return _this4._onContextMenu.fire(e);};viewUserInputEvents.onMouseMove=function(e){return _this4._onMouseMove.fire(e);};viewUserInputEvents.onMouseLeave=function(e){return _this4._onMouseLeave.fire(e);};viewUserInputEvents.onMouseDown=function(e){return _this4._onMouseDown.fire(e);};viewUserInputEvents.onMouseUp=function(e){return _this4._onMouseUp.fire(e);};viewUserInputEvents.onMouseDrag=function(e){return _this4._onMouseDrag.fire(e);};viewUserInputEvents.onMouseDrop=function(e){return _this4._onMouseDrop.fire(e);};viewUserInputEvents.onMouseDropCanceled=function(e){return _this4._onMouseDropCanceled.fire(e);};viewUserInputEvents.onMouseWheel=function(e){return _this4._onMouseWheel.fire(e);};var view=new View(commandDelegate,this._configuration,this._themeService,viewModel,viewUserInputEvents,this._overflowWidgetsDomNode);return[view,true];}},{key:"_postDetachModelCleanup",value:function _postDetachModelCleanup(detachedModel){if(detachedModel){detachedModel.removeAllDecorationsWithOwnerId(this._id);}}},{key:"_detachModel",value:function _detachModel(){if(!this._modelData){return null;}var model=this._modelData.model;var removeDomNode=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;this._modelData.dispose();this._modelData=null;this._domElement.removeAttribute('data-mode-id');if(removeDomNode&&this._domElement.contains(removeDomNode)){this._domElement.removeChild(removeDomNode);}if(this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)){this._domElement.removeChild(this._bannerDomNode);}return model;}},{key:"_removeDecorationType",value:function _removeDecorationType(key){this._codeEditorService.removeDecorationType(key);}},{key:"hasModel",value:function hasModel(){return this._modelData!==null;}}],[{key:"_getVerticalOffsetForPosition",value:function _getVerticalOffsetForPosition(modelData,modelLineNumber,modelColumn){var modelPosition=modelData.model.validatePosition({lineNumber:modelLineNumber,column:modelColumn});var viewPosition=modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);return modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber);}}]);return CodeEditorWidget;}(lifecycle/* Disposable */.JT);CodeEditorWidget=codeEditorWidget_decorate([codeEditorWidget_param(3,instantiation/* IInstantiationService */.TG),codeEditorWidget_param(4,codeEditorService/* ICodeEditorService */.$),codeEditorWidget_param(5,commands/* ICommandService */.Hy),codeEditorWidget_param(6,contextkey/* IContextKeyService */.i6),codeEditorWidget_param(7,themeService/* IThemeService */.XE),codeEditorWidget_param(8,notification/* INotificationService */.lT),codeEditorWidget_param(9,accessibility/* IAccessibilityService */.F),codeEditorWidget_param(10,languageConfigurationRegistry/* ILanguageConfigurationService */.c_)],CodeEditorWidget);var BooleanEventEmitter=/*#__PURE__*/function(_Disposable2){codeEditorWidget_inherits(BooleanEventEmitter,_Disposable2);var _super2=codeEditorWidget_createSuper(BooleanEventEmitter);function BooleanEventEmitter(){var _this5;codeEditorWidget_classCallCheck(this,BooleanEventEmitter);_this5=_super2.call(this);_this5._onDidChangeToTrue=_this5._register(new common_event/* Emitter */.Q5());_this5.onDidChangeToTrue=_this5._onDidChangeToTrue.event;_this5._onDidChangeToFalse=_this5._register(new common_event/* Emitter */.Q5());_this5.onDidChangeToFalse=_this5._onDidChangeToFalse.event;_this5._value=0/* NotSet */;return _this5;}codeEditorWidget_createClass(BooleanEventEmitter,[{key:"setValue",value:function setValue(_value){var value=_value?2/* True */:1/* False */;if(this._value===value){return;}this._value=value;if(this._value===2/* True */){this._onDidChangeToTrue.fire();}else if(this._value===1/* False */){this._onDidChangeToFalse.fire();}}}]);return BooleanEventEmitter;}(lifecycle/* Disposable */.JT);var EditorContextKeysManager=/*#__PURE__*/function(_Disposable3){codeEditorWidget_inherits(EditorContextKeysManager,_Disposable3);var _super3=codeEditorWidget_createSuper(EditorContextKeysManager);function EditorContextKeysManager(editor,contextKeyService){var _this6;codeEditorWidget_classCallCheck(this,EditorContextKeysManager);_this6=_super3.call(this);_this6._editor=editor;contextKeyService.createKey('editorId',editor.getId());_this6._editorSimpleInput=editorContextKeys/* EditorContextKeys.editorSimpleInput.bindTo */.u.editorSimpleInput.bindTo(contextKeyService);_this6._editorFocus=editorContextKeys/* EditorContextKeys.focus.bindTo */.u.focus.bindTo(contextKeyService);_this6._textInputFocus=editorContextKeys/* EditorContextKeys.textInputFocus.bindTo */.u.textInputFocus.bindTo(contextKeyService);_this6._editorTextFocus=editorContextKeys/* EditorContextKeys.editorTextFocus.bindTo */.u.editorTextFocus.bindTo(contextKeyService);_this6._editorTabMovesFocus=editorContextKeys/* EditorContextKeys.tabMovesFocus.bindTo */.u.tabMovesFocus.bindTo(contextKeyService);_this6._editorReadonly=editorContextKeys/* EditorContextKeys.readOnly.bindTo */.u.readOnly.bindTo(contextKeyService);_this6._inDiffEditor=editorContextKeys/* EditorContextKeys.inDiffEditor.bindTo */.u.inDiffEditor.bindTo(contextKeyService);_this6._editorColumnSelection=editorContextKeys/* EditorContextKeys.columnSelection.bindTo */.u.columnSelection.bindTo(contextKeyService);_this6._hasMultipleSelections=editorContextKeys/* EditorContextKeys.hasMultipleSelections.bindTo */.u.hasMultipleSelections.bindTo(contextKeyService);_this6._hasNonEmptySelection=editorContextKeys/* EditorContextKeys.hasNonEmptySelection.bindTo */.u.hasNonEmptySelection.bindTo(contextKeyService);_this6._canUndo=editorContextKeys/* EditorContextKeys.canUndo.bindTo */.u.canUndo.bindTo(contextKeyService);_this6._canRedo=editorContextKeys/* EditorContextKeys.canRedo.bindTo */.u.canRedo.bindTo(contextKeyService);_this6._register(_this6._editor.onDidChangeConfiguration(function(){return _this6._updateFromConfig();}));_this6._register(_this6._editor.onDidChangeCursorSelection(function(){return _this6._updateFromSelection();}));_this6._register(_this6._editor.onDidFocusEditorWidget(function(){return _this6._updateFromFocus();}));_this6._register(_this6._editor.onDidBlurEditorWidget(function(){return _this6._updateFromFocus();}));_this6._register(_this6._editor.onDidFocusEditorText(function(){return _this6._updateFromFocus();}));_this6._register(_this6._editor.onDidBlurEditorText(function(){return _this6._updateFromFocus();}));_this6._register(_this6._editor.onDidChangeModel(function(){return _this6._updateFromModel();}));_this6._register(_this6._editor.onDidChangeConfiguration(function(){return _this6._updateFromModel();}));_this6._updateFromConfig();_this6._updateFromSelection();_this6._updateFromFocus();_this6._updateFromModel();_this6._editorSimpleInput.set(_this6._editor.isSimpleWidget);return _this6;}codeEditorWidget_createClass(EditorContextKeysManager,[{key:"_updateFromConfig",value:function _updateFromConfig(){var options=this._editor.getOptions();this._editorTabMovesFocus.set(options.get(130/* tabFocusMode */));this._editorReadonly.set(options.get(81/* readOnly */));this._inDiffEditor.set(options.get(54/* inDiffEditor */));this._editorColumnSelection.set(options.get(18/* columnSelection */));}},{key:"_updateFromSelection",value:function _updateFromSelection(){var selections=this._editor.getSelections();if(!selections){this._hasMultipleSelections.reset();this._hasNonEmptySelection.reset();}else{this._hasMultipleSelections.set(selections.length>1);this._hasNonEmptySelection.set(selections.some(function(s){return!s.isEmpty();}));}}},{key:"_updateFromFocus",value:function _updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget);this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget);this._textInputFocus.set(this._editor.hasTextFocus());}},{key:"_updateFromModel",value:function _updateFromModel(){var model=this._editor.getModel();this._canUndo.set(Boolean(model&&model.canUndo()));this._canRedo.set(Boolean(model&&model.canRedo()));}}]);return EditorContextKeysManager;}(lifecycle/* Disposable */.JT);var EditorModeContext=/*#__PURE__*/function(_Disposable4){codeEditorWidget_inherits(EditorModeContext,_Disposable4);var _super4=codeEditorWidget_createSuper(EditorModeContext);function EditorModeContext(_editor,_contextKeyService){var _this7;codeEditorWidget_classCallCheck(this,EditorModeContext);_this7=_super4.call(this);_this7._editor=_editor;_this7._contextKeyService=_contextKeyService;_this7._langId=editorContextKeys/* EditorContextKeys.languageId.bindTo */.u.languageId.bindTo(_contextKeyService);_this7._hasCompletionItemProvider=editorContextKeys/* EditorContextKeys.hasCompletionItemProvider.bindTo */.u.hasCompletionItemProvider.bindTo(_contextKeyService);_this7._hasCodeActionsProvider=editorContextKeys/* EditorContextKeys.hasCodeActionsProvider.bindTo */.u.hasCodeActionsProvider.bindTo(_contextKeyService);_this7._hasCodeLensProvider=editorContextKeys/* EditorContextKeys.hasCodeLensProvider.bindTo */.u.hasCodeLensProvider.bindTo(_contextKeyService);_this7._hasDefinitionProvider=editorContextKeys/* EditorContextKeys.hasDefinitionProvider.bindTo */.u.hasDefinitionProvider.bindTo(_contextKeyService);_this7._hasDeclarationProvider=editorContextKeys/* EditorContextKeys.hasDeclarationProvider.bindTo */.u.hasDeclarationProvider.bindTo(_contextKeyService);_this7._hasImplementationProvider=editorContextKeys/* EditorContextKeys.hasImplementationProvider.bindTo */.u.hasImplementationProvider.bindTo(_contextKeyService);_this7._hasTypeDefinitionProvider=editorContextKeys/* EditorContextKeys.hasTypeDefinitionProvider.bindTo */.u.hasTypeDefinitionProvider.bindTo(_contextKeyService);_this7._hasHoverProvider=editorContextKeys/* EditorContextKeys.hasHoverProvider.bindTo */.u.hasHoverProvider.bindTo(_contextKeyService);_this7._hasDocumentHighlightProvider=editorContextKeys/* EditorContextKeys.hasDocumentHighlightProvider.bindTo */.u.hasDocumentHighlightProvider.bindTo(_contextKeyService);_this7._hasDocumentSymbolProvider=editorContextKeys/* EditorContextKeys.hasDocumentSymbolProvider.bindTo */.u.hasDocumentSymbolProvider.bindTo(_contextKeyService);_this7._hasReferenceProvider=editorContextKeys/* EditorContextKeys.hasReferenceProvider.bindTo */.u.hasReferenceProvider.bindTo(_contextKeyService);_this7._hasRenameProvider=editorContextKeys/* EditorContextKeys.hasRenameProvider.bindTo */.u.hasRenameProvider.bindTo(_contextKeyService);_this7._hasSignatureHelpProvider=editorContextKeys/* EditorContextKeys.hasSignatureHelpProvider.bindTo */.u.hasSignatureHelpProvider.bindTo(_contextKeyService);_this7._hasInlayHintsProvider=editorContextKeys/* EditorContextKeys.hasInlayHintsProvider.bindTo */.u.hasInlayHintsProvider.bindTo(_contextKeyService);_this7._hasDocumentFormattingProvider=editorContextKeys/* EditorContextKeys.hasDocumentFormattingProvider.bindTo */.u.hasDocumentFormattingProvider.bindTo(_contextKeyService);_this7._hasDocumentSelectionFormattingProvider=editorContextKeys/* EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo */.u.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);_this7._hasMultipleDocumentFormattingProvider=editorContextKeys/* EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo */.u.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);_this7._hasMultipleDocumentSelectionFormattingProvider=editorContextKeys/* EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo */.u.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);_this7._isInWalkThrough=editorContextKeys/* EditorContextKeys.isInWalkThroughSnippet.bindTo */.u.isInWalkThroughSnippet.bindTo(_contextKeyService);var update=function update(){return _this7._update();};// update when model/mode changes
_this7._register(_editor.onDidChangeModel(update));_this7._register(_editor.onDidChangeModelLanguage(update));// update when registries change
_this7._register(languages/* CompletionProviderRegistry.onDidChange */.KZ.onDidChange(update));_this7._register(languages/* CodeActionProviderRegistry.onDidChange */.H9.onDidChange(update));_this7._register(languages/* CodeLensProviderRegistry.onDidChange */.He.onDidChange(update));_this7._register(languages/* DefinitionProviderRegistry.onDidChange */.Ct.onDidChange(update));_this7._register(languages/* DeclarationProviderRegistry.onDidChange */.RN.onDidChange(update));_this7._register(languages/* ImplementationProviderRegistry.onDidChange */.vI.onDidChange(update));_this7._register(languages/* TypeDefinitionProviderRegistry.onDidChange */.tA.onDidChange(update));_this7._register(languages/* HoverProviderRegistry.onDidChange */.xp.onDidChange(update));_this7._register(languages/* DocumentHighlightProviderRegistry.onDidChange */.vH.onDidChange(update));_this7._register(languages/* DocumentSymbolProviderRegistry.onDidChange */.vJ.onDidChange(update));_this7._register(languages/* ReferenceProviderRegistry.onDidChange */.FL.onDidChange(update));_this7._register(languages/* RenameProviderRegistry.onDidChange */.G0.onDidChange(update));_this7._register(languages/* DocumentFormattingEditProviderRegistry.onDidChange */.Az.onDidChange(update));_this7._register(languages/* DocumentRangeFormattingEditProviderRegistry.onDidChange */.vN.onDidChange(update));_this7._register(languages/* SignatureHelpProviderRegistry.onDidChange */.nD.onDidChange(update));_this7._register(languages/* InlayHintsProviderRegistry.onDidChange */.mX.onDidChange(update));update();return _this7;}codeEditorWidget_createClass(EditorModeContext,[{key:"dispose",value:function dispose(){codeEditorWidget_get(codeEditorWidget_getPrototypeOf(EditorModeContext.prototype),"dispose",this).call(this);}},{key:"reset",value:function reset(){var _this8=this;this._contextKeyService.bufferChangeEvents(function(){_this8._langId.reset();_this8._hasCompletionItemProvider.reset();_this8._hasCodeActionsProvider.reset();_this8._hasCodeLensProvider.reset();_this8._hasDefinitionProvider.reset();_this8._hasDeclarationProvider.reset();_this8._hasImplementationProvider.reset();_this8._hasTypeDefinitionProvider.reset();_this8._hasHoverProvider.reset();_this8._hasDocumentHighlightProvider.reset();_this8._hasDocumentSymbolProvider.reset();_this8._hasReferenceProvider.reset();_this8._hasRenameProvider.reset();_this8._hasDocumentFormattingProvider.reset();_this8._hasDocumentSelectionFormattingProvider.reset();_this8._hasSignatureHelpProvider.reset();_this8._isInWalkThrough.reset();});}},{key:"_update",value:function _update(){var _this9=this;var model=this._editor.getModel();if(!model){this.reset();return;}this._contextKeyService.bufferChangeEvents(function(){_this9._langId.set(model.getLanguageId());_this9._hasCompletionItemProvider.set(languages/* CompletionProviderRegistry.has */.KZ.has(model));_this9._hasCodeActionsProvider.set(languages/* CodeActionProviderRegistry.has */.H9.has(model));_this9._hasCodeLensProvider.set(languages/* CodeLensProviderRegistry.has */.He.has(model));_this9._hasDefinitionProvider.set(languages/* DefinitionProviderRegistry.has */.Ct.has(model));_this9._hasDeclarationProvider.set(languages/* DeclarationProviderRegistry.has */.RN.has(model));_this9._hasImplementationProvider.set(languages/* ImplementationProviderRegistry.has */.vI.has(model));_this9._hasTypeDefinitionProvider.set(languages/* TypeDefinitionProviderRegistry.has */.tA.has(model));_this9._hasHoverProvider.set(languages/* HoverProviderRegistry.has */.xp.has(model));_this9._hasDocumentHighlightProvider.set(languages/* DocumentHighlightProviderRegistry.has */.vH.has(model));_this9._hasDocumentSymbolProvider.set(languages/* DocumentSymbolProviderRegistry.has */.vJ.has(model));_this9._hasReferenceProvider.set(languages/* ReferenceProviderRegistry.has */.FL.has(model));_this9._hasRenameProvider.set(languages/* RenameProviderRegistry.has */.G0.has(model));_this9._hasSignatureHelpProvider.set(languages/* SignatureHelpProviderRegistry.has */.nD.has(model));_this9._hasInlayHintsProvider.set(languages/* InlayHintsProviderRegistry.has */.mX.has(model));_this9._hasDocumentFormattingProvider.set(languages/* DocumentFormattingEditProviderRegistry.has */.Az.has(model)||languages/* DocumentRangeFormattingEditProviderRegistry.has */.vN.has(model));_this9._hasDocumentSelectionFormattingProvider.set(languages/* DocumentRangeFormattingEditProviderRegistry.has */.vN.has(model));_this9._hasMultipleDocumentFormattingProvider.set(languages/* DocumentFormattingEditProviderRegistry.all */.Az.all(model).length+languages/* DocumentRangeFormattingEditProviderRegistry.all */.vN.all(model).length>1);_this9._hasMultipleDocumentSelectionFormattingProvider.set(languages/* DocumentRangeFormattingEditProviderRegistry.all */.vN.all(model).length>1);_this9._isInWalkThrough.set(model.uri.scheme===network/* Schemas.walkThroughSnippet */.lg.walkThroughSnippet);});}}]);return EditorModeContext;}(lifecycle/* Disposable */.JT);var CodeEditorWidgetFocusTracker=/*#__PURE__*/function(_Disposable5){codeEditorWidget_inherits(CodeEditorWidgetFocusTracker,_Disposable5);var _super5=codeEditorWidget_createSuper(CodeEditorWidgetFocusTracker);function CodeEditorWidgetFocusTracker(domElement){var _this10;codeEditorWidget_classCallCheck(this,CodeEditorWidgetFocusTracker);_this10=_super5.call(this);_this10._onChange=_this10._register(new common_event/* Emitter */.Q5());_this10.onChange=_this10._onChange.event;_this10._hasFocus=false;_this10._domFocusTracker=_this10._register(dom.trackFocus(domElement));_this10._register(_this10._domFocusTracker.onDidFocus(function(){_this10._hasFocus=true;_this10._onChange.fire(undefined);}));_this10._register(_this10._domFocusTracker.onDidBlur(function(){_this10._hasFocus=false;_this10._onChange.fire(undefined);}));return _this10;}codeEditorWidget_createClass(CodeEditorWidgetFocusTracker,[{key:"hasFocus",value:function hasFocus(){return this._hasFocus;}}]);return CodeEditorWidgetFocusTracker;}(lifecycle/* Disposable */.JT);var squigglyStart=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='");var squigglyEnd=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function getSquigglySVGData(color){return squigglyStart+encodeURIComponent(color.toString())+squigglyEnd;}var dotdotdotStart=encodeURIComponent("<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"3\" width=\"12\"><g fill=\"");var dotdotdotEnd=encodeURIComponent("\"><circle cx=\"1\" cy=\"1\" r=\"1\"/><circle cx=\"5\" cy=\"1\" r=\"1\"/><circle cx=\"9\" cy=\"1\" r=\"1\"/></g></svg>");function getDotDotDotSVGData(color){return dotdotdotStart+encodeURIComponent(color.toString())+dotdotdotEnd;}(0,themeService/* registerThemingParticipant */.Ic)(function(theme,collector){var errorBorderColor=theme.getColor(colorRegistry/* editorErrorBorder */.b6y);if(errorBorderColor){collector.addRule(".monaco-editor .".concat("squiggly-error"/* EditorErrorDecoration */," { border-bottom: 4px double ",errorBorderColor,"; }"));}var errorForeground=theme.getColor(colorRegistry/* editorErrorForeground */.lXJ);if(errorForeground){collector.addRule(".monaco-editor .".concat("squiggly-error"/* EditorErrorDecoration */," { background: url(\"data:image/svg+xml,",getSquigglySVGData(errorForeground),"\") repeat-x bottom left; }"));}var errorBackground=theme.getColor(colorRegistry/* editorErrorBackground */.L_H);if(errorBackground){collector.addRule(".monaco-editor .".concat("squiggly-error"/* EditorErrorDecoration */,"::before { display: block; content: ''; width: 100%; height: 100%; background: ",errorBackground,"; }"));}var warningBorderColor=theme.getColor(colorRegistry/* editorWarningBorder */.pW3);if(warningBorderColor){collector.addRule(".monaco-editor .".concat("squiggly-warning"/* EditorWarningDecoration */," { border-bottom: 4px double ",warningBorderColor,"; }"));}var warningForeground=theme.getColor(colorRegistry/* editorWarningForeground */.uoC);if(warningForeground){collector.addRule(".monaco-editor .".concat("squiggly-warning"/* EditorWarningDecoration */," { background: url(\"data:image/svg+xml,",getSquigglySVGData(warningForeground),"\") repeat-x bottom left; }"));}var warningBackground=theme.getColor(colorRegistry/* editorWarningBackground */.gpD);if(warningBackground){collector.addRule(".monaco-editor .".concat("squiggly-warning"/* EditorWarningDecoration */,"::before { display: block; content: ''; width: 100%; height: 100%; background: ",warningBackground,"; }"));}var infoBorderColor=theme.getColor(colorRegistry/* editorInfoBorder */.T83);if(infoBorderColor){collector.addRule(".monaco-editor .".concat("squiggly-info"/* EditorInfoDecoration */," { border-bottom: 4px double ",infoBorderColor,"; }"));}var infoForeground=theme.getColor(colorRegistry/* editorInfoForeground */.c63);if(infoForeground){collector.addRule(".monaco-editor .".concat("squiggly-info"/* EditorInfoDecoration */," { background: url(\"data:image/svg+xml,",getSquigglySVGData(infoForeground),"\") repeat-x bottom left; }"));}var infoBackground=theme.getColor(colorRegistry/* editorInfoBackground */.few);if(infoBackground){collector.addRule(".monaco-editor .".concat("squiggly-info"/* EditorInfoDecoration */,"::before { display: block; content: ''; width: 100%; height: 100%; background: ",infoBackground,"; }"));}var hintBorderColor=theme.getColor(colorRegistry/* editorHintBorder */.fEB);if(hintBorderColor){collector.addRule(".monaco-editor .".concat("squiggly-hint"/* EditorHintDecoration */," { border-bottom: 2px dotted ",hintBorderColor,"; }"));}var hintForeground=theme.getColor(colorRegistry/* editorHintForeground */.Dut);if(hintForeground){collector.addRule(".monaco-editor .".concat("squiggly-hint"/* EditorHintDecoration */," { background: url(\"data:image/svg+xml,",getDotDotDotSVGData(hintForeground),"\") no-repeat bottom left; }"));}var unnecessaryForeground=theme.getColor(editorColorRegistry/* editorUnnecessaryCodeOpacity */.zu);if(unnecessaryForeground){collector.addRule(".monaco-editor.showUnused .".concat("squiggly-inline-unnecessary"/* EditorUnnecessaryInlineDecoration */," { opacity: ",unnecessaryForeground.rgba.a,"; }"));}var unnecessaryBorder=theme.getColor(editorColorRegistry/* editorUnnecessaryCodeBorder */.kp);if(unnecessaryBorder){collector.addRule(".monaco-editor.showUnused .".concat("squiggly-unnecessary"/* EditorUnnecessaryDecoration */," { border-bottom: 2px dashed ",unnecessaryBorder,"; }"));}var deprecatedForeground=theme.getColor(colorRegistry/* editorForeground */.NOs)||'inherit';collector.addRule(".monaco-editor.showDeprecated .".concat("squiggly-inline-deprecated"/* EditorDeprecatedInlineDecoration */," { text-decoration: line-through; text-decoration-color: ",deprecatedForeground,"}"));});

/***/ }),

/***/ 8950:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "p": () => (/* binding */ DiffEditorWidget)
});

// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/nls.js
var nls = __webpack_require__(71453);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/browser/dom.js
var dom = __webpack_require__(20446);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/browser/fastDomNode.js
var fastDomNode = __webpack_require__(87980);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/browser/ui/sash/sash.js
var sash = __webpack_require__(84935);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/async.js
var common_async = __webpack_require__(88494);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/event.js
var common_event = __webpack_require__(36223);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js
var lifecycle = __webpack_require__(19860);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/config/domFontInfo.js
var domFontInfo = __webpack_require__(9217);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/stableEditorScroll.js
var stableEditorScroll = __webpack_require__(61196);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/services/codeEditorService.js
var services_codeEditorService = __webpack_require__(95328);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorWidget.js + 30 modules
var codeEditorWidget = __webpack_require__(38188);
// EXTERNAL MODULE: ../my-cli/node_modules/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__(92910);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js
var actionbar = __webpack_require__(86790);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollableElement.js + 6 modules
var scrollableElement = __webpack_require__(90935);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/actions.js
var common_actions = __webpack_require__(42045);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js
var editorExtensions = __webpack_require__(79098);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/config/editorOptions.js
var editorOptions = __webpack_require__(72530);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/tokens/lineTokens.js
var tokens_lineTokens = __webpack_require__(83817);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/position.js
var position = __webpack_require__(60721);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/editorColorRegistry.js
var editorColorRegistry = __webpack_require__(62660);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewLayout/viewLineRenderer.js
var viewLineRenderer = __webpack_require__(93140);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewModel/viewModel.js
var viewModel = __webpack_require__(38258);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/contextkey/common/contextkey.js
var contextkey = __webpack_require__(11703);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/theme/common/colorRegistry.js
var colorRegistry = __webpack_require__(25530);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/theme/common/themeService.js
var themeService = __webpack_require__(46199);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/codicons.js
var codicons = __webpack_require__(62202);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/theme/common/iconRegistry.js
var iconRegistry = __webpack_require__(57232);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/services/language.js
var language = __webpack_require__(84318);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffReview.js
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect==="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;}return c>3&&r&&Object.defineProperty(target,key,r),r;};var __param=undefined&&undefined.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex);};};var __awaiter=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var _a;var DIFF_LINES_PADDING=3;var DiffEntry=/*#__PURE__*/function(){function DiffEntry(originalLineStart,originalLineEnd,modifiedLineStart,modifiedLineEnd){_classCallCheck(this,DiffEntry);this.originalLineStart=originalLineStart;this.originalLineEnd=originalLineEnd;this.modifiedLineStart=modifiedLineStart;this.modifiedLineEnd=modifiedLineEnd;}_createClass(DiffEntry,[{key:"getType",value:function getType(){if(this.originalLineStart===0){return 1/* Insert */;}if(this.modifiedLineStart===0){return 2/* Delete */;}return 0/* Equal */;}}]);return DiffEntry;}();var Diff=function Diff(entries){_classCallCheck(this,Diff);this.entries=entries;};var diffReviewInsertIcon=(0,iconRegistry/* registerIcon */.q5)('diff-review-insert',codicons/* Codicon.add */.lA.add,nls/* localize */.N('diffReviewInsertIcon','Icon for \'Insert\' in diff review.'));var diffReviewRemoveIcon=(0,iconRegistry/* registerIcon */.q5)('diff-review-remove',codicons/* Codicon.remove */.lA.remove,nls/* localize */.N('diffReviewRemoveIcon','Icon for \'Remove\' in diff review.'));var diffReviewCloseIcon=(0,iconRegistry/* registerIcon */.q5)('diff-review-close',codicons/* Codicon.close */.lA.close,nls/* localize */.N('diffReviewCloseIcon','Icon for \'Close\' in diff review.'));var DiffReview=/*#__PURE__*/function(_Disposable){_inherits(DiffReview,_Disposable);var _super=_createSuper(DiffReview);function DiffReview(diffEditor,_languageService){var _this;_classCallCheck(this,DiffReview);_this=_super.call(this);_this._languageService=_languageService;_this._width=0;_this._diffEditor=diffEditor;_this._isVisible=false;_this.shadow=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this.shadow.setClassName('diff-review-shadow');_this.actionBarContainer=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this.actionBarContainer.setClassName('diff-review-actions');_this._actionBar=_this._register(new actionbar/* ActionBar */.o(_this.actionBarContainer.domNode));_this._actionBar.push(new common_actions/* Action */.aU('diffreview.close',nls/* localize */.N('label.close',"Close"),'close-diff-review '+themeService/* ThemeIcon.asClassName */.kS.asClassName(diffReviewCloseIcon),true,function(){return __awaiter(_assertThisInitialized(_this),void 0,void 0,/*#__PURE__*/regenerator_default().mark(function _callee(){return regenerator_default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",this.hide());case 1:case"end":return _context.stop();}}},_callee,this);}));}),{label:false,icon:true});_this.domNode=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this.domNode.setClassName('diff-review monaco-editor-background');_this._content=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this._content.setClassName('diff-review-content');_this._content.setAttribute('role','code');_this.scrollbar=_this._register(new scrollableElement/* DomScrollableElement */.s$(_this._content.domNode,{}));_this.domNode.domNode.appendChild(_this.scrollbar.getDomNode());_this._register(diffEditor.onDidUpdateDiff(function(){if(!_this._isVisible){return;}_this._diffs=_this._compute();_this._render();}));_this._register(diffEditor.getModifiedEditor().onDidChangeCursorPosition(function(){if(!_this._isVisible){return;}_this._render();}));_this._register(dom.addStandardDisposableListener(_this.domNode.domNode,'click',function(e){e.preventDefault();var row=dom.findParentWithClass(e.target,'diff-review-row');if(row){_this._goToRow(row);}}));_this._register(dom.addStandardDisposableListener(_this.domNode.domNode,'keydown',function(e){if(e.equals(18/* DownArrow */)||e.equals(2048/* CtrlCmd */|18/* DownArrow */)||e.equals(512/* Alt */|18/* DownArrow */)){e.preventDefault();_this._goToRow(_this._getNextRow());}if(e.equals(16/* UpArrow */)||e.equals(2048/* CtrlCmd */|16/* UpArrow */)||e.equals(512/* Alt */|16/* UpArrow */)){e.preventDefault();_this._goToRow(_this._getPrevRow());}if(e.equals(9/* Escape */)||e.equals(2048/* CtrlCmd */|9/* Escape */)||e.equals(512/* Alt */|9/* Escape */)||e.equals(1024/* Shift */|9/* Escape */)){e.preventDefault();_this.hide();}if(e.equals(10/* Space */)||e.equals(3/* Enter */)){e.preventDefault();_this.accept();}}));_this._diffs=[];_this._currentDiff=null;return _this;}_createClass(DiffReview,[{key:"prev",value:function prev(){var index=0;if(!this._isVisible){this._diffs=this._compute();}if(this._isVisible){var currentIndex=-1;for(var i=0,len=this._diffs.length;i<len;i++){if(this._diffs[i]===this._currentDiff){currentIndex=i;break;}}index=this._diffs.length+currentIndex-1;}else{index=this._findDiffIndex(this._diffEditor.getPosition());}if(this._diffs.length===0){// Nothing to do
return;}index=index%this._diffs.length;var entries=this._diffs[index].entries;this._diffEditor.setPosition(new position/* Position */.L(entries[0].modifiedLineStart,1));this._diffEditor.setSelection({startColumn:1,startLineNumber:entries[0].modifiedLineStart,endColumn:1073741824/* MAX_SAFE_SMALL_INTEGER */,endLineNumber:entries[entries.length-1].modifiedLineEnd});this._isVisible=true;this._diffEditor.doLayout();this._render();this._goToRow(this._getNextRow());}},{key:"next",value:function next(){var index=0;if(!this._isVisible){this._diffs=this._compute();}if(this._isVisible){var currentIndex=-1;for(var i=0,len=this._diffs.length;i<len;i++){if(this._diffs[i]===this._currentDiff){currentIndex=i;break;}}index=currentIndex+1;}else{index=this._findDiffIndex(this._diffEditor.getPosition());}if(this._diffs.length===0){// Nothing to do
return;}index=index%this._diffs.length;var entries=this._diffs[index].entries;this._diffEditor.setPosition(new position/* Position */.L(entries[0].modifiedLineStart,1));this._diffEditor.setSelection({startColumn:1,startLineNumber:entries[0].modifiedLineStart,endColumn:1073741824/* MAX_SAFE_SMALL_INTEGER */,endLineNumber:entries[entries.length-1].modifiedLineEnd});this._isVisible=true;this._diffEditor.doLayout();this._render();this._goToRow(this._getNextRow());}},{key:"accept",value:function accept(){var jumpToLineNumber=-1;var current=this._getCurrentFocusedRow();if(current){var lineNumber=parseInt(current.getAttribute('data-line'),10);if(!isNaN(lineNumber)){jumpToLineNumber=lineNumber;}}this.hide();if(jumpToLineNumber!==-1){this._diffEditor.setPosition(new position/* Position */.L(jumpToLineNumber,1));this._diffEditor.revealPosition(new position/* Position */.L(jumpToLineNumber,1),1/* Immediate */);}}},{key:"hide",value:function hide(){this._isVisible=false;this._diffEditor.updateOptions({readOnly:false});this._diffEditor.focus();this._diffEditor.doLayout();this._render();}},{key:"_getPrevRow",value:function _getPrevRow(){var current=this._getCurrentFocusedRow();if(!current){return this._getFirstRow();}if(current.previousElementSibling){return current.previousElementSibling;}return current;}},{key:"_getNextRow",value:function _getNextRow(){var current=this._getCurrentFocusedRow();if(!current){return this._getFirstRow();}if(current.nextElementSibling){return current.nextElementSibling;}return current;}},{key:"_getFirstRow",value:function _getFirstRow(){return this.domNode.domNode.querySelector('.diff-review-row');}},{key:"_getCurrentFocusedRow",value:function _getCurrentFocusedRow(){var result=document.activeElement;if(result&&/diff-review-row/.test(result.className)){return result;}return null;}},{key:"_goToRow",value:function _goToRow(row){var prev=this._getCurrentFocusedRow();row.tabIndex=0;row.focus();if(prev&&prev!==row){prev.tabIndex=-1;}this.scrollbar.scanDomNode();}},{key:"isVisible",value:function isVisible(){return this._isVisible;}},{key:"layout",value:function layout(top,width,height){this._width=width;this.shadow.setTop(top-6);this.shadow.setWidth(width);this.shadow.setHeight(this._isVisible?6:0);this.domNode.setTop(top);this.domNode.setWidth(width);this.domNode.setHeight(height);this._content.setHeight(height);this._content.setWidth(width);if(this._isVisible){this.actionBarContainer.setAttribute('aria-hidden','false');this.actionBarContainer.setDisplay('block');}else{this.actionBarContainer.setAttribute('aria-hidden','true');this.actionBarContainer.setDisplay('none');}}},{key:"_compute",value:function _compute(){var lineChanges=this._diffEditor.getLineChanges();if(!lineChanges||lineChanges.length===0){return[];}var originalModel=this._diffEditor.getOriginalEditor().getModel();var modifiedModel=this._diffEditor.getModifiedEditor().getModel();if(!originalModel||!modifiedModel){return[];}return DiffReview._mergeAdjacent(lineChanges,originalModel.getLineCount(),modifiedModel.getLineCount());}},{key:"_findDiffIndex",value:function _findDiffIndex(pos){var lineNumber=pos.lineNumber;for(var i=0,len=this._diffs.length;i<len;i++){var diff=this._diffs[i].entries;var lastModifiedLine=diff[diff.length-1].modifiedLineEnd;if(lineNumber<=lastModifiedLine){return i;}}return 0;}},{key:"_render",value:function _render(){var originalOptions=this._diffEditor.getOriginalEditor().getOptions();var modifiedOptions=this._diffEditor.getModifiedEditor().getOptions();var originalModel=this._diffEditor.getOriginalEditor().getModel();var modifiedModel=this._diffEditor.getModifiedEditor().getModel();var originalModelOpts=originalModel.getOptions();var modifiedModelOpts=modifiedModel.getOptions();if(!this._isVisible||!originalModel||!modifiedModel){dom.clearNode(this._content.domNode);this._currentDiff=null;this.scrollbar.scanDomNode();return;}this._diffEditor.updateOptions({readOnly:true});var diffIndex=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[diffIndex]===this._currentDiff){return;}this._currentDiff=this._diffs[diffIndex];var diffs=this._diffs[diffIndex].entries;var container=document.createElement('div');container.className='diff-review-table';container.setAttribute('role','list');container.setAttribute('aria-label','Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands');(0,domFontInfo/* applyFontInfo */.N)(container,modifiedOptions.get(44/* fontInfo */));var minOriginalLine=0;var maxOriginalLine=0;var minModifiedLine=0;var maxModifiedLine=0;for(var i=0,len=diffs.length;i<len;i++){var diffEntry=diffs[i];var originalLineStart=diffEntry.originalLineStart;var originalLineEnd=diffEntry.originalLineEnd;var modifiedLineStart=diffEntry.modifiedLineStart;var modifiedLineEnd=diffEntry.modifiedLineEnd;if(originalLineStart!==0&&(minOriginalLine===0||originalLineStart<minOriginalLine)){minOriginalLine=originalLineStart;}if(originalLineEnd!==0&&(maxOriginalLine===0||originalLineEnd>maxOriginalLine)){maxOriginalLine=originalLineEnd;}if(modifiedLineStart!==0&&(minModifiedLine===0||modifiedLineStart<minModifiedLine)){minModifiedLine=modifiedLineStart;}if(modifiedLineEnd!==0&&(maxModifiedLine===0||modifiedLineEnd>maxModifiedLine)){maxModifiedLine=modifiedLineEnd;}}var header=document.createElement('div');header.className='diff-review-row';var cell=document.createElement('div');cell.className='diff-review-cell diff-review-summary';var originalChangedLinesCnt=maxOriginalLine-minOriginalLine+1;var modifiedChangedLinesCnt=maxModifiedLine-minModifiedLine+1;cell.appendChild(document.createTextNode("".concat(diffIndex+1,"/").concat(this._diffs.length,": @@ -").concat(minOriginalLine,",").concat(originalChangedLinesCnt," +").concat(minModifiedLine,",").concat(modifiedChangedLinesCnt," @@")));header.setAttribute('data-line',String(minModifiedLine));var getAriaLines=function getAriaLines(lines){if(lines===0){return nls/* localize */.N('no_lines_changed',"no lines changed");}else if(lines===1){return nls/* localize */.N('one_line_changed',"1 line changed");}else{return nls/* localize */.N('more_lines_changed',"{0} lines changed",lines);}};var originalChangedLinesCntAria=getAriaLines(originalChangedLinesCnt);var modifiedChangedLinesCntAria=getAriaLines(modifiedChangedLinesCnt);header.setAttribute('aria-label',nls/* localize */.N({key:'header',comment:['This is the ARIA label for a git diff header.','A git diff header looks like this: @@ -154,12 +159,39 @@.','That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.','Variables 0 and 1 refer to the diff index out of total number of diffs.','Variables 2 and 4 will be numbers (a line number).','Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",diffIndex+1,this._diffs.length,minOriginalLine,originalChangedLinesCntAria,minModifiedLine,modifiedChangedLinesCntAria));header.appendChild(cell);// @@ -504,7 +517,7 @@
header.setAttribute('role','listitem');container.appendChild(header);var lineHeight=modifiedOptions.get(59/* lineHeight */);var modLine=minModifiedLine;for(var _i=0,_len=diffs.length;_i<_len;_i++){var _diffEntry=diffs[_i];DiffReview._renderSection(container,_diffEntry,modLine,lineHeight,this._width,originalOptions,originalModel,originalModelOpts,modifiedOptions,modifiedModel,modifiedModelOpts,this._languageService.languageIdCodec);if(_diffEntry.modifiedLineStart!==0){modLine=_diffEntry.modifiedLineEnd;}}dom.clearNode(this._content.domNode);this._content.domNode.appendChild(container);this.scrollbar.scanDomNode();}}],[{key:"_mergeAdjacent",value:function _mergeAdjacent(lineChanges,originalLineCount,modifiedLineCount){if(!lineChanges||lineChanges.length===0){return[];}var diffs=[];var diffsLength=0;for(var i=0,len=lineChanges.length;i<len;i++){var lineChange=lineChanges[i];var originalStart=lineChange.originalStartLineNumber;var originalEnd=lineChange.originalEndLineNumber;var modifiedStart=lineChange.modifiedStartLineNumber;var modifiedEnd=lineChange.modifiedEndLineNumber;var _r=[];var _rLength=0;// Emit before anchors
{var originalEqualAbove=originalEnd===0?originalStart:originalStart-1;var modifiedEqualAbove=modifiedEnd===0?modifiedStart:modifiedStart-1;// Make sure we don't step into the previous diff
var minOriginal=1;var minModified=1;if(i>0){var prevLineChange=lineChanges[i-1];if(prevLineChange.originalEndLineNumber===0){minOriginal=prevLineChange.originalStartLineNumber+1;}else{minOriginal=prevLineChange.originalEndLineNumber+1;}if(prevLineChange.modifiedEndLineNumber===0){minModified=prevLineChange.modifiedStartLineNumber+1;}else{minModified=prevLineChange.modifiedEndLineNumber+1;}}var fromOriginal=originalEqualAbove-DIFF_LINES_PADDING+1;var fromModified=modifiedEqualAbove-DIFF_LINES_PADDING+1;if(fromOriginal<minOriginal){var delta=minOriginal-fromOriginal;fromOriginal=fromOriginal+delta;fromModified=fromModified+delta;}if(fromModified<minModified){var _delta=minModified-fromModified;fromOriginal=fromOriginal+_delta;fromModified=fromModified+_delta;}_r[_rLength++]=new DiffEntry(fromOriginal,originalEqualAbove,fromModified,modifiedEqualAbove);}// Emit deleted lines
{if(originalEnd!==0){_r[_rLength++]=new DiffEntry(originalStart,originalEnd,0,0);}}// Emit inserted lines
{if(modifiedEnd!==0){_r[_rLength++]=new DiffEntry(0,0,modifiedStart,modifiedEnd);}}// Emit after anchors
{var originalEqualBelow=originalEnd===0?originalStart+1:originalEnd+1;var modifiedEqualBelow=modifiedEnd===0?modifiedStart+1:modifiedEnd+1;// Make sure we don't step into the next diff
var maxOriginal=originalLineCount;var maxModified=modifiedLineCount;if(i+1<len){var nextLineChange=lineChanges[i+1];if(nextLineChange.originalEndLineNumber===0){maxOriginal=nextLineChange.originalStartLineNumber;}else{maxOriginal=nextLineChange.originalStartLineNumber-1;}if(nextLineChange.modifiedEndLineNumber===0){maxModified=nextLineChange.modifiedStartLineNumber;}else{maxModified=nextLineChange.modifiedStartLineNumber-1;}}var toOriginal=originalEqualBelow+DIFF_LINES_PADDING-1;var toModified=modifiedEqualBelow+DIFF_LINES_PADDING-1;if(toOriginal>maxOriginal){var _delta2=maxOriginal-toOriginal;toOriginal=toOriginal+_delta2;toModified=toModified+_delta2;}if(toModified>maxModified){var _delta3=maxModified-toModified;toOriginal=toOriginal+_delta3;toModified=toModified+_delta3;}_r[_rLength++]=new DiffEntry(originalEqualBelow,toOriginal,modifiedEqualBelow,toModified);}diffs[diffsLength++]=new Diff(_r);}// Merge adjacent diffs
var curr=diffs[0].entries;var r=[];var rLength=0;for(var _i2=1,_len2=diffs.length;_i2<_len2;_i2++){var thisDiff=diffs[_i2].entries;var currLast=curr[curr.length-1];var thisFirst=thisDiff[0];if(currLast.getType()===0/* Equal */&&thisFirst.getType()===0/* Equal */&&thisFirst.originalLineStart<=currLast.originalLineEnd){// We are dealing with equal lines that overlap
curr[curr.length-1]=new DiffEntry(currLast.originalLineStart,thisFirst.originalLineEnd,currLast.modifiedLineStart,thisFirst.modifiedLineEnd);curr=curr.concat(thisDiff.slice(1));continue;}r[rLength++]=new Diff(curr);curr=thisDiff;}r[rLength++]=new Diff(curr);return r;}},{key:"_renderSection",value:function _renderSection(dest,diffEntry,modLine,lineHeight,width,originalOptions,originalModel,originalModelOpts,modifiedOptions,modifiedModel,modifiedModelOpts,languageIdCodec){var type=diffEntry.getType();var rowClassName='diff-review-row';var lineNumbersExtraClassName='';var spacerClassName='diff-review-spacer';var spacerIcon=null;switch(type){case 1/* Insert */:rowClassName='diff-review-row line-insert';lineNumbersExtraClassName=' char-insert';spacerIcon=diffReviewInsertIcon;break;case 2/* Delete */:rowClassName='diff-review-row line-delete';lineNumbersExtraClassName=' char-delete';spacerIcon=diffReviewRemoveIcon;break;}var originalLineStart=diffEntry.originalLineStart;var originalLineEnd=diffEntry.originalLineEnd;var modifiedLineStart=diffEntry.modifiedLineStart;var modifiedLineEnd=diffEntry.modifiedLineEnd;var cnt=Math.max(modifiedLineEnd-modifiedLineStart,originalLineEnd-originalLineStart);var originalLayoutInfo=originalOptions.get(131/* layoutInfo */);var originalLineNumbersWidth=originalLayoutInfo.glyphMarginWidth+originalLayoutInfo.lineNumbersWidth;var modifiedLayoutInfo=modifiedOptions.get(131/* layoutInfo */);var modifiedLineNumbersWidth=10+modifiedLayoutInfo.glyphMarginWidth+modifiedLayoutInfo.lineNumbersWidth;for(var i=0;i<=cnt;i++){var originalLine=originalLineStart===0?0:originalLineStart+i;var modifiedLine=modifiedLineStart===0?0:modifiedLineStart+i;var row=document.createElement('div');row.style.minWidth=width+'px';row.className=rowClassName;row.setAttribute('role','listitem');if(modifiedLine!==0){modLine=modifiedLine;}row.setAttribute('data-line',String(modLine));var cell=document.createElement('div');cell.className='diff-review-cell';cell.style.height="".concat(lineHeight,"px");row.appendChild(cell);var originalLineNumber=document.createElement('span');originalLineNumber.style.width=originalLineNumbersWidth+'px';originalLineNumber.style.minWidth=originalLineNumbersWidth+'px';originalLineNumber.className='diff-review-line-number'+lineNumbersExtraClassName;if(originalLine!==0){originalLineNumber.appendChild(document.createTextNode(String(originalLine)));}else{originalLineNumber.innerText="\xA0";}cell.appendChild(originalLineNumber);var modifiedLineNumber=document.createElement('span');modifiedLineNumber.style.width=modifiedLineNumbersWidth+'px';modifiedLineNumber.style.minWidth=modifiedLineNumbersWidth+'px';modifiedLineNumber.style.paddingRight='10px';modifiedLineNumber.className='diff-review-line-number'+lineNumbersExtraClassName;if(modifiedLine!==0){modifiedLineNumber.appendChild(document.createTextNode(String(modifiedLine)));}else{modifiedLineNumber.innerText="\xA0";}cell.appendChild(modifiedLineNumber);var spacer=document.createElement('span');spacer.className=spacerClassName;if(spacerIcon){var spacerCodicon=document.createElement('span');spacerCodicon.className=themeService/* ThemeIcon.asClassName */.kS.asClassName(spacerIcon);spacerCodicon.innerText="\xA0\xA0";spacer.appendChild(spacerCodicon);}else{spacer.innerText="\xA0\xA0";}cell.appendChild(spacer);var lineContent=void 0;if(modifiedLine!==0){var html=this._renderLine(modifiedModel,modifiedOptions,modifiedModelOpts.tabSize,modifiedLine,languageIdCodec);if(DiffReview._ttPolicy){html=DiffReview._ttPolicy.createHTML(html);}cell.insertAdjacentHTML('beforeend',html);lineContent=modifiedModel.getLineContent(modifiedLine);}else{var _html=this._renderLine(originalModel,originalOptions,originalModelOpts.tabSize,originalLine,languageIdCodec);if(DiffReview._ttPolicy){_html=DiffReview._ttPolicy.createHTML(_html);}cell.insertAdjacentHTML('beforeend',_html);lineContent=originalModel.getLineContent(originalLine);}if(lineContent.length===0){lineContent=nls/* localize */.N('blankLine',"blank");}var ariaLabel='';switch(type){case 0/* Equal */:if(originalLine===modifiedLine){ariaLabel=nls/* localize */.N({key:'unchangedLine',comment:['The placeholders are contents of the line and should not be translated.']},"{0} unchanged line {1}",lineContent,originalLine);}else{ariaLabel=nls/* localize */.N('equalLine',"{0} original line {1} modified line {2}",lineContent,originalLine,modifiedLine);}break;case 1/* Insert */:ariaLabel=nls/* localize */.N('insertLine',"+ {0} modified line {1}",lineContent,modifiedLine);break;case 2/* Delete */:ariaLabel=nls/* localize */.N('deleteLine',"- {0} original line {1}",lineContent,originalLine);break;}row.setAttribute('aria-label',ariaLabel);dest.appendChild(row);}}},{key:"_renderLine",value:function _renderLine(model,options,tabSize,lineNumber,languageIdCodec){var lineContent=model.getLineContent(lineNumber);var fontInfo=options.get(44/* fontInfo */);var lineTokens=tokens_lineTokens/* LineTokens.createEmpty */.A.createEmpty(lineContent,languageIdCodec);var isBasicASCII=viewModel/* ViewLineRenderingData.isBasicASCII */.wA.isBasicASCII(lineContent,model.mightContainNonBasicASCII());var containsRTL=viewModel/* ViewLineRenderingData.containsRTL */.wA.containsRTL(lineContent,isBasicASCII,model.mightContainRTL());var r=(0,viewLineRenderer/* renderViewLine2 */.tF)(new viewLineRenderer/* RenderLineInput */.IJ(fontInfo.isMonospace&&!options.get(29/* disableMonospaceOptimizations */),fontInfo.canUseHalfwidthRightwardsArrow,lineContent,false,isBasicASCII,containsRTL,0,lineTokens,[],tabSize,0,fontInfo.spaceWidth,fontInfo.middotWidth,fontInfo.wsmiddotWidth,options.get(105/* stopRenderingLineAfter */),options.get(88/* renderWhitespace */),options.get(83/* renderControlCharacters */),options.get(45/* fontLigatures */)!==editorOptions/* EditorFontLigatures.OFF */.n0.OFF,null));return r.html;}}]);return DiffReview;}(lifecycle/* Disposable */.JT);DiffReview._ttPolicy=(_a=window.trustedTypes)===null||_a===void 0?void 0:_a.createPolicy('diffReview',{createHTML:function createHTML(value){return value;}});DiffReview=__decorate([__param(1,language/* ILanguageService */.O)],DiffReview);// theming
(0,themeService/* registerThemingParticipant */.Ic)(function(theme,collector){var lineNumbers=theme.getColor(editorColorRegistry/* editorLineNumbers */.hw);if(lineNumbers){collector.addRule(".monaco-diff-editor .diff-review-line-number { color: ".concat(lineNumbers,"; }"));}var shadow=theme.getColor(colorRegistry/* scrollbarShadow */._wn);if(shadow){collector.addRule(".monaco-diff-editor .diff-review-shadow { box-shadow: ".concat(shadow," 0 -6px 6px -6px inset; }"));}});var DiffReviewNext=/*#__PURE__*/function(_EditorAction){_inherits(DiffReviewNext,_EditorAction);var _super2=_createSuper(DiffReviewNext);function DiffReviewNext(){_classCallCheck(this,DiffReviewNext);return _super2.call(this,{id:'editor.action.diffReview.next',label:nls/* localize */.N('editor.action.diffReview.next',"Go to Next Difference"),alias:'Go to Next Difference',precondition:contextkey/* ContextKeyExpr.has */.Ao.has('isInDiffEditor'),kbOpts:{kbExpr:null,primary:65/* F7 */,weight:100/* EditorContrib */}});}_createClass(DiffReviewNext,[{key:"run",value:function run(accessor,editor){var diffEditor=findFocusedDiffEditor(accessor);if(diffEditor){diffEditor.diffReviewNext();}}}]);return DiffReviewNext;}(editorExtensions/* EditorAction */.R6);var DiffReviewPrev=/*#__PURE__*/function(_EditorAction2){_inherits(DiffReviewPrev,_EditorAction2);var _super3=_createSuper(DiffReviewPrev);function DiffReviewPrev(){_classCallCheck(this,DiffReviewPrev);return _super3.call(this,{id:'editor.action.diffReview.prev',label:nls/* localize */.N('editor.action.diffReview.prev',"Go to Previous Difference"),alias:'Go to Previous Difference',precondition:contextkey/* ContextKeyExpr.has */.Ao.has('isInDiffEditor'),kbOpts:{kbExpr:null,primary:1024/* Shift */|65/* F7 */,weight:100/* EditorContrib */}});}_createClass(DiffReviewPrev,[{key:"run",value:function run(accessor,editor){var diffEditor=findFocusedDiffEditor(accessor);if(diffEditor){diffEditor.diffReviewPrev();}}}]);return DiffReviewPrev;}(editorExtensions/* EditorAction */.R6);function findFocusedDiffEditor(accessor){var codeEditorService=accessor.get(services_codeEditorService/* ICodeEditorService */.$);var diffEditors=codeEditorService.listDiffEditors();var activeCodeEditor=codeEditorService.getActiveCodeEditor();if(!activeCodeEditor){return null;}for(var i=0,len=diffEditors.length;i<len;i++){var diffEditor=diffEditors[i];if(diffEditor.getModifiedEditor().getId()===activeCodeEditor.getId()||diffEditor.getOriginalEditor().getId()===activeCodeEditor.getId()){return diffEditor;}}return null;}(0,editorExtensions/* registerEditorAction */.Qr)(DiffReviewNext);(0,editorExtensions/* registerEditorAction */.Qr)(DiffReviewPrev);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/range.js
var core_range = __webpack_require__(96844);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/core/stringBuilder.js
var stringBuilder = __webpack_require__(26644);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/editorCommon.js
var editorCommon = __webpack_require__(69400);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js + 10 modules
var textModel = __webpack_require__(58102);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/services/editorWorker.js
var editorWorker = __webpack_require__(43086);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewModel/overviewZoneManager.js
var overviewZoneManager = __webpack_require__(56745);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/common/viewLayout/lineDecorations.js
var lineDecorations = __webpack_require__(9098);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/instantiation/common/instantiation.js
var instantiation = __webpack_require__(71896);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/instantiation/common/serviceCollection.js
var serviceCollection = __webpack_require__(87230);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/notification/common/notification.js
var notification = __webpack_require__(73766);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/contextview/browser/contextView.js
var contextView = __webpack_require__(25234);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/widget/inlineDiffMargin.js
function inlineDiffMargin_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){inlineDiffMargin_typeof=function _typeof(obj){return typeof obj;};}else{inlineDiffMargin_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return inlineDiffMargin_typeof(obj);}function inlineDiffMargin_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function inlineDiffMargin_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function inlineDiffMargin_createClass(Constructor,protoProps,staticProps){if(protoProps)inlineDiffMargin_defineProperties(Constructor.prototype,protoProps);if(staticProps)inlineDiffMargin_defineProperties(Constructor,staticProps);return Constructor;}function inlineDiffMargin_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)inlineDiffMargin_setPrototypeOf(subClass,superClass);}function inlineDiffMargin_setPrototypeOf(o,p){inlineDiffMargin_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return inlineDiffMargin_setPrototypeOf(o,p);}function inlineDiffMargin_createSuper(Derived){var hasNativeReflectConstruct=inlineDiffMargin_isNativeReflectConstruct();return function _createSuperInternal(){var Super=inlineDiffMargin_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=inlineDiffMargin_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return inlineDiffMargin_possibleConstructorReturn(this,result);};}function inlineDiffMargin_possibleConstructorReturn(self,call){if(call&&(inlineDiffMargin_typeof(call)==="object"||typeof call==="function")){return call;}return inlineDiffMargin_assertThisInitialized(self);}function inlineDiffMargin_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function inlineDiffMargin_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function inlineDiffMargin_getPrototypeOf(o){inlineDiffMargin_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return inlineDiffMargin_getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var inlineDiffMargin_awaiter=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var InlineDiffMargin=/*#__PURE__*/function(_Disposable){inlineDiffMargin_inherits(InlineDiffMargin,_Disposable);var _super=inlineDiffMargin_createSuper(InlineDiffMargin);function InlineDiffMargin(_viewZoneId,_marginDomNode,editor,diff,_contextMenuService,_clipboardService){var _this;inlineDiffMargin_classCallCheck(this,InlineDiffMargin);_this=_super.call(this);_this._viewZoneId=_viewZoneId;_this._marginDomNode=_marginDomNode;_this.editor=editor;_this.diff=diff;_this._contextMenuService=_contextMenuService;_this._clipboardService=_clipboardService;_this._visibility=false;// make sure the diff margin shows above overlay.
_this._marginDomNode.style.zIndex='10';_this._diffActions=document.createElement('div');_this._diffActions.className=codicons/* Codicon.lightBulb.classNames */.lA.lightBulb.classNames+' lightbulb-glyph';_this._diffActions.style.position='absolute';var lineHeight=editor.getOption(59/* lineHeight */);var lineFeed=editor.getModel().getEOL();_this._diffActions.style.right='0px';_this._diffActions.style.visibility='hidden';_this._diffActions.style.height="".concat(lineHeight,"px");_this._diffActions.style.lineHeight="".concat(lineHeight,"px");_this._marginDomNode.appendChild(_this._diffActions);var actions=[];var isDeletion=diff.modifiedEndLineNumber===0;// default action
actions.push(new common_actions/* Action */.aU('diff.clipboard.copyDeletedContent',isDeletion?diff.originalEndLineNumber>diff.modifiedStartLineNumber?nls/* localize */.N('diff.clipboard.copyDeletedLinesContent.label',"Copy deleted lines"):nls/* localize */.N('diff.clipboard.copyDeletedLinesContent.single.label',"Copy deleted line"):diff.originalEndLineNumber>diff.modifiedStartLineNumber?nls/* localize */.N('diff.clipboard.copyChangedLinesContent.label',"Copy changed lines"):nls/* localize */.N('diff.clipboard.copyChangedLinesContent.single.label',"Copy changed line"),undefined,true,function(){return inlineDiffMargin_awaiter(inlineDiffMargin_assertThisInitialized(_this),void 0,void 0,/*#__PURE__*/regenerator_default().mark(function _callee(){var range,deletedText;return regenerator_default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:range=new core_range/* Range */.e(diff.originalStartLineNumber,1,diff.originalEndLineNumber+1,1);deletedText=diff.originalModel.getValueInRange(range);_context.next=4;return this._clipboardService.writeText(deletedText);case 4:case"end":return _context.stop();}}},_callee,this);}));}));var currentLineNumberOffset=0;var copyLineAction=undefined;if(diff.originalEndLineNumber>diff.modifiedStartLineNumber){copyLineAction=new common_actions/* Action */.aU('diff.clipboard.copyDeletedLineContent',isDeletion?nls/* localize */.N('diff.clipboard.copyDeletedLineContent.label',"Copy deleted line ({0})",diff.originalStartLineNumber):nls/* localize */.N('diff.clipboard.copyChangedLineContent.label',"Copy changed line ({0})",diff.originalStartLineNumber),undefined,true,function(){return inlineDiffMargin_awaiter(inlineDiffMargin_assertThisInitialized(_this),void 0,void 0,/*#__PURE__*/regenerator_default().mark(function _callee2(){var lineContent,eof;return regenerator_default().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:lineContent=diff.originalModel.getLineContent(diff.originalStartLineNumber+currentLineNumberOffset);if(!(lineContent==='')){_context2.next=7;break;}// empty line
eof=diff.originalModel.getEndOfLineSequence();_context2.next=5;return this._clipboardService.writeText(eof===0/* LF */?/* LF */'\n':'\r\n');case 5:_context2.next=9;break;case 7:_context2.next=9;return this._clipboardService.writeText(lineContent);case 9:case"end":return _context2.stop();}}},_callee2,this);}));});actions.push(copyLineAction);}var readOnly=editor.getOption(81/* readOnly */);if(!readOnly){actions.push(new common_actions/* Action */.aU('diff.inline.revertChange',nls/* localize */.N('diff.inline.revertChange.label',"Revert this change"),undefined,true,function(){return inlineDiffMargin_awaiter(inlineDiffMargin_assertThisInitialized(_this),void 0,void 0,/*#__PURE__*/regenerator_default().mark(function _callee3(){var range,deletedText,column,_column;return regenerator_default().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:range=new core_range/* Range */.e(diff.originalStartLineNumber,1,diff.originalEndLineNumber,diff.originalModel.getLineMaxColumn(diff.originalEndLineNumber));deletedText=diff.originalModel.getValueInRange(range);if(diff.modifiedEndLineNumber===0){// deletion only
column=editor.getModel().getLineMaxColumn(diff.modifiedStartLineNumber);editor.executeEdits('diffEditor',[{range:new core_range/* Range */.e(diff.modifiedStartLineNumber,column,diff.modifiedStartLineNumber,column),text:lineFeed+deletedText}]);}else{_column=editor.getModel().getLineMaxColumn(diff.modifiedEndLineNumber);editor.executeEdits('diffEditor',[{range:new core_range/* Range */.e(diff.modifiedStartLineNumber,1,diff.modifiedEndLineNumber,_column),text:deletedText}]);}case 3:case"end":return _context3.stop();}}},_callee3);}));}));}var showContextMenu=function showContextMenu(x,y){_this._contextMenuService.showContextMenu({getAnchor:function getAnchor(){return{x:x,y:y};},getActions:function getActions(){if(copyLineAction){copyLineAction.label=isDeletion?nls/* localize */.N('diff.clipboard.copyDeletedLineContent.label',"Copy deleted line ({0})",diff.originalStartLineNumber+currentLineNumberOffset):nls/* localize */.N('diff.clipboard.copyChangedLineContent.label',"Copy changed line ({0})",diff.originalStartLineNumber+currentLineNumberOffset);}return actions;},autoSelectFirstItem:true});};_this._register(dom.addStandardDisposableListener(_this._diffActions,'mousedown',function(e){var _dom$getDomNodePagePo=dom.getDomNodePagePosition(_this._diffActions),top=_dom$getDomNodePagePo.top,height=_dom$getDomNodePagePo.height;var pad=Math.floor(lineHeight/3);e.preventDefault();showContextMenu(e.posx,top+height+pad);}));_this._register(editor.onMouseMove(function(e){if(e.target.type===8/* CONTENT_VIEW_ZONE */||e.target.type===5/* GUTTER_VIEW_ZONE */){var viewZoneId=e.target.detail.viewZoneId;if(viewZoneId===_this._viewZoneId){_this.visibility=true;currentLineNumberOffset=_this._updateLightBulbPosition(_this._marginDomNode,e.event.browserEvent.y,lineHeight);}else{_this.visibility=false;}}else{_this.visibility=false;}}));_this._register(editor.onMouseDown(function(e){if(!e.event.rightButton){return;}if(e.target.type===8/* CONTENT_VIEW_ZONE */||e.target.type===5/* GUTTER_VIEW_ZONE */){var viewZoneId=e.target.detail.viewZoneId;if(viewZoneId===_this._viewZoneId){e.event.preventDefault();currentLineNumberOffset=_this._updateLightBulbPosition(_this._marginDomNode,e.event.browserEvent.y,lineHeight);showContextMenu(e.event.posx,e.event.posy+lineHeight);}}}));return _this;}inlineDiffMargin_createClass(InlineDiffMargin,[{key:"visibility",get:function get(){return this._visibility;},set:function set(_visibility){if(this._visibility!==_visibility){this._visibility=_visibility;if(_visibility){this._diffActions.style.visibility='visible';}else{this._diffActions.style.visibility='hidden';}}}},{key:"_updateLightBulbPosition",value:function _updateLightBulbPosition(marginDomNode,y,lineHeight){var _dom$getDomNodePagePo2=dom.getDomNodePagePosition(marginDomNode),top=_dom$getDomNodePagePo2.top;var offset=y-top;var lineNumberOffset=Math.floor(offset/lineHeight);var newTop=lineNumberOffset*lineHeight;this._diffActions.style.top="".concat(newTop,"px");if(this.diff.viewLineCounts){var acc=0;for(var i=0;i<this.diff.viewLineCounts.length;i++){acc+=this.diff.viewLineCounts[i];if(lineNumberOffset<acc){return i;}}}return lineNumberOffset;}}]);return InlineDiffMargin;}(lifecycle/* Disposable */.JT);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/clipboard/common/clipboardService.js
var clipboardService = __webpack_require__(24683);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/common/errors.js
var errors = __webpack_require__(32314);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/platform/progress/common/progress.js
var progress = __webpack_require__(81533);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/config/elementSizeObserver.js
var elementSizeObserver = __webpack_require__(35165);
// EXTERNAL MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/base/browser/ui/mouseCursor/mouseCursor.js
var mouseCursor = __webpack_require__(78366);
;// CONCATENATED MODULE: ../my-cli/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget.js
function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=diffEditorWidget_getPrototypeOf(object);if(object===null)break;}return object;}function diffEditorWidget_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)diffEditorWidget_setPrototypeOf(subClass,superClass);}function diffEditorWidget_setPrototypeOf(o,p){diffEditorWidget_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return diffEditorWidget_setPrototypeOf(o,p);}function diffEditorWidget_createSuper(Derived){var hasNativeReflectConstruct=diffEditorWidget_isNativeReflectConstruct();return function _createSuperInternal(){var Super=diffEditorWidget_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=diffEditorWidget_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return diffEditorWidget_possibleConstructorReturn(this,result);};}function diffEditorWidget_possibleConstructorReturn(self,call){if(call&&(diffEditorWidget_typeof(call)==="object"||typeof call==="function")){return call;}return diffEditorWidget_assertThisInitialized(self);}function diffEditorWidget_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function diffEditorWidget_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function diffEditorWidget_getPrototypeOf(o){diffEditorWidget_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return diffEditorWidget_getPrototypeOf(o);}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function diffEditorWidget_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function diffEditorWidget_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function diffEditorWidget_createClass(Constructor,protoProps,staticProps){if(protoProps)diffEditorWidget_defineProperties(Constructor.prototype,protoProps);if(staticProps)diffEditorWidget_defineProperties(Constructor,staticProps);return Constructor;}function diffEditorWidget_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){diffEditorWidget_typeof=function _typeof(obj){return typeof obj;};}else{diffEditorWidget_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return diffEditorWidget_typeof(obj);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var diffEditorWidget_decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect==="undefined"?"undefined":diffEditorWidget_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;}return c>3&&r&&Object.defineProperty(target,key,r),r;};var diffEditorWidget_param=undefined&&undefined.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex);};};var diffEditorWidget_a;var VisualEditorState=/*#__PURE__*/function(){function VisualEditorState(_contextMenuService,_clipboardService){diffEditorWidget_classCallCheck(this,VisualEditorState);this._contextMenuService=_contextMenuService;this._clipboardService=_clipboardService;this._zones=[];this._inlineDiffMargins=[];this._zonesMap={};this._decorations=[];}diffEditorWidget_createClass(VisualEditorState,[{key:"getForeignViewZones",value:function getForeignViewZones(allViewZones){var _this=this;return allViewZones.filter(function(z){return!_this._zonesMap[String(z.id)];});}},{key:"clean",value:function clean(editor){var _this2=this;// (1) View zones
if(this._zones.length>0){editor.changeViewZones(function(viewChangeAccessor){var _iterator=_createForOfIteratorHelper(_this2._zones),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var zoneId=_step.value;viewChangeAccessor.removeZone(zoneId);}}catch(err){_iterator.e(err);}finally{_iterator.f();}});}this._zones=[];this._zonesMap={};// (2) Model decorations
this._decorations=editor.deltaDecorations(this._decorations,[]);}},{key:"apply",value:function apply(editor,overviewRuler,newDecorations,restoreScrollState){var _this3=this;var scrollState=restoreScrollState?stableEditorScroll/* StableEditorScrollState.capture */.Z.capture(editor):null;// view zones
editor.changeViewZones(function(viewChangeAccessor){var _a;var _iterator2=_createForOfIteratorHelper(_this3._zones),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _zoneId=_step2.value;viewChangeAccessor.removeZone(_zoneId);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var _iterator3=_createForOfIteratorHelper(_this3._inlineDiffMargins),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var inlineDiffMargin=_step3.value;inlineDiffMargin.dispose();}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}_this3._zones=[];_this3._zonesMap={};_this3._inlineDiffMargins=[];for(var i=0,length=newDecorations.zones.length;i<length;i++){var viewZone=newDecorations.zones[i];viewZone.suppressMouseDown=true;var zoneId=viewChangeAccessor.addZone(viewZone);_this3._zones.push(zoneId);_this3._zonesMap[String(zoneId)]=true;if(newDecorations.zones[i].diff&&viewZone.marginDomNode){viewZone.suppressMouseDown=false;if(((_a=newDecorations.zones[i].diff)===null||_a===void 0?void 0:_a.originalModel.getValueLength())!==0){// do not contribute diff margin actions for newly created files
_this3._inlineDiffMargins.push(new InlineDiffMargin(zoneId,viewZone.marginDomNode,editor,newDecorations.zones[i].diff,_this3._contextMenuService,_this3._clipboardService));}}}});if(scrollState){scrollState.restore(editor);}// decorations
this._decorations=editor.deltaDecorations(this._decorations,newDecorations.decorations);// overview ruler
if(overviewRuler){overviewRuler.setZones(newDecorations.overviewZones);}}}]);return VisualEditorState;}();var DIFF_EDITOR_ID=0;var diffInsertIcon=(0,iconRegistry/* registerIcon */.q5)('diff-insert',codicons/* Codicon.add */.lA.add,nls/* localize */.N('diffInsertIcon','Line decoration for inserts in the diff editor.'));var diffRemoveIcon=(0,iconRegistry/* registerIcon */.q5)('diff-remove',codicons/* Codicon.remove */.lA.remove,nls/* localize */.N('diffRemoveIcon','Line decoration for removals in the diff editor.'));var ttPolicy=(diffEditorWidget_a=window.trustedTypes)===null||diffEditorWidget_a===void 0?void 0:diffEditorWidget_a.createPolicy('diffEditorWidget',{createHTML:function createHTML(value){return value;}});var DiffEditorWidget=/*#__PURE__*/function(_Disposable){diffEditorWidget_inherits(DiffEditorWidget,_Disposable);var _super=diffEditorWidget_createSuper(DiffEditorWidget);function DiffEditorWidget(domElement,options,codeEditorWidgetOptions,clipboardService,editorWorkerService,contextKeyService,instantiationService,codeEditorService,themeService,notificationService,contextMenuService,_editorProgressService){var _this4;diffEditorWidget_classCallCheck(this,DiffEditorWidget);_this4=_super.call(this);_this4._editorProgressService=_editorProgressService;_this4._onDidDispose=_this4._register(new common_event/* Emitter */.Q5());_this4.onDidDispose=_this4._onDidDispose.event;_this4._onDidUpdateDiff=_this4._register(new common_event/* Emitter */.Q5());_this4.onDidUpdateDiff=_this4._onDidUpdateDiff.event;_this4._onDidContentSizeChange=_this4._register(new common_event/* Emitter */.Q5());_this4._lastOriginalWarning=null;_this4._lastModifiedWarning=null;_this4._editorWorkerService=editorWorkerService;_this4._codeEditorService=codeEditorService;_this4._contextKeyService=_this4._register(contextKeyService.createScoped(domElement));_this4._instantiationService=instantiationService.createChild(new serviceCollection/* ServiceCollection */.y([contextkey/* IContextKeyService */.i6,_this4._contextKeyService]));_this4._contextKeyService.createKey('isInDiffEditor',true);_this4._themeService=themeService;_this4._notificationService=notificationService;_this4._id=++DIFF_EDITOR_ID;_this4._state=0/* Idle */;_this4._updatingDiffProgress=null;_this4._domElement=domElement;options=options||{};_this4._options=validateDiffEditorOptions(options,{enableSplitViewResizing:true,renderSideBySide:true,maxComputationTime:5000,maxFileSize:50,ignoreTrimWhitespace:true,renderIndicators:true,originalEditable:false,diffCodeLens:false,renderOverviewRuler:true,diffWordWrap:'inherit'});if(typeof options.isInEmbeddedEditor!=='undefined'){_this4._contextKeyService.createKey('isInEmbeddedDiffEditor',options.isInEmbeddedEditor);}else{_this4._contextKeyService.createKey('isInEmbeddedDiffEditor',false);}_this4._updateDecorationsRunner=_this4._register(new common_async/* RunOnceScheduler */.pY(function(){return _this4._updateDecorations();},0));_this4._containerDomElement=document.createElement('div');_this4._containerDomElement.className=DiffEditorWidget._getClassName(_this4._themeService.getColorTheme(),_this4._options.renderSideBySide);_this4._containerDomElement.style.position='relative';_this4._containerDomElement.style.height='100%';_this4._domElement.appendChild(_this4._containerDomElement);_this4._overviewViewportDomElement=(0,fastDomNode/* createFastDomNode */.X)(document.createElement('div'));_this4._overviewViewportDomElement.setClassName('diffViewport');_this4._overviewViewportDomElement.setPosition('absolute');_this4._overviewDomElement=document.createElement('div');_this4._overviewDomElement.className='diffOverview';_this4._overviewDomElement.style.position='absolute';_this4._overviewDomElement.appendChild(_this4._overviewViewportDomElement.domNode);_this4._register(dom.addStandardDisposableListener(_this4._overviewDomElement,'mousedown',function(e){_this4._modifiedEditor.delegateVerticalScrollbarMouseDown(e);}));if(_this4._options.renderOverviewRuler){_this4._containerDomElement.appendChild(_this4._overviewDomElement);}// Create left side
_this4._originalDomNode=document.createElement('div');_this4._originalDomNode.className='editor original';_this4._originalDomNode.style.position='absolute';_this4._originalDomNode.style.height='100%';_this4._containerDomElement.appendChild(_this4._originalDomNode);// Create right side
_this4._modifiedDomNode=document.createElement('div');_this4._modifiedDomNode.className='editor modified';_this4._modifiedDomNode.style.position='absolute';_this4._modifiedDomNode.style.height='100%';_this4._containerDomElement.appendChild(_this4._modifiedDomNode);_this4._beginUpdateDecorationsTimeout=-1;_this4._currentlyChangingViewZones=false;_this4._diffComputationToken=0;_this4._originalEditorState=new VisualEditorState(contextMenuService,clipboardService);_this4._modifiedEditorState=new VisualEditorState(contextMenuService,clipboardService);_this4._isVisible=true;_this4._isHandlingScrollEvent=false;_this4._elementSizeObserver=_this4._register(new elementSizeObserver/* ElementSizeObserver */.I(_this4._containerDomElement,options.dimension));_this4._register(_this4._elementSizeObserver.onDidChange(function(){return _this4._onDidContainerSizeChanged();}));if(options.automaticLayout){_this4._elementSizeObserver.startObserving();}_this4._diffComputationResult=null;_this4._originalEditor=_this4._createLeftHandSideEditor(options,codeEditorWidgetOptions.originalEditor||{});_this4._modifiedEditor=_this4._createRightHandSideEditor(options,codeEditorWidgetOptions.modifiedEditor||{});_this4._originalOverviewRuler=null;_this4._modifiedOverviewRuler=null;_this4._reviewPane=instantiationService.createInstance(DiffReview,diffEditorWidget_assertThisInitialized(_this4));_this4._containerDomElement.appendChild(_this4._reviewPane.domNode.domNode);_this4._containerDomElement.appendChild(_this4._reviewPane.shadow.domNode);_this4._containerDomElement.appendChild(_this4._reviewPane.actionBarContainer.domNode);if(_this4._options.renderSideBySide){_this4._setStrategy(new DiffEditorWidgetSideBySide(_this4._createDataSource(),_this4._options.enableSplitViewResizing));}else{_this4._setStrategy(new DiffEditorWidgetInline(_this4._createDataSource(),_this4._options.enableSplitViewResizing));}_this4._register(themeService.onDidColorThemeChange(function(t){if(_this4._strategy&&_this4._strategy.applyColors(t)){_this4._updateDecorationsRunner.schedule();}_this4._containerDomElement.className=DiffEditorWidget._getClassName(_this4._themeService.getColorTheme(),_this4._options.renderSideBySide);}));var contributions=editorExtensions/* EditorExtensionsRegistry.getDiffEditorContributions */.Uc.getDiffEditorContributions();var _iterator4=_createForOfIteratorHelper(contributions),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var desc=_step4.value;try{_this4._register(instantiationService.createInstance(desc.ctor,diffEditorWidget_assertThisInitialized(_this4)));}catch(err){(0,errors/* onUnexpectedError */.dL)(err);}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}_this4._codeEditorService.addDiffEditor(diffEditorWidget_assertThisInitialized(_this4));return _this4;}diffEditorWidget_createClass(DiffEditorWidget,[{key:"_setState",value:function _setState(newState){if(this._state===newState){return;}this._state=newState;if(this._updatingDiffProgress){this._updatingDiffProgress.done();this._updatingDiffProgress=null;}if(this._state===1/* ComputingDiff */){this._updatingDiffProgress=this._editorProgressService.show(true,1000);}}},{key:"diffReviewNext",value:function diffReviewNext(){this._reviewPane.next();}},{key:"diffReviewPrev",value:function diffReviewPrev(){this._reviewPane.prev();}},{key:"_recreateOverviewRulers",value:function _recreateOverviewRulers(){if(!this._options.renderOverviewRuler){return;}if(this._originalOverviewRuler){this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());this._originalOverviewRuler.dispose();}if(this._originalEditor.hasModel()){this._originalOverviewRuler=this._originalEditor.createOverviewRuler('original diffOverviewRuler');this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode());}if(this._modifiedOverviewRuler){this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());this._modifiedOverviewRuler.dispose();}if(this._modifiedEditor.hasModel()){this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler('modified diffOverviewRuler');this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode());}this._layoutOverviewRulers();}},{key:"_createLeftHandSideEditor",value:function _createLeftHandSideEditor(options,codeEditorWidgetOptions){var _this5=this;var editor=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(options),codeEditorWidgetOptions);this._register(editor.onDidScrollChange(function(e){if(_this5._isHandlingScrollEvent){return;}if(!e.scrollTopChanged&&!e.scrollLeftChanged&&!e.scrollHeightChanged){return;}_this5._isHandlingScrollEvent=true;_this5._modifiedEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop});_this5._isHandlingScrollEvent=false;_this5._layoutOverviewViewport();}));this._register(editor.onDidChangeViewZones(function(){_this5._onViewZonesChanged();}));this._register(editor.onDidChangeConfiguration(function(e){if(!editor.getModel()){return;}if(e.hasChanged(44/* fontInfo */)){_this5._updateDecorationsRunner.schedule();}if(e.hasChanged(132/* wrappingInfo */)){_this5._updateDecorationsRunner.cancel();_this5._updateDecorations();}}));this._register(editor.onDidChangeHiddenAreas(function(){_this5._updateDecorationsRunner.cancel();_this5._updateDecorations();}));this._register(editor.onDidChangeModelContent(function(){if(_this5._isVisible){_this5._beginUpdateDecorationsSoon();}}));var isInDiffLeftEditorKey=this._contextKeyService.createKey('isInDiffLeftEditor',editor.hasWidgetFocus());this._register(editor.onDidFocusEditorWidget(function(){return isInDiffLeftEditorKey.set(true);}));this._register(editor.onDidBlurEditorWidget(function(){return isInDiffLeftEditorKey.set(false);}));this._register(editor.onDidContentSizeChange(function(e){var width=_this5._originalEditor.getContentWidth()+_this5._modifiedEditor.getContentWidth()+DiffEditorWidget.ONE_OVERVIEW_WIDTH;var height=Math.max(_this5._modifiedEditor.getContentHeight(),_this5._originalEditor.getContentHeight());_this5._onDidContentSizeChange.fire({contentHeight:height,contentWidth:width,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged});}));return editor;}},{key:"_createRightHandSideEditor",value:function _createRightHandSideEditor(options,codeEditorWidgetOptions){var _this6=this;var editor=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(options),codeEditorWidgetOptions);this._register(editor.onDidScrollChange(function(e){if(_this6._isHandlingScrollEvent){return;}if(!e.scrollTopChanged&&!e.scrollLeftChanged&&!e.scrollHeightChanged){return;}_this6._isHandlingScrollEvent=true;_this6._originalEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop});_this6._isHandlingScrollEvent=false;_this6._layoutOverviewViewport();}));this._register(editor.onDidChangeViewZones(function(){_this6._onViewZonesChanged();}));this._register(editor.onDidChangeConfiguration(function(e){if(!editor.getModel()){return;}if(e.hasChanged(44/* fontInfo */)){_this6._updateDecorationsRunner.schedule();}if(e.hasChanged(132/* wrappingInfo */)){_this6._updateDecorationsRunner.cancel();_this6._updateDecorations();}}));this._register(editor.onDidChangeHiddenAreas(function(){_this6._updateDecorationsRunner.cancel();_this6._updateDecorations();}));this._register(editor.onDidChangeModelContent(function(){if(_this6._isVisible){_this6._beginUpdateDecorationsSoon();}}));this._register(editor.onDidChangeModelOptions(function(e){if(e.tabSize){_this6._updateDecorationsRunner.schedule();}}));var isInDiffRightEditorKey=this._contextKeyService.createKey('isInDiffRightEditor',editor.hasWidgetFocus());this._register(editor.onDidFocusEditorWidget(function(){return isInDiffRightEditorKey.set(true);}));this._register(editor.onDidBlurEditorWidget(function(){return isInDiffRightEditorKey.set(false);}));this._register(editor.onDidContentSizeChange(function(e){var width=_this6._originalEditor.getContentWidth()+_this6._modifiedEditor.getContentWidth()+DiffEditorWidget.ONE_OVERVIEW_WIDTH;var height=Math.max(_this6._modifiedEditor.getContentHeight(),_this6._originalEditor.getContentHeight());_this6._onDidContentSizeChange.fire({contentHeight:height,contentWidth:width,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged});}));return editor;}},{key:"_createInnerEditor",value:function _createInnerEditor(instantiationService,container,options,editorWidgetOptions){return instantiationService.createInstance(codeEditorWidget/* CodeEditorWidget */.Gm,container,options,editorWidgetOptions);}},{key:"dispose",value:function dispose(){this._codeEditorService.removeDiffEditor(this);if(this._beginUpdateDecorationsTimeout!==-1){window.clearTimeout(this._beginUpdateDecorationsTimeout);this._beginUpdateDecorationsTimeout=-1;}this._cleanViewZonesAndDecorations();if(this._originalOverviewRuler){this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());this._originalOverviewRuler.dispose();}if(this._modifiedOverviewRuler){this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());this._modifiedOverviewRuler.dispose();}this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode);if(this._options.renderOverviewRuler){this._containerDomElement.removeChild(this._overviewDomElement);}this._containerDomElement.removeChild(this._originalDomNode);this._originalEditor.dispose();this._containerDomElement.removeChild(this._modifiedDomNode);this._modifiedEditor.dispose();this._strategy.dispose();this._containerDomElement.removeChild(this._reviewPane.domNode.domNode);this._containerDomElement.removeChild(this._reviewPane.shadow.domNode);this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode);this._reviewPane.dispose();this._domElement.removeChild(this._containerDomElement);this._onDidDispose.fire();_get(diffEditorWidget_getPrototypeOf(DiffEditorWidget.prototype),"dispose",this).call(this);}//------------ begin IDiffEditor methods
},{key:"getId",value:function getId(){return this.getEditorType()+':'+this._id;}},{key:"getEditorType",value:function getEditorType(){return editorCommon/* EditorType.IDiffEditor */.g.IDiffEditor;}},{key:"getLineChanges",value:function getLineChanges(){if(!this._diffComputationResult){return null;}return this._diffComputationResult.changes;}},{key:"getOriginalEditor",value:function getOriginalEditor(){return this._originalEditor;}},{key:"getModifiedEditor",value:function getModifiedEditor(){return this._modifiedEditor;}},{key:"updateOptions",value:function updateOptions(_newOptions){var newOptions=validateDiffEditorOptions(_newOptions,this._options);var changed=changedDiffEditorOptions(this._options,newOptions);this._options=newOptions;var beginUpdateDecorations=changed.ignoreTrimWhitespace||changed.renderIndicators;var beginUpdateDecorationsSoon=this._isVisible&&(changed.maxComputationTime||changed.maxFileSize);if(beginUpdateDecorations){this._beginUpdateDecorations();}else if(beginUpdateDecorationsSoon){this._beginUpdateDecorationsSoon();}this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(_newOptions));this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(_newOptions));// enableSplitViewResizing
this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing);// renderSideBySide
if(changed.renderSideBySide){if(this._options.renderSideBySide){this._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(),this._options.enableSplitViewResizing));}else{this._setStrategy(new DiffEditorWidgetInline(this._createDataSource(),this._options.enableSplitViewResizing));}// Update class name
this._containerDomElement.className=DiffEditorWidget._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide);}// renderOverviewRuler
if(changed.renderOverviewRuler){if(this._options.renderOverviewRuler){this._containerDomElement.appendChild(this._overviewDomElement);}else{this._containerDomElement.removeChild(this._overviewDomElement);}}}},{key:"getModel",value:function getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()};}},{key:"setModel",value:function setModel(model){// Guard us against partial null model
if(model&&(!model.original||!model.modified)){throw new Error(!model.original?'DiffEditorWidget.setModel: Original model is null':'DiffEditorWidget.setModel: Modified model is null');}// Remove all view zones & decorations
this._cleanViewZonesAndDecorations();// Update code editor models
this._originalEditor.setModel(model?model.original:null);this._modifiedEditor.setModel(model?model.modified:null);this._updateDecorationsRunner.cancel();// this.originalEditor.onDidChangeModelOptions
if(model){this._originalEditor.setScrollTop(0);this._modifiedEditor.setScrollTop(0);}// Disable any diff computations that will come in
this._diffComputationResult=null;this._diffComputationToken++;this._setState(0/* Idle */);if(model){this._recreateOverviewRulers();// Begin comparing
this._beginUpdateDecorations();}this._layoutOverviewViewport();}},{key:"getContainerDomNode",value:function getContainerDomNode(){return this._domElement;}},{key:"getVisibleColumnFromPosition",value:function getVisibleColumnFromPosition(position){return this._modifiedEditor.getVisibleColumnFromPosition(position);}},{key:"getPosition",value:function getPosition(){return this._modifiedEditor.getPosition();}},{key:"setPosition",value:function setPosition(position){this._modifiedEditor.setPosition(position);}},{key:"revealLine",value:function revealLine(lineNumber)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._modifiedEditor.revealLine(lineNumber,scrollType);}},{key:"revealLineInCenter",value:function revealLineInCenter(lineNumber)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._modifiedEditor.revealLineInCenter(lineNumber,scrollType);}},{key:"revealLineInCenterIfOutsideViewport",value:function revealLineInCenterIfOutsideViewport(lineNumber)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._modifiedEditor.revealLineInCenterIfOutsideViewport(lineNumber,scrollType);}},{key:"revealLineNearTop",value:function revealLineNearTop(lineNumber)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._modifiedEditor.revealLineNearTop(lineNumber,scrollType);}},{key:"revealPosition",value:function revealPosition(position)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._modifiedEditor.revealPosition(position,scrollType);}},{key:"revealPositionInCenter",value:function revealPositionInCenter(position)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._modifiedEditor.revealPositionInCenter(position,scrollType);}},{key:"revealPositionInCenterIfOutsideViewport",value:function revealPositionInCenterIfOutsideViewport(position)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._modifiedEditor.revealPositionInCenterIfOutsideViewport(position,scrollType);}},{key:"revealPositionNearTop",value:function revealPositionNearTop(position)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._modifiedEditor.revealPositionNearTop(position,scrollType);}},{key:"getSelection",value:function getSelection(){return this._modifiedEditor.getSelection();}},{key:"getSelections",value:function getSelections(){return this._modifiedEditor.getSelections();}},{key:"setSelection",value:function setSelection(something){this._modifiedEditor.setSelection(something);}},{key:"setSelections",value:function setSelections(ranges){this._modifiedEditor.setSelections(ranges);}},{key:"revealLines",value:function revealLines(startLineNumber,endLineNumber)/* Smooth */{var scrollType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this._modifiedEditor.revealLines(startLineNumber,endLineNumber,scrollType);}},{key:"revealLinesInCenter",value:function revealLinesInCenter(startLineNumber,endLineNumber)/* Smooth */{var scrollType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this._modifiedEditor.revealLinesInCenter(startLineNumber,endLineNumber,scrollType);}},{key:"revealLinesInCenterIfOutsideViewport",value:function revealLinesInCenterIfOutsideViewport(startLineNumber,endLineNumber)/* Smooth */{var scrollType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this._modifiedEditor.revealLinesInCenterIfOutsideViewport(startLineNumber,endLineNumber,scrollType);}},{key:"revealLinesNearTop",value:function revealLinesNearTop(startLineNumber,endLineNumber)/* Smooth */{var scrollType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this._modifiedEditor.revealLinesNearTop(startLineNumber,endLineNumber,scrollType);}},{key:"revealRange",value:function revealRange(range){var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var revealVerticalInCenter=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var revealHorizontal=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;this._modifiedEditor.revealRange(range,scrollType,revealVerticalInCenter,revealHorizontal);}},{key:"revealRangeInCenter",value:function revealRangeInCenter(range)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._modifiedEditor.revealRangeInCenter(range,scrollType);}},{key:"revealRangeInCenterIfOutsideViewport",value:function revealRangeInCenterIfOutsideViewport(range)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._modifiedEditor.revealRangeInCenterIfOutsideViewport(range,scrollType);}},{key:"revealRangeNearTop",value:function revealRangeNearTop(range)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._modifiedEditor.revealRangeNearTop(range,scrollType);}},{key:"revealRangeNearTopIfOutsideViewport",value:function revealRangeNearTopIfOutsideViewport(range)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._modifiedEditor.revealRangeNearTopIfOutsideViewport(range,scrollType);}},{key:"revealRangeAtTop",value:function revealRangeAtTop(range)/* Smooth */{var scrollType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this._modifiedEditor.revealRangeAtTop(range,scrollType);}},{key:"getSupportedActions",value:function getSupportedActions(){return this._modifiedEditor.getSupportedActions();}},{key:"saveViewState",value:function saveViewState(){var originalViewState=this._originalEditor.saveViewState();var modifiedViewState=this._modifiedEditor.saveViewState();return{original:originalViewState,modified:modifiedViewState};}},{key:"restoreViewState",value:function restoreViewState(s){if(s&&s.original&&s.modified){var diffEditorState=s;this._originalEditor.restoreViewState(diffEditorState.original);this._modifiedEditor.restoreViewState(diffEditorState.modified);}}},{key:"layout",value:function layout(dimension){this._elementSizeObserver.observe(dimension);}},{key:"focus",value:function focus(){this._modifiedEditor.focus();}},{key:"hasTextFocus",value:function hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus();}},{key:"trigger",value:function trigger(source,handlerId,payload){this._modifiedEditor.trigger(source,handlerId,payload);}},{key:"changeDecorations",value:function changeDecorations(callback){return this._modifiedEditor.changeDecorations(callback);}//------------ end IDiffEditor methods
//------------ begin layouting methods
},{key:"_onDidContainerSizeChanged",value:function _onDidContainerSizeChanged(){this._doLayout();}},{key:"_getReviewHeight",value:function _getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0;}},{key:"_layoutOverviewRulers",value:function _layoutOverviewRulers(){if(!this._options.renderOverviewRuler){return;}if(!this._originalOverviewRuler||!this._modifiedOverviewRuler){return;}var height=this._elementSizeObserver.getHeight();var reviewHeight=this._getReviewHeight();var freeSpace=DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH-2*DiffEditorWidget.ONE_OVERVIEW_WIDTH;var layoutInfo=this._modifiedEditor.getLayoutInfo();if(layoutInfo){this._originalOverviewRuler.setLayout({top:0,width:DiffEditorWidget.ONE_OVERVIEW_WIDTH,right:freeSpace+DiffEditorWidget.ONE_OVERVIEW_WIDTH,height:height-reviewHeight});this._modifiedOverviewRuler.setLayout({top:0,right:0,width:DiffEditorWidget.ONE_OVERVIEW_WIDTH,height:height-reviewHeight});}}//------------ end layouting methods
},{key:"_onViewZonesChanged",value:function _onViewZonesChanged(){if(this._currentlyChangingViewZones){return;}this._updateDecorationsRunner.schedule();}},{key:"_beginUpdateDecorationsSoon",value:function _beginUpdateDecorationsSoon(){var _this7=this;// Clear previous timeout if necessary
if(this._beginUpdateDecorationsTimeout!==-1){window.clearTimeout(this._beginUpdateDecorationsTimeout);this._beginUpdateDecorationsTimeout=-1;}this._beginUpdateDecorationsTimeout=window.setTimeout(function(){return _this7._beginUpdateDecorations();},DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY);}},{key:"_beginUpdateDecorations",value:function _beginUpdateDecorations(){var _this8=this;this._beginUpdateDecorationsTimeout=-1;var currentOriginalModel=this._originalEditor.getModel();var currentModifiedModel=this._modifiedEditor.getModel();if(!currentOriginalModel||!currentModifiedModel){return;}// Prevent old diff requests to come if a new request has been initiated
// The best method would be to call cancel on the Promise, but this is not
// yet supported, so using tokens for now.
this._diffComputationToken++;var currentToken=this._diffComputationToken;var diffLimit=this._options.maxFileSize*1024*1024;// MB
var canSyncModelForDiff=function canSyncModelForDiff(model){var bufferTextLength=model.getValueLength();return diffLimit===0||bufferTextLength<=diffLimit;};if(!canSyncModelForDiff(currentOriginalModel)||!canSyncModelForDiff(currentModifiedModel)){if(!DiffEditorWidget._equals(currentOriginalModel.uri,this._lastOriginalWarning)||!DiffEditorWidget._equals(currentModifiedModel.uri,this._lastModifiedWarning)){this._lastOriginalWarning=currentOriginalModel.uri;this._lastModifiedWarning=currentModifiedModel.uri;this._notificationService.warn(nls/* localize */.N("diff.tooLarge","Cannot compare files because one file is too large."));}return;}this._setState(1/* ComputingDiff */);this._editorWorkerService.computeDiff(currentOriginalModel.uri,currentModifiedModel.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(function(result){if(currentToken===_this8._diffComputationToken&&currentOriginalModel===_this8._originalEditor.getModel()&&currentModifiedModel===_this8._modifiedEditor.getModel()){_this8._setState(2/* DiffComputed */);_this8._diffComputationResult=result;_this8._updateDecorationsRunner.schedule();_this8._onDidUpdateDiff.fire();}},function(error){if(currentToken===_this8._diffComputationToken&&currentOriginalModel===_this8._originalEditor.getModel()&&currentModifiedModel===_this8._modifiedEditor.getModel()){_this8._setState(2/* DiffComputed */);_this8._diffComputationResult=null;_this8._updateDecorationsRunner.schedule();}});}},{key:"_cleanViewZonesAndDecorations",value:function _cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor);this._modifiedEditorState.clean(this._modifiedEditor);}},{key:"_updateDecorations",value:function _updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel()){return;}var lineChanges=this._diffComputationResult?this._diffComputationResult.changes:[];var foreignOriginal=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces());var foreignModified=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces());var diffDecorations=this._strategy.getEditorsDiffDecorations(lineChanges,this._options.ignoreTrimWhitespace,this._options.renderIndicators,foreignOriginal,foreignModified);try{this._currentlyChangingViewZones=true;this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,diffDecorations.original,false);this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,diffDecorations.modified,true);}finally{this._currentlyChangingViewZones=false;}}},{key:"_adjustOptionsForSubEditor",value:function _adjustOptionsForSubEditor(options){var clonedOptions=_extends({},options);clonedOptions.inDiffEditor=true;clonedOptions.automaticLayout=false;// Clone scrollbar options before changing them
clonedOptions.scrollbar=_extends({},clonedOptions.scrollbar||{});clonedOptions.scrollbar.vertical='visible';clonedOptions.folding=false;clonedOptions.codeLens=this._options.diffCodeLens;clonedOptions.fixedOverflowWidgets=true;// clonedOptions.lineDecorationsWidth = '2ch';
// Clone minimap options before changing them
clonedOptions.minimap=_extends({},clonedOptions.minimap||{});clonedOptions.minimap.enabled=false;return clonedOptions;}},{key:"_adjustOptionsForLeftHandSide",value:function _adjustOptionsForLeftHandSide(options){var result=this._adjustOptionsForSubEditor(options);if(!this._options.renderSideBySide){// never wrap hidden editor
result.wordWrapOverride1='off';}else{result.wordWrapOverride1=this._options.diffWordWrap;}if(options.originalAriaLabel){result.ariaLabel=options.originalAriaLabel;}result.readOnly=!this._options.originalEditable;result.extraEditorClassName='original-in-monaco-diff-editor';return _extends(_extends({},result),{dimension:{height:0,width:0}});}},{key:"_adjustOptionsForRightHandSide",value:function _adjustOptionsForRightHandSide(options){var result=this._adjustOptionsForSubEditor(options);if(options.modifiedAriaLabel){result.ariaLabel=options.modifiedAriaLabel;}result.wordWrapOverride1=this._options.diffWordWrap;result.revealHorizontalRightPadding=editorOptions/* EditorOptions.revealHorizontalRightPadding.defaultValue */.BH.revealHorizontalRightPadding.defaultValue+DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;result.scrollbar.verticalHasArrows=false;result.extraEditorClassName='modified-in-monaco-diff-editor';return _extends(_extends({},result),{dimension:{height:0,width:0}});}},{key:"doLayout",value:function doLayout(){this._elementSizeObserver.observe();this._doLayout();}},{key:"_doLayout",value:function _doLayout(){var width=this._elementSizeObserver.getWidth();var height=this._elementSizeObserver.getHeight();var reviewHeight=this._getReviewHeight();var splitPoint=this._strategy.layout();this._originalDomNode.style.width=splitPoint+'px';this._originalDomNode.style.left='0px';this._modifiedDomNode.style.width=width-splitPoint+'px';this._modifiedDomNode.style.left=splitPoint+'px';this._overviewDomElement.style.top='0px';this._overviewDomElement.style.height=height-reviewHeight+'px';this._overviewDomElement.style.width=DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH+'px';this._overviewDomElement.style.left=width-DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH+'px';this._overviewViewportDomElement.setWidth(DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH);this._overviewViewportDomElement.setHeight(30);this._originalEditor.layout({width:splitPoint,height:height-reviewHeight});this._modifiedEditor.layout({width:width-splitPoint-(this._options.renderOverviewRuler?DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:height-reviewHeight});if(this._originalOverviewRuler||this._modifiedOverviewRuler){this._layoutOverviewRulers();}this._reviewPane.layout(height-reviewHeight,width,reviewHeight);this._layoutOverviewViewport();}},{key:"_layoutOverviewViewport",value:function _layoutOverviewViewport(){var layout=this._computeOverviewViewport();if(!layout){this._overviewViewportDomElement.setTop(0);this._overviewViewportDomElement.setHeight(0);}else{this._overviewViewportDomElement.setTop(layout.top);this._overviewViewportDomElement.setHeight(layout.height);}}},{key:"_computeOverviewViewport",value:function _computeOverviewViewport(){var layoutInfo=this._modifiedEditor.getLayoutInfo();if(!layoutInfo){return null;}var scrollTop=this._modifiedEditor.getScrollTop();var scrollHeight=this._modifiedEditor.getScrollHeight();var computedAvailableSize=Math.max(0,layoutInfo.height);var computedRepresentableSize=Math.max(0,computedAvailableSize-2*0);var computedRatio=scrollHeight>0?computedRepresentableSize/scrollHeight:0;var computedSliderSize=Math.max(0,Math.floor(layoutInfo.height*computedRatio));var computedSliderPosition=Math.floor(scrollTop*computedRatio);return{height:computedSliderSize,top:computedSliderPosition};}},{key:"_createDataSource",value:function _createDataSource(){var _this9=this;return{getWidth:function getWidth(){return _this9._elementSizeObserver.getWidth();},getHeight:function getHeight(){return _this9._elementSizeObserver.getHeight()-_this9._getReviewHeight();},getOptions:function getOptions(){return{renderOverviewRuler:_this9._options.renderOverviewRuler};},getContainerDomNode:function getContainerDomNode(){return _this9._containerDomElement;},relayoutEditors:function relayoutEditors(){_this9._doLayout();},getOriginalEditor:function getOriginalEditor(){return _this9._originalEditor;},getModifiedEditor:function getModifiedEditor(){return _this9._modifiedEditor;}};}},{key:"_setStrategy",value:function _setStrategy(newStrategy){if(this._strategy){this._strategy.dispose();}this._strategy=newStrategy;newStrategy.applyColors(this._themeService.getColorTheme());if(this._diffComputationResult){this._updateDecorations();}// Just do a layout, the strategy might need it
this._doLayout();}},{key:"_getLineChangeAtOrBeforeLineNumber",value:function _getLineChangeAtOrBeforeLineNumber(lineNumber,startLineNumberExtractor){var lineChanges=this._diffComputationResult?this._diffComputationResult.changes:[];if(lineChanges.length===0||lineNumber<startLineNumberExtractor(lineChanges[0])){// There are no changes or `lineNumber` is before the first change
return null;}var min=0;var max=lineChanges.length-1;while(min<max){var mid=Math.floor((min+max)/2);var midStart=startLineNumberExtractor(lineChanges[mid]);var midEnd=mid+1<=max?startLineNumberExtractor(lineChanges[mid+1]):1073741824/* MAX_SAFE_SMALL_INTEGER */;if(lineNumber<midStart){max=mid-1;}else if(lineNumber>=midEnd){min=mid+1;}else{// HIT!
min=mid;max=mid;}}return lineChanges[min];}},{key:"_getEquivalentLineForOriginalLineNumber",value:function _getEquivalentLineForOriginalLineNumber(lineNumber){var lineChange=this._getLineChangeAtOrBeforeLineNumber(lineNumber,function(lineChange){return lineChange.originalStartLineNumber;});if(!lineChange){return lineNumber;}var originalEquivalentLineNumber=lineChange.originalStartLineNumber+(lineChange.originalEndLineNumber>0?-1:0);var modifiedEquivalentLineNumber=lineChange.modifiedStartLineNumber+(lineChange.modifiedEndLineNumber>0?-1:0);var lineChangeOriginalLength=lineChange.originalEndLineNumber>0?lineChange.originalEndLineNumber-lineChange.originalStartLineNumber+1:0;var lineChangeModifiedLength=lineChange.modifiedEndLineNumber>0?lineChange.modifiedEndLineNumber-lineChange.modifiedStartLineNumber+1:0;var delta=lineNumber-originalEquivalentLineNumber;if(delta<=lineChangeOriginalLength){return modifiedEquivalentLineNumber+Math.min(delta,lineChangeModifiedLength);}return modifiedEquivalentLineNumber+lineChangeModifiedLength-lineChangeOriginalLength+delta;}},{key:"_getEquivalentLineForModifiedLineNumber",value:function _getEquivalentLineForModifiedLineNumber(lineNumber){var lineChange=this._getLineChangeAtOrBeforeLineNumber(lineNumber,function(lineChange){return lineChange.modifiedStartLineNumber;});if(!lineChange){return lineNumber;}var originalEquivalentLineNumber=lineChange.originalStartLineNumber+(lineChange.originalEndLineNumber>0?-1:0);var modifiedEquivalentLineNumber=lineChange.modifiedStartLineNumber+(lineChange.modifiedEndLineNumber>0?-1:0);var lineChangeOriginalLength=lineChange.originalEndLineNumber>0?lineChange.originalEndLineNumber-lineChange.originalStartLineNumber+1:0;var lineChangeModifiedLength=lineChange.modifiedEndLineNumber>0?lineChange.modifiedEndLineNumber-lineChange.modifiedStartLineNumber+1:0;var delta=lineNumber-modifiedEquivalentLineNumber;if(delta<=lineChangeModifiedLength){return originalEquivalentLineNumber+Math.min(delta,lineChangeOriginalLength);}return originalEquivalentLineNumber+lineChangeOriginalLength-lineChangeModifiedLength+delta;}},{key:"getDiffLineInformationForOriginal",value:function getDiffLineInformationForOriginal(lineNumber){if(!this._diffComputationResult){// Cannot answer that which I don't know
return null;}return{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(lineNumber)};}},{key:"getDiffLineInformationForModified",value:function getDiffLineInformationForModified(lineNumber){if(!this._diffComputationResult){// Cannot answer that which I don't know
return null;}return{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(lineNumber)};}}],[{key:"_getClassName",value:function _getClassName(theme,renderSideBySide){var result='monaco-diff-editor monaco-editor-background ';if(renderSideBySide){result+='side-by-side ';}result+=(0,themeService/* getThemeTypeSelector */.m6)(theme.type);return result;}},{key:"_equals",value:function _equals(a,b){if(!a&&!b){return true;}if(!a||!b){return false;}return a.toString()===b.toString();}}]);return DiffEditorWidget;}(lifecycle/* Disposable */.JT);DiffEditorWidget.ONE_OVERVIEW_WIDTH=15;DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH=30;DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY=200;// ms
DiffEditorWidget=diffEditorWidget_decorate([diffEditorWidget_param(3,clipboardService/* IClipboardService */.p),diffEditorWidget_param(4,editorWorker/* IEditorWorkerService */.p),diffEditorWidget_param(5,contextkey/* IContextKeyService */.i6),diffEditorWidget_param(6,instantiation/* IInstantiationService */.TG),diffEditorWidget_param(7,services_codeEditorService/* ICodeEditorService */.$),diffEditorWidget_param(8,themeService/* IThemeService */.XE),diffEditorWidget_param(9,notification/* INotificationService */.lT),diffEditorWidget_param(10,contextView/* IContextMenuService */.i),diffEditorWidget_param(11,progress/* IEditorProgressService */.ek)],DiffEditorWidget);var DiffEditorWidgetStyle=/*#__PURE__*/function(_Disposable2){diffEditorWidget_inherits(DiffEditorWidgetStyle,_Disposable2);var _super2=diffEditorWidget_createSuper(DiffEditorWidgetStyle);function DiffEditorWidgetStyle(dataSource){var _this10;diffEditorWidget_classCallCheck(this,DiffEditorWidgetStyle);_this10=_super2.call(this);_this10._dataSource=dataSource;_this10._insertColor=null;_this10._removeColor=null;return _this10;}diffEditorWidget_createClass(DiffEditorWidgetStyle,[{key:"applyColors",value:function applyColors(theme){var newInsertColor=(theme.getColor(colorRegistry/* diffInserted */.ypS)||colorRegistry/* defaultInsertColor */.CzK).transparent(2);var newRemoveColor=(theme.getColor(colorRegistry/* diffRemoved */.P4M)||colorRegistry/* defaultRemoveColor */.keg).transparent(2);var hasChanges=!newInsertColor.equals(this._insertColor)||!newRemoveColor.equals(this._removeColor);this._insertColor=newInsertColor;this._removeColor=newRemoveColor;return hasChanges;}},{key:"getEditorsDiffDecorations",value:function getEditorsDiffDecorations(lineChanges,ignoreTrimWhitespace,renderIndicators,originalWhitespaces,modifiedWhitespaces){// Get view zones
modifiedWhitespaces=modifiedWhitespaces.sort(function(a,b){return a.afterLineNumber-b.afterLineNumber;});originalWhitespaces=originalWhitespaces.sort(function(a,b){return a.afterLineNumber-b.afterLineNumber;});var zones=this._getViewZones(lineChanges,originalWhitespaces,modifiedWhitespaces,renderIndicators);// Get decorations & overview ruler zones
var originalDecorations=this._getOriginalEditorDecorations(lineChanges,ignoreTrimWhitespace,renderIndicators);var modifiedDecorations=this._getModifiedEditorDecorations(lineChanges,ignoreTrimWhitespace,renderIndicators);return{original:{decorations:originalDecorations.decorations,overviewZones:originalDecorations.overviewZones,zones:zones.original},modified:{decorations:modifiedDecorations.decorations,overviewZones:modifiedDecorations.overviewZones,zones:zones.modified}};}}]);return DiffEditorWidgetStyle;}(lifecycle/* Disposable */.JT);var ForeignViewZonesIterator=/*#__PURE__*/function(){function ForeignViewZonesIterator(source){diffEditorWidget_classCallCheck(this,ForeignViewZonesIterator);this._source=source;this._index=-1;this.current=null;this.advance();}diffEditorWidget_createClass(ForeignViewZonesIterator,[{key:"advance",value:function advance(){this._index++;if(this._index<this._source.length){this.current=this._source[this._index];}else{this.current=null;}}}]);return ForeignViewZonesIterator;}();var ViewZonesComputer=/*#__PURE__*/function(){function ViewZonesComputer(_lineChanges,_originalForeignVZ,_modifiedForeignVZ,_originalEditor,_modifiedEditor){diffEditorWidget_classCallCheck(this,ViewZonesComputer);this._lineChanges=_lineChanges;this._originalForeignVZ=_originalForeignVZ;this._modifiedForeignVZ=_modifiedForeignVZ;this._originalEditor=_originalEditor;this._modifiedEditor=_modifiedEditor;}diffEditorWidget_createClass(ViewZonesComputer,[{key:"getViewZones",value:function getViewZones(){var originalLineHeight=this._originalEditor.getOption(59/* lineHeight */);var modifiedLineHeight=this._modifiedEditor.getOption(59/* lineHeight */);var originalHasWrapping=this._originalEditor.getOption(132/* wrappingInfo */).wrappingColumn!==-1;var modifiedHasWrapping=this._modifiedEditor.getOption(132/* wrappingInfo */).wrappingColumn!==-1;var hasWrapping=originalHasWrapping||modifiedHasWrapping;var originalModel=this._originalEditor.getModel();var originalCoordinatesConverter=this._originalEditor._getViewModel().coordinatesConverter;var modifiedCoordinatesConverter=this._modifiedEditor._getViewModel().coordinatesConverter;var result={original:[],modified:[]};var lineChangeModifiedLength=0;var lineChangeOriginalLength=0;var originalEquivalentLineNumber=0;var modifiedEquivalentLineNumber=0;var originalEndEquivalentLineNumber=0;var modifiedEndEquivalentLineNumber=0;var sortMyViewZones=function sortMyViewZones(a,b){return a.afterLineNumber-b.afterLineNumber;};var addAndCombineIfPossible=function addAndCombineIfPossible(destination,item){if(item.domNode===null&&destination.length>0){var lastItem=destination[destination.length-1];if(lastItem.afterLineNumber===item.afterLineNumber&&lastItem.domNode===null){lastItem.heightInLines+=item.heightInLines;return;}}destination.push(item);};var modifiedForeignVZ=new ForeignViewZonesIterator(this._modifiedForeignVZ);var originalForeignVZ=new ForeignViewZonesIterator(this._originalForeignVZ);var lastOriginalLineNumber=1;var lastModifiedLineNumber=1;// In order to include foreign view zones after the last line change, the for loop will iterate once more after the end of the `lineChanges` array
for(var i=0,length=this._lineChanges.length;i<=length;i++){var lineChange=i<length?this._lineChanges[i]:null;if(lineChange!==null){originalEquivalentLineNumber=lineChange.originalStartLineNumber+(lineChange.originalEndLineNumber>0?-1:0);modifiedEquivalentLineNumber=lineChange.modifiedStartLineNumber+(lineChange.modifiedEndLineNumber>0?-1:0);lineChangeOriginalLength=lineChange.originalEndLineNumber>0?ViewZonesComputer._getViewLineCount(this._originalEditor,lineChange.originalStartLineNumber,lineChange.originalEndLineNumber):0;lineChangeModifiedLength=lineChange.modifiedEndLineNumber>0?ViewZonesComputer._getViewLineCount(this._modifiedEditor,lineChange.modifiedStartLineNumber,lineChange.modifiedEndLineNumber):0;originalEndEquivalentLineNumber=Math.max(lineChange.originalStartLineNumber,lineChange.originalEndLineNumber);modifiedEndEquivalentLineNumber=Math.max(lineChange.modifiedStartLineNumber,lineChange.modifiedEndLineNumber);}else{// Increase to very large value to get the producing tests of foreign view zones running
originalEquivalentLineNumber+=10000000+lineChangeOriginalLength;modifiedEquivalentLineNumber+=10000000+lineChangeModifiedLength;originalEndEquivalentLineNumber=originalEquivalentLineNumber;modifiedEndEquivalentLineNumber=modifiedEquivalentLineNumber;}// Each step produces view zones, and after producing them, we try to cancel them out, to avoid empty-empty view zone cases
var stepOriginal=[];var stepModified=[];// ---------------------------- PRODUCE VIEW ZONES
// [PRODUCE] View zones due to line mapping differences (equal lines but wrapped differently)
if(hasWrapping){var count=void 0;if(lineChange){if(lineChange.originalEndLineNumber>0){count=lineChange.originalStartLineNumber-lastOriginalLineNumber;}else{count=lineChange.modifiedStartLineNumber-lastModifiedLineNumber;}}else{count=originalModel.getLineCount()-lastOriginalLineNumber;}for(var _i=0;_i<count;_i++){var originalLineNumber=lastOriginalLineNumber+_i;var modifiedLineNumber=lastModifiedLineNumber+_i;var originalViewLineCount=originalCoordinatesConverter.getModelLineViewLineCount(originalLineNumber);var modifiedViewLineCount=modifiedCoordinatesConverter.getModelLineViewLineCount(modifiedLineNumber);if(originalViewLineCount<modifiedViewLineCount){stepOriginal.push({afterLineNumber:originalLineNumber,heightInLines:modifiedViewLineCount-originalViewLineCount,domNode:null,marginDomNode:null});}else if(originalViewLineCount>modifiedViewLineCount){stepModified.push({afterLineNumber:modifiedLineNumber,heightInLines:originalViewLineCount-modifiedViewLineCount,domNode:null,marginDomNode:null});}}if(lineChange){lastOriginalLineNumber=(lineChange.originalEndLineNumber>0?lineChange.originalEndLineNumber:lineChange.originalStartLineNumber)+1;lastModifiedLineNumber=(lineChange.modifiedEndLineNumber>0?lineChange.modifiedEndLineNumber:lineChange.modifiedStartLineNumber)+1;}}// [PRODUCE] View zone(s) in original-side due to foreign view zone(s) in modified-side
while(modifiedForeignVZ.current&&modifiedForeignVZ.current.afterLineNumber<=modifiedEndEquivalentLineNumber){var viewZoneLineNumber=void 0;if(modifiedForeignVZ.current.afterLineNumber<=modifiedEquivalentLineNumber){viewZoneLineNumber=originalEquivalentLineNumber-modifiedEquivalentLineNumber+modifiedForeignVZ.current.afterLineNumber;}else{viewZoneLineNumber=originalEndEquivalentLineNumber;}var marginDomNode=null;if(lineChange&&lineChange.modifiedStartLineNumber<=modifiedForeignVZ.current.afterLineNumber&&modifiedForeignVZ.current.afterLineNumber<=lineChange.modifiedEndLineNumber){marginDomNode=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion();}stepOriginal.push({afterLineNumber:viewZoneLineNumber,heightInLines:modifiedForeignVZ.current.height/modifiedLineHeight,domNode:null,marginDomNode:marginDomNode});modifiedForeignVZ.advance();}// [PRODUCE] View zone(s) in modified-side due to foreign view zone(s) in original-side
while(originalForeignVZ.current&&originalForeignVZ.current.afterLineNumber<=originalEndEquivalentLineNumber){var _viewZoneLineNumber=void 0;if(originalForeignVZ.current.afterLineNumber<=originalEquivalentLineNumber){_viewZoneLineNumber=modifiedEquivalentLineNumber-originalEquivalentLineNumber+originalForeignVZ.current.afterLineNumber;}else{_viewZoneLineNumber=modifiedEndEquivalentLineNumber;}stepModified.push({afterLineNumber:_viewZoneLineNumber,heightInLines:originalForeignVZ.current.height/originalLineHeight,domNode:null});originalForeignVZ.advance();}if(lineChange!==null&&isChangeOrInsert(lineChange)){var r=this._produceOriginalFromDiff(lineChange,lineChangeOriginalLength,lineChangeModifiedLength);if(r){stepOriginal.push(r);}}if(lineChange!==null&&isChangeOrDelete(lineChange)){var _r=this._produceModifiedFromDiff(lineChange,lineChangeOriginalLength,lineChangeModifiedLength);if(_r){stepModified.push(_r);}}// ---------------------------- END PRODUCE VIEW ZONES
// ---------------------------- EMIT MINIMAL VIEW ZONES
// [CANCEL & EMIT] Try to cancel view zones out
var stepOriginalIndex=0;var stepModifiedIndex=0;stepOriginal=stepOriginal.sort(sortMyViewZones);stepModified=stepModified.sort(sortMyViewZones);while(stepOriginalIndex<stepOriginal.length&&stepModifiedIndex<stepModified.length){var original=stepOriginal[stepOriginalIndex];var modified=stepModified[stepModifiedIndex];var originalDelta=original.afterLineNumber-originalEquivalentLineNumber;var modifiedDelta=modified.afterLineNumber-modifiedEquivalentLineNumber;if(originalDelta<modifiedDelta){addAndCombineIfPossible(result.original,original);stepOriginalIndex++;}else if(modifiedDelta<originalDelta){addAndCombineIfPossible(result.modified,modified);stepModifiedIndex++;}else if(original.shouldNotShrink){addAndCombineIfPossible(result.original,original);stepOriginalIndex++;}else if(modified.shouldNotShrink){addAndCombineIfPossible(result.modified,modified);stepModifiedIndex++;}else{if(original.heightInLines>=modified.heightInLines){// modified view zone gets removed
original.heightInLines-=modified.heightInLines;stepModifiedIndex++;}else{// original view zone gets removed
modified.heightInLines-=original.heightInLines;stepOriginalIndex++;}}}// [EMIT] Remaining original view zones
while(stepOriginalIndex<stepOriginal.length){addAndCombineIfPossible(result.original,stepOriginal[stepOriginalIndex]);stepOriginalIndex++;}// [EMIT] Remaining modified view zones
while(stepModifiedIndex<stepModified.length){addAndCombineIfPossible(result.modified,stepModified[stepModifiedIndex]);stepModifiedIndex++;}// ---------------------------- END EMIT MINIMAL VIEW ZONES
}return{original:ViewZonesComputer._ensureDomNodes(result.original),modified:ViewZonesComputer._ensureDomNodes(result.modified)};}}],[{key:"_getViewLineCount",value:function _getViewLineCount(editor,startLineNumber,endLineNumber){var model=editor.getModel();var viewModel=editor._getViewModel();if(model&&viewModel){var viewRange=getViewRange(model,viewModel,startLineNumber,endLineNumber);return viewRange.endLineNumber-viewRange.startLineNumber+1;}return endLineNumber-startLineNumber+1;}},{key:"_ensureDomNodes",value:function _ensureDomNodes(zones){return zones.map(function(z){if(!z.domNode){z.domNode=createFakeLinesDiv();}return z;});}}]);return ViewZonesComputer;}();function createDecoration(startLineNumber,startColumn,endLineNumber,endColumn,options){return{range:new core_range/* Range */.e(startLineNumber,startColumn,endLineNumber,endColumn),options:options};}var DECORATIONS={charDelete:textModel/* ModelDecorationOptions.register */.qx.register({description:'diff-editor-char-delete',className:'char-delete'}),charDeleteWholeLine:textModel/* ModelDecorationOptions.register */.qx.register({description:'diff-editor-char-delete-whole-line',className:'char-delete',isWholeLine:true}),charInsert:textModel/* ModelDecorationOptions.register */.qx.register({description:'diff-editor-char-insert',className:'char-insert'}),charInsertWholeLine:textModel/* ModelDecorationOptions.register */.qx.register({description:'diff-editor-char-insert-whole-line',className:'char-insert',isWholeLine:true}),lineInsert:textModel/* ModelDecorationOptions.register */.qx.register({description:'diff-editor-line-insert',className:'line-insert',marginClassName:'line-insert',isWholeLine:true}),lineInsertWithSign:textModel/* ModelDecorationOptions.register */.qx.register({description:'diff-editor-line-insert-with-sign',className:'line-insert',linesDecorationsClassName:'insert-sign '+themeService/* ThemeIcon.asClassName */.kS.asClassName(diffInsertIcon),marginClassName:'line-insert',isWholeLine:true}),lineDelete:textModel/* ModelDecorationOptions.register */.qx.register({description:'diff-editor-line-delete',className:'line-delete',marginClassName:'line-delete',isWholeLine:true}),lineDeleteWithSign:textModel/* ModelDecorationOptions.register */.qx.register({description:'diff-editor-line-delete-with-sign',className:'line-delete',linesDecorationsClassName:'delete-sign '+themeService/* ThemeIcon.asClassName */.kS.asClassName(diffRemoveIcon),marginClassName:'line-delete',isWholeLine:true}),lineDeleteMargin:textModel/* ModelDecorationOptions.register */.qx.register({description:'diff-editor-line-delete-margin',marginClassName:'line-delete'})};var DiffEditorWidgetSideBySide=/*#__PURE__*/function(_DiffEditorWidgetStyl){diffEditorWidget_inherits(DiffEditorWidgetSideBySide,_DiffEditorWidgetStyl);var _super3=diffEditorWidget_createSuper(DiffEditorWidgetSideBySide);function DiffEditorWidgetSideBySide(dataSource,enableSplitViewResizing){var _this11;diffEditorWidget_classCallCheck(this,DiffEditorWidgetSideBySide);_this11=_super3.call(this,dataSource);_this11._disableSash=enableSplitViewResizing===false;_this11._sashRatio=null;_this11._sashPosition=null;_this11._startSashPosition=null;_this11._sash=_this11._register(new sash/* Sash */.g(_this11._dataSource.getContainerDomNode(),diffEditorWidget_assertThisInitialized(_this11),{orientation:0/* VERTICAL */}));if(_this11._disableSash){_this11._sash.state=0/* Disabled */;}_this11._sash.onDidStart(function(){return _this11._onSashDragStart();});_this11._sash.onDidChange(function(e){return _this11._onSashDrag(e);});_this11._sash.onDidEnd(function(){return _this11._onSashDragEnd();});_this11._sash.onDidReset(function(){return _this11._onSashReset();});return _this11;}diffEditorWidget_createClass(DiffEditorWidgetSideBySide,[{key:"setEnableSplitViewResizing",value:function setEnableSplitViewResizing(enableSplitViewResizing){var newDisableSash=enableSplitViewResizing===false;if(this._disableSash!==newDisableSash){this._disableSash=newDisableSash;this._sash.state=this._disableSash?0/* Disabled */:3/* Enabled */;}}},{key:"layout",value:function layout(){var sashRatio=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._sashRatio;var w=this._dataSource.getWidth();var contentWidth=w-(this._dataSource.getOptions().renderOverviewRuler?DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH:0);var sashPosition=Math.floor((sashRatio||0.5)*contentWidth);var midPoint=Math.floor(0.5*contentWidth);sashPosition=this._disableSash?midPoint:sashPosition||midPoint;if(contentWidth>DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH*2){if(sashPosition<DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH){sashPosition=DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;}if(sashPosition>contentWidth-DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH){sashPosition=contentWidth-DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;}}else{sashPosition=midPoint;}if(this._sashPosition!==sashPosition){this._sashPosition=sashPosition;this._sash.layout();}return this._sashPosition;}},{key:"_onSashDragStart",value:function _onSashDragStart(){this._startSashPosition=this._sashPosition;}},{key:"_onSashDrag",value:function _onSashDrag(e){var w=this._dataSource.getWidth();var contentWidth=w-(this._dataSource.getOptions().renderOverviewRuler?DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH:0);var sashPosition=this.layout((this._startSashPosition+(e.currentX-e.startX))/contentWidth);this._sashRatio=sashPosition/contentWidth;this._dataSource.relayoutEditors();}},{key:"_onSashDragEnd",value:function _onSashDragEnd(){this._sash.layout();}},{key:"_onSashReset",value:function _onSashReset(){this._sashRatio=0.5;this._dataSource.relayoutEditors();this._sash.layout();}},{key:"getVerticalSashTop",value:function getVerticalSashTop(sash){return 0;}},{key:"getVerticalSashLeft",value:function getVerticalSashLeft(sash){return this._sashPosition;}},{key:"getVerticalSashHeight",value:function getVerticalSashHeight(sash){return this._dataSource.getHeight();}},{key:"_getViewZones",value:function _getViewZones(lineChanges,originalForeignVZ,modifiedForeignVZ){var originalEditor=this._dataSource.getOriginalEditor();var modifiedEditor=this._dataSource.getModifiedEditor();var c=new SideBySideViewZonesComputer(lineChanges,originalForeignVZ,modifiedForeignVZ,originalEditor,modifiedEditor);return c.getViewZones();}},{key:"_getOriginalEditorDecorations",value:function _getOriginalEditorDecorations(lineChanges,ignoreTrimWhitespace,renderIndicators){var originalEditor=this._dataSource.getOriginalEditor();var overviewZoneColor=String(this._removeColor);var result={decorations:[],overviewZones:[]};var originalModel=originalEditor.getModel();var originalViewModel=originalEditor._getViewModel();var _iterator5=_createForOfIteratorHelper(lineChanges),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var lineChange=_step5.value;if(isChangeOrDelete(lineChange)){result.decorations.push({range:new core_range/* Range */.e(lineChange.originalStartLineNumber,1,lineChange.originalEndLineNumber,1073741824/* MAX_SAFE_SMALL_INTEGER */),options:renderIndicators?DECORATIONS.lineDeleteWithSign:DECORATIONS.lineDelete});if(!isChangeOrInsert(lineChange)||!lineChange.charChanges){result.decorations.push(createDecoration(lineChange.originalStartLineNumber,1,lineChange.originalEndLineNumber,1073741824/* MAX_SAFE_SMALL_INTEGER */,DECORATIONS.charDeleteWholeLine));}var viewRange=getViewRange(originalModel,originalViewModel,lineChange.originalStartLineNumber,lineChange.originalEndLineNumber);result.overviewZones.push(new overviewZoneManager/* OverviewRulerZone */.EY(viewRange.startLineNumber,viewRange.endLineNumber,overviewZoneColor));if(lineChange.charChanges){var _iterator6=_createForOfIteratorHelper(lineChange.charChanges),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var charChange=_step6.value;if(isChangeOrDelete(charChange)){if(ignoreTrimWhitespace){for(var lineNumber=charChange.originalStartLineNumber;lineNumber<=charChange.originalEndLineNumber;lineNumber++){var startColumn=void 0;var endColumn=void 0;if(lineNumber===charChange.originalStartLineNumber){startColumn=charChange.originalStartColumn;}else{startColumn=originalModel.getLineFirstNonWhitespaceColumn(lineNumber);}if(lineNumber===charChange.originalEndLineNumber){endColumn=charChange.originalEndColumn;}else{endColumn=originalModel.getLineLastNonWhitespaceColumn(lineNumber);}result.decorations.push(createDecoration(lineNumber,startColumn,lineNumber,endColumn,DECORATIONS.charDelete));}}else{result.decorations.push(createDecoration(charChange.originalStartLineNumber,charChange.originalStartColumn,charChange.originalEndLineNumber,charChange.originalEndColumn,DECORATIONS.charDelete));}}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}return result;}},{key:"_getModifiedEditorDecorations",value:function _getModifiedEditorDecorations(lineChanges,ignoreTrimWhitespace,renderIndicators){var modifiedEditor=this._dataSource.getModifiedEditor();var overviewZoneColor=String(this._insertColor);var result={decorations:[],overviewZones:[]};var modifiedModel=modifiedEditor.getModel();var modifiedViewModel=modifiedEditor._getViewModel();var _iterator7=_createForOfIteratorHelper(lineChanges),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var lineChange=_step7.value;if(isChangeOrInsert(lineChange)){result.decorations.push({range:new core_range/* Range */.e(lineChange.modifiedStartLineNumber,1,lineChange.modifiedEndLineNumber,1073741824/* MAX_SAFE_SMALL_INTEGER */),options:renderIndicators?DECORATIONS.lineInsertWithSign:DECORATIONS.lineInsert});if(!isChangeOrDelete(lineChange)||!lineChange.charChanges){result.decorations.push(createDecoration(lineChange.modifiedStartLineNumber,1,lineChange.modifiedEndLineNumber,1073741824/* MAX_SAFE_SMALL_INTEGER */,DECORATIONS.charInsertWholeLine));}var viewRange=getViewRange(modifiedModel,modifiedViewModel,lineChange.modifiedStartLineNumber,lineChange.modifiedEndLineNumber);result.overviewZones.push(new overviewZoneManager/* OverviewRulerZone */.EY(viewRange.startLineNumber,viewRange.endLineNumber,overviewZoneColor));if(lineChange.charChanges){var _iterator8=_createForOfIteratorHelper(lineChange.charChanges),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var charChange=_step8.value;if(isChangeOrInsert(charChange)){if(ignoreTrimWhitespace){for(var lineNumber=charChange.modifiedStartLineNumber;lineNumber<=charChange.modifiedEndLineNumber;lineNumber++){var startColumn=void 0;var endColumn=void 0;if(lineNumber===charChange.modifiedStartLineNumber){startColumn=charChange.modifiedStartColumn;}else{startColumn=modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);}if(lineNumber===charChange.modifiedEndLineNumber){endColumn=charChange.modifiedEndColumn;}else{endColumn=modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);}result.decorations.push(createDecoration(lineNumber,startColumn,lineNumber,endColumn,DECORATIONS.charInsert));}}else{result.decorations.push(createDecoration(charChange.modifiedStartLineNumber,charChange.modifiedStartColumn,charChange.modifiedEndLineNumber,charChange.modifiedEndColumn,DECORATIONS.charInsert));}}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}return result;}}]);return DiffEditorWidgetSideBySide;}(DiffEditorWidgetStyle);DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH=100;var SideBySideViewZonesComputer=/*#__PURE__*/function(_ViewZonesComputer){diffEditorWidget_inherits(SideBySideViewZonesComputer,_ViewZonesComputer);var _super4=diffEditorWidget_createSuper(SideBySideViewZonesComputer);function SideBySideViewZonesComputer(lineChanges,originalForeignVZ,modifiedForeignVZ,originalEditor,modifiedEditor){diffEditorWidget_classCallCheck(this,SideBySideViewZonesComputer);return _super4.call(this,lineChanges,originalForeignVZ,modifiedForeignVZ,originalEditor,modifiedEditor);}diffEditorWidget_createClass(SideBySideViewZonesComputer,[{key:"_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion",value:function _createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null;}},{key:"_produceOriginalFromDiff",value:function _produceOriginalFromDiff(lineChange,lineChangeOriginalLength,lineChangeModifiedLength){if(lineChangeModifiedLength>lineChangeOriginalLength){return{afterLineNumber:Math.max(lineChange.originalStartLineNumber,lineChange.originalEndLineNumber),heightInLines:lineChangeModifiedLength-lineChangeOriginalLength,domNode:null};}return null;}},{key:"_produceModifiedFromDiff",value:function _produceModifiedFromDiff(lineChange,lineChangeOriginalLength,lineChangeModifiedLength){if(lineChangeOriginalLength>lineChangeModifiedLength){return{afterLineNumber:Math.max(lineChange.modifiedStartLineNumber,lineChange.modifiedEndLineNumber),heightInLines:lineChangeOriginalLength-lineChangeModifiedLength,domNode:null};}return null;}}]);return SideBySideViewZonesComputer;}(ViewZonesComputer);var DiffEditorWidgetInline=/*#__PURE__*/function(_DiffEditorWidgetStyl2){diffEditorWidget_inherits(DiffEditorWidgetInline,_DiffEditorWidgetStyl2);var _super5=diffEditorWidget_createSuper(DiffEditorWidgetInline);function DiffEditorWidgetInline(dataSource,enableSplitViewResizing){var _this12;diffEditorWidget_classCallCheck(this,DiffEditorWidgetInline);_this12=_super5.call(this,dataSource);_this12._decorationsLeft=dataSource.getOriginalEditor().getLayoutInfo().decorationsLeft;_this12._register(dataSource.getOriginalEditor().onDidLayoutChange(function(layoutInfo){if(_this12._decorationsLeft!==layoutInfo.decorationsLeft){_this12._decorationsLeft=layoutInfo.decorationsLeft;dataSource.relayoutEditors();}}));return _this12;}diffEditorWidget_createClass(DiffEditorWidgetInline,[{key:"setEnableSplitViewResizing",value:function setEnableSplitViewResizing(enableSplitViewResizing){// Nothing to do..
}},{key:"_getViewZones",value:function _getViewZones(lineChanges,originalForeignVZ,modifiedForeignVZ,renderIndicators){var originalEditor=this._dataSource.getOriginalEditor();var modifiedEditor=this._dataSource.getModifiedEditor();var computer=new InlineViewZonesComputer(lineChanges,originalForeignVZ,modifiedForeignVZ,originalEditor,modifiedEditor,renderIndicators);return computer.getViewZones();}},{key:"_getOriginalEditorDecorations",value:function _getOriginalEditorDecorations(lineChanges,ignoreTrimWhitespace,renderIndicators){var overviewZoneColor=String(this._removeColor);var result={decorations:[],overviewZones:[]};var originalEditor=this._dataSource.getOriginalEditor();var originalModel=originalEditor.getModel();var originalViewModel=originalEditor._getViewModel();var _iterator9=_createForOfIteratorHelper(lineChanges),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var lineChange=_step9.value;// Add overview zones in the overview ruler
if(isChangeOrDelete(lineChange)){result.decorations.push({range:new core_range/* Range */.e(lineChange.originalStartLineNumber,1,lineChange.originalEndLineNumber,1073741824/* MAX_SAFE_SMALL_INTEGER */),options:DECORATIONS.lineDeleteMargin});var viewRange=getViewRange(originalModel,originalViewModel,lineChange.originalStartLineNumber,lineChange.originalEndLineNumber);result.overviewZones.push(new overviewZoneManager/* OverviewRulerZone */.EY(viewRange.startLineNumber,viewRange.endLineNumber,overviewZoneColor));}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}return result;}},{key:"_getModifiedEditorDecorations",value:function _getModifiedEditorDecorations(lineChanges,ignoreTrimWhitespace,renderIndicators){var modifiedEditor=this._dataSource.getModifiedEditor();var overviewZoneColor=String(this._insertColor);var result={decorations:[],overviewZones:[]};var modifiedModel=modifiedEditor.getModel();var modifiedViewModel=modifiedEditor._getViewModel();var _iterator10=_createForOfIteratorHelper(lineChanges),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var lineChange=_step10.value;// Add decorations & overview zones
if(isChangeOrInsert(lineChange)){result.decorations.push({range:new core_range/* Range */.e(lineChange.modifiedStartLineNumber,1,lineChange.modifiedEndLineNumber,1073741824/* MAX_SAFE_SMALL_INTEGER */),options:renderIndicators?DECORATIONS.lineInsertWithSign:DECORATIONS.lineInsert});var viewRange=getViewRange(modifiedModel,modifiedViewModel,lineChange.modifiedStartLineNumber,lineChange.modifiedEndLineNumber);result.overviewZones.push(new overviewZoneManager/* OverviewRulerZone */.EY(viewRange.startLineNumber,viewRange.endLineNumber,overviewZoneColor));if(lineChange.charChanges){var _iterator11=_createForOfIteratorHelper(lineChange.charChanges),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var charChange=_step11.value;if(isChangeOrInsert(charChange)){if(ignoreTrimWhitespace){for(var lineNumber=charChange.modifiedStartLineNumber;lineNumber<=charChange.modifiedEndLineNumber;lineNumber++){var startColumn=void 0;var endColumn=void 0;if(lineNumber===charChange.modifiedStartLineNumber){startColumn=charChange.modifiedStartColumn;}else{startColumn=modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);}if(lineNumber===charChange.modifiedEndLineNumber){endColumn=charChange.modifiedEndColumn;}else{endColumn=modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);}result.decorations.push(createDecoration(lineNumber,startColumn,lineNumber,endColumn,DECORATIONS.charInsert));}}else{result.decorations.push(createDecoration(charChange.modifiedStartLineNumber,charChange.modifiedStartColumn,charChange.modifiedEndLineNumber,charChange.modifiedEndColumn,DECORATIONS.charInsert));}}}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}}else{result.decorations.push(createDecoration(lineChange.modifiedStartLineNumber,1,lineChange.modifiedEndLineNumber,1073741824/* MAX_SAFE_SMALL_INTEGER */,DECORATIONS.charInsertWholeLine));}}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}return result;}},{key:"layout",value:function layout(){// An editor should not be smaller than 5px
return Math.max(5,this._decorationsLeft);}}]);return DiffEditorWidgetInline;}(DiffEditorWidgetStyle);var InlineViewZonesComputer=/*#__PURE__*/function(_ViewZonesComputer2){diffEditorWidget_inherits(InlineViewZonesComputer,_ViewZonesComputer2);var _super6=diffEditorWidget_createSuper(InlineViewZonesComputer);function InlineViewZonesComputer(lineChanges,originalForeignVZ,modifiedForeignVZ,originalEditor,modifiedEditor,renderIndicators){var _this13;diffEditorWidget_classCallCheck(this,InlineViewZonesComputer);_this13=_super6.call(this,lineChanges,originalForeignVZ,modifiedForeignVZ,originalEditor,modifiedEditor);_this13._originalModel=originalEditor.getModel();_this13._renderIndicators=renderIndicators;_this13._pendingLineChange=[];_this13._pendingViewZones=[];_this13._lineBreaksComputer=_this13._modifiedEditor._getViewModel().createLineBreaksComputer();return _this13;}diffEditorWidget_createClass(InlineViewZonesComputer,[{key:"getViewZones",value:function getViewZones(){var result=_get(diffEditorWidget_getPrototypeOf(InlineViewZonesComputer.prototype),"getViewZones",this).call(this);this._finalize(result);return result;}},{key:"_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion",value:function _createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){var result=document.createElement('div');result.className='inline-added-margin-view-zone';return result;}},{key:"_produceOriginalFromDiff",value:function _produceOriginalFromDiff(lineChange,lineChangeOriginalLength,lineChangeModifiedLength){var marginDomNode=document.createElement('div');marginDomNode.className='inline-added-margin-view-zone';return{afterLineNumber:Math.max(lineChange.originalStartLineNumber,lineChange.originalEndLineNumber),heightInLines:lineChangeModifiedLength,domNode:document.createElement('div'),marginDomNode:marginDomNode};}},{key:"_produceModifiedFromDiff",value:function _produceModifiedFromDiff(lineChange,lineChangeOriginalLength,lineChangeModifiedLength){var domNode=document.createElement('div');domNode.className="view-lines line-delete ".concat(mouseCursor/* MOUSE_CURSOR_TEXT_CSS_CLASS_NAME */.S);var marginDomNode=document.createElement('div');marginDomNode.className='inline-deleted-margin-view-zone';var viewZone={shouldNotShrink:true,afterLineNumber:lineChange.modifiedEndLineNumber===0?lineChange.modifiedStartLineNumber:lineChange.modifiedStartLineNumber-1,heightInLines:lineChangeOriginalLength,minWidthInPx:0,domNode:domNode,marginDomNode:marginDomNode,diff:{originalStartLineNumber:lineChange.originalStartLineNumber,originalEndLineNumber:lineChange.originalEndLineNumber,modifiedStartLineNumber:lineChange.modifiedStartLineNumber,modifiedEndLineNumber:lineChange.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(var lineNumber=lineChange.originalStartLineNumber;lineNumber<=lineChange.originalEndLineNumber;lineNumber++){this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(lineNumber),null,null);}this._pendingLineChange.push(lineChange);this._pendingViewZones.push(viewZone);return viewZone;}},{key:"_finalize",value:function _finalize(result){var modifiedEditorOptions=this._modifiedEditor.getOptions();var tabSize=this._modifiedEditor.getModel().getOptions().tabSize;var fontInfo=modifiedEditorOptions.get(44/* fontInfo */);var disableMonospaceOptimizations=modifiedEditorOptions.get(29/* disableMonospaceOptimizations */);var typicalHalfwidthCharacterWidth=fontInfo.typicalHalfwidthCharacterWidth;var scrollBeyondLastColumn=modifiedEditorOptions.get(93/* scrollBeyondLastColumn */);var mightContainNonBasicASCII=this._originalModel.mightContainNonBasicASCII();var mightContainRTL=this._originalModel.mightContainRTL();var lineHeight=modifiedEditorOptions.get(59/* lineHeight */);var layoutInfo=modifiedEditorOptions.get(131/* layoutInfo */);var lineDecorationsWidth=layoutInfo.decorationsWidth;var stopRenderingLineAfter=modifiedEditorOptions.get(105/* stopRenderingLineAfter */);var renderWhitespace=modifiedEditorOptions.get(88/* renderWhitespace */);var renderControlCharacters=modifiedEditorOptions.get(83/* renderControlCharacters */);var fontLigatures=modifiedEditorOptions.get(45/* fontLigatures */);var lineBreaks=this._lineBreaksComputer.finalize();var lineBreakIndex=0;for(var i=0;i<this._pendingLineChange.length;i++){var lineChange=this._pendingLineChange[i];var viewZone=this._pendingViewZones[i];var domNode=viewZone.domNode;(0,domFontInfo/* applyFontInfo */.N)(domNode,fontInfo);var marginDomNode=viewZone.marginDomNode;(0,domFontInfo/* applyFontInfo */.N)(marginDomNode,fontInfo);var decorations=[];if(lineChange.charChanges){var _iterator12=_createForOfIteratorHelper(lineChange.charChanges),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var charChange=_step12.value;if(isChangeOrDelete(charChange)){decorations.push(new viewModel/* InlineDecoration */.$t(new core_range/* Range */.e(charChange.originalStartLineNumber,charChange.originalStartColumn,charChange.originalEndLineNumber,charChange.originalEndColumn),'char-delete',0/* Regular */));}}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}var hasCharChanges=decorations.length>0;var sb=(0,stringBuilder/* createStringBuilder */.l$)(10000);var maxCharsPerLine=0;var renderedLineCount=0;var viewLineCounts=null;for(var lineNumber=lineChange.originalStartLineNumber;lineNumber<=lineChange.originalEndLineNumber;lineNumber++){var lineIndex=lineNumber-lineChange.originalStartLineNumber;var lineTokens=this._originalModel.getLineTokens(lineNumber);var lineContent=lineTokens.getLineContent();var lineBreakData=lineBreaks[lineBreakIndex++];var actualDecorations=lineDecorations/* LineDecoration.filter */.Kp.filter(decorations,lineNumber,1,lineContent.length+1);if(lineBreakData){var lastBreakOffset=0;var _iterator13=_createForOfIteratorHelper(lineBreakData.breakOffsets),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var breakOffset=_step13.value;var viewLineTokens=lineTokens.sliceAndInflate(lastBreakOffset,breakOffset,0);var viewLineContent=lineContent.substring(lastBreakOffset,breakOffset);maxCharsPerLine=Math.max(maxCharsPerLine,this._renderOriginalLine(renderedLineCount++,viewLineContent,viewLineTokens,lineDecorations/* LineDecoration.extractWrapped */.Kp.extractWrapped(actualDecorations,lastBreakOffset,breakOffset),hasCharChanges,mightContainNonBasicASCII,mightContainRTL,fontInfo,disableMonospaceOptimizations,lineHeight,lineDecorationsWidth,stopRenderingLineAfter,renderWhitespace,renderControlCharacters,fontLigatures,tabSize,sb,marginDomNode));lastBreakOffset=breakOffset;}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}if(!viewLineCounts){viewLineCounts=[];}// make sure all lines before this one have an entry in `viewLineCounts`
while(viewLineCounts.length<lineIndex){viewLineCounts[viewLineCounts.length]=1;}viewLineCounts[lineIndex]=lineBreakData.breakOffsets.length;viewZone.heightInLines+=lineBreakData.breakOffsets.length-1;var marginDomNode2=document.createElement('div');marginDomNode2.className='line-delete';result.original.push({afterLineNumber:lineNumber,afterColumn:0,heightInLines:lineBreakData.breakOffsets.length-1,domNode:createFakeLinesDiv(),marginDomNode:marginDomNode2});}else{maxCharsPerLine=Math.max(maxCharsPerLine,this._renderOriginalLine(renderedLineCount++,lineContent,lineTokens,actualDecorations,hasCharChanges,mightContainNonBasicASCII,mightContainRTL,fontInfo,disableMonospaceOptimizations,lineHeight,lineDecorationsWidth,stopRenderingLineAfter,renderWhitespace,renderControlCharacters,fontLigatures,tabSize,sb,marginDomNode));}}maxCharsPerLine+=scrollBeyondLastColumn;var html=sb.build();var trustedhtml=ttPolicy?ttPolicy.createHTML(html):html;domNode.innerHTML=trustedhtml;viewZone.minWidthInPx=maxCharsPerLine*typicalHalfwidthCharacterWidth;if(viewLineCounts){// make sure all lines have an entry in `viewLineCounts`
var cnt=lineChange.originalEndLineNumber-lineChange.originalStartLineNumber;while(viewLineCounts.length<=cnt){viewLineCounts[viewLineCounts.length]=1;}}viewZone.diff.viewLineCounts=viewLineCounts;}result.original.sort(function(a,b){return a.afterLineNumber-b.afterLineNumber;});}},{key:"_renderOriginalLine",value:function _renderOriginalLine(renderedLineCount,lineContent,lineTokens,decorations,hasCharChanges,mightContainNonBasicASCII,mightContainRTL,fontInfo,disableMonospaceOptimizations,lineHeight,lineDecorationsWidth,stopRenderingLineAfter,renderWhitespace,renderControlCharacters,fontLigatures,tabSize,sb,marginDomNode){sb.appendASCIIString('<div class="view-line');if(!hasCharChanges){// No char changes
sb.appendASCIIString(' char-delete');}sb.appendASCIIString('" style="top:');sb.appendASCIIString(String(renderedLineCount*lineHeight));sb.appendASCIIString('px;width:1000000px;">');var isBasicASCII=viewModel/* ViewLineRenderingData.isBasicASCII */.wA.isBasicASCII(lineContent,mightContainNonBasicASCII);var containsRTL=viewModel/* ViewLineRenderingData.containsRTL */.wA.containsRTL(lineContent,isBasicASCII,mightContainRTL);var output=(0,viewLineRenderer/* renderViewLine */.d1)(new viewLineRenderer/* RenderLineInput */.IJ(fontInfo.isMonospace&&!disableMonospaceOptimizations,fontInfo.canUseHalfwidthRightwardsArrow,lineContent,false,isBasicASCII,containsRTL,0,lineTokens,decorations,tabSize,0,fontInfo.spaceWidth,fontInfo.middotWidth,fontInfo.wsmiddotWidth,stopRenderingLineAfter,renderWhitespace,renderControlCharacters,fontLigatures!==editorOptions/* EditorFontLigatures.OFF */.n0.OFF,null// Send no selections, original line cannot be selected
),sb);sb.appendASCIIString('</div>');if(this._renderIndicators){var marginElement=document.createElement('div');marginElement.className="delete-sign ".concat(themeService/* ThemeIcon.asClassName */.kS.asClassName(diffRemoveIcon));marginElement.setAttribute('style',"position:absolute;top:".concat(renderedLineCount*lineHeight,"px;width:").concat(lineDecorationsWidth,"px;height:").concat(lineHeight,"px;right:0;"));marginDomNode.appendChild(marginElement);}return output.characterMapping.getAbsoluteOffset(output.characterMapping.length);}}]);return InlineViewZonesComputer;}(ViewZonesComputer);function validateDiffWordWrap(value,defaultValue){return (0,editorOptions/* stringSet */.NY)(value,defaultValue,['off','on','inherit']);}function isChangeOrInsert(lineChange){return lineChange.modifiedEndLineNumber>0;}function isChangeOrDelete(lineChange){return lineChange.originalEndLineNumber>0;}function createFakeLinesDiv(){var r=document.createElement('div');r.className='diagonal-fill';return r;}function getViewRange(model,viewModel,startLineNumber,endLineNumber){var lineCount=model.getLineCount();startLineNumber=Math.min(lineCount,Math.max(1,startLineNumber));endLineNumber=Math.min(lineCount,Math.max(1,endLineNumber));return viewModel.coordinatesConverter.convertModelRangeToViewRange(new core_range/* Range */.e(startLineNumber,model.getLineMinColumn(startLineNumber),endLineNumber,model.getLineMaxColumn(endLineNumber)));}function validateDiffEditorOptions(options,defaults){return{enableSplitViewResizing:(0,editorOptions/* boolean */.O7)(options.enableSplitViewResizing,defaults.enableSplitViewResizing),renderSideBySide:(0,editorOptions/* boolean */.O7)(options.renderSideBySide,defaults.renderSideBySide),maxComputationTime:(0,editorOptions/* clampedInt */.Zc)(options.maxComputationTime,defaults.maxComputationTime,0,1073741824/* MAX_SAFE_SMALL_INTEGER */),maxFileSize:(0,editorOptions/* clampedInt */.Zc)(options.maxFileSize,defaults.maxFileSize,0,1073741824/* MAX_SAFE_SMALL_INTEGER */),ignoreTrimWhitespace:(0,editorOptions/* boolean */.O7)(options.ignoreTrimWhitespace,defaults.ignoreTrimWhitespace),renderIndicators:(0,editorOptions/* boolean */.O7)(options.renderIndicators,defaults.renderIndicators),originalEditable:(0,editorOptions/* boolean */.O7)(options.originalEditable,defaults.originalEditable),diffCodeLens:(0,editorOptions/* boolean */.O7)(options.diffCodeLens,defaults.diffCodeLens),renderOverviewRuler:(0,editorOptions/* boolean */.O7)(options.renderOverviewRuler,defaults.renderOverviewRuler),diffWordWrap:validateDiffWordWrap(options.diffWordWrap,defaults.diffWordWrap)};}function changedDiffEditorOptions(a,b){return{enableSplitViewResizing:a.enableSplitViewResizing!==b.enableSplitViewResizing,renderSideBySide:a.renderSideBySide!==b.renderSideBySide,maxComputationTime:a.maxComputationTime!==b.maxComputationTime,maxFileSize:a.maxFileSize!==b.maxFileSize,ignoreTrimWhitespace:a.ignoreTrimWhitespace!==b.ignoreTrimWhitespace,renderIndicators:a.renderIndicators!==b.renderIndicators,originalEditable:a.originalEditable!==b.originalEditable,diffCodeLens:a.diffCodeLens!==b.diffCodeLens,renderOverviewRuler:a.renderOverviewRuler!==b.renderOverviewRuler,diffWordWrap:a.diffWordWrap!==b.diffWordWrap};}(0,themeService/* registerThemingParticipant */.Ic)(function(theme,collector){var added=theme.getColor(colorRegistry/* diffInserted */.ypS);if(added){collector.addRule(".monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ".concat(added,"; }"));collector.addRule(".monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ".concat(added,"; }"));collector.addRule(".monaco-editor .inline-added-margin-view-zone { background-color: ".concat(added,"; }"));}var removed=theme.getColor(colorRegistry/* diffRemoved */.P4M);if(removed){collector.addRule(".monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ".concat(removed,"; }"));collector.addRule(".monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ".concat(removed,"; }"));collector.addRule(".monaco-editor .inline-deleted-margin-view-zone { background-color: ".concat(removed,"; }"));}var addedOutline=theme.getColor(colorRegistry/* diffInsertedOutline */.XL$);if(addedOutline){collector.addRule(".monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ".concat(theme.type==='hc'?'dashed':'solid'," ").concat(addedOutline,"; }"));}var removedOutline=theme.getColor(colorRegistry/* diffRemovedOutline */.mHy);if(removedOutline){collector.addRule(".monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ".concat(theme.type==='hc'?'dashed':'solid'," ").concat(removedOutline,"; }"));}var shadow=theme.getColor(colorRegistry/* scrollbarShadow */._wn);if(shadow){collector.addRule(".monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ".concat(shadow,"; }"));}var border=theme.getColor(colorRegistry/* diffBorder */.LLc);if(border){collector.addRule(".monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ".concat(border,"; }"));}var scrollbarSliderBackgroundColor=theme.getColor(colorRegistry/* scrollbarSliderBackground */.etL);if(scrollbarSliderBackgroundColor){collector.addRule("\n\t\t\t.monaco-diff-editor .diffViewport {\n\t\t\t\tbackground: ".concat(scrollbarSliderBackgroundColor,";\n\t\t\t}\n\t\t"));}var scrollbarSliderHoverBackgroundColor=theme.getColor(colorRegistry/* scrollbarSliderHoverBackground */.ABB);if(scrollbarSliderHoverBackgroundColor){collector.addRule("\n\t\t\t.monaco-diff-editor .diffViewport:hover {\n\t\t\t\tbackground: ".concat(scrollbarSliderHoverBackgroundColor,";\n\t\t\t}\n\t\t"));}var scrollbarSliderActiveBackgroundColor=theme.getColor(colorRegistry/* scrollbarSliderActiveBackground */.ynu);if(scrollbarSliderActiveBackgroundColor){collector.addRule("\n\t\t\t.monaco-diff-editor .diffViewport:active {\n\t\t\t\tbackground: ".concat(scrollbarSliderActiveBackgroundColor,";\n\t\t\t}\n\t\t"));}var diffDiagonalFillColor=theme.getColor(colorRegistry/* diffDiagonalFill */.L_t);collector.addRule("\n\t.monaco-editor .diagonal-fill {\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\t".concat(diffDiagonalFillColor," 12.5%,\n\t\t\t#0000 12.5%, #0000 50%,\n\t\t\t").concat(diffDiagonalFillColor," 50%, ").concat(diffDiagonalFillColor," 62.5%,\n\t\t\t#0000 62.5%, #0000 100%\n\t\t);\n\t\tbackground-size: 8px 8px;\n\t}\n\t"));});

/***/ }),

/***/ 84559:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "F": () => (/* binding */ DiffNavigator)
/* harmony export */ });
/* harmony import */ var _base_common_assert_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(72548);
/* harmony import */ var _base_common_event_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(36223);
/* harmony import */ var _base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(19860);
/* harmony import */ var _base_common_objects_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(473);
/* harmony import */ var _common_core_range_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(96844);
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var defaultOptions={followsCaret:true,ignoreCharChanges:true,alwaysRevealFirst:true};/**
 * Create a new diff navigator for the provided diff editor.
 */var DiffNavigator=/*#__PURE__*/function(_Disposable){_inherits(DiffNavigator,_Disposable);var _super=_createSuper(DiffNavigator);function DiffNavigator(editor){var _this;var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,DiffNavigator);_this=_super.call(this);_this._onDidUpdate=_this._register(new _base_common_event_js__WEBPACK_IMPORTED_MODULE_0__/* .Emitter */ .Q5());_this._editor=editor;_this._options=_base_common_objects_js__WEBPACK_IMPORTED_MODULE_2__/* .mixin */ .jB(options,defaultOptions,false);_this.disposed=false;_this.nextIdx=-1;_this.ranges=[];_this.ignoreSelectionChange=false;_this.revealFirst=Boolean(_this._options.alwaysRevealFirst);// hook up to diff editor for diff, disposal, and caret move
_this._register(_this._editor.onDidDispose(function(){return _this.dispose();}));_this._register(_this._editor.onDidUpdateDiff(function(){return _this._onDiffUpdated();}));if(_this._options.followsCaret){_this._register(_this._editor.getModifiedEditor().onDidChangeCursorPosition(function(e){if(_this.ignoreSelectionChange){return;}_this.nextIdx=-1;}));}if(_this._options.alwaysRevealFirst){_this._register(_this._editor.getModifiedEditor().onDidChangeModel(function(e){_this.revealFirst=true;}));}// init things
_this._init();return _this;}_createClass(DiffNavigator,[{key:"_init",value:function _init(){var changes=this._editor.getLineChanges();if(!changes){return;}}},{key:"_onDiffUpdated",value:function _onDiffUpdated(){this._init();this._compute(this._editor.getLineChanges());if(this.revealFirst){// Only reveal first on first non-null changes
if(this._editor.getLineChanges()!==null){this.revealFirst=false;this.nextIdx=-1;this.next(1/* Immediate */);}}}},{key:"_compute",value:function _compute(lineChanges){var _this2=this;// new ranges
this.ranges=[];if(lineChanges){// create ranges from changes
lineChanges.forEach(function(lineChange){if(!_this2._options.ignoreCharChanges&&lineChange.charChanges){lineChange.charChanges.forEach(function(charChange){_this2.ranges.push({rhs:true,range:new _common_core_range_js__WEBPACK_IMPORTED_MODULE_3__/* .Range */ .e(charChange.modifiedStartLineNumber,charChange.modifiedStartColumn,charChange.modifiedEndLineNumber,charChange.modifiedEndColumn)});});}else{if(lineChange.modifiedEndLineNumber===0){// a deletion
_this2.ranges.push({rhs:true,range:new _common_core_range_js__WEBPACK_IMPORTED_MODULE_3__/* .Range */ .e(lineChange.modifiedStartLineNumber,1,lineChange.modifiedStartLineNumber+1,1)});}else{// an insertion or modification
_this2.ranges.push({rhs:true,range:new _common_core_range_js__WEBPACK_IMPORTED_MODULE_3__/* .Range */ .e(lineChange.modifiedStartLineNumber,1,lineChange.modifiedEndLineNumber+1,1)});}}});}// sort
this.ranges.sort(function(left,right){return _common_core_range_js__WEBPACK_IMPORTED_MODULE_3__/* .Range.compareRangesUsingStarts */ .e.compareRangesUsingStarts(left.range,right.range);});this._onDidUpdate.fire(this);}},{key:"_initIdx",value:function _initIdx(fwd){var found=false;var position=this._editor.getPosition();if(!position){this.nextIdx=0;return;}for(var i=0,len=this.ranges.length;i<len&&!found;i++){var range=this.ranges[i].range;if(position.isBeforeOrEqual(range.getStartPosition())){this.nextIdx=i+(fwd?0:-1);found=true;}}if(!found){// after the last change
this.nextIdx=fwd?0:this.ranges.length-1;}if(this.nextIdx<0){this.nextIdx=this.ranges.length-1;}}},{key:"_move",value:function _move(fwd,scrollType){_base_common_assert_js__WEBPACK_IMPORTED_MODULE_4__.ok(!this.disposed,'Illegal State - diff navigator has been disposed');if(!this.canNavigate()){return;}if(this.nextIdx===-1){this._initIdx(fwd);}else if(fwd){this.nextIdx+=1;if(this.nextIdx>=this.ranges.length){this.nextIdx=0;}}else{this.nextIdx-=1;if(this.nextIdx<0){this.nextIdx=this.ranges.length-1;}}var info=this.ranges[this.nextIdx];this.ignoreSelectionChange=true;try{var pos=info.range.getStartPosition();this._editor.setPosition(pos);this._editor.revealRangeInCenter(info.range,scrollType);}finally{this.ignoreSelectionChange=false;}}},{key:"canNavigate",value:function canNavigate(){return this.ranges&&this.ranges.length>0;}},{key:"next",value:function next()/* Smooth */{var scrollType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;this._move(true,scrollType);}},{key:"previous",value:function previous()/* Smooth */{var scrollType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;this._move(false,scrollType);}},{key:"dispose",value:function dispose(){_get(_getPrototypeOf(DiffNavigator.prototype),"dispose",this).call(this);this.ranges=[];this.disposed=true;}}]);return DiffNavigator;}(_base_common_lifecycle_js__WEBPACK_IMPORTED_MODULE_1__/* .Disposable */ .JT);

/***/ }),

/***/ 84373:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "H": () => (/* binding */ EmbeddedCodeEditorWidget)
/* harmony export */ });
/* harmony import */ var _base_common_objects_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(473);
/* harmony import */ var _services_codeEditorService_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(95328);
/* harmony import */ var _codeEditorWidget_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(38188);
/* harmony import */ var _platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(47937);
/* harmony import */ var _platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(11703);
/* harmony import */ var _platform_instantiation_common_instantiation_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(71896);
/* harmony import */ var _platform_notification_common_notification_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(73766);
/* harmony import */ var _platform_theme_common_themeService_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(46199);
/* harmony import */ var _platform_accessibility_common_accessibility_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(10304);
/* harmony import */ var _common_languages_languageConfigurationRegistry_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(71567);
function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect==="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;}return c>3&&r&&Object.defineProperty(target,key,r),r;};var __param=undefined&&undefined.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex);};};var EmbeddedCodeEditorWidget=/*#__PURE__*/function(_CodeEditorWidget){_inherits(EmbeddedCodeEditorWidget,_CodeEditorWidget);var _super=_createSuper(EmbeddedCodeEditorWidget);function EmbeddedCodeEditorWidget(domElement,options,parentEditor,instantiationService,codeEditorService,commandService,contextKeyService,themeService,notificationService,accessibilityService,languageConfigurationService){var _thisSuper,_this;_classCallCheck(this,EmbeddedCodeEditorWidget);_this=_super.call(this,domElement,_extends(_extends({},parentEditor.getRawOptions()),{overflowWidgetsDomNode:parentEditor.getOverflowWidgetsDomNode()}),{},instantiationService,codeEditorService,commandService,contextKeyService,themeService,notificationService,accessibilityService,languageConfigurationService);_this._parentEditor=parentEditor;_this._overwriteOptions=options;// Overwrite parent's options
_get((_thisSuper=_assertThisInitialized(_this),_getPrototypeOf(EmbeddedCodeEditorWidget.prototype)),"updateOptions",_thisSuper).call(_thisSuper,_this._overwriteOptions);_this._register(parentEditor.onDidChangeConfiguration(function(e){return _this._onParentConfigurationChanged(e);}));return _this;}_createClass(EmbeddedCodeEditorWidget,[{key:"getParentEditor",value:function getParentEditor(){return this._parentEditor;}},{key:"_onParentConfigurationChanged",value:function _onParentConfigurationChanged(e){_get(_getPrototypeOf(EmbeddedCodeEditorWidget.prototype),"updateOptions",this).call(this,this._parentEditor.getRawOptions());_get(_getPrototypeOf(EmbeddedCodeEditorWidget.prototype),"updateOptions",this).call(this,this._overwriteOptions);}},{key:"updateOptions",value:function updateOptions(newOptions){_base_common_objects_js__WEBPACK_IMPORTED_MODULE_0__/* .mixin */ .jB(this._overwriteOptions,newOptions,true);_get(_getPrototypeOf(EmbeddedCodeEditorWidget.prototype),"updateOptions",this).call(this,this._overwriteOptions);}}]);return EmbeddedCodeEditorWidget;}(_codeEditorWidget_js__WEBPACK_IMPORTED_MODULE_2__/* .CodeEditorWidget */ .Gm);EmbeddedCodeEditorWidget=__decorate([__param(3,_platform_instantiation_common_instantiation_js__WEBPACK_IMPORTED_MODULE_5__/* .IInstantiationService */ .TG),__param(4,_services_codeEditorService_js__WEBPACK_IMPORTED_MODULE_1__/* .ICodeEditorService */ .$),__param(5,_platform_commands_common_commands_js__WEBPACK_IMPORTED_MODULE_3__/* .ICommandService */ .Hy),__param(6,_platform_contextkey_common_contextkey_js__WEBPACK_IMPORTED_MODULE_4__/* .IContextKeyService */ .i6),__param(7,_platform_theme_common_themeService_js__WEBPACK_IMPORTED_MODULE_7__/* .IThemeService */ .XE),__param(8,_platform_notification_common_notification_js__WEBPACK_IMPORTED_MODULE_6__/* .INotificationService */ .lT),__param(9,_platform_accessibility_common_accessibility_js__WEBPACK_IMPORTED_MODULE_8__/* .IAccessibilityService */ .F),__param(10,_common_languages_languageConfigurationRegistry_js__WEBPACK_IMPORTED_MODULE_9__/* .ILanguageConfigurationService */ .c_)],EmbeddedCodeEditorWidget);

/***/ })

}]);