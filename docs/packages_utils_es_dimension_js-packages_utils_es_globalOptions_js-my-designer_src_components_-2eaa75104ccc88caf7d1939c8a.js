"use strict";
(self["webpackChunkicode_run"] = self["webpackChunkicode_run"] || []).push([["packages_utils_es_dimension_js-packages_utils_es_globalOptions_js-my-designer_src_components_-2eaa75"],{

/***/ 17816:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MySelect)
/* harmony export */ });
/* harmony import */ var antd_es_form_style__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(44036);
/* harmony import */ var antd_es_form__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16575);
/* harmony import */ var antd_es_select_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(94289);
/* harmony import */ var antd_es_select__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4213);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(93121);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _icode_run_component_layout_utils_Base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(33430);
/* harmony import */ var _icode_run_utils_es_dataType__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(61204);
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var MySelect=/*#__PURE__*/function(_Base){_inherits(MySelect,_Base);var _super=_createSuper(MySelect);function MySelect(){var _this;_classCallCheck(this,MySelect);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onChange=function(value){var _this$props=_this.props,_this$props$outputPar=_this$props.outputParam,outputParam=_this$props$outputPar===void 0?{}:_this$props$outputPar,valueSplit=_this$props.valueSplit;if(value&&value.target){return;}if(outputParam.onChange&&typeof outputParam.onChange==='function'){var newValue=value;if(valueSplit){newValue=(0,_icode_run_utils_es_dataType__WEBPACK_IMPORTED_MODULE_4__/* .getOutputValue */ .jG)({outputType:'string',value:newValue,valueSplit:valueSplit});}outputParam.onChange(newValue);}};_this.getValue=function(){var _this$props2=_this.props,_this$props2$outputPa=_this$props2.outputParam,outputParam=_this$props2$outputPa===void 0?{}:_this$props2$outputPa,valueSplit=_this$props2.valueSplit;return (0,_icode_run_utils_es_dataType__WEBPACK_IMPORTED_MODULE_4__/* .getOutputValue */ .jG)({outputType:outputParam.outputType||'string',value:outputParam.value,valueSplit:valueSplit});};_this.renderContent=function(){var _this$props3=_this.props,label=_this$props3.label,_this$props3$classNam=_this$props3.className,className=_this$props3$classNam===void 0?'':_this$props3$classNam,_this$props3$style=_this$props3.style,style=_this$props3$style===void 0?{}:_this$props3$style,events=_this$props3.events,data=_this$props3.data,dimensionConfig=_this$props3.dimensionConfig,allowClear=_this$props3.allowClear,bordered=_this$props3.bordered,disabled=_this$props3.disabled,size=_this$props3.size,placeholder=_this$props3.placeholder,maxTagCount=_this$props3.maxTagCount,maxTagTextLength=_this$props3.maxTagTextLength,placement=_this$props3.placement,showArrow=_this$props3.showArrow,filterOption=_this$props3.filterOption,autoFocus=_this$props3.autoFocus,isTags=_this$props3.isTags,_this$props3$outputPa=_this$props3.outputParam,outputParam=_this$props3$outputPa===void 0?{}:_this$props3$outputPa;var enumOptions=_this.getDimensionsData({data:data,dimensionConfig:dimensionConfig});var modeOptions={};if(outputParam.outputType==='[string]'){modeOptions.mode=isTags?'tags':'multiple';}var currProps=_objectSpread(_objectSpread(_objectSpread({className:!label?className:'',style:!label?style:{},value:_this.getValue(),// ...(isBindPressEnter ? {
//   onPressEnter: this.onChange
// } : {}),
onChange:_this.onChange},events),modeOptions),{},{options:enumOptions,allowClear:allowClear,bordered:bordered,disabled:disabled,size:size,placeholder:placeholder,maxTagCount:maxTagCount,maxTagTextLength:maxTagTextLength,placement:placement,showArrow:showArrow,filterOption:filterOption,autoFocus:autoFocus});return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(antd_es_select__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z,currProps);};return _this;}_createClass(MySelect,[{key:"render",value:function render(){var _this$props4=this.props,label=_this$props4.label,_this$props4$classNam=_this$props4.className,className=_this$props4$classNam===void 0?'':_this$props4$classNam,_this$props4$style=_this$props4.style,style=_this$props4$style===void 0?{}:_this$props4$style,_this$props4$outputPa=_this$props4.outputParam,outputParam=_this$props4$outputPa===void 0?{}:_this$props4$outputPa;var content=this.renderContent();return label?/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_6__/* ["default"].Item */ .Z.Item,_extends({className:className,style:style},outputParam.name?{name:outputParam.name}:{},{label:label,initialValue:this.getValue(),onChange:this.onChange,rules:outputParam.rules}),content):content;}}]);return MySelect;}(_icode_run_component_layout_utils_Base__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z);;

/***/ }),

/***/ 70347:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "T": () => (/* binding */ getDateFormartValue),
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(18231);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
var getDateFormartValue=function getDateFormartValue(value,formart){var newValue='';try{newValue=moment__WEBPACK_IMPORTED_MODULE_0___default()(value).format(formart);}catch(e){//
}return newValue||'';};/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ([{title:'时间戳',value:'timestamp',getValue:function getValue(value){return+new Date(value);}},{title:'YYYY-MM-DD HH:mm:ss',value:'YYYY-MM-DD HH:mm:ss',getValue:function getValue(value){return moment__WEBPACK_IMPORTED_MODULE_0___default()(value).format('YYYY-MM-DD HH:mm:ss');}},{title:'YYYY-MM-DD 00:00:00',value:'YYYY-MM-DD 00:00:00',getValue:function getValue(value){return moment__WEBPACK_IMPORTED_MODULE_0___default()(value).format('YYYY-MM-DD 00:00:00');}},{title:'YYYY-MM-DD 23:59:59',value:'YYYY-MM-DD 23:59:59',getValue:function getValue(value){return moment__WEBPACK_IMPORTED_MODULE_0___default()(value).format('YYYY-MM-DD 23:59:59');}},{title:'YYYY-MM-DD HH:mm',value:'YYYY-MM-DD HH:mm',getValue:function getValue(value){return moment__WEBPACK_IMPORTED_MODULE_0___default()(value).format('YYYY-MM-DD HH:mm');}},{title:'YYYY-MM-DD',value:'YYYY-MM-DD',getValue:function getValue(value){return moment__WEBPACK_IMPORTED_MODULE_0___default()(value).format('YYYY-MM-DD');}},{title:'YYYY-MM',value:'YYYY-MM',getValue:function getValue(value){return moment__WEBPACK_IMPORTED_MODULE_0___default()(value).format('YYYY-MM');}},{title:'YYYY',value:'YYYY',getValue:function getValue(value){return moment__WEBPACK_IMPORTED_MODULE_0___default()(value).format('YYYY');}}]);

/***/ }),

/***/ 14998:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "G3": () => (/* binding */ sumOptions),
/* harmony export */   "XX": () => (/* binding */ getDataDimesion)
/* harmony export */ });
/* unused harmony exports getDimensionConfig, sumData */
function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var sumOptions={total:{label:'总和',value:'total',types:['number']},average:{label:'平均',value:'average',types:['number']},count:{label:'计数',value:'count',types:['number','date','string']},countDifferent:{label:'计数(不同)',value:'countDifferent',types:['number','date','string']},max:{label:'取最大值',value:'max',types:['number']},min:{label:'取最小值',value:'min',types:['number']}};var getDataDimesion=function getDataDimesion(keyName){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var aliasObj=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var dimesionObj={};data.forEach(function(item){if(item[keyName]){dimesionObj[item[keyName]]={label:aliasObj[item[keyName]]||item[keyName],value:item[keyName]};}});return Object.values(dimesionObj);};var getDimensionConfig=function getDimensionConfig(){var responseConfig=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var dimensionConfig={};var measureConfig={};responseConfig.forEach(function(item){var currDimensionConfig=item.dimensionConfig||{};if(Object.keys(currDimensionConfig).length){var dimensionsLabels={};var dimensions=currDimensionConfig.dimensions||[];if(!currDimensionConfig.isUseNumberRange){dimensions.forEach(function(dimensionItem){dimensionsLabels[dimensionItem.value]=dimensionItem.label;});}dimensionConfig[item.keyName]={keyName:item.keyName,type:item.type,autoDimensions:currDimensionConfig.autoDimensions,isUseNumberRange:currDimensionConfig.isUseNumberRange,dimensions:dimensions,dimensionsLabels:dimensionsLabels};}else{measureConfig[item.keyName]={keyName:item.keyName,type:item.type,sumType:item.sumType};}});return{dimensionConfig:dimensionConfig,measureConfig:measureConfig};};var sumData=function sumData(_ref){var _ref$data=_ref.data,data=_ref$data===void 0?[]:_ref$data,_ref$dimensionConfig=_ref.dimensionConfig,dimensionConfig=_ref$dimensionConfig===void 0?{}:_ref$dimensionConfig,_ref$measureConfig=_ref.measureConfig,measureConfig=_ref$measureConfig===void 0?{}:_ref$measureConfig;var newDimensionData={};var dimensionConfigValues=Object.values(dimensionConfig);var dimensionConfigKeys=Object.keys(dimensionConfig);data.forEach(function(dataItem){var newDataItem=_objectSpread({},dataItem);var dimensionName=[];dimensionConfigValues.forEach(function(dimensionItem){var dataValue=dataItem[dimensionItem.keyName];if(dimensionItem.autoDimensions){var currValue=dimensionItem.dimensionsLabels[dataValue];if(!(currValue||currValue===0)){currValue=dataValue;}newDataItem[dimensionItem.keyName]=currValue;dimensionName.push(currValue);}else{var dimensions=dimensionItem.dimensions;if(dimensionItem.isUseNumberRange){(dimensions||[]).forEach(function(staticDimensionItem){var staticValue=staticDimensionItem.value;var currValue=staticDimensionItem.label;if(staticValue&&(staticValue.min||staticValue.min===0)&&(staticValue.max||staticValue.max===0)){var dataValueNumber=parseFloat(dataValue);var min=parseFloat(staticValue.min);var max=parseFloat(staticValue.max);if(dataValueNumber>=min&&dataValueNumber<=max){newDataItem[dimensionItem.keyName]=currValue;dimensionName.push(currValue);}}});}else if(dimensions.length){var _currValue=dimensionItem.dimensionsLabels[dataValue];if(_currValue||_currValue===0){newDataItem[dimensionItem.keyName]=_currValue;dimensionName.push(_currValue);}else if(dimensionItem.dimensionsLabels['%eles%']){_currValue=dimensionItem.dimensionsLabels['%eles%'];newDataItem[dimensionItem.keyName]=_currValue;dimensionName.push(_currValue);}}}});if(dimensionName&&dimensionName.length){newDimensionData[dimensionName.join('_')]=newDimensionData[dimensionName.join('_')]||[];newDimensionData[dimensionName.join('_')].push(_objectSpread({},newDataItem));}});var newDate=[];Object.values(newDimensionData).forEach(function(dataItems){var newItem={};var countDiffData={};var averages={};var dotNum=10000;(dataItems||[]).forEach(function(dataItem){var keyName;for(keyName in dataItem){var isDimension=dimensionConfigKeys.indexOf(keyName)>=0;var measureConfigItem=measureConfig[keyName]||{};var currSumType=measureConfigItem.sumType||'count';var type=measureConfigItem.type;var dataValue=dataItem[keyName];var dataValueNumber=parseFloat(dataValue,10)||0;if(isDimension){newItem[keyName]=dataValue;}else if(currSumType==='count'){newItem[keyName]=newItem[keyName]||0;newItem[keyName]=newItem[keyName]+1;}else if(currSumType==='countDifferent'){countDiffData[keyName]=countDiffData[keyName]||{};countDiffData[keyName][dataValue]=countDiffData[keyName][dataValue]||0;countDiffData[keyName][dataValue]=countDiffData[keyName][dataValue]+1;newItem[keyName]=Object.keys(countDiffData[keyName]).length;}else if(currSumType==='total'){newItem[keyName]=newItem[keyName]||0;newItem[keyName]=newItem[keyName]*dotNum+dataValueNumber*dotNum;newItem[keyName]=newItem[keyName]/dotNum;}else if(currSumType==='average'){averages[keyName]=averages[keyName]||{};averages[keyName].total=averages[keyName].total||0;averages[keyName].total=averages[keyName].total*dotNum+dataValueNumber*dotNum;averages[keyName].total=averages[keyName].total/dotNum;averages[keyName].count=averages[keyName].count||0;averages[keyName].count=averages[keyName].count+1;}else if(currSumType==='max'){newItem[keyName]=newItem[keyName]||dataValueNumber;newItem[keyName]=dataValueNumber>newItem[keyName]?dataValueNumber:newItem[keyName];}else if(currSumType==='min'){newItem[keyName]=newItem[keyName]||dataValueNumber;newItem[keyName]=dataValueNumber<newItem[keyName]?dataValueNumber:newItem[keyName];}}});var keyName;for(keyName in averages){var total=averages[keyName].total||0;var count=averages[keyName].count||0;newItem[keyName]=total*dotNum/(count*dotNum);}newDate.push(newItem);});return newDate;};

/***/ }),

/***/ 35240:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(18231);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ([{title:"当天",value:'today',getValue:function getValue(format){var start=moment__WEBPACK_IMPORTED_MODULE_0___default()().format('YYYY-MM-DD 00:00:00');var end=moment__WEBPACK_IMPORTED_MODULE_0___default()().format('YYYY-MM-DD 23:59:59');return[start.valueOf(),end.valueOf()];}},{title:"当前月",value:'currMonth',getValue:function getValue(format){var start=moment__WEBPACK_IMPORTED_MODULE_0___default()().format('YYYY-MM-01 00:00:00');var end=moment__WEBPACK_IMPORTED_MODULE_0___default()();end=end.format("YYYY-MM-".concat(end.daysInMonth()," 23:59:59"));return[start.valueOf(),end.valueOf()];}},{title:"当前季度",value:'currQuarter',getValue:function getValue(format){var start=moment__WEBPACK_IMPORTED_MODULE_0___default()();start=start.add(-(start.month()%3),'month');start=start.format("YYYY-MM-01 00:00:00");var end=moment__WEBPACK_IMPORTED_MODULE_0___default()();end=end.add(2-end.month()%3,'month');end=end.format("YYYY-MM-".concat(end.daysInMonth()," 23:59:59"));return[start.valueOf(),end.valueOf()];}},{title:"当前年",value:'currYear',getValue:function getValue(format){var start=moment__WEBPACK_IMPORTED_MODULE_0___default()().format('YYYY-01-01 00:00:00');var end=moment__WEBPACK_IMPORTED_MODULE_0___default()().format('YYYY-12-31 23:59:59');return[start.valueOf(),end.valueOf()];}},{title:"近7天",value:'7days',getValue:function getValue(format){var start=moment__WEBPACK_IMPORTED_MODULE_0___default()().add(-7,'day').format('YYYY-MM-DD 00:00:00');var end=moment__WEBPACK_IMPORTED_MODULE_0___default()().format('YYYY-MM-DD 23:59:59');return[start.valueOf(),end.valueOf()];}},{title:"近1个月",value:'1month',getValue:function getValue(format){var start=moment__WEBPACK_IMPORTED_MODULE_0___default()().add(-1,'month').format('YYYY-MM-DD 00:00:00');var end=moment__WEBPACK_IMPORTED_MODULE_0___default()().format('YYYY-MM-DD 23:59:59');return[start.valueOf(),end.valueOf()];}},{title:"近3个月",value:'3month',getValue:function getValue(format){var start=moment__WEBPACK_IMPORTED_MODULE_0___default()().add(-3,'month').format('YYYY-MM-DD 00:00:00');var end=moment__WEBPACK_IMPORTED_MODULE_0___default()().format('YYYY-MM-DD 23:59:59');return[start.valueOf(),end.valueOf()];}},{title:"近1年",value:'1year',getValue:function getValue(format){var start=moment__WEBPACK_IMPORTED_MODULE_0___default()().add(-1,'year').format('YYYY-MM-DD 00:00:00');var end=moment__WEBPACK_IMPORTED_MODULE_0___default()().format('YYYY-MM-DD 23:59:59');return[start.valueOf(),end.valueOf()];}}]);// export default [
//   {
//     title: "当天",
//     value: 'today',
//     getValue: function(format) {
//       const start = moment().format('YYYY-MM-DD 00:00:00');
//       const end = moment().format('YYYY-MM-DD 23:59:59');
//       return [start, end];
//     }
//   },
//   {
//     title: "当月",
//     value: 'today',
//     getValue: function(format) {
//       return moment().format(format || _format);
//     }
//   },
//   {
//     title: "当季度",
//     value: 'today',
//     getValue: function(format) {
//       return moment().format(format || _format);
//     }
//   },
//   {
//     title: "当年",
//     value: 'today',
//     getValue: function(format) {
//       return moment().format(format || _format);
//     }
//   },
//   {
//     title: "近7天",
//     value: '7days',
//     getValue: function(format) {
//       return moment().add(-7, 'day').format(format || _format);
//     }
//   },
//   {
//     title: "近1个月",
//     value: '1month',
//     getValue: function(format) {
//       return moment().add(-1, 'month').format(format || _format);
//     }
//   },
//   {
//     title: "近3个月",
//     value: '3month',
//     getValue: function(format) {
//       return moment().add(-3, 'month').format(format || _format);
//     }
//   },
//   {
//     title: "近1年",
//     value: '1year',
//     getValue: function(format) {
//       return moment().add(-1, 'year').format(format || _format);
//     }
//   }
// ]

/***/ }),

/***/ 79199:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ([{"keyName":"userId","title":"用户id"},{"keyName":"userName","title":"用户id"},{"keyName":"jobId","title":"用户工号"},{"keyName":"org","title":"用户所属组织"},{"keyName":"currOrg","title":"用户当前所在组织"}]);

/***/ }),

/***/ 6369:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Cn": () => (/* binding */ getParamDefaultValue),
  "Cf": () => (/* binding */ getValueFormat),
  "Xe": () => (/* binding */ parseApiData),
  "zt": () => (/* binding */ parseApiParam)
});

// UNUSED EXPORTS: getDateDimension, getDefaultValue, getNumberRangeDimension, getStringDimension, getTextContent, refreshStaticData

// EXTERNAL MODULE: ../my-cli/node_modules/moment/moment.js
var moment_moment = __webpack_require__(18231);
// EXTERNAL MODULE: ./packages/utils/es/dynamicOptions.js
var dynamicOptions = __webpack_require__(35240);
// EXTERNAL MODULE: ./packages/utils/es/dateFormatOptions.js
var dateFormatOptions = __webpack_require__(70347);
;// CONCATENATED MODULE: ./packages/utils/es/parseNumber.js
var parseNumber=function parseNumber(num,decimals,separator){if(!(decimals||separator)){return num;}var newNum=num||0;if(decimals&&decimals.count){var count=decimals.count,isRounding=decimals.isRounding,isCovering=decimals.isCovering;newNum=newNum+'';if(isRounding){newNum=Number(newNum).toFixed(2);if(!isCovering){newNum=parseFloat(newNum);}}else if(isCovering){if(newNum.indexOf('.')>0){newNum=(newNum+'000000000').substring(0,newNum.indexOf('.')+1+count);}else{newNum=(newNum+'.000000000').substring(0,newNum.length+1+count);}}else{newNum=newNum.indexOf('.')>=0?newNum.substring(0,newNum.indexOf('.')+1+count):newNum;newNum=parseFloat(newNum,10);}}if(separator){newNum=newNum+'';var numArr=['',''];if(newNum.indexOf('.')>=0){numArr=newNum.split('.');}else{numArr[0]=newNum;}var result=[],counter=0;numArr[0]=(numArr[0]||0).toString().split('');for(var i=numArr[0].length-1;i>=0;i--){counter++;result.unshift(numArr[0][i]);if(!(counter%3)&&i!==0){result.unshift(',');}}newNum=numArr[1]?[result.join(''),numArr[1]].join('.'):result.join('');}return newNum;};
;// CONCATENATED MODULE: ./packages/utils/es/parseLogic.js
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}var parseLogic=function parseLogic(keyName,ruleValue,value,data,isCount){var result=value||'';try{var text='';if(_typeof(ruleValue)==='object'){var dataKeys=Object.keys(data);text=[];(ruleValue||[]).forEach(function(item){if(dataKeys.indexOf(item)>=0){text.push("[".concat(item,"]"));}else{text.push(item);}});text=text.join('');}else{text=ruleValue;}text=text.replace('['+keyName+']',value);text=text.replace(/\[([^(\[|\])]*)\]/g,function(value){var newValue=value;newValue=newValue.replace(/\[|\]/g,'');if(data[newValue]||data[newValue]===0){if(Number(data[newValue])===data[newValue]){return Number(data[newValue]);}else{return"".concat(data[newValue]);}}else{return"".concat(newValue);}});if(isCount){result=new Function("return ".concat(text))();}else{result=text;}}catch(e){//
}return result;};
// EXTERNAL MODULE: ./packages/utils/es/utils.js
var utils = __webpack_require__(562);
;// CONCATENATED MODULE: ./packages/utils/es/index.js
function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function es_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){es_typeof=function _typeof(obj){return typeof obj;};}else{es_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return es_typeof(obj);}// export const parseDateRange = (value, format = 'YYYY-MM-DD HH:mm:ss') => {
//   const newValues = [];
//   if(value && typeof value === 'object' && value.length) {
//     value.forEach(valueItem => {
//       newValues.push(getDateFormartValue(valueItem, format));
//     })
//   }
//   else if(value && (typeof value === 'string' || typeof value === 'number')){
//     newValues.push(getDateFormartValue(value, 'YYYY-MM-DD 00:00:00'));
//     newValues.push(getDateFormartValue(value, 'YYYY-MM-DD 23:59:59'));
//   }
//   return newValues;
// };
// 格式化顺序
var formatSort=['count','date','toFixed','separator','encryption','alias','group'];/**
 * 计算字符串维度
 * @param {*} dimensionKey
 * @param {*} data
 * rollup index.js --format cjs --file ./cjs/index.js
 * @returns
 */var _getStringDimensionItem=function _getStringDimensionItem(value,hadDimensions){if(!hadDimensions[value]){hadDimensions[value]=true;return{label:value,value:value};}};var getStringDimension=function getStringDimension(dimensionKey,data){var dimensions=[];var hadDimensions={};data.forEach(function(item){var itemValue=_getStringDimensionItem(item[dimensionKey],hadDimensions);if(itemValue){dimensions.push(itemValue);}});return{data:dimensions,parseValue:null};};/**
 * 计算数字维度-范围
 * @param {*} dimensionKey 维度字段
 * @param {*} data 数据
 * @returns
 */var _getNumberRangeDimension=function _getNumberRangeDimension(dimensionKey,data){var dimensions=[];var min=10000000000000;var max=0;data.forEach(function(item){if(item[dimensionKey]){if(item[dimensionKey]<min){min=item[dimensionKey];}if(item[dimensionKey]>max){max=item[dimensionKey];}}});var count=parseInt((max-min)/2,10);dimensions.push({label:"".concat(min," - ").concat(min+count),value:{min:min,max:min+count}});dimensions.push({label:"".concat(min+count," - ").concat(max),value:{min:min+count,max:max}});return{data:dimensions,parseValue:null};};var getNumberRangeDimension=(/* unused pure expression or super */ null && (_getNumberRangeDimension));/**
 * 计算日期维度
 * @param {*} dimensionKey 维度字段
 * @param {*} data  数据
 * @param {*} dateType 日期类型： 年、季、月、周、日
 * @returns
 */ // const _getDateDimension = (value, dateType, hadDimensions) => {
//   let dimensionItemValue;
//   if(dateType === '年') {
//     dimensionItemValue = moment(value).format('YYYY');
//   }
//   else if(dateType === '月') {
//     dimensionItemValue = moment(value).format('YYYY-MM');
//   }
//   else if(dateType === '日') {
//     dimensionItemValue = moment(value).format('YYYY-MM-DD');
//   }
//   if(dateType === '季') {
//     dimensionItemValue = `${moment(value).format('YYYY')} Q${moment(value).format('Q')}`;
//   }
//   if(!hadDimensions[dimensionItemValue]) {
//     hadDimensions[dimensionItemValue] = true;
//     return {
//       label: dimensionItemValue,
//       value: dimensionItemValue
//     }
//   }
// }
var getDateDimension=function getDateDimension(dimensionKey,data,dateType){var dimensions=[];var hadDimensions={};var years=[];var months=[];var days=[];var type;data.forEach(function(item){if(item[dimensionKey]){var year=moment(item[dimensionKey]).format('YYYY');var day=moment(item[dimensionKey]).format('YYYY-MM-DD');var month=moment(item[dimensionKey]).format('YYYY-MM');if(!hadDimensions[year]){years.push({label:year,value:year});hadDimensions[year]=true;}if(!hadDimensions[month]){months.push({label:month,value:month});hadDimensions[month]=true;}if(!hadDimensions[day]){days.push({label:day,value:day});hadDimensions[day]=true;}}});if(years.length>5){dimensions=years;type='年';}else if(months.length>5){dimensions=months;type='月';}else{dimensions=days;type='日';}return{data:dimensions,dateType:type};};// const mathFn = {
//   'string': getStringDimension,
//   'number': getStringDimension,
//   'numberRange': getNumberRangeDimension,
//   'date': getDateDimension
// }
// export const parseDimensionAndData = (
//   { autoDimensions, structureKeyName, dimensions = [], dateType, structureType },
//   { measureKey, collectType, tofixed = 2, math = '' },
//   data = [],
// ) => {
//   let newData = [];
//   let dimensionValueObj = {},
//     key;
//   let dimensionValueCount = {};
//   let dimensionDiffValueCount = {};
//   let dimension = [];
//   const hadValue = {};
//   const newDimensionData = autoDimensions ? [] : dimensions;
//   const hadDimensionData = {};
//   let integer = 1000000;
//   data.forEach(item => {
//     if (item[structureKeyName] && (item[measureKey] || item[measureKey] === 0)) {
//       let dimensionValue = item[structureKeyName];
//       // 当"自动计算维度"为true时，遍利数据中的维度值，计数维度数据
//       if (autoDimensions) {
//         let dimensionItem;
//         if (structureType === 'date') {
//           dimensionItem = _getDateDimension(dimensionValue, dateType, hadDimensionData);
//         } else {
//           dimensionItem = _getStringDimensionItem(dimensionValue, hadDimensionData);
//         }
//         if (dimensionItem) {
//           newDimensionData.push(dimensionItem);
//           dimensionValue = dimensionItem.value;
//         }
//       }
//       // 通过维度统计度量的总和、计数、计数(不同)
//       dimensionValueObj[dimensionValue] =
//         (dimensionValueObj[dimensionValue] || 0) + (Number(item[measureKey]) * integer || 0);
//       if (item[measureKey] || item[measureKey] === 0) {
//         dimensionValueCount[dimensionValue] = (dimensionValueCount[dimensionValue] || 0) + 1;
//         if (!hadValue[`${dimensionValue}_${item[measureKey]}`]) {
//           dimensionDiffValueCount[dimensionValue] =
//             (dimensionDiffValueCount[dimensionValue] || 0) + 1;
//           hadValue[`${dimensionValue}_${item[measureKey]}`] = true;
//         }
//       }
//     }
//   });
//   // 求统计度量的平均
//   if (collectType === '平均值') {
//     for (key in dimensionValueObj) {
//       dimensionValueObj[key] = dimensionValueObj[key] / dimensionValueCount[key];
//     }
//   }
//   newDimensionData.map(item => {
//     dimension.push(item.label);
//     if (collectType === '计数') {
//       newData.push(dimensionValueCount[item.value]);
//     } else if (collectType === '计数(不同)') {
//       newData.push(dimensionDiffValueCount[item.value]);
//     } else if (dimensionValueObj[item.value] || dimensionValueObj[item.value] === 0) {
//       let resultValue = dimensionValueObj[item.value] / integer;
//       if (math) {
//         let newMath = math;
//         newMath = newMath.replace(/\[[A-Za-z0-9_]+\]/g, function(string) {
//           return resultValue;
//         });
//         try {
//           resultValue = new Function(`return ${newMath}`)();
//         } catch (e) {
//           //
//         }
//       }
//       newData.push(resultValue.toFixed(tofixed));
//     }
//   });
//   return {
//     data: newData || [],
//     dimension,
//   };
// };
// 获取默认值的值
var getDefaultValue=function getDefaultValue(ruleType,ruleValue){var value='';if(ruleType==='dynamic'){dynamicOptions/* default.forEach */.Z.forEach(function(item){if(ruleValue===item.value){value=item.getValue();}});}return value;};// 获取请求参数的值
var getParamDefaultValue=function getParamDefaultValue(){var defaultValueConfig=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var ruleType=defaultValueConfig.ruleType;var ruleValue=defaultValueConfig.ruleValue;var newValue=(0,utils/* isValue */.w)(ruleValue)?ruleValue:'';if(ruleType&&(0,utils/* isValue */.w)(ruleValue)){if(ruleType==="static"){newValue=ruleValue;}else if(ruleType==="cookie"){newValue=getDefaultValue("cookie",ruleValue);}else if(ruleType==="global"){newValue=getDefaultValue("global",ruleValue);}else if(ruleType==="dynamic"){newValue=getDefaultValue("dynamic",ruleValue);}else if(ruleType==="api"||ruleType==="event"){newValue=ruleValue;}}return newValue;};// 获取值的格式化的值
var dateFormatOptionsObj={};dateFormatOptions/* default.forEach */.Z.forEach(function(item){dateFormatOptionsObj[item.value]=item.getValue;});var _getValueFormat=function _getValueFormat(value,ruleType,ruleValue,keyName,data){var newValue=value;if(ruleType==='count'&&ruleValue&&ruleValue.length){newValue=parseLogic(keyName,ruleValue,newValue,data,true);}if(ruleType==='date'&&ruleValue&&newValue){var formatFn=dateFormatOptionsObj[ruleValue];if(es_typeof(newValue)==='object'&&newValue.length){var newValues=[];newValue.forEach(function(valueItem){if(formatFn&&typeof formatFn==='function'){newValues.push(formatFn(valueItem));}else{newValues.push((0,dateFormatOptions/* getDateFormartValue */.T)(valueItem,ruleValue));}});newValue=newValues;}else{if(formatFn&&typeof formatFn==='function'){newValue=formatFn(newValue);}else{newValue=(0,dateFormatOptions/* getDateFormartValue */.T)(newValue,ruleValue);}}}if(ruleType==='toFixed'&&ruleValue&&ruleValue.count&&(0,utils/* isValue */.w)(Number(newValue))){newValue=parseNumber(newValue,ruleValue,false);}if(ruleType==='separator'&&ruleValue&&Number(newValue)){newValue=parseNumber(newValue,null,true);}if(ruleType==='encryption'&&ruleValue&&Object.keys(ruleValue).length&&newValue){var start=parseInt(ruleValue.start,10);var end=parseInt(ruleValue.end,10);var backward=parseInt(ruleValue.backward,10);newValue=newValue+'';if((start||start===0)&&backward){end=newValue.length-1-backward;newValue=newValue.split('').map(function(item,index){if(index>=start&&index<=end){return'*';}return item;});newValue=newValue.join('');}else if(start||start===0){end=end||newValue.length;end=end-1;start=start<end?start:end;end=start<end?end:start;newValue=newValue.split('').map(function(item,index){if(index>=start&&index<=end){return'*';}return item;});newValue=newValue.join('');}}if(ruleType==='alias'&&ruleValue&&ruleValue.length){ruleValue.forEach(function(item){if(item.value===newValue.toString()){newValue=item.label||'';}});}if(ruleType==='group'&&ruleValue&&newValue&&ruleValue.length){newValue=parseLogic(keyName,ruleValue,newValue,data);}// if(ruleType === 'logic' && ruleValue && newValue) {
//   newValue = parseLogic(keyName, ruleValue, newValue, data);
// }
return newValue;};var getValueFormat=_getValueFormat;/**
 * 对接口返回数据进行：数据格式化、汇总
 * @param {*} data 接口返回数据
 * @param {*} configs relations中当前模块对返回数据的配置
 * @param {*} dimensionKeyName 围度
 * @param {*} measureConfig 度量配置
 * @returns 
 */var parseApiData=function parseApiData(data){var configs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var dimensionKeyName=arguments.length>2?arguments[2]:undefined;var measureConfig=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var newData;if(!data){return[];}else if(Object.prototype.toString.call(data)==='[object Object]'){newData=JSON.parse(JSON.stringify([data]||0));}else if(Object.prototype.toString.call(data)==='[object Array]'){newData=JSON.parse(JSON.stringify(data||[]));}else{return[];}var sumData={},coefficient=10000,countDifferent={};var isParseSumData=false,sumKey,sumSubKey;var measureKeyNames=[],staticSumTypeObj={};if(dimensionKeyName&&measureConfig&&measureConfig.length){isParseSumData=true;measureKeyNames=measureConfig.map(function(items){var sumType='total';if(items.structureType!=='number'){sumType='count';}staticSumTypeObj[items.keyName]=sumType;return items.keyName;});}newData=(newData||[]).map(function(items){if(items[dimensionKeyName]&&configs&&configs[dimensionKeyName]&&configs[dimensionKeyName].formatConfig&&configs[dimensionKeyName].formatConfig.date){items[dimensionKeyName]=_getValueFormat(items[dimensionKeyName],'date',configs[dimensionKeyName].formatConfig.date);}return items;});newData=(newData||[]).map(function(items){if(es_typeof(items)==='object'){for(var key in items){// 汇总统计
if(dimensionKeyName&&items[dimensionKeyName]&&measureKeyNames.indexOf(key)>=0){var sumType=configs[key]&&configs[key].sumType||staticSumTypeObj[key];sumData[items[dimensionKeyName]]=sumData[items[dimensionKeyName]]||{};var _value=sumData[items[dimensionKeyName]][key]||{};var countDifferentArray=_value.countDifferentArray||[];if(countDifferentArray.indexOf(items[key])<0){countDifferentArray.push(items[key]);}var total=(_value.total||0)+Number(items[key]);var count=(_value.count||0)+1;sumData[items[dimensionKeyName]][key]={total:total,average:total/count,count:count,countDifferent:countDifferentArray.length,countDifferentArray:countDifferentArray,sumType:sumType};}}}return items;});if(isParseSumData){newData=[];for(sumKey in sumData){var items={};items[dimensionKeyName]=sumKey;for(sumSubKey in sumData[sumKey]){var sumSubValue=sumData[sumKey][sumSubKey];items[sumSubKey]=sumSubValue[sumSubValue.sumType];}newData.push(items);}}(newData||[]).map(function(items){if(es_typeof(items)==='object'){var key,ruleType;for(key in items){if(configs[key]&&configs[key].formatConfig){for(ruleType in configs[key].formatConfig){var ruleValue=configs[key].formatConfig[ruleType];if(ruleValue&&ruleType!=='date'){items[key]=_getValueFormat(items[key],ruleType,ruleValue,key,items);}}}}}return items;});return newData;};/**
 * 获取属性Text的content
 * @param data: 数据
 * @param config: 数据配置信息(为type=text的propsOptions中的value值)
 * @param content: 文字内容(为type=text的propsOptions中的extendValues.content值)
 */var getTextContent=function getTextContent(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var config=arguments.length>1?arguments[1]:undefined;var content=arguments.length>2?arguments[2]:undefined;var newData=data[0]||{};var newContent='';config.forEach(function(keyName,index){var value=newData[keyName]||'';newContent=content.replaceAll("[".concat(index,"]"),value);});return newContent;};/**
 * randomValues 更新静态数据所用的变更值所对应的方法
 * refreshStaticData 更新静态数据菡数
 * data 静态数据
 * config 更新策略,如,[{keyName: '字段名称', type: 'random+1'}]
 */var randomValues={'random+1':function random1(value){var count=parseInt(Math.random()*10,10)||1;return(value*10000+count*10000)/10000;},'random+2':function random2(value){var count=parseInt(Math.random()*100,10)||10;return(value*10000+count*10000)/10000;},'random+3':function random3(value){var count=parseInt(Math.random()*1000,10)||1000;return(value*10000+count*10000)/10000;},'random-1':function random1(value){var count=parseInt(Math.random()*10,10)||1;return(value*10000-count*10000)/10000;},'random-2':function random2(value){var count=parseInt(Math.random()*100,10)||10;return(value*10000-count*10000)/10000;},'random-3':function random3(value){var count=parseInt(Math.random()*1000,10)||1000;return(value*10000-count*10000)/10000;},'random':function random(){var count=parseInt(Math.random()*10,10);return count%2?(value*10000+count*10000)/10000:(value*10000-count*10000)/10000;}};var refreshStaticData=function refreshStaticData(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var newData=JSON.parse(JSON.stringify(data));newData.forEach(function(dataItem,index){config.forEach(function(configItem){if(dataItem[configItem.keyName]&&parseFloat(dataItem[configItem.keyName])){newData[index][configItem.keyName]=randomValues[configItem.type](dataItem[configItem.keyName]);}});});return newData;};/**
 * 根据参数的格式化配置数据，返回格式化后的参数
 * @param {*} formatConfig 格式化配置数据
 * @param {*} params 参数
 * @returns 返回格式化后的参数
 */var parseApiParam=function parseApiParam(params,formatConfig){var newParams=_extends({},params);var keyName;var _loop=function _loop(){var currFormatConfig=formatConfig[keyName]||{};formatSort.forEach(function(formatRuleType){var formatRuleValue=currFormatConfig[formatRuleType];if(formatRuleValue){newParams[keyName]=_getValueFormat(newParams[keyName],formatRuleType,formatRuleValue,keyName,params);}});};for(keyName in formatConfig){_loop();}return newParams;};

/***/ }),

/***/ 97027:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ TableResize)
});

// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/table/style/index.js + 3 modules
var style = __webpack_require__(13686);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/table/index.js + 77 modules
var table = __webpack_require__(53026);
// EXTERNAL MODULE: consume shared module (default) react@^16.14.0 (singleton) (fallback: ../my-cli/node_modules/react/index.js)
var index_js_ = __webpack_require__(93121);
var index_js_default = /*#__PURE__*/__webpack_require__.n(index_js_);
// EXTERNAL MODULE: ../my-designer/node_modules/react-resizable/index.js
var react_resizable = __webpack_require__(83077);
;// CONCATENATED MODULE: ../my-designer/src/components/TableResize/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const index_module = ({"tableBox":"_-my-designer-src-components-TableResize-index-module__tableBox","contentEditTd":"_-my-designer-src-components-TableResize-index-module__contentEditTd","tbodyTh":"_-my-designer-src-components-TableResize-index-module__tbodyTh","text":"_-my-designer-src-components-TableResize-index-module__text","titleKeyName":"_-my-designer-src-components-TableResize-index-module__titleKeyName","titleName":"_-my-designer-src-components-TableResize-index-module__titleName"});
;// CONCATENATED MODULE: ../my-designer/src/components/TableResize/ContentEdit.jsx
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var textFormat=function textFormat(e){e.preventDefault();var text;var clp=(e.originalEvent||e).clipboardData;if(clp===undefined||clp===null){text=window.clipboardData.getData('text')||'';if(text!==''){if(window.getSelection){var newNode=document.createElement('span');newNode.innerHTML=text;window.getSelection().getRangeAt(0).insertNode(newNode);}else{document.selection.createRange().pasteHTML(text);}}}else if(document.execCommand){text=clp.getData('text/plain')||'';if(text!==''){document.execCommand('insertText',false,text);}}};var ContentEdit=/*#__PURE__*/function(_React$Component){_inherits(ContentEdit,_React$Component);var _super=_createSuper(ContentEdit);function ContentEdit(){_classCallCheck(this,ContentEdit);return _super.apply(this,arguments);}_createClass(ContentEdit,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps,nextState){return JSON.stringify({value:nextProps.value,key:nextProps.key})!==JSON.stringify({value:this.props.value,key:this.props.key});}},{key:"render",value:function render(){var disabled=this.props.disabled;var _this$props=this.props,value=_this$props.value,onChange=_this$props.onChange,_onKeyPress=_this$props.onKeyPress,key=_this$props.key;return/*#__PURE__*/index_js_default().createElement("div",{key:key,className:index_module.contentEditTd,contentEditable:disabled?false:true,onKeyPress:function onKeyPress(e){if(_onKeyPress&&typeof _onKeyPress==='function'){var newValue=e.currentTarget&&e.currentTarget.innerHTML;_onKeyPress(newValue);}},onPaste:function onPaste(e){textFormat(e);},onBlur:function onBlur(e){if(onChange&&typeof onChange==='function'){var newValue=e.currentTarget&&e.currentTarget.innerHTML;onChange(newValue||'');}}},value||'');}}]);return ContentEdit;}((index_js_default()).Component);/* harmony default export */ const TableResize_ContentEdit = (ContentEdit);
// EXTERNAL MODULE: ../my-designer/src/utils/parseStaticData.js
var parseStaticData = __webpack_require__(77920);
;// CONCATENATED MODULE: ../my-designer/src/components/TableResize/index.jsx
function TableResize_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){TableResize_typeof=function _typeof(obj){return typeof obj;};}else{TableResize_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return TableResize_typeof(obj);}var _this=undefined;function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function TableResize_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function TableResize_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function TableResize_createClass(Constructor,protoProps,staticProps){if(protoProps)TableResize_defineProperties(Constructor.prototype,protoProps);if(staticProps)TableResize_defineProperties(Constructor,staticProps);return Constructor;}function TableResize_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)TableResize_setPrototypeOf(subClass,superClass);}function TableResize_setPrototypeOf(o,p){TableResize_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return TableResize_setPrototypeOf(o,p);}function TableResize_createSuper(Derived){var hasNativeReflectConstruct=TableResize_isNativeReflectConstruct();return function _createSuperInternal(){var Super=TableResize_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=TableResize_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return TableResize_possibleConstructorReturn(this,result);};}function TableResize_possibleConstructorReturn(self,call){if(call&&(TableResize_typeof(call)==="object"||typeof call==="function")){return call;}return TableResize_assertThisInitialized(self);}function TableResize_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function TableResize_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function TableResize_getPrototypeOf(o){TableResize_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return TableResize_getPrototypeOf(o);}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key];}}return target;}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}return target;}//import 'react-resizable/css/styles.css';
var keyPressTime=null;var ResizeableTitle=function ResizeableTitle(props){var onResize=props.onResize,_props$width=props.width,width=_props$width===void 0?100:_props$width,dataIndex=props.dataIndex,_onChange=props.onChange,value=props.value,disabledHeader=props.disabledHeader,restProps=_objectWithoutProperties(props,["onResize","width","dataIndex","onChange","value","disabledHeader"]);return/*#__PURE__*/index_js_default().createElement(react_resizable.Resizable,{width:width,height:0,onResize:onResize,draggableOpts:{enableUserSelectHack:false}},/*#__PURE__*/index_js_default().createElement("th",restProps,/*#__PURE__*/index_js_default().createElement(TableResize_ContentEdit,{key:"".concat(0,dataIndex),disabled:disabledHeader&&disabledHeader.length&&disabledHeader.indexOf(dataIndex)>=0||disabledHeader===true,onKeyPress:function(_onKeyPress){function onKeyPress(_x){return _onKeyPress.apply(this,arguments);}onKeyPress.toString=function(){return _onKeyPress.toString();};return onKeyPress;}(function(value){if(onKeyPress&&typeof onKeyPress==='function'){if(keyPressTime){clearTimeout(keyPressTime);keyPressTime=null;}keyPressTime=setTimeout(function(){var newDataDescription=_this.getDataDescription(rowIndex+1,index,value);onKeyPress(newDataDescription);clearTimeout(keyPressTime);keyPressTime=null;},1000);}}),onChange:function onChange(value){_onChange(0,dataIndex,value);},value:value})));};var Demo=/*#__PURE__*/function(_React$Component){TableResize_inherits(Demo,_React$Component);var _super=TableResize_createSuper(Demo);function Demo(){var _this2;TableResize_classCallCheck(this,Demo);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this2=_super.call.apply(_super,[this].concat(args));_this2.colMax=15;_this2.rowMax=30;_this2.state={columns:[],dataDescription:[]};_this2.preDataDescriptionString='';_this2.getDataDescription=function(rowIndex,colIndex,value){var dataDescription=_this2.state.dataDescription;dataDescription[rowIndex]=dataDescription[rowIndex]||[];dataDescription[rowIndex][colIndex]=value;var preDataDescriptionString=JSON.stringify(dataDescription);if(preDataDescriptionString===_this2.preDataDescriptionString){_this2.preDataDescriptionString=preDataDescriptionString;return;}var newDataDescription=[];dataDescription.forEach(function(rowData,rowIndex){var isHadData=false;var newRowData=[];(rowData||[]).forEach(function(colData,colIndex){if(colData){isHadData=true;}if(colData&&colIndex===rowData.length-1||colIndex<rowData.length-1){newRowData.push(colData);}});if(isHadData){newDataDescription.push(newRowData);}});return newDataDescription;};_this2.bindOnChange=function(rowIndex,colIndex,value){var onChange=_this2.props.onChange;var newDataDescription=_this2.getDataDescription(rowIndex,colIndex,value);if(onChange&&typeof onChange==='function'){onChange(newDataDescription);}_this2.setState({dataDescription:newDataDescription});};_this2.getColumns=function(maxCol){var count=0;var columns=[];while(count<=maxCol){columns.push({title:'',dataIndex:count,width:100});count++;}return columns;};_this2.components={header:{cell:ResizeableTitle}};_this2.handleResize=function(index){return function(e,_ref){var size=_ref.size;_this2.setState(function(_ref2){var columns=_ref2.columns;var nextColumns=_toConsumableArray(columns);nextColumns[index]=_objectSpread(_objectSpread({},nextColumns[index]),{},{width:size.width});return{columns:nextColumns};});};};return _this2;}TableResize_createClass(Demo,[{key:"componentDidMount",value:function componentDidMount(){var columns=this.getColumns(15);this.setState({columns:columns});}},{key:"render",value:function render(){var _this3=this;var _this$props=this.props,type=_this$props.type,disabledHeader=_this$props.disabledHeader,onKeyPress=_this$props.onKeyPress;var dataDescription=this.state.dataDescription;var currentData=(0,parseStaticData/* parselistData */.fL)(dataDescription,this.rowMax);var dataTitles=currentData.titles;var data=currentData.data;var scrollX=0;var columns=this.state.columns.map(function(col,index){scrollX+=col.width||100;return _objectSpread(_objectSpread({},col),{},{onHeaderCell:function onHeaderCell(column){return{width:column.width,value:dataTitles[column.dataIndex],dataIndex:column.dataIndex,disabledHeader:disabledHeader,onChange:_this3.bindOnChange,onResize:_this3.handleResize(index)};},render:function render(text,record,rowIndex){return/*#__PURE__*/index_js_default().createElement(TableResize_ContentEdit,{key:"".concat(rowIndex+1).concat(index),onKeyPress:function(_onKeyPress2){function onKeyPress(_x2){return _onKeyPress2.apply(this,arguments);}onKeyPress.toString=function(){return _onKeyPress2.toString();};return onKeyPress;}(function(value){if(onKeyPress&&typeof onKeyPress==='function'){var newDataDescription=_this3.getDataDescription(rowIndex+1,index,value);onKeyPress(newDataDescription);}}),value:text,onChange:function onChange(value){_this3.bindOnChange(rowIndex+1,index,value);}});}});});var height=document.body.clientHeight-160;return/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(index_module.tableBox," ").concat(type==='list'?'':index_module.tbodyTh)},/*#__PURE__*/index_js_default().createElement(table/* default */.Z,{rowKey:function rowKey(record,index){return"table_".concat(index);},scroll:{x:scrollX,y:this.props.height||height},bordered:true,components:this.components,columns:columns,dataSource:data,pagination:false}));}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var data=nextProps.data;var dataString=JSON.stringify(data);if(dataString!==prevState.preDataString){return{dataDescription:_extends([],data),preDataString:dataString};}return null;}}]);return Demo;}((index_js_default()).Component);/* harmony default export */ const TableResize = (Demo);

/***/ }),

/***/ 49980:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ ToolsBar)
});

// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/message/style/index.js + 1 modules
var style = __webpack_require__(35735);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/message/index.js + 3 modules
var message = __webpack_require__(96213);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/button/style/index.js + 1 modules
var button_style = __webpack_require__(85793);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/button/index.js
var es_button = __webpack_require__(31481);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/slider/style/index.js + 1 modules
var slider_style = __webpack_require__(59199);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/slider/index.js + 1 modules
var slider = __webpack_require__(17119);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/select/style/index.js + 1 modules
var select_style = __webpack_require__(94289);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/select/index.js
var es_select = __webpack_require__(4213);
// EXTERNAL MODULE: ../my-cli/node_modules/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__(92910);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);
// EXTERNAL MODULE: consume shared module (default) react@^16.14.0 (singleton) (fallback: ../my-cli/node_modules/react/index.js)
var index_js_ = __webpack_require__(93121);
var index_js_default = /*#__PURE__*/__webpack_require__.n(index_js_);
;// CONCATENATED MODULE: ../my-designer/src/components/ToolsBar/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const index_module = ({"pageTop":"_-my-designer-src-components-ToolsBar-index-module__pageTop","border":"_-my-designer-src-components-ToolsBar-index-module__border","btnSave":"_-my-designer-src-components-ToolsBar-index-module__btnSave","historyButtons":"_-my-designer-src-components-ToolsBar-index-module__historyButtons","group":"_-my-designer-src-components-ToolsBar-index-module__group","imgGroup":"_-my-designer-src-components-ToolsBar-index-module__imgGroup","groupTop":"_-my-designer-src-components-ToolsBar-index-module__groupTop","groupLable":"_-my-designer-src-components-ToolsBar-index-module__groupLable","sliderBox":"_-my-designer-src-components-ToolsBar-index-module__sliderBox","subIcon":"_-my-designer-src-components-ToolsBar-index-module__subIcon","input":"_-my-designer-src-components-ToolsBar-index-module__input","numberInput":"_-my-designer-src-components-ToolsBar-index-module__numberInput","number3Input":"_-my-designer-src-components-ToolsBar-index-module__number3Input","selectWidth":"_-my-designer-src-components-ToolsBar-index-module__selectWidth","img":"_-my-designer-src-components-ToolsBar-index-module__img"});
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/EyeOutlined.js + 1 modules
var EyeOutlined = __webpack_require__(39872);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/FormOutlined.js + 1 modules
var FormOutlined = __webpack_require__(54322);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/CopyOutlined.js + 1 modules
var CopyOutlined = __webpack_require__(92066);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/SaveOutlined.js + 1 modules
var SaveOutlined = __webpack_require__(27024);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/UploadOutlined.js + 1 modules
var UploadOutlined = __webpack_require__(33154);
// EXTERNAL MODULE: ../my-designer/src/components/PageAddModal/index.jsx + 1 modules
var PageAddModal = __webpack_require__(44966);
// EXTERNAL MODULE: ../my-designer/src/components/CopyPageModal/index.jsx + 1 modules
var CopyPageModal = __webpack_require__(93898);
// EXTERNAL MODULE: ../my-designer/node_modules/@icode-run/container/src/index.jsx + 2 modules
var src = __webpack_require__(81799);
// EXTERNAL MODULE: ../my-designer/node_modules/@icode-run/icon-font/src/index.jsx
var icon_font_src = __webpack_require__(7277);
// EXTERNAL MODULE: ../my-designer/src/assets/images/client.png
var client = __webpack_require__(48842);
var client_default = /*#__PURE__*/__webpack_require__.n(client);
;// CONCATENATED MODULE: ../my-designer/src/components/ToolsBar/index.jsx
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}/**
 * ToolsBar
 * @author tianyanrong
 * @date 2021/7/14 下午1:24:14
 */var PageBar=/*#__PURE__*/function(_Component){_inherits(PageBar,_Component);var _super=_createSuper(PageBar);function PageBar(){var _this;_classCallCheck(this,PageBar);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isShowPageAddModal:false,isShowCopyPageModal:false};return _this;}_createClass(PageBar,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,dispatchEditModel=_this$props.dispatchEditModel,_this$props$model=_this$props.model,model=_this$props$model===void 0?{}:_this$props$model,saveCallback=_this$props.saveCallback,editCallback=_this$props.editCallback,isHiddenPreviewBtn=_this$props.isHiddenPreviewBtn;var userInfo=model.userInfo||{};var pageInfo=model.pageInfo||{};var isCanUpdate=userInfo.accountCode===pageInfo.author&&pageInfo.author||userInfo.accountCode&&!pageInfo.author;var isCanPublish=['owner','manager'].indexOf(userInfo.role)>=0;var isView=model.type==='view';var applianceOptions=model&&model.applianceOptions?model.applianceOptions:[];var currentScreenScale=parseInt((model.currentScreenScale||1)*100);return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(index_module.pageTop)},/*#__PURE__*/index_js_default().createElement("div",{style:{marginLeft:'12px'}},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{direction:"row"},/*#__PURE__*/index_js_default().createElement("div",{className:index_module.group},/*#__PURE__*/index_js_default().createElement("div",{className:index_module.groupLable},/*#__PURE__*/index_js_default().createElement("img",{src:(client_default())})),/*#__PURE__*/index_js_default().createElement("div",{className:index_module.groupTop},/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(index_module.input," ").concat(index_module.selectWidth)},/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{size:"small",defaultValue:"",onChange:function onChange(value){window.localStorage.setItem('viz-designer-currentAppliance',value);dispatchEditModel('setState',{currentAppliance:value});}},applianceOptions.map(function(item,index){return/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{key:index,value:item.value},item.label);}))))),/*#__PURE__*/index_js_default().createElement("div",{className:index_module.group},/*#__PURE__*/index_js_default().createElement("div",{className:index_module.groupLable,style:{width:'50px',textAlign:'center'}},currentScreenScale,"%"),/*#__PURE__*/index_js_default().createElement("div",{className:index_module.groupTop},/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(index_module.input," ").concat(index_module.sliderBox)},/*#__PURE__*/index_js_default().createElement(slider/* default */.Z,{defaultValue:50,step:10,onChange:function onChange(value){var scale=(50+value)/100;dispatchEditModel('setState',{currentScreenScale:scale});},tipFormatter:function tipFormatter(value){return"".concat(50+value,"%");}})))))),/*#__PURE__*/index_js_default().createElement("div",{style:{flex:'auto'}}),/*#__PURE__*/index_js_default().createElement("div",null,isHiddenPreviewBtn?null:/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:"small",type:"primary",ghost:true,onClick:function onClick(){dispatchEditModel('onBuildView',{model:model});}},/*#__PURE__*/index_js_default().createElement(EyeOutlined/* default */.Z,null),"\u9884\u89C8"),isCanUpdate&&isView?/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{type:"primary",size:"small",onClick:function onClick(){editCallback();}},/*#__PURE__*/index_js_default().createElement(FormOutlined/* default */.Z,null),"\u7F16\u8F91"),/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{type:"primary",size:"small",onClick:function onClick(){_this2.setState({isShowCopyPageModal:true});}},/*#__PURE__*/index_js_default().createElement(CopyOutlined/* default */.Z,null),"\u590D\u5236")):null,!isView&&isCanUpdate?/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:"small",type:"primary",onClick:function onClick(){_this2.setState({isShowPageAddModal:true});}},/*#__PURE__*/index_js_default().createElement(SaveOutlined/* default */.Z,null),"\u4FDD\u5B58"):null,isCanPublish&&isCanUpdate?/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{disabled:pageInfo.pageId?false:true,size:"small",className:index_module.btnSave,onClick:function onClick(){dispatchEditModel('onReleaseView',{model:model});}},/*#__PURE__*/index_js_default().createElement(UploadOutlined/* default */.Z,null),"\u53D1\u5E03"):null)),/*#__PURE__*/index_js_default().createElement(PageAddModal/* default */.Z,_extends({},this.props,{visible:this.state.isShowPageAddModal,onCancel:function onCancel(){_this2.setState({isShowPageAddModal:false});},onOk:/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee(options){var res;return regenerator_default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatchEditModel('onSaveView',{model:model,options:options});case 2:res=_context.sent;if(res.result==='success'){message/* default.success */.ZP.success(res.msg);}else{message/* default.error */.ZP.error(res.msg);}_this2.setState({isShowPageAddModal:false});case 5:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()})),/*#__PURE__*/index_js_default().createElement(CopyPageModal/* default */.Z,_extends({},this.props,{visible:this.state.isShowCopyPageModal,onCancel:function onCancel(){_this2.setState({isShowCopyPageModal:false});},onOk:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee2(options){return regenerator_default().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:model.handleCopyPage(_objectSpread(_objectSpread({},options),{},{copyPageId:pageInfo.pageId}));_this2.setState({isShowCopyPageModal:false});case 2:case"end":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}()})));}}]);return PageBar;}(index_js_.Component);/* harmony default export */ const ToolsBar = (PageBar);

/***/ }),

/***/ 28405:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(93121);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(43446);
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(11128);
/* harmony import */ var _icode_run_my_upload_src_Upload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(68658);
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var UploadImg=/*#__PURE__*/function(_Component){_inherits(UploadImg,_Component);var _super=_createSuper(UploadImg);function UploadImg(){var _this;_classCallCheck(this,UploadImg);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:false};_this.urls=[];return _this;}_createClass(UploadImg,[{key:"render",value:function render(){var _this$props=this.props,onChange=_this$props.onChange,value=_this$props.value,_this$props$maxLength=_this$props.maxLength,maxLength=_this$props$maxLength===void 0?1:_this$props$maxLength,_this$props$maxFileSi=_this$props.maxFileSize,maxFileSize=_this$props$maxFileSi===void 0?20480:_this$props$maxFileSi;var uploadButton=/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",null,this.state.loading?/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z,null):/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z,null),/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"ant-upload-text"},"\u4E0A\u4F20\u56FE\u7247"));var newValue=value&&typeof value==='string'?[value]:value||[];return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_icode_run_my_upload_src_Upload__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z,{fileListArray:newValue,onCompleteChange:function onCompleteChange(fileList){if(onChange&&typeof onChange==='function'){var urls=fileList.map(function(item){return item.url;});urls=maxLength>1?urls:urls[0];onChange(urls);}},maxFileSize:maxFileSize// 上传文件要小于此置，单位KB
,maxLength:maxLength// 上传文件个数
,action:'/lowcodeApi/auth/uploadimg'// 上传图片接口地址
,isPaste:true,getActionResponseUrl:function getActionResponseUrl(res){// 从上传图片接口返回数据获取到url地址
return{url:res.data&&res.data.url,msg:res.msg||''};}});}}]);return UploadImg;}(react__WEBPACK_IMPORTED_MODULE_0__.Component);/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UploadImg);

/***/ }),

/***/ 74812:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "$Y": () => (/* binding */ getTextContentData),
/* harmony export */   "FB": () => (/* binding */ getTextContent),
/* harmony export */   "L1": () => (/* binding */ getIconProps),
/* harmony export */   "NJ": () => (/* binding */ setJavascriptProps),
/* harmony export */   "So": () => (/* binding */ setModalProps),
/* harmony export */   "cN": () => (/* binding */ setParamProps),
/* harmony export */   "gQ": () => (/* binding */ getCanInitRequest),
/* harmony export */   "k": () => (/* binding */ getCurrApiData),
/* harmony export */   "nP": () => (/* binding */ setDataChildrenProps),
/* harmony export */   "te": () => (/* binding */ getEventCallBack)
/* harmony export */ });
/* harmony import */ var antd_es_message_style__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(35735);
/* harmony import */ var antd_es_message__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(96213);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92910);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(93121);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _icode_run_utils_es___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6369);
/* harmony import */ var _utils_paramsUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(51891);
/* harmony import */ var _icode_run_svg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(5063);
/* harmony import */ var _icode_run_utils_es_dataType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(61204);
/* harmony import */ var _icode_run_utils_es_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(562);
function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var setJavascriptProps=function setJavascriptProps(propsOption){if(propsOption.type==="javascript"){var callback;try{callback=new Function("return "+(propsOption.value||"").replace(/\/\/\s*.*(\r|\n)/g,'').replace(/\s+/g," ").replace(/\r+/g," "))();}catch(e){console.log("javascript error",e,propsOption.value);}return _defineProperty({},propsOption.name,callback);}else{return{};}};/**
 * 生成组件中render内嵌组件
 * @param {*} propsOption // 当前组件的propsOption
 */var setDataChildrenProps=function setDataChildrenProps(propsOption,_ref2){var children=_ref2.children,renderCallback=_ref2.renderCallback;if(propsOption.type==="data"&&propsOption.value&&propsOption.value.length){// 数组props中有嵌套内容
var newValue=JSON.parse(JSON.stringify(propsOption.value))||[];newValue.forEach(function(item){if(item.isRender){var currentContainer;(children||[]).forEach(function(child){if(child.nodeId===item.keyName){currentContainer=child;}});item.render=function(data){return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},renderCallback([currentContainer],data));};}});return _defineProperty({},propsOption.name,newValue);}else{return{};}};var getTextContent=function getTextContent(){var propsOption=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var values=propsOption.value&&propsOption.value.length?propsOption.value:[];var content=propsOption.extendValues&&propsOption.extendValues.content||'';if(!content){content='';values.forEach(function(value,index){content+="[".concat(index,"]");});}return content;};var getTextContentData=function getTextContentData(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var _ref4=arguments.length>1?arguments[1]:undefined,_ref4$values=_ref4.values,values=_ref4$values===void 0?[]:_ref4$values,content=_ref4.content;var newContent=content||'';var newData=data[0]||{};values.forEach(function(valueItem,index){var value=newData[valueItem.keyName]||'';newContent=newContent.replaceAll("[".concat(index,"]"),value);});return newContent;};var getRequestStructuresType=function getRequestStructuresType(dataModel,keyName){var requestStructures=dataModel.requestStructures||[];var type;requestStructures.forEach(function(item){if(item.keyName===keyName){type=item.type;}});return type;};/**
 * 生成组件props(来源param的配置)
 * @param {*} propsOption // 当前组件的propsOption
 * @returns
 * 1. 返回isTriggerRequest给下一个param使用(组件中可以有多个param，如时间范围的开始时间、结束时间)
 * 2. 返回函数，以便于组件值变化时，调用; 函数名为：[propsOption.name]
 */var setParamProps=function setParamProps(propsOption,nodeId,_ref5){var myModel=_ref5.myModel,myModelName=_ref5.myModelName,modelName=_ref5.modelName,_ref5$model=_ref5.model,model=_ref5$model===void 0?{}:_ref5$model,relations=_ref5.relations,dispatch=_ref5.dispatch,isFormItem=_ref5.isFormItem;//type
if(propsOption.type!=="param"){return;}var outputType=propsOption.outputType||propsOption.outputTypeRequired&&propsOption.outputTypeRequired[0]||'string';var defaultValueStateName="".concat(nodeId,"DefaultValue");if(propsOption.value&&propsOption.value.length){var firstValue=propsOption.value[0];// const firstServiceName = _getCurrDataModelName(
//   firstValue.nodeId,
//   relations
// );
var firstServiceName=firstValue.serviceName;var firstKeyName=firstValue.keyName;var rules=[];var dataModels=model.dataModels||{};propsOption.value.map(function(item){if(!(rules&&rules.length)&&dataModels[item.serviceName]&&dataModels[item.serviceName].apiParams&&dataModels[item.serviceName].apiParams[item.keyName]&&dataModels[item.serviceName].apiParams[item.keyName].validateConfig&&dataModels[item.serviceName].apiParams[item.keyName].validateConfig.length){rules=dataModels[item.serviceName].apiParams[item.keyName].validateConfig;}});return{value:myModel[defaultValueStateName]&&myModel[defaultValueStateName][propsOption.name],name:isFormItem?propsOption.value&&propsOption.value[0]&&propsOption.value[0].keyName||"":'',rules:rules,outputType:outputType,onChange:function(){var _onChange=_asyncToGenerator(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee2(value){var prevState,newDefaultValue;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:prevState={};(propsOption.value||[]).forEach(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(subItem){var serviceName,requireType,newValue,apiParamsName,apiParamsValue,res;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:serviceName="".concat(subItem.serviceName);requireType=getRequestStructuresType(dataModels[subItem.serviceName],subItem.keyName);newValue=(0,_icode_run_utils_es_dataType__WEBPACK_IMPORTED_MODULE_6__/* .getOutputValue */ .jG)(_objectSpread(_objectSpread({outputType:requireType,value:value},subItem.transformType&&(0,_icode_run_utils_es_utils__WEBPACK_IMPORTED_MODULE_7__/* .isValue */ .w)(subItem.transformType.index)?{targetIndex:subItem.transformType.index}:{}),subItem.transformType&&subItem.transformType.join?{valueSplit:subItem.transformType.join}:{}));apiParamsName="".concat(serviceName,"Params");apiParamsValue=_defineProperty({},subItem.keyName,newValue);prevState[apiParamsName]=_extends({},myModel["".concat(serviceName,"Params")],prevState[apiParamsName],apiParamsValue);// 更新state值
_context.next=8;return dispatch({type:"".concat(myModelName,"/setState"),payload:prevState});case 8:if(!subItem.isTriggerRequest){_context.next=13;break;}_context.next=11;return dispatch({type:"".concat(myModelName,"/request"),payload:{myModelName:myModelName,dataModal:model.dataModels[subItem.serviceName],currRelation:relations[subItem.nodeId],serviceName:subItem.serviceName}});case 11:res=_context.sent;return _context.abrupt("return",res);case 13:case"end":return _context.stop();}}},_callee);}));return function(_x2){return _ref6.apply(this,arguments);};}());prevState={};newDefaultValue=_defineProperty({},propsOption.name,value);prevState[defaultValueStateName]=_extends({},myModel[defaultValueStateName],prevState[defaultValueStateName],newDefaultValue);// 更新state值
_context2.next=7;return dispatch({type:"".concat(myModelName,"/setState"),payload:prevState});case 7:case"end":return _context2.stop();}}},_callee2);}));function onChange(_x){return _onChange.apply(this,arguments);}return onChange;}()};}else{// 需要合并onChange，否则，二次一块onChange时，会覆盖掉第一次的
return{value:myModel[defaultValueStateName]&&myModel[defaultValueStateName][propsOption.name],outputType:outputType,onChange:function(){var _onChange2=_asyncToGenerator(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee3(value){var prevState,newDefaultValue;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:prevState={};newDefaultValue=_defineProperty({},propsOption.name,value);prevState[defaultValueStateName]=_extends({},myModel[defaultValueStateName],prevState[defaultValueStateName],newDefaultValue);// 更新state值
_context3.next=5;return dispatch({type:"".concat(myModelName,"/setState"),payload:prevState});case 5:case"end":return _context3.stop();}}},_callee3);}));function onChange(_x3){return _onChange2.apply(this,arguments);}return onChange;}()};}};// 给type==='modal'的弹出框组件设置属性
var setModalProps=function setModalProps(nodeId,_ref7){var myModel=_ref7.myModel,myModelName=_ref7.myModelName,dispatch=_ref7.dispatch,currRelation=_ref7.currRelation;return{value:myModel["".concat(nodeId,"Modal")],onChange:function(){var _onChange3=_asyncToGenerator(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee4(value){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return dispatch({type:"".concat(myModelName,"/setState"),payload:_objectSpread(_defineProperty({},"".concat(nodeId,"Modal"),value),currRelation.stateNodeId?_defineProperty({},"".concat(currRelation.stateNodeId,"EventData"),[]):{})});case 2:case"end":return _context4.stop();}}},_callee4);}));function onChange(_x4){return _onChange3.apply(this,arguments);}return onChange;}()};};var getIconProps=function getIconProps(value){if(!(value&&value.src)){return null;}var isSvg=value.src.match(/\.svg$/)?true:false;if(isSvg){return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_icode_run_svg__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z,{src:value.src,colorType:value.colorType||''});}else{return/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement("img",{src:value.src});}};// const _getKeyPropsOption = (keyType, nodeId, serviceName, dataModels) => {
//   let propsOption = {};
//   const dataModel = dataModels[serviceName] || {};
//   (dataModel.requestStructures || []).forEach((item) => {
//     if (item.key === keyType) {
//       propsOption = {
//         name: keyType,
//         type: "param",
//         value: [
//           {
//             keyName: item.keyName,
//             nodeId: nodeId,
//             serviceName: serviceName,
//             structureType: item.type,
//             title: item.title,
//           },
//         ],
//       };
//     }
//   });
//   return propsOption;
// };
// export const getKeyPropsOption = _getKeyPropsOption;
// export const setKeyComponentProps = (
//   key,
//   nodeId,
//   serviceName,
//   { myModel, myModelName, model, relations, dispatch }
// ) => {
//   const propsOption = _getKeyPropsOption(
//     key,
//     nodeId,
//     serviceName,
//     model.dataModels
//   );
//   const keyParamProps = setParamProps(propsOption, true, {
//     myModel,
//     myModelName,
//     model,
//     relations,
//     dispatch,
//   });
//   return {
//     onChange: keyParamProps[key],
//     value:
//       myModel[`${nodeId}Params`] &&
//       myModel[`${nodeId}Params`][keyParamProps.keyName],
//   };
// };
/**
 * 获取当前api dataModelName
 * @param {*} relations
 * @param {*} nodeId
 * @returns
 */ // export const getCurrDataModelName = _getCurrDataModelName;
var _getCurrDataModelName=function _getCurrDataModelName(nodeId,relations){return relations&&relations[nodeId]&&relations[nodeId].dataSourceType==="api"&&relations[nodeId].dataSourceName?relations[nodeId].dataSourceName:"";};var getCurrApiData=function getCurrApiData(nodeId,relations,dataModels){return _getCurrDataModelName(nodeId,relations)&&dataModels[_getCurrDataModelName(nodeId,relations)]?dataModels[_getCurrDataModelName(nodeId,relations)].apiData:{};};/**
 * 内部render
 * @param {*} values
 * @param {*} componentConfigObj
 * @param {*} props
 * @param {*} dispatchEditModel
 * @returns
 */ // const setRenderValue = (values, componentConfigObj, props, dispatchEditModel) => {
//   let newValues;
//   if (typeof values === 'object' && values.length) {
//     newValues = values.map(item => {
//       const render = {};
//       for (let key in item) {
//         if (
//           item[key] &&
//           typeof item[key] === 'string' &&
//           item[key].indexOf('ID_EmptyContainer_') >= 0 &&
//           componentConfigObj[item[key]]
//         ) {
//           render[key] = function(recode) {
//             const aa = showComponents(
//               componentConfigObj[item[key]],
//               componentConfigObj,
//               recode,
//               props,
//               dispatchEditModel,
//             );
//             return aa;
//           };
//         }
//       }
//       return {
//         ...item,
//         ...render,
//       };
//     });
//   } else if (typeof values === 'object' && !values.length) {
//     for (let key in values) {
//       if (
//         values[key] &&
//         values[key].indexOf('ID_EmptyContainer_') >= 0 &&
//         componentConfigObj[values[key]]
//       ) {
//         values[key] = function(recode) {
//           const aa = showComponents(
//             componentConfigObj[values[key]],
//             componentConfigObj,
//             true,
//             props,
//             dispatchEditModel,
//           );
//           return aa;
//         };
//       }
//     }
//   }
//   return newValues;
// };
// 当事件索引数据变化，触发与"事件索引"相关连的"参数默认值"的api请求
var triggerRequestByEvent=function triggerRequestByEvent(_ref9){var stateNodeId=_ref9.stateNodeId,dataModels=_ref9.dataModels,relations=_ref9.relations,dispatch=_ref9.dispatch,myModelName=_ref9.myModelName;if(!stateNodeId){return;}var requiestNames=[];var name;var _loop=function _loop(){var dataModel=dataModels[name]||{};var apiParams=dataModel.apiParams||{};Object.keys(apiParams).forEach(function(keyName){var defaultValueConfig=apiParams[keyName]&&apiParams[keyName].defaultValueConfig||{};var nodeId=defaultValueConfig.ruleValue&&defaultValueConfig.ruleValue[0];if(defaultValueConfig.ruleType==='event'&&nodeId===stateNodeId){requiestNames.push({nodeId:dataModel.nodeId,dataSourceName:name,keyName:defaultValueConfig.ruleValue[1]});}});};for(name in dataModels){_loop();}requiestNames.forEach(function(item){var relation=relations[item.nodeId]||{};if(relation.dataSourceType==='api'&&relation.dataSourceName===item.dataSourceName&&dataModels[relation.dataSourceName]){dispatch({type:"".concat(myModelName,"/updateParams"),payload:_defineProperty({},"".concat(relation.dataSourceName,"Params"),{})}).then(function(res){dispatch({type:"".concat(myModelName,"/request"),payload:{myModelName:myModelName,dataModal:dataModels[relation.dataSourceName],currRelation:relation,serviceName:relation.dataSourceName}});});}});};var triggerEventByState=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee5(item,_ref10){var dispatch,myModelName,relations,dataModels,scopeData,newUpdateState,contentValue,apiData,stateData;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dispatch=_ref10.dispatch,myModelName=_ref10.myModelName,relations=_ref10.relations,dataModels=_ref10.dataModels,scopeData=_ref10.scopeData;newUpdateState={};contentValue={closeModal:false,openModal:true};if(item.eventContent){newUpdateState["".concat(item.eventContent,"Modal")]=contentValue[item.eventType];}if(item.stateNodeId){apiData=_getCurrDataModelName(item.stateNodeId,relations)&&dataModels[_getCurrDataModelName(item.stateNodeId,relations)]?dataModels[_getCurrDataModelName(item.stateNodeId,relations)].apiData:{};stateData=(0,_icode_run_utils_es___WEBPACK_IMPORTED_MODULE_3__/* .parseApiData */ .Xe)(scopeData[item.stateNodeId],apiData,null,null);newUpdateState["".concat(item.stateNodeId,"EventData")]=stateData;}// 更新state值
_context5.next=7;return dispatch({type:"".concat(myModelName,"/setState"),payload:_objectSpread({},newUpdateState)});case 7:triggerRequestByEvent({stateNodeId:item.stateNodeId,dataModels:dataModels,relations:relations,dispatch:dispatch,myModelName:myModelName});case 8:case"end":return _context5.stop();}}},_callee5);}));return function triggerEventByState(_x5,_x6){return _ref11.apply(this,arguments);};}();var getEventCallBack=function getEventCallBack(events,_ref12){var model=_ref12.model,scopeData=_ref12.scopeData,relations=_ref12.relations,dataModels=_ref12.dataModels,myModelName=_ref12.myModelName,dispatch=_ref12.dispatch;return function(event){events.map(function(item){if(["closeModal","openModal","state"].indexOf(item.eventType)>=0){triggerEventByState(item,{scopeData:scopeData,relations:relations,dataModels:dataModels,myModelName:myModelName,dispatch:dispatch});}else if(["message"].indexOf(item.eventType)>=0){antd_es_message__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .ZP[item.eventContent||"info"](!item.messageContent&&typeof event==="string"?event:item.messageContent||"",item.messageDuration||3);}else if('refresh'===item.eventType&&item.eventContent){var relation=relations[item.eventContent]||{};if(relation.dataSourceType==='api'&&relation.dataSourceName){var resetParams=item.resetParams||[];var dataModel=dataModels[relation.dataSourceName];var apiParams=dataModel.apiParams||{};var defaultValueConfigObj={};Object.keys(apiParams).forEach(function(keyName){var defaultValueConfig=apiParams[keyName]&&apiParams[keyName].defaultValueConfig||{};if(defaultValueConfig.ruleType&&(0,_icode_run_utils_es_utils__WEBPACK_IMPORTED_MODULE_7__/* .isValue */ .w)(defaultValueConfig.ruleValue)){defaultValueConfigObj[keyName]=defaultValueConfig;}});var newParams={};resetParams.forEach(function(keyName){var value='';if(defaultValueConfigObj[keyName]){value=(0,_utils_paramsUtils__WEBPACK_IMPORTED_MODULE_4__/* .getDefalutParamValue */ .U2)({defaultValueConfig:defaultValueConfigObj[keyName],state:model});}newParams[keyName]=value||value===0?value:'';});dispatch({type:"".concat(myModelName,"/request"),payload:{myModelName:myModelName,dataModal:dataModels[relation.dataSourceName],currRelation:relation,serviceName:relation.dataSourceName,params:newParams}});}}});};};/**
 * 判断是否可以在初始化时发送请求获取数据
 * @param {*} dataModel 
 * @returns 判断的结果
 */var getCanInitRequest=function getCanInitRequest(){var dataModel=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var apiParams=dataModel.apiParams||{};var isCanInitRequest=true;Object.keys(apiParams).forEach(function(keyName){var defaultValueConfig=apiParams[keyName]&&apiParams[keyName].defaultValueConfig||{};if(defaultValueConfig.ruleType==='api'||defaultValueConfig.ruleType==='event'){isCanInitRequest=false;}});return isCanInitRequest;};

/***/ }),

/***/ 66139:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ components_ViewParamsBar)
});

// EXTERNAL MODULE: consume shared module (default) react@^16.14.0 (singleton) (fallback: ../my-cli/node_modules/react/index.js)
var index_js_ = __webpack_require__(93121);
var index_js_default = /*#__PURE__*/__webpack_require__.n(index_js_);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamsBar/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const index_module = ({"viewParamsBar":"_-my-designer-src-components-ViewParamsBar-index-module__viewParamsBar","viewParamsBarName":"_-my-designer-src-components-ViewParamsBar-index-module__viewParamsBarName","viewParamsBarNameEdit":"_-my-designer-src-components-ViewParamsBar-index-module__viewParamsBarNameEdit","nameEditInput":"_-my-designer-src-components-ViewParamsBar-index-module__nameEditInput","viewParamsBarTitle":"_-my-designer-src-components-ViewParamsBar-index-module__viewParamsBarTitle","active":"_-my-designer-src-components-ViewParamsBar-index-module__active","barContent":"_-my-designer-src-components-ViewParamsBar-index-module__barContent"});
// EXTERNAL MODULE: ../my-designer/src/components/Bar/index.jsx + 1 modules
var Bar = __webpack_require__(90152);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/CheckOutlined.js + 1 modules
var CheckOutlined = __webpack_require__(31451);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/input-number/style/index.js + 1 modules
var style = __webpack_require__(75271);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/input-number/index.js + 19 modules
var input_number = __webpack_require__(67494);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/tooltip/style/index.js + 1 modules
var tooltip_style = __webpack_require__(90921);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/tooltip/index.js + 3 modules
var tooltip = __webpack_require__(16606);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const ViewParamItems_index_module = ({"viewParamItem":"_-my-designer-src-components-ViewParamItems-index-module__viewParamItem","viewParamItemTitleV":"_-my-designer-src-components-ViewParamItems-index-module__viewParamItemTitleV","viewParamItemTitle":"_-my-designer-src-components-ViewParamItems-index-module__viewParamItemTitle","labelButtons":"_-my-designer-src-components-ViewParamItems-index-module__labelButtons","arrayOptionsClose":"_-my-designer-src-components-ViewParamItems-index-module__arrayOptionsClose","arrayOptions":"_-my-designer-src-components-ViewParamItems-index-module__arrayOptions","arrayOptionsBtn":"_-my-designer-src-components-ViewParamItems-index-module__arrayOptionsBtn","dataItem":"_-my-designer-src-components-ViewParamItems-index-module__dataItem","info":"_-my-designer-src-components-ViewParamItems-index-module__info","dataItemValueBox":"_-my-designer-src-components-ViewParamItems-index-module__dataItemValueBox","greenBox":"_-my-designer-src-components-ViewParamItems-index-module__greenBox","dataItemValue":"_-my-designer-src-components-ViewParamItems-index-module__dataItemValue","dataItemDelect":"_-my-designer-src-components-ViewParamItems-index-module__dataItemDelect","titleItemValueBox":"_-my-designer-src-components-ViewParamItems-index-module__titleItemValueBox","dataItemChildrenBox":"_-my-designer-src-components-ViewParamItems-index-module__dataItemChildrenBox","dataStrintItem":"_-my-designer-src-components-ViewParamItems-index-module__dataStrintItem","dataStringItemInputWidth":"_-my-designer-src-components-ViewParamItems-index-module__dataStringItemInputWidth","dataStringItemInput":"_-my-designer-src-components-ViewParamItems-index-module__dataStringItemInput","dataStringItemOkBtn":"_-my-designer-src-components-ViewParamItems-index-module__dataStringItemOkBtn","dataStringItemOkBtnSelected":"_-my-designer-src-components-ViewParamItems-index-module__dataStringItemOkBtnSelected","dataItemSelected":"_-my-designer-src-components-ViewParamItems-index-module__dataItemSelected","dataItemStringInput":"_-my-designer-src-components-ViewParamItems-index-module__dataItemStringInput","childrenBox":"_-my-designer-src-components-ViewParamItems-index-module__childrenBox","childrenTop":"_-my-designer-src-components-ViewParamItems-index-module__childrenTop","dropContainer":"_-my-designer-src-components-ViewParamItems-index-module__dropContainer","dropContainerSelect":"_-my-designer-src-components-ViewParamItems-index-module__dropContainerSelect","relationComponentBox":"_-my-designer-src-components-ViewParamItems-index-module__relationComponentBox","closeTop":"_-my-designer-src-components-ViewParamItems-index-module__closeTop","iconBtn":"_-my-designer-src-components-ViewParamItems-index-module__iconBtn","iconBox":"_-my-designer-src-components-ViewParamItems-index-module__iconBox","imgBox":"_-my-designer-src-components-ViewParamItems-index-module__imgBox","remove":"_-my-designer-src-components-ViewParamItems-index-module__remove"});
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/Base.jsx
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var StringItem=/*#__PURE__*/function(_Component){_inherits(StringItem,_Component);var _super=_createSuper(StringItem);function StringItem(){var _this;_classCallCheck(this,StringItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.getIsShow=function(){var _this$props=_this.props,option=_this$props.option,allValueObj=_this$props.allValueObj;var isShowItem=true;if(option.isShowItem&&typeof option.isShowItem==='string'){try{var result=new Function("return function(props) {return ".concat(option.isShowItem,";}"))()(allValueObj);if(typeof result==='boolean'){isShowItem=result;}}catch(e){//
}}return isShowItem;};_this.preProps={};_this.preState={};_this.updatePropsOptions=function(_ref,forEachCallback){var _ref$value=_ref.value,value=_ref$value===void 0?'':_ref$value,_ref$valueResult=_ref.valueResult,valueResult=_ref$valueResult===void 0?'':_ref$valueResult,_ref$staticProps=_ref.staticProps,staticProps=_ref$staticProps===void 0?{}:_ref$staticProps,extendValues=_ref.extendValues;var _this$props2=_this.props,option=_this$props2.option,dispatchEditModel=_this$props2.dispatchEditModel,parentKeyName=_this$props2.parentKeyName,updatePropsOptions=_this$props2.updatePropsOptions,selectedComponentConfig=_this$props2.selectedComponentConfig;// 更新父DataItem
if(updatePropsOptions&&typeof updatePropsOptions==='function'){updatePropsOptions(parentKeyName,_objectSpread(_defineProperty({},option.name,valueResult||value),staticProps));return;}//
var propsOptions=selectedComponentConfig.propsOptions;var newPropsOptions=[];propsOptions.map(function(item){if(forEachCallback&&typeof forEachCallback==='function'){forEachCallback(item);}if(item.name===option.name){newPropsOptions.push(_objectSpread(_objectSpread({},item),{},{value:value,valueResult:valueResult,staticProps:staticProps,extendValues:extendValues}));}else{newPropsOptions.push(_objectSpread({},item));}return null;});var serviceInfo={};if(staticProps.serviceName){serviceInfo={serviceName:staticProps.serviceName,nodeName:selectedComponentConfig.nodeName};}var richText={};if(extendValues&&(extendValues.isRichText||extendValues.isRichText===false)){richText.isRichText=true;richText.isRichTextEdit=extendValues.isRichTextEdit;richText.content=extendValues.content;}dispatchEditModel('updateComponentConfigPropsOptions',{componentName:selectedComponentConfig.componentName,nodeId:selectedComponentConfig.nodeId,newPropsOptions:newPropsOptions,serviceInfo:serviceInfo,richText:richText});};_this.onDragOver=function(event){event.preventDefault();var dragPosition=_this.state.dragPosition;var dragDataModel=_this.props.dragDataModel;if(dragPosition!=='in'&&dragDataModel&&!(_this.sortDragItem||_this.sortDragItem===0)){_this.setState({dragPosition:'in'});}};_this.onDragLeave=function(event){event.preventDefault();var dragPosition=_this.state.dragPosition;if(dragPosition!==''){_this.setState({dragPosition:''});}};return _this;}_createClass(StringItem,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps,nextState){var isShouldUpdate=false;var nextPropsString={option:JSON.stringify(nextProps.option),value:JSON.stringify(nextProps.value),valueIndexInArray:nextProps.valueIndexInArray,allValueObj:JSON.stringify(nextProps.allValueObj),startColor:nextProps.startColor};for(var key in nextPropsString){if(nextPropsString[key]!==this.preProps[key]){isShouldUpdate=true;}this.preProps[key]=nextPropsString[key];}for(var _key2 in nextState){var nextStateString=JSON.stringify(nextState[_key2]);if(nextStateString!==this.preState[_key2]){isShouldUpdate=true;}this.preState[_key2]=nextStateString;}return isShouldUpdate;}// getCurrentDataModelData = ({dataKeyName, structureKeyName, structuresType = 'dimensionStructures'}) => {
//   const { dataModels } = this.props;
//   let valueInfo = {};
//   dataModels.forEach(dataModel => {
//     if(dataModel.dataKeyName === dataKeyName) {
//       (dataModel[structuresType] || []).forEach(structure => {
//         if(structure.keyName === structureKeyName) {
//           valueInfo = {
//             dataKeyName,
//             dataTitle: dataModel.title,
//             structureKeyName,
//             structureTitle: structure.title,
//           }
//         }
//       })
//     }
//   });
//   return valueInfo;
// }
},{key:"render",value:function render(){return null;}}]);return StringItem;}(index_js_.Component);/* harmony default export */ const Base = (StringItem);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/NumberItem/index.jsx
function NumberItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){NumberItem_typeof=function _typeof(obj){return typeof obj;};}else{NumberItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return NumberItem_typeof(obj);}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function NumberItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function NumberItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function NumberItem_createClass(Constructor,protoProps,staticProps){if(protoProps)NumberItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)NumberItem_defineProperties(Constructor,staticProps);return Constructor;}function NumberItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)NumberItem_setPrototypeOf(subClass,superClass);}function NumberItem_setPrototypeOf(o,p){NumberItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return NumberItem_setPrototypeOf(o,p);}function NumberItem_createSuper(Derived){var hasNativeReflectConstruct=NumberItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=NumberItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=NumberItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return NumberItem_possibleConstructorReturn(this,result);};}function NumberItem_possibleConstructorReturn(self,call){if(call&&(NumberItem_typeof(call)==="object"||typeof call==="function")){return call;}return NumberItem_assertThisInitialized(self);}function NumberItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function NumberItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function NumberItem_getPrototypeOf(o){NumberItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return NumberItem_getPrototypeOf(o);}/**
 * NumberItem
 * @author tianyanrong
 * @date 2021/7/6 下午1:25:15
 */var NumberItem=/*#__PURE__*/function(_Base){NumberItem_inherits(NumberItem,_Base);var _super=NumberItem_createSuper(NumberItem);function NumberItem(){var _this;NumberItem_classCallCheck(this,NumberItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};return _this;}NumberItem_createClass(NumberItem,[{key:"render",value:function render(){var _this2=this;var _this$props$option=this.props.option,option=_this$props$option===void 0?{}:_this$props$option;var value=option.value||'';if(!this.getIsShow()){return null;}return/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItem},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitle},/*#__PURE__*/index_js_default().createElement("label",null,/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:option.description},option.label)),/*#__PURE__*/index_js_default().createElement("div",{style:{display:'flex',flexDirection:'row'}},/*#__PURE__*/index_js_default().createElement("div",{style:{flex:'auto',width:'5em'}},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,_extends({},option.numberProps||{},{size:"small",addonBefore:option.numberProps&&option.numberProps.before||'',value:value||value===0?value:'',onChange:function onChange(value){_this2.updatePropsOptions({value:value});}}))),option.numberProps&&option.numberProps.unit?/*#__PURE__*/index_js_default().createElement("div",{style:{width:'2em',paddingLeft:'0.5em'}},option.numberProps.unit):null)));}}]);return NumberItem;}(Base);/* harmony default export */ const ViewParamItems_NumberItem = (NumberItem);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/drawer/style/index.js + 1 modules
var drawer_style = __webpack_require__(76098);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/drawer/index.js
var drawer = __webpack_require__(53295);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/space/style/index.js + 1 modules
var space_style = __webpack_require__(2544);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/space/index.js + 1 modules
var space = __webpack_require__(55700);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/switch/style/index.js + 1 modules
var switch_style = __webpack_require__(41715);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/switch/index.js
var es_switch = __webpack_require__(36760);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/input/style/index.js + 1 modules
var input_style = __webpack_require__(60418);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/input/index.js + 29 modules
var input = __webpack_require__(40704);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/select/style/index.js + 1 modules
var select_style = __webpack_require__(94289);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/select/index.js
var es_select = __webpack_require__(4213);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/radio/style/index.js + 1 modules
var radio_style = __webpack_require__(9651);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/radio/index.js + 5 modules
var es_radio = __webpack_require__(54770);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/message/style/index.js + 1 modules
var message_style = __webpack_require__(35735);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/message/index.js + 3 modules
var message = __webpack_require__(96213);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/button/style/index.js + 1 modules
var button_style = __webpack_require__(85793);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/button/index.js
var es_button = __webpack_require__(31481);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamsBar/components/StyleParamsBox/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const StyleParamsBox_index_module = ({"line":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__line","title":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__title","horizontal":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__horizontal","item":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__item","itemLabel":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__itemLabel","itemLabelBg":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__itemLabelBg","vertical":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__vertical","itemContnet":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__itemContnet","button":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__button","groupItem":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__groupItem","borderRightMiddle":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__borderRightMiddle","borderLeftMiddle":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__borderLeftMiddle","noData":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__noData","infoBox":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__infoBox","infoBoxDropDown":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__infoBoxDropDown","aaaa":"_-my-designer-src-components-ViewParamsBar-components-StyleParamsBox-index-module__aaaa"});
// EXTERNAL MODULE: ../my-designer/node_modules/@icode-run/color/src/index.jsx + 2 modules
var src = __webpack_require__(94639);
// EXTERNAL MODULE: ../my-designer/node_modules/@icode-run/color/src/colorsVariable.js
var colorsVariable = __webpack_require__(98537);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/modal/style/index.js + 1 modules
var modal_style = __webpack_require__(84389);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/modal/index.js + 16 modules
var modal = __webpack_require__(88217);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/spin/style/index.js + 1 modules
var spin_style = __webpack_require__(37615);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/spin/index.js
var spin = __webpack_require__(1584);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/cascader/style/index.js + 1 modules
var cascader_style = __webpack_require__(65940);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/cascader/index.js + 17 modules
var cascader = __webpack_require__(67238);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/upload/style/index.js + 3 modules
var upload_style = __webpack_require__(99766);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/upload/index.js + 54 modules
var upload = __webpack_require__(50491);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/tabs/style/index.js + 1 modules
var tabs_style = __webpack_require__(45783);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/tabs/index.js + 22 modules
var tabs = __webpack_require__(89274);
// EXTERNAL MODULE: ../my-cli/node_modules/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__(92910);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/IconItem/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const IconItem_index_module = ({"modalBox":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__modalBox","menu":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__menu","active":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__active","tools":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__tools","info":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__info","toolSidebar":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__toolSidebar","buttons":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__buttons","listBox":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__listBox","sidebar":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__sidebar","listBoxB":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__listBoxB","imagesUlTitle":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__imagesUlTitle","locationImagesBox":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__locationImagesBox","imagesBox":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__imagesBox","more":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__more","img":"_-my-designer-src-components-ViewParamItems-IconItem-index-module__img"});
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/QuestionCircleOutlined.js + 1 modules
var QuestionCircleOutlined = __webpack_require__(45157);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/FolderAddOutlined.js + 1 modules
var FolderAddOutlined = __webpack_require__(59094);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/UploadOutlined.js + 1 modules
var UploadOutlined = __webpack_require__(33154);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/SnippetsOutlined.js + 1 modules
var SnippetsOutlined = __webpack_require__(31361);
// EXTERNAL MODULE: ../my-web/src/utils/request.js
var utils_request = __webpack_require__(32478);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/IconItem/service.js
/**
 * Service
 * @author
 */var getIcon=function getIcon(options){return new Promise(function(resolve,reject){request({method:'POST',url:'/lowcodeApi/auth/icon/get',type:'json',body:options||{}}).then(function(res){resolve(res);});});};var getImage=function getImage(options){return new Promise(function(resolve,reject){(0,utils_request/* default */.Z)({method:'POST',url:'/lowcodeApi/auth/image/query',type:'json',body:options||{}}).then(function(res){resolve(res);});});};var removeImage=function removeImage(options){return new Promise(function(resolve,reject){(0,utils_request/* default */.Z)({method:'POST',url:'/lowcodeApi/auth/image/remove',type:'json',body:options||{}}).then(function(res){resolve(res);});});};var moveImage=function moveImage(options){return new Promise(function(resolve,reject){(0,utils_request/* default */.Z)({method:'POST',url:'/lowcodeApi/auth/image/move',type:'json',body:options||{}}).then(function(res){resolve(res);});});};var getCommmonImage=function getCommmonImage(options){return new Promise(function(resolve,reject){(0,utils_request/* default */.Z)({method:'POST',url:'/lowcodeApi/image/commmon/query',type:'json',body:options||{}}).then(function(res){resolve(res);});});};
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/IconItem/paste.js
function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}var blobToDataUrl=function blobToDataUrl(blob){return new Promise(function(resolve,reject){var a=new FileReader();a.onload=function(e){resolve(e.target.result);};a.readAsDataURL(blob);});};var paste=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee(resType){var imgBase64Data,error,clipboardData,clipboardItems,_iterator,_step,clipboardItem,_iterator2,_step2,type,value;return regenerator_default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:imgBase64Data=[];error='不允许从剪切板复制内容';_context.prev=2;clipboardData=window.navigator.clipboard;_context.next=6;return clipboardData.read();case 6:clipboardItems=_context.sent;_iterator=_createForOfIteratorHelper(clipboardItems);_context.prev=8;_iterator.s();case 10:if((_step=_iterator.n()).done){_context.next=41;break;}clipboardItem=_step.value;_iterator2=_createForOfIteratorHelper(clipboardItem.types);_context.prev=13;_iterator2.s();case 15:if((_step2=_iterator2.n()).done){_context.next=31;break;}type=_step2.value;if(!(type==='image/png'||type==='text/plain')){_context.next=28;break;}_context.next=20;return clipboardItem.getType(type);case 20:value=_context.sent;if(!(resType==='base64'&&type==='image/png')){_context.next=25;break;}_context.next=24;return blobToDataUrl(value);case 24:value=_context.sent;case 25:imgBase64Data.push(value);_context.next=29;break;case 28:error='剪切板无图片可复制';case 29:_context.next=15;break;case 31:_context.next=36;break;case 33:_context.prev=33;_context.t0=_context["catch"](13);_iterator2.e(_context.t0);case 36:_context.prev=36;_iterator2.f();return _context.finish(36);case 39:_context.next=10;break;case 41:_context.next=46;break;case 43:_context.prev=43;_context.t1=_context["catch"](8);_iterator.e(_context.t1);case 46:_context.prev=46;_iterator.f();return _context.finish(46);case 49:_context.next=53;break;case 51:_context.prev=51;_context.t2=_context["catch"](2);case 53:return _context.abrupt("return",imgBase64Data.length?imgBase64Data:error);case 54:case"end":return _context.stop();}}},_callee,null,[[2,51],[8,43,46,49],[13,33,36,39]]);}));return function paste(_x){return _ref.apply(this,arguments);};}();/* harmony default export */ const IconItem_paste = (paste);
// EXTERNAL MODULE: ../my-designer/node_modules/@icode-run/icon-font/src/index.jsx
var icon_font_src = __webpack_require__(7277);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/IconItem/IconModal.jsx
function IconModal_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){IconModal_typeof=function _typeof(obj){return typeof obj;};}else{IconModal_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return IconModal_typeof(obj);}function IconModal_extends(){IconModal_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return IconModal_extends.apply(this,arguments);}function IconModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function IconModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){IconModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){IconModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function IconModal_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function IconModal_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function IconModal_createClass(Constructor,protoProps,staticProps){if(protoProps)IconModal_defineProperties(Constructor.prototype,protoProps);if(staticProps)IconModal_defineProperties(Constructor,staticProps);return Constructor;}function IconModal_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)IconModal_setPrototypeOf(subClass,superClass);}function IconModal_setPrototypeOf(o,p){IconModal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return IconModal_setPrototypeOf(o,p);}function IconModal_createSuper(Derived){var hasNativeReflectConstruct=IconModal_isNativeReflectConstruct();return function _createSuperInternal(){var Super=IconModal_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=IconModal_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return IconModal_possibleConstructorReturn(this,result);};}function IconModal_possibleConstructorReturn(self,call){if(call&&(IconModal_typeof(call)==="object"||typeof call==="function")){return call;}return IconModal_assertThisInitialized(self);}function IconModal_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function IconModal_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function IconModal_getPrototypeOf(o){IconModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return IconModal_getPrototypeOf(o);}/**
 * IconModal
 * @author tianyanrong
 * @date 2022/2/8 下午4:36:17
 */var TabPane=tabs/* default.TabPane */.Z.TabPane;var IconModal=/*#__PURE__*/function(_Component){IconModal_inherits(IconModal,_Component);var _super=IconModal_createSuper(IconModal);function IconModal(){var _this;IconModal_classCallCheck(this,IconModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isShowCommonImage:true};_this.removeImage=/*#__PURE__*/function(){var _ref=IconModal_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee(urls){var res;return regenerator_default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return removeImage({urls:urls});case 2:res=_context.sent;if(res.result==='success'){message/* default.success */.ZP.success('删除图片成功');_this.getImages(_this.state.currActive);}else{message/* default.error */.ZP.error(res.msg);}case 4:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.moveImage=/*#__PURE__*/function(){var _ref2=IconModal_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee2(urls,keyword){var res;return regenerator_default().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return moveImage({urls:urls,keyword:keyword});case 2:res=_context2.sent;if(res.result==='success'){message/* default.success */.ZP.success('图片已移动到'+keyword);_this.getImages(_this.state.currActive);}else{message/* default.error */.ZP.error(res.msg);}case 4:case"end":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref2.apply(this,arguments);};}();_this.pushKeyword=function(){var _this$state=_this.state,listObj=_this$state.listObj,newKeyWord=_this$state.newKeyWord;if(!newKeyWord){return;}var newListObj=JSON.parse(JSON.stringify(listObj));var noKeyword=listObj['未分类'];if(newListObj['未分类']){delete newListObj['未分类'];newListObj[newKeyWord]=[];newListObj['未分类']=noKeyword;}else{newListObj[newKeyWord]=[];}_this.setState({listObj:newListObj,newKeyWord:''});};_this.getImages=/*#__PURE__*/IconModal_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee3(){var currActive,_this$props,isComponentEdit,visible,data,res,commonRes,newData,noKeyword,_args3=arguments;return regenerator_default().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:currActive=_args3.length>0&&_args3[0]!==undefined?_args3[0]:2;_this$props=_this.props,isComponentEdit=_this$props.isComponentEdit,visible=_this$props.visible;data=[];if(!(currActive===3)){_context3.next=10;break;}_context3.next=6;return getImage({});case 6:res=_context3.sent;data=res&&res.data||[];_context3.next=15;break;case 10:if(!(currActive===2)){_context3.next=15;break;}_context3.next=13;return getCommmonImage({});case 13:commonRes=_context3.sent;data=commonRes&&commonRes.data||[];case 15:newData={};noKeyword=[];(data||[]).forEach(function(item){if(item.keyword&&item.keyword!=='未分类'){newData[item.keyword]=newData[item.keyword]||[];newData[item.keyword].push({url:item.url,keyword:item.keyword});}else{noKeyword.push({url:item.url,keyword:'未分类'});}});newData['未分类']=noKeyword;_this.setState({listObj:newData});case 20:case"end":return _context3.stop();}}},_callee3);}));_this.pushLocationImages=function(url){var _this$state$locationI=_this.state.locationImages,locationImages=_this$state$locationI===void 0?[]:_this$state$locationI;_this.setState({locationImages:[].concat([url],locationImages)});};_this.actions={'1':'/lowcodeApi/auth/uploadimg','3':'/lowcodeApi/auth/uploadimg/app'};_this.action='/lowcodeApi/auth/uploadimg/app';_this.sendPasteImg=function(data){var _this$state2=_this.state,currActive=_this$state2.currActive,_this$state2$listActi=_this$state2.listActive,listActive=_this$state2$listActi===void 0?0:_this$state2$listActi,_this$state2$listObj=_this$state2.listObj,listObj=_this$state2$listObj===void 0?{}:_this$state2$listObj;var listObjKeys=Object.keys(listObj);var url=_this.actions[currActive];if(!url){return;}var formdata=new FormData();formdata.append('avatar',data);if(currActive===3){formdata.append('keyword',listObjKeys[listActive]||'');url="".concat(url).concat(listObjKeys[listActive]?'?keyword='+listObjKeys[listActive]:'');}var xhr=new XMLHttpRequest();xhr.open("post",url);xhr.send(formdata);xhr.onload=function(){if(xhr.status==200){var response=xhr.response;try{var res=JSON.parse(response);if(res.data&&res.data.url){if(currActive===1){_this.pushLocationImages(res.data.url);}else{_this.getImages(_this.state.currActive);}}else{message/* default.error */.ZP.error("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25");}}catch(e){console.log(e);}console.log(xhr.response);//...
}};};_this.paste=/*#__PURE__*/function(){var _ref4=IconModal_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee4(e){var base64Data;return regenerator_default().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:e.stopPropagation();e.preventDefault();_context4.next=4;return IconItem_paste();case 4:base64Data=_context4.sent;if(typeof base64Data==='string'){message/* default.warning */.ZP.warning(base64Data);}else if(base64Data.length){base64Data.forEach(function(item){_this.sendPasteImg(item);});}return _context4.abrupt("return",false);case 7:case"end":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();_this.ulNodes={};return _this;}IconModal_createClass(IconModal,[{key:"componentDidUpdate",value:function componentDidUpdate(){var _this$props2=this.props,visible=_this$props2.visible,isComponentEdit=_this$props2.isComponentEdit;if(isComponentEdit){this.action='';}if(visible&&visible!==this.preVisible){this.preVisible=visible;if(isComponentEdit){this.getImages(2);}}}},{key:"render",value:function render(){var _this2=this;var _this$props3=this.props,visible=_this$props3.visible,_onOk=_this$props3.onOk,onCancel=_this$props3.onCancel,isComponentEdit=_this$props3.isComponentEdit,isCopyUrl=_this$props3.isCopyUrl;var _this$state3=this.state,_this$state3$location=_this$state3.locationImages,locationImages=_this$state3$location===void 0?[]:_this$state3$location,_this$state3$listObj=_this$state3.listObj,listObj=_this$state3$listObj===void 0?{}:_this$state3$listObj,uploadIng=_this$state3.uploadIng,imgUrl=_this$state3.imgUrl,_this$state3$currActi=_this$state3.currActive,currActive=_this$state3$currActi===void 0?1:_this$state3$currActi,_this$state3$listActi=_this$state3.listActive,listActive=_this$state3$listActi===void 0?0:_this$state3$listActi;var newCurrActive=isComponentEdit?2:currActive;var listObjKeys=listObj?Object.keys(listObj):[];var listObjValues=listObj?Object.values(listObj):[];this.ulNodes={};return/*#__PURE__*/index_js_default().createElement(modal/* default */.Z,IconModal_extends({width:700,title:/*#__PURE__*/index_js_default().createElement("ul",{className:IconItem_index_module.menu},isComponentEdit?null:/*#__PURE__*/index_js_default().createElement("li",{className:newCurrActive===1?IconItem_index_module.active:'',onClick:function onClick(){_this2.setState({listActive:0,currActive:1,listObj:{}});}},"\u4E0A\u4F20\u56FE\u7247"),/*#__PURE__*/index_js_default().createElement("li",{className:newCurrActive===2?IconItem_index_module.active:'',onClick:function onClick(){_this2.setState({listActive:0,currActive:2,listObj:null});_this2.getImages(2);}},"\u7F51\u7EDC\u7D20\u6750"),isComponentEdit?null:/*#__PURE__*/index_js_default().createElement("li",{className:newCurrActive===3?IconItem_index_module.active:'',onClick:function onClick(){_this2.setState({listActive:0,currActive:3,listObj:null});_this2.getImages(3);}},"\u4E2A\u4EBA\u7D20\u6750")),visible:visible,className:IconItem_index_module.modalBox},isCopyUrl?{footer:/*#__PURE__*/index_js_default().createElement("div",null,imgUrl)}:{},{onOk:function onOk(){if(!imgUrl){message/* default.error */.ZP.error('请先选择图标/图片');return;}if(_onOk&&typeof _onOk==='function'){_onOk({value:imgUrl});}},onCancel:onCancel}),newCurrActive===1||newCurrActive===3?/*#__PURE__*/index_js_default().createElement("div",{className:IconItem_index_module.tools},/*#__PURE__*/index_js_default().createElement("div",{className:IconItem_index_module.info},/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{placement:"leftBottom",title:/*#__PURE__*/index_js_default().createElement("ol",{style:{margin:'0',padding:'10px 0 10px 20px'}},/*#__PURE__*/index_js_default().createElement("li",null,"\u4E0A\u4F20\u56FE\u7247: \u4E0A\u4F20\u652F\u6301svg\u3001png\u3001gif\u3001jpeg\u3001jpg\u683C\u5F0F\u7684\u56FE\u7247\uFF1B"),/*#__PURE__*/index_js_default().createElement("li",null,"\u4ECE\u526A\u5207\u677F\u4E2D\u590D\u5236\u56FE\u7247: \u590D\u5236svg\u56FE\u7247\u65F6\uFF0C\u662F\u590D\u5236svg\u4EE3\u7801\uFF01"),/*#__PURE__*/index_js_default().createElement("li",null,"\u56FE\u6807\u8D44\u6E90: ",/*#__PURE__*/index_js_default().createElement("a",{target:'_blank',href:"https://iconpark.oceanengine.com/official"},"\u5B57\u8282\u7684\u56FE\u6807\u8D44\u6E90")))},/*#__PURE__*/index_js_default().createElement(QuestionCircleOutlined/* default */.Z,null))),newCurrActive===3?/*#__PURE__*/index_js_default().createElement("div",{className:IconItem_index_module.toolSidebar},/*#__PURE__*/index_js_default().createElement(input/* default.Group */.Z.Group,{compact:true},/*#__PURE__*/index_js_default().createElement(input/* default */.Z,{style:{width:'calc(100% - 40px)'},size:"small",value:this.state.newKeyWord||'',onChange:function onChange(e){var value=e.target.value;_this2.setState({newKeyWord:value});}}),/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:"small",icon:/*#__PURE__*/index_js_default().createElement(FolderAddOutlined/* default */.Z,null),onClick:function onClick(){_this2.pushKeyword();}}))):null,/*#__PURE__*/index_js_default().createElement("div",{className:IconItem_index_module.buttons},/*#__PURE__*/index_js_default().createElement(upload/* default */.Z,{name:'avatar',action:"".concat(this.actions[newCurrActive]).concat(Object.keys(listObj||{})[listActive]?'?keyword='+listObjKeys[listActive]:''),data:function data(){return{keyword:Object.keys(listObj||{})[listActive]||''};},onChange:function onChange(info){if(info.file.status==='uploading'){_this2.setState({uploadIng:true});}if(info.file.status==='done'){_this2.setState({uploadIng:false});if(currActive===1){var url=info.file&&info.file.response&&info.file.response.data&&info.file.response.data.url;_this2.pushLocationImages(url);}else{_this2.getImages(currActive);}}else if(info.file.status==='error'){message/* default.error */.ZP.error("".concat(info.file.name," \u4E0A\u4F20\u5931\u8D25"));_this2.setState({uploadIng:false});}}},/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:"small",loading:uploadIng,ghost:true,type:'primary',icon:/*#__PURE__*/index_js_default().createElement(UploadOutlined/* default */.Z,null)},"\u4E0A\u4F20\u56FE\u7247")),/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:"small",style:{marginLeft:'10px'},ghost:true,type:'primary',onClick:this.paste,icon:/*#__PURE__*/index_js_default().createElement(SnippetsOutlined/* default */.Z,null)},"\u4ECE\u526A\u5207\u677F\u4E2D\u590D\u5236\u56FE\u7247/SVG\u4EE3\u7801"))):null,newCurrActive!==1?/*#__PURE__*/index_js_default().createElement("div",null,listObj?/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(IconItem_index_module.listBox," ").concat(newCurrActive===2?IconItem_index_module.listBoxB:'')},/*#__PURE__*/index_js_default().createElement("div",{className:IconItem_index_module.sidebar},listObjKeys.map(function(name,index){return/*#__PURE__*/index_js_default().createElement("a",{className:listActive===index?IconItem_index_module.active:'',onClick:function onClick(){_this2.setState({listActive:index});if(_this2.ulNodes[index]&&_this2.imagesBoxEl){var offsetTop=_this2.ulNodes[index].offsetTop||0;_this2.imagesBoxEl.scrollTo(0,offsetTop);}}},name);})),/*#__PURE__*/index_js_default().createElement("div",{className:IconItem_index_module.imagesBox,ref:function ref(node){return _this2.imagesBoxEl=node;}},(listObjValues||[]).map(function(){var images=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var index=arguments.length>1?arguments[1]:undefined;return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{ref:function ref(node){_this2.ulNodes[index]=node;},className:IconItem_index_module.imagesUlTitle},/*#__PURE__*/index_js_default().createElement("span",null,listObjKeys[index]||'')),/*#__PURE__*/index_js_default().createElement("ul",{target:index},images.map(function(item){var url=item.url;return/*#__PURE__*/index_js_default().createElement("li",{className:url===imgUrl?IconItem_index_module.active:''},currActive===3?/*#__PURE__*/index_js_default().createElement("div",{className:IconItem_index_module.more},/*#__PURE__*/index_js_default().createElement(cascader/* default */.Z,{value:[2,item.keyword],options:[{label:'移动到',value:2,children:listObjKeys.map(function(keyword){return{label:keyword,value:keyword};})},{label:'移除',value:1,children:[{label:'确认移除',value:3}]}],onChange:function onChange(){var checked=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var selectedOptions=arguments.length>1?arguments[1]:undefined;if(checked[0]===1&&checked[1]===3){_this2.removeImage([url]);}else if(checked[0]===2&&checked[1]){_this2.moveImage([url],checked[1]);}}},/*#__PURE__*/index_js_default().createElement(icon_font_src/* default */.Z,{type:"iconmore"}))):null,/*#__PURE__*/index_js_default().createElement("div",{className:IconItem_index_module.img,onClick:function onClick(){_this2.setState({imgUrl:url});}},/*#__PURE__*/index_js_default().createElement("img",{src:url})));})));}))):/*#__PURE__*/index_js_default().createElement(spin/* default */.Z,{tip:"Loading..."},/*#__PURE__*/index_js_default().createElement("div",{style:{width:'100%',height:'200px'}}))):/*#__PURE__*/index_js_default().createElement("div",{className:IconItem_index_module.locationImagesBox},/*#__PURE__*/index_js_default().createElement("ul",null,locationImages.map(function(url){return/*#__PURE__*/index_js_default().createElement("li",{className:url===imgUrl?IconItem_index_module.active:''},/*#__PURE__*/index_js_default().createElement("div",{className:IconItem_index_module.img,onClick:function onClick(){_this2.setState({imgUrl:url});}},/*#__PURE__*/index_js_default().createElement("img",{src:url})));}))));}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if(nextProps.visible&&nextProps.visible!==prevState.visible){return{visible:nextProps.visible,imgUrl:'',type:''};}return{visible:nextProps.visible};}}]);return IconModal;}(index_js_.Component);/* harmony default export */ const IconItem_IconModal = (IconModal);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/EditOutlined.js + 1 modules
var EditOutlined = __webpack_require__(13246);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/DeleteOutlined.js + 1 modules
var DeleteOutlined = __webpack_require__(46224);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/PlusOutlined.js + 1 modules
var PlusOutlined = __webpack_require__(11128);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/IconItem/IconBtn.jsx
function IconBtn_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){IconBtn_typeof=function _typeof(obj){return typeof obj;};}else{IconBtn_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return IconBtn_typeof(obj);}function IconBtn_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function IconBtn_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function IconBtn_createClass(Constructor,protoProps,staticProps){if(protoProps)IconBtn_defineProperties(Constructor.prototype,protoProps);if(staticProps)IconBtn_defineProperties(Constructor,staticProps);return Constructor;}function IconBtn_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)IconBtn_setPrototypeOf(subClass,superClass);}function IconBtn_setPrototypeOf(o,p){IconBtn_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return IconBtn_setPrototypeOf(o,p);}function IconBtn_createSuper(Derived){var hasNativeReflectConstruct=IconBtn_isNativeReflectConstruct();return function _createSuperInternal(){var Super=IconBtn_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=IconBtn_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return IconBtn_possibleConstructorReturn(this,result);};}function IconBtn_possibleConstructorReturn(self,call){if(call&&(IconBtn_typeof(call)==="object"||typeof call==="function")){return call;}return IconBtn_assertThisInitialized(self);}function IconBtn_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function IconBtn_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function IconBtn_getPrototypeOf(o){IconBtn_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return IconBtn_getPrototypeOf(o);}/**
 * StringItem
 * @author tianyanrong
 * @date 2021/6/8 下午4:36:17
 */var IconBtn=/*#__PURE__*/function(_Component){IconBtn_inherits(IconBtn,_Component);var _super=IconBtn_createSuper(IconBtn);function IconBtn(){IconBtn_classCallCheck(this,IconBtn);return _super.apply(this,arguments);}IconBtn_createClass(IconBtn,[{key:"render",value:function render(){var _this$props=this.props,src=_this$props.src,setState=_this$props.setState,onClear=_this$props.onClear;return src?/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.iconBtn)},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.imgBox},/*#__PURE__*/index_js_default().createElement("img",{src:src})),/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.remove},/*#__PURE__*/index_js_default().createElement(EditOutlined/* default */.Z,{style:{marginRight:'10px'},onClick:function onClick(){setState({isModalVisible:true});}}),/*#__PURE__*/index_js_default().createElement(DeleteOutlined/* default */.Z,{onClick:onClear}))):/*#__PURE__*/index_js_default().createElement("div",{onClick:function onClick(){setState({isModalVisible:true});},className:ViewParamItems_index_module.iconBtn},/*#__PURE__*/index_js_default().createElement(PlusOutlined/* default */.Z,null));}}]);return IconBtn;}(index_js_.Component);/* harmony default export */ const IconItem_IconBtn = (IconBtn);
// EXTERNAL MODULE: include-loader!../my-cli/node_modules/monaco-editor/esm/vs/editor/editor.api.js
var editor_api = __webpack_require__(83989);
// EXTERNAL MODULE: ../my-designer/src/utils/lessToJson.js
var lessToJson = __webpack_require__(2723);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamsBar/components/StyleParamsBox/index.jsx
function StyleParamsBox_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){StyleParamsBox_typeof=function _typeof(obj){return typeof obj;};}else{StyleParamsBox_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return StyleParamsBox_typeof(obj);}function StyleParamsBox_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function StyleParamsBox_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function StyleParamsBox_createClass(Constructor,protoProps,staticProps){if(protoProps)StyleParamsBox_defineProperties(Constructor.prototype,protoProps);if(staticProps)StyleParamsBox_defineProperties(Constructor,staticProps);return Constructor;}function StyleParamsBox_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)StyleParamsBox_setPrototypeOf(subClass,superClass);}function StyleParamsBox_setPrototypeOf(o,p){StyleParamsBox_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return StyleParamsBox_setPrototypeOf(o,p);}function StyleParamsBox_createSuper(Derived){var hasNativeReflectConstruct=StyleParamsBox_isNativeReflectConstruct();return function _createSuperInternal(){var Super=StyleParamsBox_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=StyleParamsBox_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return StyleParamsBox_possibleConstructorReturn(this,result);};}function StyleParamsBox_possibleConstructorReturn(self,call){if(call&&(StyleParamsBox_typeof(call)==="object"||typeof call==="function")){return call;}return StyleParamsBox_assertThisInitialized(self);}function StyleParamsBox_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function StyleParamsBox_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function StyleParamsBox_getPrototypeOf(o){StyleParamsBox_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return StyleParamsBox_getPrototypeOf(o);}/**
 * StyleParamsBox
 * @author tianyanrong
 * @date 2021/6/22 下午5:42:04
 */// import UploadImg from "../../../UploadImg";
var ButtonGroup=es_button/* default.Group */.Z.Group;var StyleParamsBox=/*#__PURE__*/function(_Component){StyleParamsBox_inherits(StyleParamsBox,_Component);var _super=StyleParamsBox_createSuper(StyleParamsBox);function StyleParamsBox(){var _this;StyleParamsBox_classCallCheck(this,StyleParamsBox);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.setComponentStyle=function(nodeId,componentStyle){var dispatchEditModel=_this.props.dispatchEditModel;// const selectedComponent = model.selectedComponentConfig || {};
// let cssContent = selectedComponent.css;
// const lessStyle = lessToJson(cssContent) || {};
// let currStyle = Object.assign({}, lessStyle['&'], componentStyle);
// cssContent = jsonToLess(currStyle, cssContent);
// dispatchEditModel("setComponentCss", {
//   nodeId,
//   css: cssContent,
// });
dispatchEditModel("setComponentStyle",{nodeId:nodeId,style:componentStyle});};_this.setComponentCss=function(nodeId,cssContent){var dispatchEditModel=_this.props.dispatchEditModel;try{(0,lessToJson/* lessToJson */.b5)(cssContent);dispatchEditModel("setComponentCss",{nodeId:nodeId,css:cssContent});}catch(e){message/* default.error */.ZP.error('css格式错误，请修改css！');}};_this.boxShadow={};_this.setBoxShadow=function(value,parentNodeId){var boxShadow=_this.boxShadow;var boxShadowValue="";if(value){boxShadowValue=""+(boxShadow.h||"1px")+" "+(boxShadow.v||"1px")+" "+(boxShadow.blur||"5px")+" "+(boxShadow.spread||"1px")+" "+(boxShadow.color||"#ddd");}_this.setComponentStyle(parentNodeId,{boxShadow:boxShadowValue});};_this.getBoxShadow=function(value){if(!(value&&value.indexOf(" ")>=0)){return{};}var boxShow=value.split(" ");if(boxShow.length===5){_this.boxShadow={h:boxShow[0],v:boxShow[1],blur:boxShow[2],spread:boxShow[3],color:boxShow[4]};}return _this.boxShadow||{};};_this.setValue=function(newValue){if(!_this.monacoInstance){return;}_this.monacoInstance.setValue(newValue||'');// setTimeout(() => {
//   try {
//     this.monacoInstance.getAction("editor.action.formatDocument").run(); //自动格式化代码
//   } catch (e) {}
// }, 200);
};_this.getPartStyles=function(){var myStyle=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var newMyStyle=JSON.parse(JSON.stringify(myStyle));var colorReg=/(\#[0-9A-Za-z]+)|(rgba\([0-9A-Za-z,\.]+\))|(var\([0-9A-Za-z,\.\-\_]+\))/g;if(myStyle.margin){var margins=myStyle.margin.split(/\s+/);newMyStyle.marginLeft=newMyStyle.marginLeft||margins[3]||margins[1]||margins[0];newMyStyle.marginRight=newMyStyle.marginRight||margins[1]||margins[0];newMyStyle.marginTop=newMyStyle.marginTop||margins[0];newMyStyle.marginBottom=newMyStyle.marginBottom||margins[2]||margins[0];}if(myStyle.padding){var paddings=myStyle.padding.split(/\s+/);newMyStyle.paddingLeft=newMyStyle.paddingLeft||paddings[3]||paddings[1]||paddings[0];newMyStyle.paddingRight=newMyStyle.paddingRight||paddings[1]||paddings[0];newMyStyle.paddingTop=newMyStyle.paddingTop||paddings[0];newMyStyle.paddingBottom=newMyStyle.paddingBottom||paddings[2]||paddings[0];}if(myStyle.border){var borderValue=myStyle.border;newMyStyle.borderWidth=newMyStyle.borderWidth||borderValue.match(/\d+px/)&&borderValue.match(/\d+px/)[0];newMyStyle.borderStyle=newMyStyle.borderStyle||borderValue.match(/solid|dashed|dotted/)&&borderValue.match(/solid|dashed|dotted/)[0];newMyStyle.borderColor=newMyStyle.borderColor||borderValue.match(colorReg)&&borderValue.match(colorReg)[0];}if(myStyle.background){var backgroundValue=myStyle.background;var urlReg=/url\((.(?!\)))*.\)/g;newMyStyle.backgroundColor=backgroundValue.backgroundColor||backgroundValue.match(colorReg)&&backgroundValue.match(colorReg)[0];newMyStyle.backgroundImage=backgroundValue.backgroundImage||backgroundValue.match(urlReg)&&backgroundValue.match(urlReg)[0]&&backgroundValue.match(urlReg)[0].replace(/\s*url\s*\(\s*(\'|\")*/,'').replace(/(\'|\")*\s*\)\s*/,'');}return newMyStyle;};return _this;}StyleParamsBox_createClass(StyleParamsBox,[{key:"render",value:function render(){var _this2=this;var _this$props$model=this.props.model,model=_this$props$model===void 0?{}:_this$props$model;var selectedComponent=model.selectedComponentConfig||{};var cssContent=selectedComponent.css||"";//const myStyle = selectedComponent.style || {};
var myStyle=((0,lessToJson/* lessToJson */.b5)(cssContent)||{})['&']||{};myStyle=this.getPartStyles(myStyle);var myStyleString=JSON.stringify(Object.keys(myStyle));var parentNodeId=selectedComponent.parentNodeId;var _ref=selectedComponent.viewEditorConfig||{},disabledHeightStyle=_ref.disabledHeightStyle,disabledWidthStyle=_ref.disabledWidthStyle;var boxShadowObj=this.getBoxShadow(myStyle.boxShadow);return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.styleParamsBox},/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(StyleParamsBox_index_module.line)},/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:"small",style:{width:"100%",margin:"0px auto"},onClick:function onClick(){_this2.setState({visible:true});_this2.setValue(cssContent);}},"CSS\u6837\u5F0F\u4EE3\u7801\u7F16\u8F91")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.line+" "+StyleParamsBox_index_module.horizontal},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement(es_radio/* default.Group */.ZP.Group,{value:myStyle.flex||"",buttonStyle:"solid",size:"small",onChange:function onChange(event){var value=event.target.value;var sizeStyle={flex:value||''};if(value==="auto"){sizeStyle.height="100%";}else{sizeStyle.height='';}if(value){sizeStyle.width='';}_this2.setComponentStyle(parentNodeId,sizeStyle);}},/*#__PURE__*/index_js_default().createElement(es_radio/* default.Button */.ZP.Button,{value:""},"\u5B9A\u4E49"),/*#__PURE__*/index_js_default().createElement(es_radio/* default.Button */.ZP.Button,{value:"auto"},"\u9002\u5E94"),/*#__PURE__*/index_js_default().createElement(es_radio/* default.Button */.ZP.Button,{value:"1"},"\u5E73\u5747")))),/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(StyleParamsBox_index_module.line+" "+StyleParamsBox_index_module.horizontal," ").concat(myStyle.width?'':StyleParamsBox_index_module.noData)},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u5BBD"),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},!myStyle.width||(myStyle.width||'').match(/((px)|(\%)|(vw)|(vh))$/)?/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{disabled:disabledWidthStyle,style:{width:"60px"},className:StyleParamsBox_index_module.borderRightMiddle,value:parseInt(myStyle.width,10)||"",step:50,min:0,size:"small",onChange:function onChange(value){var unit=(myStyle.width||"").replace(/\d+/,"")||"px";_this2.setComponentStyle(parentNodeId,{width:value||value===0?"".concat(value).concat(unit):'',flex:""});}}),/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{size:"small",style:{width:"50px"},className:StyleParamsBox_index_module.borderLeftMiddle,value:(myStyle.width||"").replace(/\d+/,"")||"",onChange:function onChange(value){var valueNumber=parseInt(myStyle.width,10)||"";_this2.setComponentStyle(parentNodeId,{width:valueNumber||valueNumber===0?"".concat(valueNumber).concat(value):'',flex:""});}},/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"px"},"px"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"%"},"%"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"vw"},"vw"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"vh"},"vh"))):/*#__PURE__*/index_js_default().createElement(input/* default */.Z,{value:myStyle.width,size:'small',onChange:function onChange(e){var value=e.target.value;_this2.setComponentStyle(parentNodeId,{width:value});}})))),/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(StyleParamsBox_index_module.line+" "+StyleParamsBox_index_module.horizontal," ").concat(myStyle.height?'':StyleParamsBox_index_module.noData)},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u9AD8"),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},!myStyle.height||(myStyle.height||'').match(/((px)|(\%)|(vw)|(vh))$/)?/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{className:StyleParamsBox_index_module.borderRightMiddle,disabled:disabledHeightStyle,style:{width:"60px"},value:parseInt(myStyle.height,10),size:"small",step:50,min:0,onChange:function onChange(value){var unit=(myStyle.height||"").replace(/\d+/,"")||"px";_this2.setComponentStyle(parentNodeId,{height:value||value===0?"".concat(value).concat(unit):''});}}),/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{disabled:disabledHeightStyle,size:"small",className:StyleParamsBox_index_module.borderLeftMiddle,style:{width:"50px"},value:(myStyle.height||"").replace(/\d+/,"")||"",onChange:function onChange(value){var valueNumber=parseInt(myStyle.height,10)||"";_this2.setComponentStyle(parentNodeId,{height:valueNumber||valueNumber===0?"".concat(valueNumber).concat(value):''});}},/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"px"},"px"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"%"},"%"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"vw"},"vw"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"vh"},"vh"))):/*#__PURE__*/index_js_default().createElement(input/* default */.Z,{value:myStyle.height||'',size:'small',onChange:function onChange(e){var value=e.target.value;_this2.setComponentStyle(parentNodeId,{height:value});}})))),/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(StyleParamsBox_index_module.line," ").concat(myStyleString.indexOf('margin')>=0?'':StyleParamsBox_index_module.noData)},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.vertical},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.title,style:{width:"1.5em",lineHeight:"1.1em"}},"\u5916\u8FB9\u8DDD"),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",step:5,min:0,value:parseInt(myStyle.marginLeft,10)||"",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{marginLeft:value?value+"px":""});}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u5DE6")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",step:5,min:0,value:parseInt(myStyle.marginTop,10)||"",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{marginTop:value?value+"px":""});}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u4E0A")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",step:5,min:0,value:parseInt(myStyle.marginRight,10)||"",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{marginRight:value?value+"px":""});}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u53F3")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",step:5,min:0,value:parseInt(myStyle.marginBottom,10)||"",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{marginBottom:value?value+"px":""});}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u4E0B")))),/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(StyleParamsBox_index_module.line," ").concat(myStyleString.indexOf('padding')>=0?'':StyleParamsBox_index_module.noData)},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.vertical},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.title,style:{width:"1.5em",lineHeight:"1.1em"}},"\u5185\u8FB9\u8DDD"),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",step:5,min:0,value:parseInt(myStyle.paddingLeft,10)||"",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{paddingLeft:value?value+"px":""});}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u5DE6")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",step:5,min:0,value:parseInt(myStyle.paddingTop,10)||"",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{paddingTop:value?value+"px":""});}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u4E0A")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",step:5,min:0,value:parseInt(myStyle.paddingRight,10)||"",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{paddingRight:value?value+"px":""});}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u53F3")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",step:5,min:0,value:parseInt(myStyle.paddingBottom,10)||"",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{paddingBottom:value?value+"px":""});}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u4E0B")))),/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(StyleParamsBox_index_module.line," ").concat(myStyleString.indexOf('border')>=0?'':StyleParamsBox_index_module.noData)},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.vertical},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.title,style:{width:"1.5em"}},"\u8FB9\u6846"),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:"block"},value:myStyle.borderColor,isShowPresetColors:true,global:model.global,onChange:function onChange(value){var styleValue={};if(value){styleValue={borderColor:value,borderWidth:myStyle.borderWidth||"1px",borderStyle:myStyle.borderStyle||"solid"};}else{styleValue={borderColor:"",borderWidth:"",borderStyle:""};}_this2.setComponentStyle(parentNodeId,styleValue);}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u989C\u8272")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",min:0,value:parseInt(myStyle.borderWidth,10)||"",onChange:function onChange(value){var borderStyle={};if(value){borderStyle.borderWidth=value+"px";}else{borderStyle.borderStyle="";borderStyle.borderWidth="";borderStyle.borderColor="";}_this2.setComponentStyle(parentNodeId,borderStyle);}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u7C97\u7EC6")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{size:"small",style:{width:"100%"},value:myStyle.borderStyle||"",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{borderStyle:value||""});}},/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"solid"},"\u5B9E\u7EBF"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"dashed"},"\u865A\u7EBF"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"dotted"},"\u70B9\u865A\u7EBF"))),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u7EBF\u6761")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{value:parseInt(myStyle.borderRadius,10)||"",step:4,size:"small",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{borderRadius:value?value+"px":""});}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u5706\u89D2")))),/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(StyleParamsBox_index_module.line+" "+StyleParamsBox_index_module.horizontal," ").concat(myStyleString.indexOf('background')>=0?'':StyleParamsBox_index_module.noData)},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(StyleParamsBox_index_module.itemLabel)},"\u80CC\u666F"),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.groupItem},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{position:"top",isShowPresetColors:true,global:model.global,value:myStyle.backgroundColor,onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{backgroundColor:value||""});}})),/*#__PURE__*/index_js_default().createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:"10px"}},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.groupItem},/*#__PURE__*/index_js_default().createElement(IconItem_IconBtn,{src:myStyle.backgroundImage?myStyle.backgroundImage.replace(/^url\(/,"").replace(/\)$/,""):"",setState:function setState(options){_this2.setState(options);},onClear:function onClear(){_this2.setComponentStyle(parentNodeId,{backgroundImage:""});}})),/*#__PURE__*/index_js_default().createElement("div",{style:{flex:"auto"}},/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{size:"small",style:{width:"100%"},value:myStyle.backgroundPosition||"",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{backgroundPosition:value||""});}},/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:""},"-\u65E0-"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"center"},"\u5C45\u4E2D"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"top center"},"\u4E0A\u5C45\u4E2D"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"bottom center"},"\u4E0B\u5C45\u4E2D"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"center left"},"\u5DE6\u5C45\u4E2D"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"center right"},"\u53F3\u5C45\u4E2D"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"top left"},"\u5DE6\u4E0A\u89D2"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"top right"},"\u53F3\u4E0A\u89D2"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"bottom left"},"\u5DE6\u4E0B\u89D2"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"bottom right"},"\u53F3\u4E0B\u89D2")),/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{size:"small",style:{width:"100%",marginTop:"10px"},value:myStyle.backgroundRepeat||"",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{backgroundRepeat:value||""});}},/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:""},"-\u65E0-"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"repeat"},"\u5E73\u94FA"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"repeat-x"},"\u6A2A\u5E73\u94FA"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"repeat-y"},"\u7AD6\u5E73\u94FA"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"no-repeat"},"\u4E0D\u5E73\u94FA")),/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{size:"small",style:{width:"100%",marginTop:"10px"},value:myStyle.backgroundSize||"",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{backgroundSize:value||""});}},/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:""},"-\u65E0-"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"100% 100%"},"\u5BBD\u9AD8\u62C9\u4F38"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"100% auto"},"\u5BBD\u62C9\u4F38"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"auto 100%"},"\u9AD8\u62C9\u4F38"))))))),/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(StyleParamsBox_index_module.line," ").concat(myStyleString.indexOf('hadow')>=0?'':StyleParamsBox_index_module.noData)},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.title},"\u9634\u5F71"),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.vertical},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:"block"},isShowPresetColors:true,global:model.global,value:boxShadowObj.color,onChange:function onChange(value){_this2.boxShadow.color=value;_this2.setBoxShadow(value,parentNodeId);}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u989C\u8272")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",min:0,value:parseInt(boxShadowObj.h,10)||"",onChange:function onChange(value){_this2.boxShadow.h=value?value+"px":"";_this2.setBoxShadow(value,parentNodeId);}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u6C34\u5E73")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",min:0,value:parseInt(boxShadowObj.v,10)||"",onChange:function onChange(value){_this2.boxShadow.v=value?value+"px":"";_this2.setBoxShadow(value,parentNodeId);}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u5782\u76F4")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",min:0,value:parseInt(boxShadowObj.blur,10)||"",onChange:function onChange(value){_this2.boxShadow.blur=value?value+"px":"";_this2.setBoxShadow(value,parentNodeId);}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u6A21\u7CCA")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",min:0,value:parseInt(boxShadowObj.spread,10)||"",onChange:function onChange(value){_this2.boxShadow.spread=value?value+"px":"";_this2.setBoxShadow(value,parentNodeId);}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u5C3A\u5BF8")))),/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(StyleParamsBox_index_module.line+" "+StyleParamsBox_index_module.horizontal," ").concat(myStyle.textAlign?'':StyleParamsBox_index_module.noData)},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u5BF9\u9F50\u65B9\u5F0F"),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{size:"small",value:myStyle.textAlign||"",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{textAlign:value||""});},style:{width:100}},/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:""},"-\u65E0-"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"center"},"\u5C45\u4E2D\u5BF9\u9F50"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"left"},"\u5C45\u5DE6\u5BF9\u9F50"),/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"right"},"\u5C45\u53F3\u5BF9\u9F50"))))),/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(StyleParamsBox_index_module.line," ").concat(myStyleString.indexOf('font')>=0||myStyle.color?'':StyleParamsBox_index_module.noData)},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.title},"\u6587\u5B57\u6837\u5F0F"),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.vertical},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",min:9,step:1,value:parseFloat(myStyle.fontSize,10)||"",addonAfter:"px",onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{fontSize:value?value+"px":""});}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u5B57\u53F7")),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemContnet},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:"block"},isShowPresetColors:true,global:model.global,value:myStyle.color,onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{color:value||""});}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.itemLabel},"\u5B57\u4F53\u989C\u8272"))),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.vertical,style:{margin:"10px 0"}},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{style:{width:'100%'},size:"small",placeholder:"font family",value:myStyle.fontFamily||'',onChange:function onChange(value){_this2.setComponentStyle(parentNodeId,{fontFamily:value?value:""});}},/*#__PURE__*/index_js_default().createElement(Option,{value:""},"\u9ED8\u8BA4"),/*#__PURE__*/index_js_default().createElement(Option,{value:"Square721"},"Square721"),/*#__PURE__*/index_js_default().createElement(Option,{value:"Square721Cn"},"Square721Cn"),/*#__PURE__*/index_js_default().createElement(Option,{value:"OthelloOutline"},"OthelloOutline")))),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.vertical,style:{margin:"10px 0"}},/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement(es_switch/* default */.Z,{style:{width:"100%"},checkedChildren:"\u52A0\u7C97",unCheckedChildren:"\u52A0\u7C97",checked:myStyle.fontWeight?true:false,onChange:function onChange(checked){_this2.setComponentStyle(parentNodeId,{fontWeight:checked?"bold":""});}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement(es_switch/* default */.Z,{style:{width:"5em"},checkedChildren:"\u4E0B\u5212\u7EBF",unCheckedChildren:"\u4E0B\u5212\u7EBF",checked:myStyle.textDecoration?true:false,onChange:function onChange(checked){_this2.setComponentStyle(parentNodeId,{textDecoration:checked?"underline":""});}})),/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.item},/*#__PURE__*/index_js_default().createElement(es_switch/* default */.Z,{style:{width:"100%"},checkedChildren:"\u659C\u4F53",unCheckedChildren:"\u659C\u4F53",checked:myStyle.fontStyle?true:false,onChange:function onChange(checked){_this2.setComponentStyle(parentNodeId,{fontStyle:checked?"italic":""});}}))))),/*#__PURE__*/index_js_default().createElement(drawer/* default */.Z,{title:/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.infoBox,style:{fontSize:"12px"}},"CSS\u6837\u5F0F\u4EE3\u7801\u7F16\u8F91",/*#__PURE__*/index_js_default().createElement("div",{className:StyleParamsBox_index_module.infoBoxDropDown},(colorsVariable/* default */.Z||[]).map(function(color){return/*#__PURE__*/index_js_default().createElement("div",null,color);}))),placement:"right",visible:this.state.visible,onClose:function onClose(){_this2.setState({visible:false});},maskStyle:{opacity:0},contentWrapperStyle:{width:"570px"},headerStyle:{padding:"5px 10px"},bodyStyle:{padding:"0px"},extra:/*#__PURE__*/index_js_default().createElement(space/* default */.Z,null,/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:"small",onClick:function onClick(){_this2.setState({isModalVisible:true,isCopyUrl:true});}},"\u4E0A\u4F20\u56FE\u7247"),/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:"small",onClick:function onClick(){_this2.setState({visible:false});}},"\u5173\u95ED"),/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:"small",type:"primary",disabled:this.state.cssEditDisabled?true:false,onClick:function onClick(){_this2.setState({cssEditDisabled:true});try{var newValue=_this2.monacoInstance.getValue();var myValue=newValue.replace(/\r|\n/g,'').replace(/\s/g,'');var isHasSubTree=(myValue||'').match(/\{(.(?!\}))*\{/g);if(isHasSubTree){message/* default.error */.ZP.error('css代码格式有误，请使用“层次选择器”来定义子元素样式!');return;}_this2.setComponentCss(parentNodeId,newValue);}catch(e){message/* default.error */.ZP.error('css代码格式有误。');}// this.updatePropsOptions({
//   value: `${newValue}`,
// });
}},"\u5E94\u7528"))},/*#__PURE__*/index_js_default().createElement("div",{ref:function ref(node){if(!_this2.monacoInstance){_this2.monacoInstance=editor_api.editor.create(node,{value:cssContent,language:"less",theme:"vs-dark",autoDetectHighContrast:true,automaticLayout:true});_this2.monacoInstance.onDidChangeModelContent(function(e){if(_this2.state.cssEditDisabled){_this2.setState({cssEditDisabled:false});}});}},style:{height:"100%"}})),/*#__PURE__*/index_js_default().createElement(IconItem_IconModal,{visible:this.state.isModalVisible,isComponentEdit:this.props.isComponentEdit,isCopyUrl:this.state.isCopyUrl,onOk:function onOk(data){var url=data.value;if(_this2.state.isCopyUrl){}else{_this2.setComponentStyle(parentNodeId,{backgroundImage:url?"url(".concat(url,")"):""});}_this2.setState({isModalVisible:false,isCopyUrl:false});},onCancel:function onCancel(){_this2.setState({isModalVisible:false,isCopyUrl:false});}}));}}]);return StyleParamsBox;}(index_js_.Component);/* harmony default export */ const components_StyleParamsBox = (StyleParamsBox);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamsBar/components/LogicItem/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const LogicItem_index_module = ({"LoginItemBox":"_-my-designer-src-components-ViewParamsBar-components-LogicItem-index-module__LoginItemBox","loginItemBox":"_-my-designer-src-components-ViewParamsBar-components-LogicItem-index-module__LoginItemBox","title":"_-my-designer-src-components-ViewParamsBar-components-LogicItem-index-module__title","content":"_-my-designer-src-components-ViewParamsBar-components-LogicItem-index-module__content","dataItem":"_-my-designer-src-components-ViewParamsBar-components-LogicItem-index-module__dataItem","dataItemSelected":"_-my-designer-src-components-ViewParamsBar-components-LogicItem-index-module__dataItemSelected"});
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamsBar/components/LogicItem/index.jsx
function LogicItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){LogicItem_typeof=function _typeof(obj){return typeof obj;};}else{LogicItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return LogicItem_typeof(obj);}function LogicItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function LogicItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function LogicItem_createClass(Constructor,protoProps,staticProps){if(protoProps)LogicItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)LogicItem_defineProperties(Constructor,staticProps);return Constructor;}function LogicItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)LogicItem_setPrototypeOf(subClass,superClass);}function LogicItem_setPrototypeOf(o,p){LogicItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return LogicItem_setPrototypeOf(o,p);}function LogicItem_createSuper(Derived){var hasNativeReflectConstruct=LogicItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=LogicItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=LogicItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return LogicItem_possibleConstructorReturn(this,result);};}function LogicItem_possibleConstructorReturn(self,call){if(call&&(LogicItem_typeof(call)==="object"||typeof call==="function")){return call;}return LogicItem_assertThisInitialized(self);}function LogicItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function LogicItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function LogicItem_getPrototypeOf(o){LogicItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return LogicItem_getPrototypeOf(o);}var Item=/*#__PURE__*/function(_Component){LogicItem_inherits(Item,_Component);var _super=LogicItem_createSuper(Item);function Item(){var _this;LogicItem_classCallCheck(this,Item);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={value:''};_this.save=function(nodeId){var dispatchEditModel=_this.props.dispatchEditModel;var _this$state=_this.state,targetValues=_this$state.targetValues,dataFrom=_this$state.dataFrom;if(!(dataFrom&&targetValues)){message/* default.error */.ZP.error('请填完整信息后，再保存');return;}dispatchEditModel('updateRelations',{nodeId:nodeId,displayLogic:{dataFrom:dataFrom,targetValues:targetValues}});_this.displayLogic=JSON.stringify({dataFrom:dataFrom,targetValues:targetValues});};_this.prevNodeId=null;_this.getDataSource=function(){var model=_this.props.model;var relations=model.relations||{};var dataModels=model.dataModels||{};var stateNodes=[];var apiNodes=[];Object.values(relations).forEach(function(relation){var item={value:relation.nodeId,label:relation.nodeAliasName};if(relation.defaultValueConfig&&(relation.dataSourceType==='static'||!relation.dataSourceType)){Object.keys(relation.defaultValueConfig).forEach(function(paramName){item.children=item.children||[];item.children.push({label:paramName,value:paramName});});stateNodes.push(item);}else if(relation.dataSourceType==='api'&&relation.dataSourceName&&dataModels[relation.dataSourceName]&&dataModels[relation.dataSourceName].requestStructures&&dataModels[relation.dataSourceName].requestStructures.length){dataModels[relation.dataSourceName].requestStructures.forEach(function(structure){item.children=item.children||[];item.children.push({label:structure.title,value:structure.keyName});});apiNodes.push(item);}});var source=[];if(stateNodes&&stateNodes.length){source.push({label:'全局数据',value:'state',children:stateNodes});}if(apiNodes&&apiNodes.length){source.push({label:'接口数据',value:'api',children:apiNodes});}return source;};return _this;}LogicItem_createClass(Item,[{key:"render",value:function render(){var _this2=this;var model=this.props.model;var _this$state2=this.state,dataFrom=_this$state2.dataFrom,targetValues=_this$state2.targetValues;var selectedComponent=model&&model.selectedComponentConfig?model.selectedComponentConfig:{};var nodeId=selectedComponent.nodeId;var relations=model.relations&&model.relations[nodeId]||{};if(this.prevNodeId!==nodeId){var displayLogic=relations.displayLogic||{};this.displayLogic=JSON.stringify(displayLogic);}var btnDisabled=this.displayLogic===JSON.stringify({dataFrom:dataFrom,targetValues:targetValues});this.prevNodeId=nodeId;return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:LogicItem_index_module.LoginItemBox},/*#__PURE__*/index_js_default().createElement("div",{className:LogicItem_index_module.title},"\u663E\u793A\u903B\u8F91\u8868\u8FBE\u5F0F"),/*#__PURE__*/index_js_default().createElement("div",{className:LogicItem_index_module.content},/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement("div",{style:{marginBottom:'5px'}},"\u6570\u636E\u6765\u6E90"),/*#__PURE__*/index_js_default().createElement(cascader/* default */.Z,{placeholder:"\u6570\u636E\u6765\u6E90...",options:this.getDataSource(),expandTrigger:"hover",size:"small",style:{width:"100%"},value:dataFrom||[],onChange:function onChange(value){_this2.setState({dataFrom:value});}})),/*#__PURE__*/index_js_default().createElement("div",{style:{marginTop:'10px'}},/*#__PURE__*/index_js_default().createElement("div",{style:{marginBottom:'5px'}},"\u76EE\u6807\u663E\u793A\u503C"),/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{dropdownStyle:{display:'none',width:'0px',height:'0px',overflow:'hidden'},mode:"tags",style:{width:'100%'},placeholder:"\u76EE\u6807\u663E\u793A\u503C...",value:targetValues||[],onChange:function onChange(value){_this2.setState({targetValues:value});}})),/*#__PURE__*/index_js_default().createElement("div",{style:{marginTop:'10px'}},/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{style:{width:'100%'},size:"small",disabled:btnDisabled,onClick:function onClick(){_this2.save(nodeId);}},"\u4FDD\u5B58")))));}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var model=nextProps.model;var selectedComponent=model&&model.selectedComponentConfig?model.selectedComponentConfig:{};var nodeId=selectedComponent.nodeId;if(nodeId&&nodeId!==prevState.nodeId){var relations=model.relations&&model.relations[nodeId]||{};var displayLogic=relations.displayLogic||{};return{dataFrom:displayLogic.dataFrom||[],targetValues:displayLogic.targetValues||[],nodeId:nodeId};}return{};}}]);return Item;}(index_js_.Component);/* harmony default export */ const LogicItem = (Item);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamsBar/components/EventItem/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const EventItem_index_module = ({"LoginItemBox":"_-my-designer-src-components-ViewParamsBar-components-EventItem-index-module__LoginItemBox","loginItemBox":"_-my-designer-src-components-ViewParamsBar-components-EventItem-index-module__LoginItemBox","title":"_-my-designer-src-components-ViewParamsBar-components-EventItem-index-module__title","content":"_-my-designer-src-components-ViewParamsBar-components-EventItem-index-module__content","dataItem":"_-my-designer-src-components-ViewParamsBar-components-EventItem-index-module__dataItem","dataItemSelected":"_-my-designer-src-components-ViewParamsBar-components-EventItem-index-module__dataItemSelected","eventBox":"_-my-designer-src-components-ViewParamsBar-components-EventItem-index-module__eventBox","eventRemoveBtn":"_-my-designer-src-components-ViewParamsBar-components-EventItem-index-module__eventRemoveBtn"});
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamsBar/components/EventItem/index.jsx
function EventItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){EventItem_typeof=function _typeof(obj){return typeof obj;};}else{EventItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return EventItem_typeof(obj);}function EventItem_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function EventItem_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){EventItem_ownKeys(Object(source),true).forEach(function(key){EventItem_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{EventItem_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function EventItem_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function EventItem_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function EventItem_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){EventItem_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){EventItem_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function EventItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function EventItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function EventItem_createClass(Constructor,protoProps,staticProps){if(protoProps)EventItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)EventItem_defineProperties(Constructor,staticProps);return Constructor;}function EventItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)EventItem_setPrototypeOf(subClass,superClass);}function EventItem_setPrototypeOf(o,p){EventItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return EventItem_setPrototypeOf(o,p);}function EventItem_createSuper(Derived){var hasNativeReflectConstruct=EventItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=EventItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=EventItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return EventItem_possibleConstructorReturn(this,result);};}function EventItem_possibleConstructorReturn(self,call){if(call&&(EventItem_typeof(call)==="object"||typeof call==="function")){return call;}return EventItem_assertThisInitialized(self);}function EventItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function EventItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function EventItem_getPrototypeOf(o){EventItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return EventItem_getPrototypeOf(o);}/**
 * DataItem
 * @author tianyanrong
 * @date 2021/7/5 下午5:21:43
 */// import { PlusCircleOutlined } from "@ant-design/icons";
// import { item } from "../StyleParamsBox/index.module.less";
var EventItem_Item=/*#__PURE__*/function(_Component){EventItem_inherits(Item,_Component);var _super=EventItem_createSuper(Item);function Item(){var _this;EventItem_classCallCheck(this,Item);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={eventName:"",eventType:"",eventContent:"",messageContent:"",messageDuration:""};_this.queryPages=/*#__PURE__*/EventItem_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee(){var _this$props,model,dispatchEditModel,data;return regenerator_default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,model=_this$props.model,dispatchEditModel=_this$props.dispatchEditModel;if(!(model.queryPages&&typeof model.queryPages==='function')){_context.next=6;break;}_context.next=4;return model.queryPages();case 4:data=_context.sent;if(data){_this.setState({pages:(data||[]).map(function(item){return{label:item.pageName,value:item.fileName};})});}case 6:case"end":return _context.stop();}}},_callee);}));_this.save=function(){var _this$props2=_this.props,model=_this$props2.model,dispatchEditModel=_this$props2.dispatchEditModel;var selectedComponent=model&&model.selectedComponentConfig?model.selectedComponentConfig:{};var nodeId=selectedComponent.nodeId;var relation=model.relations&&model.relations[nodeId]||{};var _this$state=_this.state,eventName=_this$state.eventName,eventType=_this$state.eventType,eventContent=_this$state.eventContent,stateNodeId=_this$state.stateNodeId,messageContent=_this$state.messageContent,messageDuration=_this$state.messageDuration,resetParams=_this$state.resetParams;if(!(eventName&&eventType&&eventContent)){message/* default.error */.ZP.error("绑定事件信息填写完整后再添加!");}dispatchEditModel("updateRelations",{nodeId:nodeId,events:[].concat([],relation.events||[],[{eventName:eventName,eventType:eventType,eventContent:eventContent,stateNodeId:stateNodeId,messageContent:messageContent,messageDuration:messageDuration,resetParams:resetParams}])});if((eventType==="closeModal"||eventType==="openModal")&&eventContent){dispatchEditModel("updateRelations",{nodeId:eventContent,stateNodeId:stateNodeId,dataSourceType:"event"});}_this.setState({eventName:"",eventType:"",eventContent:"",stateNodeId:"",messageContent:"",messageDuration:"",resetParams:''});};_this.getModalsName=function(){var model=_this.props.model;var modals={};var selectedComponent=model&&model.selectedComponentConfig?model.selectedComponentConfig:{};var nodeId=selectedComponent.nodeId;var relations=model.relations;var key;for(key in relations){if(relations[key].isControlNode){modals[relations[key].nodeId]=relations[key].nodeAliasName;}}var events=relations[nodeId]&&relations[nodeId].events||[];var eventsObj={};events.map(function(item){eventsObj[item.eventName]=item;});return{events:events,modals:modals,eventsObj:eventsObj,scopeNodeIds:selectedComponent.scopeNodeIds};};_this.getRefreshNodes=function(){var model=_this.props.model;var nodes=[];var nodesName={};var relations=model.relations;var selectedComponent=model&&model.selectedComponentConfig?model.selectedComponentConfig:{};var nodeId=selectedComponent.nodeId;var key;for(key in relations){if(key!==nodeId&&relations[key].dataSourceType==='api'&&relations[key].dataSourceName){nodesName[relations[key].nodeId]=relations[key].nodeAliasName;nodes.push({label:relations[key].nodeAliasName,value:relations[key].nodeId});}}return{nodes:nodes,nodesName:nodesName};};_this.getRefreshNodeDataModel=function(){var _this$state2=_this.state,eventType=_this$state2.eventType,eventContent=_this$state2.eventContent;var model=_this.props.model;var requestStructures=[];if(eventType==='refresh'&&eventContent){var relations=model.relations;var dataModels=model.dataModels;var dataSourceName=relations[eventContent]&&relations[eventContent].dataSourceName;var dataModel=dataModels[dataSourceName]||{};requestStructures=(dataModel.requestStructures||[]).map(function(structure){return{label:structure.title,value:structure.keyName};});}return requestStructures;};_this.getRefreshNodeDataModelNames=function(_ref2){var eventType=_ref2.eventType,eventContent=_ref2.eventContent;var model=_this.props.model;var requestStructuresObj={};if(eventType==='refresh'&&eventContent){var relations=model.relations;var dataModels=model.dataModels;var dataSourceName=relations[eventContent]&&relations[eventContent].dataSourceName;var dataModel=dataModels[dataSourceName]||{};(dataModel.requestStructures||[]).forEach(function(structure){requestStructuresObj[structure.keyName]=structure.title;});}return requestStructuresObj;};_this.removeEvent=function(item){var _this$props3=_this.props,model=_this$props3.model,dispatchEditModel=_this$props3.dispatchEditModel;var selectedComponent=model&&model.selectedComponentConfig?model.selectedComponentConfig:{};var nodeId=selectedComponent.nodeId;var relation=model.relations&&model.relations[nodeId]||{};var newEvents=[].concat([],relation.events||[]);var removeIndex;newEvents.forEach(function(event,index){if(item.eventName&&event.eventName===item.eventName){removeIndex=index;}});if(removeIndex>=0){newEvents.splice(removeIndex,1);}dispatchEditModel("updateRelations",{nodeId:nodeId,events:newEvents});};_this.eventTypeContentNames={closeModal:"关联对话框",openModal:"关联对话框",page:"关联页面",href:"外部连接",state:"全局索引数据",message:"提示框类型",refresh:"关联模块"};_this.eventTypesName={state:"绑定全局索引数据",openModal:"显示对话框",closeModal:"关闭对话框",page:"内部页面跳转",href:"外部页面跳转",message:"消息提示",refresh:"刷新数据"};_this.eventTypesOptions=[{value:"state",label:"绑定全局索引数据"},{value:"modal",label:"对话框控制",children:[{value:"openModal",label:"显示"},{value:"closeModal",label:"关闭"}]},{value:"page",label:"内部页面跳转"},{value:"href",label:"外部页面跳转"},{value:"message",label:"消息提示"},{value:"refresh",label:"刷新数据"}];_this.eventNames={onClick:"onClick"};_this.eventNamesBySubmitApi={submitSuccess:"更新数据成功",submitError:"更新数据失败",submitComplete:"更新数据完成"};_this.eventNamesByFetchApi={fetchSuccess:"获取数据成功",fetchError:"获取数据失败",fetchComplete:"获取数据完成"};return _this;}EventItem_createClass(Item,[{key:"render",value:function render(){var _this2=this;var _this$state3=this.state,eventName=_this$state3.eventName,eventType=_this$state3.eventType,eventContent=_this$state3.eventContent,stateNodeId=_this$state3.stateNodeId,messageContent=_this$state3.messageContent,messageDuration=_this$state3.messageDuration,resetParams=_this$state3.resetParams,_this$state3$pages=_this$state3.pages,pages=_this$state3$pages===void 0?[]:_this$state3$pages;var model=this.props.model;var relations=model.relations;var data=this.getModalsName();var modals=data.modals||{};var events=data.events;var scopeNodeIds=data.scopeNodeIds||[];var _this$getRefreshNodes=this.getRefreshNodes(),nodes=_this$getRefreshNodes.nodes,nodesName=_this$getRefreshNodes.nodesName;var currNodeId=model.selectedComponentConfig&&model.selectedComponentConfig.nodeId;var relation=relations[currNodeId]||{};var isSubmitRequest=relation.submitDataModelName;// 当元素有param属性时，触发onChange改变参数触发的事件
//const isHadOnChangeEvent = relation.defaultValueConfig && relation.dataSourceType === 'static';
//const isFetchRequest = relation.dataSourceType === 'api' && relation.dataSourceName;
var eventNames=EventItem_objectSpread(EventItem_objectSpread({},this.eventNames),isSubmitRequest?this.eventNamesBySubmitApi:{});var dataModelParams=this.getRefreshNodeDataModel();var eventTypeValue=[];if(eventType==="openModal"||eventType==="closeModal"){eventTypeValue=["modal",eventType];}else if(eventType){eventTypeValue=[eventType];}return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:EventItem_index_module.LoginItemBox},/*#__PURE__*/index_js_default().createElement("div",{className:EventItem_index_module.title},"\u7ED1\u5B9A\u4E8B\u4EF6"),/*#__PURE__*/index_js_default().createElement("ul",{className:EventItem_index_module.eventBox},events.map(function(item){return/*#__PURE__*/index_js_default().createElement("li",null,/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement("h5",null,"\u4E8B\u4EF6\u540D\u79F0:"),/*#__PURE__*/index_js_default().createElement("p",null,eventNames[item.eventName])),/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement("h5",null,"\u4E8B\u4EF6\u529F\u80FD:"),/*#__PURE__*/index_js_default().createElement("p",null,_this2.eventTypesName[item.eventType])),/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement("h5",null,_this2.eventTypeContentNames[item.eventType],":"),/*#__PURE__*/index_js_default().createElement("p",null,["closeModal","openModal"].indexOf(item.eventType)>=0?modals[item.eventContent]:"",["message"].indexOf(item.eventType)>=0?item.eventContent:"",["refresh"].indexOf(item.eventType)>=0?nodesName[item.eventContent]:"",["page"].indexOf(item.eventType)>=0?item.eventContent:"")),item.resetParams&&item.resetParams.length?/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement("h5",null,"\u91CD\u7F6E\u53C2\u6570"),/*#__PURE__*/index_js_default().createElement("p",null,item.resetParams.map(function(keyName,index){var names=_this2.getRefreshNodeDataModelNames({eventType:item.eventType,eventContent:item.eventContent});return"".concat(index!==0?',':'').concat(names[keyName]);}))):null,item.stateNodeId&&relations[item.stateNodeId]?/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement("h5",null,"\u7ED1\u5B9A\u5168\u5C40\u7D22\u5F15"),/*#__PURE__*/index_js_default().createElement("p",null,relations[item.stateNodeId].nodeAliasName)):null,item.messageContent?/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement("h5",null,"\u63D0\u793A\u5185\u5BB9"),/*#__PURE__*/index_js_default().createElement("p",null,item.messageContent)):null,item.messageDuration?/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement("h5",null,"\u63D0\u793A\u663E\u793A\u65F6\u95F4"),/*#__PURE__*/index_js_default().createElement("p",null,item.messageDuration,"\u79D2")):null,/*#__PURE__*/index_js_default().createElement("a",{className:EventItem_index_module.eventRemoveBtn,onClick:function onClick(){_this2.removeEvent(item);}},"\xD7"));})),/*#__PURE__*/index_js_default().createElement("div",{className:EventItem_index_module.content},/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement(cascader/* default */.Z,{value:eventName?[eventName]:[],style:{width:"100%"},size:"small",onChange:function onChange(value){_this2.setState({eventName:value&&value[value.length-1]||""});},options:Object.keys(eventNames).map(function(eventName){return{label:eventNames[eventName],value:eventName};}),placeholder:"\u4E8B\u4EF6\u540D\u79F0..."})),/*#__PURE__*/index_js_default().createElement("div",{style:{marginTop:"5px"}},/*#__PURE__*/index_js_default().createElement(cascader/* default */.Z,{placeholder:"\u4E8B\u4EF6\u529F\u80FD...",options:this.eventTypesOptions,expandTrigger:"hover",size:"small",style:{width:"100%"},value:eventTypeValue,onChange:function onChange(value){var currValue=value&&value[value.length-1]||"";if(currValue==='page'){_this2.queryPages();}_this2.setState({eventType:currValue});}})),/*#__PURE__*/index_js_default().createElement("div",{style:{marginTop:"5px"}},["closeModal","openModal"].indexOf(eventType)>=0?/*#__PURE__*/index_js_default().createElement(cascader/* default */.Z,{size:"small",style:{width:"100%"},value:eventContent?[eventContent]:[],onChange:function onChange(value){_this2.setState({eventContent:value&&value[value.length-1]||""});},options:Object.keys(modals).map(function(nodeId){return{label:modals[nodeId],value:nodeId};}),placeholder:"\u5173\u8054\u53D7\u63A7\u5C42..."}):null,["message"].indexOf(eventType)>=0?/*#__PURE__*/index_js_default().createElement(cascader/* default */.Z,{size:"small",style:{width:"100%"},value:eventContent?[eventContent]:[],onChange:function onChange(value){_this2.setState({eventContent:value&&value[value.length-1]||""});},options:[{label:"success",value:"success"},{label:"error",value:"error"},{label:"info",value:"info"},{label:"warning",value:"warning"},{label:"warn",value:"warn"},{label:"loading",value:"loading"}],placeholder:"\u63D0\u793A\u7C7B\u578B..."}):null,["refresh"].indexOf(eventType)>=0?/*#__PURE__*/index_js_default().createElement(cascader/* default */.Z,{size:"small",style:{width:"100%"},value:eventContent?[eventContent]:[],onChange:function onChange(value){_this2.setState({eventContent:value&&value[value.length-1]||""});},options:nodes,placeholder:"\u5173\u8054\u6A21\u5757..."}):null,eventType==="page"?/*#__PURE__*/index_js_default().createElement(cascader/* default */.Z,{size:"small",style:{width:"100%"},value:eventContent?[eventContent]:[],onChange:function onChange(value){_this2.setState({eventContent:value&&value[value.length-1]||""});},options:pages,placeholder:"\u5173\u8054\u9875\u9762..."})// <Select
//   size="small"
//   style={{ width: "100%" }}
//   value={eventContent || ""}
//   onChange={(value) => {
//     this.setState({
//       eventContent: value,
//     });
//   }}
// >
//   <Select.Option value="">关联页面</Select.Option>
//   {pages.map((item) => {
//     return (
//       <Select.Option value={item.nodeId}>
//         {item.nodeAliasName}
//       </Select.Option>
//     );
//   })}
// </Select>
:null,eventType==="href"?/*#__PURE__*/index_js_default().createElement(input/* default */.Z,{size:"small",style:{width:"100%"},value:eventContent||"",onChange:function onChange(e){var value=e.target.value;_this2.setState({eventContent:value});}}):null),/*#__PURE__*/index_js_default().createElement("div",{style:{marginTop:"5px"}},["closeModal","openModal","state"].indexOf(eventType)>=0?/*#__PURE__*/index_js_default().createElement(cascader/* default */.Z,{size:"small",style:{width:"100%"},value:stateNodeId?[stateNodeId]:[],onChange:function onChange(value){_this2.setState({stateNodeId:value&&value[value.length-1]||""});},options:scopeNodeIds.map(function(scopeNodeId){return{label:relations[scopeNodeId].nodeAliasName,value:scopeNodeId};}),placeholder:"\u7ED1\u5B9A\u5168\u5C40\u7D22\u5F15\u6570\u636E..."}):null,["message"].indexOf(eventType)>=0?/*#__PURE__*/index_js_default().createElement(input/* default */.Z,{size:"small",style:{width:"100%"},value:messageContent||"",onChange:function onChange(e){var value=e.target.value;_this2.setState({messageContent:value||""});},placeholder:"\u63D0\u793A\u5185\u5BB9..."}):null),["message"].indexOf(eventType)>=0?/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement(input_number/* default */.Z,{size:"small",style:{width:"100%"},value:messageDuration,min:1,max:60,onChange:function onChange(value){_this2.setState({messageDuration:value||""});},placeholder:"\u63D0\u793A\u663E\u793A\u65F6\u95F4..."})):null,["refresh"].indexOf(eventType)>=0?/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement(cascader/* default */.Z,{size:"small",style:{width:"100%"},value:resetParams||[],onChange:function onChange(value){_this2.setState({resetParams:value||[]});},options:dataModelParams||[],placeholder:"\u9009\u62E9\u9700\u8981\u91CD\u7F6E\u7684\u53C2\u6570..."})):null,/*#__PURE__*/index_js_default().createElement("div",{style:{marginTop:"5px"}},/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{style:{width:"100%"},disabled:!(eventName&&eventType&&eventContent),size:"small",type:"primary",ghost:true,onClick:function onClick(){_this2.save();}},"\u6DFB\u52A0\u4E8B\u4EF6")))));}}]);return Item;}(index_js_.Component);/* harmony default export */ const EventItem = (EventItem_Item);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamsBar/components/ControlItem/index.jsx
function ControlItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){ControlItem_typeof=function _typeof(obj){return typeof obj;};}else{ControlItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return ControlItem_typeof(obj);}function ControlItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ControlItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function ControlItem_createClass(Constructor,protoProps,staticProps){if(protoProps)ControlItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)ControlItem_defineProperties(Constructor,staticProps);return Constructor;}function ControlItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)ControlItem_setPrototypeOf(subClass,superClass);}function ControlItem_setPrototypeOf(o,p){ControlItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return ControlItem_setPrototypeOf(o,p);}function ControlItem_createSuper(Derived){var hasNativeReflectConstruct=ControlItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=ControlItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=ControlItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return ControlItem_possibleConstructorReturn(this,result);};}function ControlItem_possibleConstructorReturn(self,call){if(call&&(ControlItem_typeof(call)==="object"||typeof call==="function")){return call;}return ControlItem_assertThisInitialized(self);}function ControlItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function ControlItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ControlItem_getPrototypeOf(o){ControlItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return ControlItem_getPrototypeOf(o);}/**
 * BooleanItem
 * @author tianyanrong
 * @date 2021/6/8 下午4:37:02
 */var BooleanItem=/*#__PURE__*/function(_Component){ControlItem_inherits(BooleanItem,_Component);var _super=ControlItem_createSuper(BooleanItem);function BooleanItem(){var _this;ControlItem_classCallCheck(this,BooleanItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.pushValue=function(nodeId,checked){var dispatchEditModel=_this.props.dispatchEditModel;dispatchEditModel("updateRelations",{nodeId:nodeId,isControlNode:checked});};return _this;}ControlItem_createClass(BooleanItem,[{key:"render",value:function render(){var _this2=this;var model=this.props.model;var relations=model.relations;var selectedComponent=model&&model.selectedComponentConfig?model.selectedComponentConfig:{};var relation=relations[selectedComponent.nodeId]||{};if(!relation){return null;}return/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItem},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitle},/*#__PURE__*/index_js_default().createElement("label",null,/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:""},"\u4E8B\u4EF6\u53D7\u63A7\u5C42")),/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement(es_switch/* default */.Z,{size:"small",checked:relation.isControlNode,onChange:function onChange(checked){_this2.pushValue(selectedComponent.nodeId,checked);}}))));}}]);return BooleanItem;}(index_js_.Component);/* harmony default export */ const ControlItem = (BooleanItem);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/tag/style/index.js + 1 modules
var tag_style = __webpack_require__(18431);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/tag/index.js + 1 modules
var tag = __webpack_require__(55207);
// EXTERNAL MODULE: ../my-designer/src/components/MenuDrop/index.jsx + 1 modules
var MenuDrop = __webpack_require__(48482);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/StringItem/index.jsx
function StringItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){StringItem_typeof=function _typeof(obj){return typeof obj;};}else{StringItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return StringItem_typeof(obj);}function StringItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function StringItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function StringItem_createClass(Constructor,protoProps,staticProps){if(protoProps)StringItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)StringItem_defineProperties(Constructor,staticProps);return Constructor;}function StringItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)StringItem_setPrototypeOf(subClass,superClass);}function StringItem_setPrototypeOf(o,p){StringItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return StringItem_setPrototypeOf(o,p);}function StringItem_createSuper(Derived){var hasNativeReflectConstruct=StringItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=StringItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=StringItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return StringItem_possibleConstructorReturn(this,result);};}function StringItem_possibleConstructorReturn(self,call){if(call&&(StringItem_typeof(call)==="object"||typeof call==="function")){return call;}return StringItem_assertThisInitialized(self);}function StringItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function StringItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function StringItem_getPrototypeOf(o){StringItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return StringItem_getPrototypeOf(o);}/**
 * StringItem
 * @author tianyanrong
 * @date 2021/6/8 下午4:36:17
 */var StringItem_StringItem=/*#__PURE__*/function(_Base){StringItem_inherits(StringItem,_Base);var _super=StringItem_createSuper(StringItem);function StringItem(){var _this;StringItem_classCallCheck(this,StringItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.onOk=function(value){_this.preValue=value;_this.setState({isEdit:false});_this.updatePropsOptions({value:value});};return _this;}StringItem_createClass(StringItem,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,_this$props$option=_this$props.option,option=_this$props$option===void 0?{}:_this$props$option,className=_this$props.className,onlyInput=_this$props.onlyInput,inputClassName=_this$props.inputClassName;var _this$state=this.state,isEdit=_this$state.isEdit,stateValue=_this$state.stateValue;var value=option.value||'';if(!this.getIsShow()){return null;}var input=/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataItem," ").concat(ViewParamItems_index_module.dataStrintItem," ").concat(inputClassName?inputClassName:'')},/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataStringItemInput)},/*#__PURE__*/index_js_default().createElement("input",{value:(isEdit?stateValue:value)||'',style:{paddingLeft:'5px',fontSize:'14px'}// disabled={!isEdit && value}
,onKeyDown:function onKeyDown(e){var event=e||window.event;var key=event.which||event.keyCode||event.charCode;if(e.key=='Enter'||key==13){_this2.onOk(stateValue);}},onChange:function onChange(e){var inputValue=e.target.value;_this2.setState({isEdit:true,stateValue:inputValue});}}),/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataStringItemOkBtn,"\n        ").concat(stateValue!==this.preValue?ViewParamItems_index_module.dataStringItemOkBtnSelected:'',"\n        "),onClick:function onClick(){_this2.onOk(stateValue);}},/*#__PURE__*/index_js_default().createElement(CheckOutlined/* default */.Z,null))));return onlyInput?input:/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.viewParamItem," ").concat(className)},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitle},/*#__PURE__*/index_js_default().createElement("label",null,/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:option.description},option.label)),/*#__PURE__*/index_js_default().createElement("div",null,input)));}}]);return StringItem;}(Base);/* harmony default export */ const ViewParamItems_StringItem = (StringItem_StringItem);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/BooleanItem/index.jsx
function BooleanItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){BooleanItem_typeof=function _typeof(obj){return typeof obj;};}else{BooleanItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return BooleanItem_typeof(obj);}function BooleanItem_extends(){BooleanItem_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return BooleanItem_extends.apply(this,arguments);}function BooleanItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function BooleanItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function BooleanItem_createClass(Constructor,protoProps,staticProps){if(protoProps)BooleanItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)BooleanItem_defineProperties(Constructor,staticProps);return Constructor;}function BooleanItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)BooleanItem_setPrototypeOf(subClass,superClass);}function BooleanItem_setPrototypeOf(o,p){BooleanItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return BooleanItem_setPrototypeOf(o,p);}function BooleanItem_createSuper(Derived){var hasNativeReflectConstruct=BooleanItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=BooleanItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=BooleanItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return BooleanItem_possibleConstructorReturn(this,result);};}function BooleanItem_possibleConstructorReturn(self,call){if(call&&(BooleanItem_typeof(call)==="object"||typeof call==="function")){return call;}return BooleanItem_assertThisInitialized(self);}function BooleanItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function BooleanItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function BooleanItem_getPrototypeOf(o){BooleanItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return BooleanItem_getPrototypeOf(o);}/**
 * BooleanItem
 * @author tianyanrong
 * @date 2021/6/8 下午4:37:02
 */var BooleanItem_BooleanItem=/*#__PURE__*/function(_Base){BooleanItem_inherits(BooleanItem,_Base);var _super=BooleanItem_createSuper(BooleanItem);function BooleanItem(){var _this;BooleanItem_classCallCheck(this,BooleanItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};return _this;}BooleanItem_createClass(BooleanItem,[{key:"render",value:function render(){var _this2=this;var _this$props$option=this.props.option,option=_this$props$option===void 0?{}:_this$props$option;var valueProps=option.value||option.value===false?{checked:option.value}:{};if(!this.getIsShow()){return null;}return/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItem},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitle},/*#__PURE__*/index_js_default().createElement("label",null,/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:option.description},option.label)),/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement(es_switch/* default */.Z,BooleanItem_extends({size:"small"},valueProps,{onChange:function onChange(checked){_this2.updatePropsOptions({value:checked});}})))));}}]);return BooleanItem;}(Base);/* harmony default export */ const ViewParamItems_BooleanItem = (BooleanItem_BooleanItem);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/SelectItem/index.jsx
function SelectItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){SelectItem_typeof=function _typeof(obj){return typeof obj;};}else{SelectItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return SelectItem_typeof(obj);}function SelectItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function SelectItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function SelectItem_createClass(Constructor,protoProps,staticProps){if(protoProps)SelectItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)SelectItem_defineProperties(Constructor,staticProps);return Constructor;}function SelectItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)SelectItem_setPrototypeOf(subClass,superClass);}function SelectItem_setPrototypeOf(o,p){SelectItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return SelectItem_setPrototypeOf(o,p);}function SelectItem_createSuper(Derived){var hasNativeReflectConstruct=SelectItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=SelectItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=SelectItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return SelectItem_possibleConstructorReturn(this,result);};}function SelectItem_possibleConstructorReturn(self,call){if(call&&(SelectItem_typeof(call)==="object"||typeof call==="function")){return call;}return SelectItem_assertThisInitialized(self);}function SelectItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function SelectItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function SelectItem_getPrototypeOf(o){SelectItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return SelectItem_getPrototypeOf(o);}/**
 * SelectItem
 * @author tianyanrong
 * @date 2021/7/5 下午5:08:32
 */var SelectItem_StringItem=/*#__PURE__*/function(_Base){SelectItem_inherits(StringItem,_Base);var _super=SelectItem_createSuper(StringItem);function StringItem(){var _this;SelectItem_classCallCheck(this,StringItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};return _this;}SelectItem_createClass(StringItem,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,_this$props$option=_this$props.option,option=_this$props$option===void 0?{}:_this$props$option,optionIndex=_this$props.optionIndex;if(!this.getIsShow()){return null;}var value=option.value;if(option.setDefalutValueByIndex&&!value){value=optionIndex+'';}return/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItem},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitle},/*#__PURE__*/index_js_default().createElement("label",null,/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:option.description},option.label)),/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{size:"small",value:value||'',onChange:function onChange(value){_this2.updatePropsOptions({value:value});}},option.selectOptions.map(function(item,index){return/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{key:'select_option_$(index)',value:item.value},item.label);})))));}}]);return StringItem;}(Base);/* harmony default export */ const SelectItem = (SelectItem_StringItem);
// EXTERNAL MODULE: ../my-designer/src/components/MeasureEdit/index.jsx + 1 modules
var MeasureEdit = __webpack_require__(20201);
// EXTERNAL MODULE: ../my-designer/src/language/index.js + 1 modules
var language = __webpack_require__(12530);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/MeasureItem/index.jsx
function MeasureItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){MeasureItem_typeof=function _typeof(obj){return typeof obj;};}else{MeasureItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return MeasureItem_typeof(obj);}function MeasureItem_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function MeasureItem_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){MeasureItem_ownKeys(Object(source),true).forEach(function(key){MeasureItem_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{MeasureItem_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function MeasureItem_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function MeasureItem_extends(){MeasureItem_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return MeasureItem_extends.apply(this,arguments);}function MeasureItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function MeasureItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function MeasureItem_createClass(Constructor,protoProps,staticProps){if(protoProps)MeasureItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)MeasureItem_defineProperties(Constructor,staticProps);return Constructor;}function MeasureItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)MeasureItem_setPrototypeOf(subClass,superClass);}function MeasureItem_setPrototypeOf(o,p){MeasureItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return MeasureItem_setPrototypeOf(o,p);}function MeasureItem_createSuper(Derived){var hasNativeReflectConstruct=MeasureItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=MeasureItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=MeasureItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return MeasureItem_possibleConstructorReturn(this,result);};}function MeasureItem_possibleConstructorReturn(self,call){if(call&&(MeasureItem_typeof(call)==="object"||typeof call==="function")){return call;}return MeasureItem_assertThisInitialized(self);}function MeasureItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function MeasureItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function MeasureItem_getPrototypeOf(o){MeasureItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return MeasureItem_getPrototypeOf(o);}/**
 * MeasureItem
 * @author tianyanrong
 * @date 2021/6/24 下午6:27:46
 */// import ParamEditModal from "../../ParamEditModal";
var sumTypes=language/* default.sumTypes */.Z.sumTypes;var MeasureItem_Item=/*#__PURE__*/function(_Base){MeasureItem_inherits(Item,_Base);var _super=MeasureItem_createSuper(Item);function Item(){var _this;MeasureItem_classCallCheck(this,Item);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.measures=[];_this.getDimensions=function(keyName,data){var _this$props=_this.props,dragDataModel=_this$props.dragDataModel,option=_this$props.option;var values=MeasureItem_extends([],option.value||[]);var beforeValue=option.beforeValue;// 删除(keyName为删除索引值)
if(typeof keyName==="number"){values.splice(keyName,1);}else if(!keyName){var structureKeyName=dragDataModel.structure.keyName;var structureKeyTitle=dragDataModel.structure.title;var structureType=dragDataModel.structure.type;var defaultValue=beforeValue&&beforeValue[values.length]?beforeValue[values.length]:{};values.push(MeasureItem_objectSpread(MeasureItem_objectSpread({},defaultValue),{},{keyName:structureKeyName,title:structureKeyTitle,type:structureType}));}else if(keyName&&data){values.forEach(function(value,index){if(value.keyName===keyName){values[index]=MeasureItem_objectSpread(MeasureItem_objectSpread({},value),data);}});}_this.measures=values;return{staticProps:{serviceName:dragDataModel.dataKeyName||option.staticProps&&option.staticProps.serviceName||""},value:values};};_this.getCurrDataModelName=function(){var _this$props2=_this.props,relations=_this$props2.relations,selectedComponentConfig=_this$props2.selectedComponentConfig;var nodeId=selectedComponentConfig.nodeId;return relations&&relations[nodeId]&&relations[nodeId].dataSourceType==="api"&&relations[nodeId].dataSourceName?relations[nodeId].dataSourceName:"";};_this.getCurrDataModel=function(){var dataModels=_this.props.dataModels;var dataModelName=_this.getCurrDataModelName();return dataModels[dataModelName]||{};};_this.getCurrApiData=function(){var dataModel=_this.getCurrDataModel();var apiData=dataModel.apiData||{};return apiData;};_this.onDrop=function(event){var dragPosition=_this.state.dragPosition;if(!dragPosition){return;}event.preventDefault();var dragDataModel=_this.props.dragDataModel;var keyName=dragDataModel&&dragDataModel.structure&&dragDataModel.structure.keyName;if(!keyName){return;}var structureType=dragDataModel.structure.type;var apiData=_this.getCurrApiData();var formatConfig=apiData[keyName]&&apiData[keyName].formatConfig;var sumType=structureType==="number"?"total":"count";_this.updatePropsOptions(_this.getDimensions());_this.updateRelationsApiData({keyName:keyName,sumType:sumType,formatConfig:formatConfig});if(dragPosition!==""){_this.setState({dragPosition:""});}};_this.updateRelationsApiData=function(data){var _this$props3=_this.props,dispatchEditModel=_this$props3.dispatchEditModel,dataModels=_this$props3.dataModels;var keyName=data.keyName,formatConfig=data.formatConfig,sumType=data.sumType;var apiData=_this.getCurrApiData();apiData=MeasureItem_extends({},apiData);apiData[keyName]={formatConfig:formatConfig,sumType:sumType};var dataModelName=_this.getCurrDataModelName();if(!(dataModelName&&dataModels[dataModelName])){return;}dataModels[dataModelName].apiData=apiData;dispatchEditModel("setState",{dataModels:dataModels});};_this.removeRelationsApiData=function(keyName){var _this$props4=_this.props,dispatchEditModel=_this$props4.dispatchEditModel,dataModels=_this$props4.dataModels;var apiData=_this.getCurrApiData();apiData=MeasureItem_extends({},apiData||{});if(apiData[keyName]){delete apiData[keyName];}var dataModelName=_this.getCurrDataModelName();if(!(dataModelName&&dataModels[dataModelName])){return;}dataModels[dataModelName].apiData=apiData;dispatchEditModel("setState",{dataModels:dataModels});};_this.onSortDrop=function(event,index){var option=_this.props.option;var sortDragPosition=_this.state.sortDragPosition;if(!sortDragPosition&&sortDragPosition!==0){return;}event.preventDefault();var newValue=[];option.value.forEach(function(item,index){if(index===sortDragPosition){newValue.push(MeasureItem_extends({},option.value[_this.sortDragItem]));}if(index!==_this.sortDragItem){newValue.push(item);}});if(sortDragPosition===option.value.length){newValue.push(option.value[_this.sortDragItem]);}_this.updatePropsOptions({value:newValue,staticProps:option.staticProps});_this.setState({sortDragPosition:""});_this.sortDragItem=null;};_this.getSortDropContainer=function(index){var sortDragPosition=_this.state.sortDragPosition;return/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dropContainer," ").concat(sortDragPosition>=0&&sortDragPosition===index?ViewParamItems_index_module.dropContainerSelect:""),onDragOver:function onDragOver(event){event.preventDefault();if(!_this.sortDragItem&&_this.sortDragItem!==0||index===_this.sortDragItem||_this.sortDragItem+1===index){return;}_this.setState({sortDragPosition:index});},onDragLeave:function onDragLeave(event){event.preventDefault();if(!_this.sortDragItem&&_this.sortDragItem!==0){return;}_this.setState({sortDragPosition:""});},onDrop:function onDrop(event){_this.onSortDrop(event,index);}});};_this.getTools=function(_ref){var isFormatConfig=_ref.isFormatConfig,item=_ref.item,currentApiData=_ref.currentApiData,sumTypes=_ref.sumTypes,sumType=_ref.sumType,formatConfig=_ref.formatConfig,index=_ref.index;var dataModelName=_this.getCurrDataModelName();var apiTools=dataModelName?[// {
//   label: "格式化数据",
//   isChecked: isFormatConfig,
//   callback: () => {
//     this.setState({
//       paramEditModalData: {
//         text: "格式化数据",
//         ...item,
//         type: item.type || item.structureType,
//         ...currentApiData,
//       },
//       isShowParamEditModal: true,
//     });
//   },
// },
// {
//   type: "line",
// },
{label:"汇总方式",children:[{label:sumTypes.total,isDisabled:(item.type||item.structureType)!=="number",isChecked:sumType==="total",callback:function callback(){_this.updateRelationsApiData({keyName:item.keyName,sumType:"total",formatConfig:formatConfig});}},{label:sumTypes.average,isChecked:sumType==="average",isDisabled:(item.type||item.structureType)!=="number",callback:function callback(){_this.updateRelationsApiData({keyName:item.keyName,sumType:"average",formatConfig:formatConfig});}},{label:sumTypes.count,isChecked:sumType==="count",callback:function callback(){_this.updateRelationsApiData({keyName:item.keyName,sumType:"count",formatConfig:formatConfig});}},{label:sumTypes.countDifferent,isChecked:sumType==="countDifferent",callback:function callback(){_this.updateRelationsApiData({keyName:item.keyName,sumType:"countDifferent",formatConfig:formatConfig});}}]},{type:"line"}]:[];return[].concat(apiTools,[{label:"移除",callback:function callback(){_this.updatePropsOptions(_this.getDimensions(index));_this.removeRelationsApiData(item.keyName);}}]);};return _this;}MeasureItem_createClass(Item,[{key:"render",value:function render(){var _this2=this;var _this$props5=this.props,_this$props5$option=_this$props5.option,option=_this$props5$option===void 0?{}:_this$props5$option,promiseConfig=_this$props5.promiseConfig;var _this$state=this.state,dragPosition=_this$state.dragPosition,editModalVisible=_this$state.editModalVisible,currentMeasureIndex=_this$state.currentMeasureIndex,currentKeyName=_this$state.currentKeyName;var values=option.value&&option.value.length?option.value:[];var optionChildren=[];var allValueObj=MeasureItem_extends({},this.props.allValueObj);(option.children||[]).forEach(function(item,index){allValueObj[item.name]=item.value;if(_this2.getIsShow(item,allValueObj)){optionChildren.push(item);}});var apiData=this.getCurrApiData()||{};var sorts=option.sorts||[];var description=option.description;if(sorts.length){description="".concat(description).concat(description?'\n':'')+'数据顺序为: \n'+JSON.stringify(sorts);}// 当显示动态数据模型时，度量可以删除/编辑
var isShowDataModel=promiseConfig&&promiseConfig.isShowDataModel;return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItem},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitleV},/*#__PURE__*/index_js_default().createElement("label",null,description?/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:description},option.label+"(数据项) ",/*#__PURE__*/index_js_default().createElement(QuestionCircleOutlined/* default */.Z,null)):option.label+"(数据项)"),/*#__PURE__*/index_js_default().createElement("div",null,values.map(function(item,index){var currentApiData=apiData[item.keyName]||{};var sumType=currentApiData&&currentApiData.sumType;var formatConfig=currentApiData.formatConfig||{};var isFormatConfig=Object.values(formatConfig)&&Object.values(formatConfig).length;return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,_this2.getSortDropContainer(index),/*#__PURE__*/index_js_default().createElement("div",{key:index,className:optionChildren&&optionChildren.length?ViewParamItems_index_module.dataItemChildrenBox:"",draggable:true,onDragStart:function onDragStart(event){_this2.sortDragItem=index;},onDragEnd:function onDragEnd(event){_this2.sortDragItem=null;}},/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataItemValueBox," ").concat(ViewParamItems_index_module.greenBox)},/*#__PURE__*/index_js_default().createElement("span",{className:ViewParamItems_index_module.dataItemValue,title:"\u53CC\u51FB\u4FEE\u6539\u540D\u79F0",style:{cursor:'pointer'},onDoubleClick:function onDoubleClick(){_this2.setState({isEditTitle:item.keyName});}},_this2.state.isEditTitle===item.keyName?/*#__PURE__*/index_js_default().createElement(ViewParamItems_StringItem,{className:ViewParamItems_index_module.childrenTop,option:{name:"title",label:"列标题",value:item.title||""},onlyInput:true,inputClassName:ViewParamItems_index_module.dataItemStringInput,updatePropsOptions:function updatePropsOptions(keyName,data){_this2.updatePropsOptions(_this2.getDimensions(keyName,data));_this2.setState({isEditTitle:false});},parentKeyName:item.keyName,dispatchEditModel:_this2.props.dispatchEditModel,dragDataModel:_this2.props.dragDataModel||{},dataModels:_this2.props.dataModels,selectedComponentConfig:_this2.props.selectedComponentConfig||{}}):/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,sumType?/*#__PURE__*/index_js_default().createElement(tag/* default */.Z,{color:"red"},sumTypes[sumType]):null,/*#__PURE__*/index_js_default().createElement("span",{style:{width:'calc(100% - 70px)',overflow:'hidden',textOverflow:"ellipsis",whiteSpace:'nowrap',display:'inline-block',verticalAlign:'middle'}},item.title))),/*#__PURE__*/index_js_default().createElement("span",{className:ViewParamItems_index_module.dataItemDelect},isShowDataModel?/*#__PURE__*/index_js_default().createElement(MenuDrop/* default */.Z,{style:{width:"150px"},type:"iconmore",menus:_this2.getTools({isFormatConfig:isFormatConfig,item:item,currentApiData:currentApiData,sumTypes:sumTypes,sumType:sumType,formatConfig:formatConfig,index:index}),value:item.keyName}):null)),/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.childrenBox},optionChildren.length?optionChildren.map(function(child,childIndex){var childValue=Object.keys(item).indexOf(child.name)>=0?item[child.name]:child.value;var itemProps={option:MeasureItem_objectSpread(MeasureItem_objectSpread({},child),{},{value:childValue}),value:childValue,allValueObj:MeasureItem_extends({},allValueObj,item),parentKeyName:item.keyName,updatePropsOptions:function updatePropsOptions(keyName,data){_this2.updatePropsOptions(_this2.getDimensions(keyName,data));},key:"".concat(child.type,"_").concat(childIndex),dispatchEditModel:_this2.props.dispatchEditModel,dragDataModel:_this2.props.dragDataModel||{},dataModels:_this2.props.dataModels,selectedComponentConfig:_this2.props.selectedComponentConfig||{},promiseConfig:_this2.props.promiseConfig};if(child.type==="string"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_StringItem,itemProps);}else if(child.type==="boolean"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_BooleanItem,itemProps);}else if(child.type==="select"){return/*#__PURE__*/index_js_default().createElement(SelectItem,itemProps);}else if(child.type==="number"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_NumberItem,itemProps);}return null;}):null)));}),values&&values.length?this.getSortDropContainer(values.length):null,sorts.length>0&&values.length>=sorts.length?null:/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataItem," ").concat(dragPosition?ViewParamItems_index_module.dataItemSelected:""),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},sorts[values.length]||'')))),/*#__PURE__*/index_js_default().createElement(MeasureEdit/* default */.Z,{visible:editModalVisible,onCancel:function onCancel(){_this2.setState({editModalVisible:false});},title:"\u5EA6\u91CF\u6570\u636E\u7F16\u8F91",data:this.measures&&this.measures.length?this.measures[currentMeasureIndex]:[],onOk:function onOk(data){_this2.updatePropsOptions(_this2.getDimensions(currentKeyName,data));_this2.setState({editModalVisible:false});}}));}}]);return Item;}(Base);/* harmony default export */ const MeasureItem = (MeasureItem_Item);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/DimensionItem/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const DimensionItem_index_module = ({"dimensionBox":"_-my-designer-src-components-ViewParamItems-DimensionItem-index-module__dimensionBox"});
// EXTERNAL MODULE: ./packages/utils/es/index.js + 2 modules
var es = __webpack_require__(6369);
// EXTERNAL MODULE: ../my-designer/src/components/DimensionEdit/index.jsx
var DimensionEdit = __webpack_require__(74242);
// EXTERNAL MODULE: ../my-cli/node_modules/moment/moment.js
var moment = __webpack_require__(18231);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/DimensionItem/index.jsx
function DimensionItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){DimensionItem_typeof=function _typeof(obj){return typeof obj;};}else{DimensionItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return DimensionItem_typeof(obj);}function DimensionItem_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function DimensionItem_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){DimensionItem_ownKeys(Object(source),true).forEach(function(key){DimensionItem_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{DimensionItem_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function DimensionItem_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function DimensionItem_extends(){DimensionItem_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return DimensionItem_extends.apply(this,arguments);}function DimensionItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function DimensionItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function DimensionItem_createClass(Constructor,protoProps,staticProps){if(protoProps)DimensionItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)DimensionItem_defineProperties(Constructor,staticProps);return Constructor;}function DimensionItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)DimensionItem_setPrototypeOf(subClass,superClass);}function DimensionItem_setPrototypeOf(o,p){DimensionItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return DimensionItem_setPrototypeOf(o,p);}function DimensionItem_createSuper(Derived){var hasNativeReflectConstruct=DimensionItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=DimensionItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=DimensionItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return DimensionItem_possibleConstructorReturn(this,result);};}function DimensionItem_possibleConstructorReturn(self,call){if(call&&(DimensionItem_typeof(call)==="object"||typeof call==="function")){return call;}return DimensionItem_assertThisInitialized(self);}function DimensionItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function DimensionItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function DimensionItem_getPrototypeOf(o){DimensionItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return DimensionItem_getPrototypeOf(o);}/**
 * DimensionItem
 * @author tianyanrong
 * @date 2021/7/7 下午2:47:57
 */// import ParamEditModal from "../../ParamEditModal";
// const mathFn = {
//   string: getStringDimension,
//   number: getStringDimension,
//   numberRange: getNumberRangeDimension,
//   date: getDateDimension,
// };
var DimensionItem_Item=/*#__PURE__*/function(_Base){DimensionItem_inherits(Item,_Base);var _super=DimensionItem_createSuper(Item);function Item(){var _this;DimensionItem_classCallCheck(this,Item);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.getDimensions=function(keyName,options){var _this$props=_this.props,dragDataModel=_this$props.dragDataModel,dataResult=_this$props.dataResult,option=_this$props.option;var values=DimensionItem_extends([],option.value||[]);if(typeof keyName==="number"){values.splice(keyName,1);}else if(!keyName){var structureKeyName=dragDataModel.structure.keyName;var structureType=dragDataModel.structure.type;// 计算数据中的维度数据
var dimensionData={};// if(!(options && options.length) && dataResult) {
//   const data = dataResult[dragDataModel.dataKeyName];
//   dimensionData = mathFn[structureType](structureKeyName, data || []);
// }
values.push({autoDimensions:true,structureType:structureType,dimensions:dimensionData.data,dateType:dimensionData.dateType,dataKeyName:dragDataModel.dataKeyName,dataTitle:dragDataModel.title,structureKeyName:structureKeyName,structureTitle:dragDataModel.structure.title,// 重新定义字段名称: structureKeyName、structureTitle
keyName:structureKeyName,title:dragDataModel.structure.title});}else{values.forEach(function(value,index){if(value.keyName===keyName){values[index]=DimensionItem_objectSpread(DimensionItem_objectSpread({},value),options);}});}return{staticProps:{serviceName:dragDataModel.dataKeyName},value:values};};_this.onDragOver=function(event){event.preventDefault();var dragPosition=_this.state.dragPosition;var dragDataModel=_this.props.dragDataModel;if(dragPosition!=="in"&&dragDataModel&&dragDataModel.structure&&dragDataModel.structure.type!=="number"){_this.setState({dragPosition:"in"});}};_this.onDrop=function(event){var dragPosition=_this.state.dragPosition;if(!dragPosition){return;}event.preventDefault();_this.updatePropsOptions(_this.getDimensions());if(dragPosition!==""){_this.setState({dragPosition:""});}};_this.setApiDimensionsItems=function(optionValue,callback){var _this$props2=_this.props,_this$props2$option=_this$props2.option,option=_this$props2$option===void 0?{}:_this$props2$option,dispatchEditModel=_this$props2.dispatchEditModel,myModelName=_this$props2.myModelName;if(optionValue&&optionValue.dimensions&&optionValue.dimensions.length){callback(optionValue.dimensions);return;}if(!optionValue){callback(option.extendValues&&option.extendValues.dimensions||[]);return;}if(optionValue&&optionValue.keyName){dispatchEditModel("getComponentData",{myModelName:myModelName,serviceName:option.staticProps&&option.staticProps.serviceName}).then(function(res){var data=(res||[]).map(function(item){return{label:item[optionValue.keyName],value:item[optionValue.keyName]};});callback(data);});return;}callback([]);};_this.getCurrDataModelName=function(){var _this$props3=_this.props,relations=_this$props3.relations,selectedComponentConfig=_this$props3.selectedComponentConfig;var nodeId=selectedComponentConfig.nodeId;return relations&&relations[nodeId]&&relations[nodeId].dataSourceType==="api"&&relations[nodeId].dataSourceName?relations[nodeId].dataSourceName:"";};_this.getCurrDataModel=function(){var dataModels=_this.props.dataModels;var dataModelName=_this.getCurrDataModelName();return dataModels[dataModelName]||{};};_this.getCurrApiData=function(){var dataModel=_this.getCurrDataModel();var apiData=dataModel.apiData||{};return apiData;};_this.updateRelationsApiData=function(data){var _this$props4=_this.props,dispatchEditModel=_this$props4.dispatchEditModel,dataModels=_this$props4.dataModels;var keyName=data.keyName,formatConfig=data.formatConfig;var apiData=_this.getCurrApiData();apiData=DimensionItem_extends({},apiData||{});apiData[keyName]={formatConfig:formatConfig};var dataModelName=_this.getCurrDataModelName();if(!(dataModelName&&dataModels[dataModelName])){return;}dataModels[dataModelName].apiData=apiData;dispatchEditModel("setState",{dataModels:dataModels});};_this.removeRelationsApiData=function(keyName){var _this$props5=_this.props,dispatchEditModel=_this$props5.dispatchEditModel,dataModels=_this$props5.dataModels;var apiData=_this.getCurrApiData();apiData=DimensionItem_extends({},apiData||{});if(apiData[keyName]){delete apiData[keyName];}var dataModelName=_this.getCurrDataModelName();if(!(dataModelName&&dataModels[dataModelName])){return;}dataModels[dataModelName].apiData=apiData;dispatchEditModel("setState",{dataModels:dataModels});};_this.getIsStaticData=function(){var _this$props6=_this.props,relations=_this$props6.relations,selectedComponentConfig=_this$props6.selectedComponentConfig;var nodeId=selectedComponentConfig.nodeId;var relation=relations[nodeId];return relation.dataSourceType==="static";};_this.getDropMenu=function(_ref){var item=_ref.item,isFormatConfig=_ref.isFormatConfig,formatConfig=_ref.formatConfig,optionValue=_ref.optionValue,index=_ref.index;var menu=[// {
//   label: "格式化数据",
//   isChecked: isFormatConfig,
//   isDisabled: this.getIsStaticData(),
//   callback: () => {
//     this.setState({
//       paramEditModalData: {
//         text: "格式化数据",
//         ...item,
//         type: item.structureType,
//         formatConfig,
//       },
//       isShowParamEditModal: true,
//     });
//   },
// },
// {
//   type: "line",
// },
// {
//   label: "自定义维度",
//   isDisabled: item.structureType === "date",
//   isChecked: !item.autoDimensions,
//   callback: () => {
//     this.setApiDimensionsItems(
//       optionValue,
//       (data) => {
//         this.setState({
//           editModalVisible: true,
//           dimensionsItems: data,
//         });
//       }
//     );
//   },
// },
// {
//   label: "自动计算维度",
//   isChecked: item.autoDimensions,
//   isDisabled: item.structureType === "number",
//   callback: () => {
//     this.updatePropsOptions(
//       this.getDimensions(item.keyName, {
//         autoDimensions: true,
//       })
//     );
//   },
// },
// {
//   type: "line",
// },
{label:"移除",callback:function callback(){_this.updatePropsOptions({});_this.removeRelationsApiData(item.keyName);}}];return menu;};_this.clearRelationDataSourceType=function(){var _this$props7=_this.props,dispatchEditModel=_this$props7.dispatchEditModel,selectedComponentConfig=_this$props7.selectedComponentConfig;dispatchEditModel("updateRelations",{nodeId:selectedComponentConfig.nodeId,dataSourceType:""});};return _this;}DimensionItem_createClass(Item,[{key:"render",value:function render(){var _this2=this;var _this$props8=this.props,_this$props8$option=_this$props8.option,option=_this$props8$option===void 0?{}:_this$props8$option,promiseConfig=_this$props8.promiseConfig,relations=_this$props8.relations,selectedComponentConfig=_this$props8.selectedComponentConfig,dispatchEditModel=_this$props8.dispatchEditModel;var _this$state=this.state,dragPosition=_this$state.dragPosition,editModalVisible=_this$state.editModalVisible,_this$state$currentDi=_this$state.currentDimensionIndex,currentDimensionIndex=_this$state$currentDi===void 0?0:_this$state$currentDi,dimensionsItems=_this$state.dimensionsItems;var optionValue=option.value||[];var currentKeyName=optionValue&&optionValue.length?optionValue[currentDimensionIndex].keyName:null;var apiData=this.getCurrApiData();// 当显示动态数据模型时，维度可以删除/编辑
var isShowDataModel=promiseConfig&&promiseConfig.isShowDataModel;var isSelfDimensions=optionValue[0]&&optionValue[0].autoDimensions===false&&optionValue[0].dimensions&&optionValue[0].dimensions.length?true:false;var dimensions=optionValue[0]&&optionValue[0].dimensions||[];return/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItem},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitleV},/*#__PURE__*/index_js_default().createElement("label",null,/*#__PURE__*/index_js_default().createElement("span",{style:{float:'right',marginRight:'5px'}},/*#__PURE__*/index_js_default().createElement(es_switch/* default */.Z,{size:"small",checkedChildren:"\u81EA\u5B9A\u4E49",unCheckedChildren:"\u81EA\u5B9A\u4E49",checked:isSelfDimensions,onChange:function onChange(checked){if(checked){if(!dimensions.length){_this2.setApiDimensionsItems(optionValue[0],function(data){_this2.setState({editModalVisible:true,dimensionsItems:data});});}else{_this2.updatePropsOptions({staticProps:{},value:{dimensions:dimensions,autoDimensions:false}});_this2.clearRelationDataSourceType();}}else if(!checked){_this2.updatePropsOptions({staticProps:{},value:[],extendValues:{dimensions:dimensions}});}}})),option.description?/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:option.description},option.label+"(数据项)"):option.label+"(数据项)"),isSelfDimensions?/*#__PURE__*/index_js_default().createElement("ul",{className:DimensionItem_index_module.dimensionBox,onClick:function onClick(){_this2.setApiDimensionsItems(optionValue[0],function(data){_this2.setState({editModalVisible:true,dimensionsItems:data});});}},/*#__PURE__*/index_js_default().createElement("li",null,/*#__PURE__*/index_js_default().createElement("span",null,"\u6210\u5458"),/*#__PURE__*/index_js_default().createElement("span",null,"\u522B\u540D")),dimensions.map(function(dimensionsItem){return/*#__PURE__*/index_js_default().createElement("li",null,/*#__PURE__*/index_js_default().createElement("span",null,dimensionsItem.value),/*#__PURE__*/index_js_default().createElement("span",null,dimensionsItem.label));})):/*#__PURE__*/index_js_default().createElement("div",null,optionValue&&optionValue.length?optionValue.map(function(item,index){var currentApiData=apiData[item.keyName]||{};var formatConfig=currentApiData.formatConfig||{};var isFormatConfig=Object.values(formatConfig)&&Object.values(formatConfig).length;return/*#__PURE__*/index_js_default().createElement("div",{key:index,className:ViewParamItems_index_module.dataItemValueBox},/*#__PURE__*/index_js_default().createElement("span",{className:ViewParamItems_index_module.dataItemValue,title:"\u53CC\u51FB\u4FEE\u6539\u540D\u79F0",style:{cursor:'pointer',lex:'auto',maxWidth:'none',width:'calc(100% - 20px)'},onDoubleClick:function onDoubleClick(){_this2.setState({isEditTitle:item.keyName});}},_this2.state.isEditTitle&&_this2.state.isEditTitle===item.keyName?/*#__PURE__*/index_js_default().createElement(ViewParamItems_StringItem,{className:ViewParamItems_index_module.childrenTop,option:{name:"title",label:"列标题",value:item.title||""},onlyInput:true,inputClassName:ViewParamItems_index_module.dataItemStringInput,updatePropsOptions:function updatePropsOptions(keyName,data){_this2.updatePropsOptions(_this2.getDimensions(keyName,data));_this2.setState({isEditTitle:false});},parentKeyName:item.keyName,dispatchEditModel:_this2.props.dispatchEditModel,dragDataModel:_this2.props.dragDataModel||{},dataModels:_this2.props.dataModels,selectedComponentConfig:_this2.props.selectedComponentConfig||{}}):/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement(tag/* default */.Z,{color:"red"},item.autoDimensions?_this2.getIsStaticData()?'静态数据':"自动":"自定义"),/*#__PURE__*/index_js_default().createElement("span",{style:{width:'calc(100% - 70px)',overflow:'hidden',textOverflow:"ellipsis",whiteSpace:'nowrap',display:'inline-block',verticalAlign:'middle'}},item.title))),/*#__PURE__*/index_js_default().createElement("span",{className:ViewParamItems_index_module.dataItemDelect,style:{width:'20px',textAlign:'right'},onClick:function onClick(){//
}},isShowDataModel?/*#__PURE__*/index_js_default().createElement(MenuDrop/* default */.Z,{style:{width:"150px"},type:"iconmore",menus:_this2.getDropMenu({item:item,isFormatConfig:isFormatConfig,formatConfig:formatConfig,optionValue:optionValue[index],index:index})}):null));}):/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataItem," ").concat(dragPosition?ViewParamItems_index_module.dataItemSelected:""),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop}),/*#__PURE__*/index_js_default().createElement("div",null))),/*#__PURE__*/index_js_default().createElement(DimensionEdit/* default */.Z,{visible:editModalVisible,onCancel:function onCancel(){_this2.setState({editModalVisible:false});},title:"\u7EF4\u5EA6\u7F16\u8F91",data:dimensionsItems||[],onOk:function onOk(data){// this.updatePropsOptions(
//   this.getDimensions(currentKeyName, {
//     dimensions: data,
//     autoDimensions: false,
//   })
// );
_this2.updatePropsOptions({staticProps:{},value:[{dimensions:data,autoDimensions:false}]});_this2.clearRelationDataSourceType();_this2.setState({editModalVisible:false});}}));}}]);return Item;}(Base);/* harmony default export */ const DimensionItem = (DimensionItem_Item);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/ParamItem/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const ParamItem_index_module = ({"inpubBox":"_-my-designer-src-components-ViewParamItems-ParamItem-index-module__inpubBox","label":"_-my-designer-src-components-ViewParamItems-ParamItem-index-module__label","content":"_-my-designer-src-components-ViewParamItems-ParamItem-index-module__content","popupClassName":"_-my-designer-src-components-ViewParamItems-ParamItem-index-module__popupClassName"});
// EXTERNAL MODULE: ./packages/utils/es/dataType.js
var dataType = __webpack_require__(61204);
// EXTERNAL MODULE: ./packages/utils/es/utils.js
var utils = __webpack_require__(562);
// EXTERNAL MODULE: ../my-designer/src/components/ParamEditModal/index.js + 4 modules
var ParamEditModal = __webpack_require__(86769);
// EXTERNAL MODULE: ../my-cli/node_modules/import-remote-module/index.js
var import_remote_module = __webpack_require__(89056);
// EXTERNAL MODULE: ./packages/select/src/index.jsx
var select_src = __webpack_require__(17816);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/ParamItem/index.jsx
function ParamItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){ParamItem_typeof=function _typeof(obj){return typeof obj;};}else{ParamItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return ParamItem_typeof(obj);}function ParamItem_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function ParamItem_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ParamItem_ownKeys(Object(source),true).forEach(function(key){ParamItem_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ParamItem_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function ParamItem_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function ParamItem_extends(){ParamItem_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return ParamItem_extends.apply(this,arguments);}function ParamItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ParamItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function ParamItem_createClass(Constructor,protoProps,staticProps){if(protoProps)ParamItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)ParamItem_defineProperties(Constructor,staticProps);return Constructor;}function ParamItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)ParamItem_setPrototypeOf(subClass,superClass);}function ParamItem_setPrototypeOf(o,p){ParamItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return ParamItem_setPrototypeOf(o,p);}function ParamItem_createSuper(Derived){var hasNativeReflectConstruct=ParamItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=ParamItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=ParamItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return ParamItem_possibleConstructorReturn(this,result);};}function ParamItem_possibleConstructorReturn(self,call){if(call&&(ParamItem_typeof(call)==="object"||typeof call==="function")){return call;}return ParamItem_assertThisInitialized(self);}function ParamItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function ParamItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ParamItem_getPrototypeOf(o){ParamItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return ParamItem_getPrototypeOf(o);}/**
 * ParamItem
 * @author tianyanrong
 * @date 2021/6/24 下午6:27:36
 */var ParamItem_Item=/*#__PURE__*/function(_Base){ParamItem_inherits(Item,_Base);var _super=ParamItem_createSuper(Item);function Item(){var _this;ParamItem_classCallCheck(this,Item);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.dimensionsItems=[];_this.getPropOptionsValue=function(keyName,data){var _this$props=_this.props,dragDataModel=_this$props.dragDataModel,option=_this$props.option,relations=_this$props.relations,selectedComponentConfig=_this$props.selectedComponentConfig;var values=ParamItem_extends([],option.value||[]);var outputType=_this.getCurrOutputType();var hadDataKeyNameInvaluesObj={};values.forEach(function(item){hadDataKeyNameInvaluesObj["".concat(item.nodeId).concat(item.dataKeyName)]=hadDataKeyNameInvaluesObj["".concat(item.nodeId).concat(item.dataKeyName)]||[];hadDataKeyNameInvaluesObj["".concat(item.nodeId).concat(item.dataKeyName)].push(item.title);});if(typeof keyName==="number"){values.splice(keyName,1);}else if(!keyName){var structureKeyName=dragDataModel.structure.keyName;var dataKeyName=dragDataModel.structure.dataKeyName;var structureKeyTitle=dragDataModel.structure.title;var structureType=dragDataModel.structure.type;var params=hadDataKeyNameInvaluesObj["".concat(dragDataModel.nodeId).concat(dataKeyName)];var towParamTypes=['[min, max]','[startDate, endDate]','[[orderKey, orderType]]','[orderKey, orderType]'];if(params&&params>=2&&towParamTypes.indexOf(outputType)>=0){message/* default.warning */.ZP.warning("\u6B64\u63A5\u53E3\u4E2D\u5DF2\u6709\u53C2\u6570\u7ED1\u5B9A, \u8BF7\u9009\u79FB\u9664\u4E4B\u524D\u7ED1\u5B9A\u7684\u53C2\u6570");}else if(params&&params.length&&towParamTypes.indexOf(outputType)===-1){message/* default.warning */.ZP.warning("\u6B64\u63A5\u53E3\u4E2D\u5DF2\u6709\u53C2\u6570\u7ED1\u5B9A, \u8BF7\u9009\u79FB\u9664\u4E4B\u524D\u7ED1\u5B9A\u7684\u53C2\u6570");}else{var transformType=_this.setTransformType({fromType:_this.getCurrOutputType(),toType:structureType,valuesLength:values.length+1,currValueIndex:values.length});values.push({keyName:structureKeyName,title:structureKeyTitle,nodeId:dragDataModel.nodeId,structureType:structureType,dataKeyName:dataKeyName,serviceName:dragDataModel.dataKeyName,transformType:transformType||{}});}}else if(keyName&&data&&keyName.indexOf("__")<0){values.forEach(function(value,index){if(value.keyName===keyName){values[index]=ParamItem_objectSpread(ParamItem_objectSpread({},value),data);}});}_this.props.dispatch({type:"".concat(_this.props.myModelName,"/pushDefaultValue"),payload:{propsOption:option,propsOptionValue:values,nodeId:selectedComponentConfig.nodeId,currRelation:relations[selectedComponentConfig.nodeId]}});return{value:values};};_this.updateTransformType=function(_ref){var valueIndex=_ref.valueIndex,transformType=_ref.transformType;var option=_this.props.option;var newValue=JSON.parse(JSON.stringify(option.value||[]));newValue.forEach(function(item,index){if(valueIndex===index){item.transformType=transformType;}});_this.updatePropsOptions({value:newValue});};_this.updateOutputType=function(outputType){var option=_this.props.option;var newValue=JSON.parse(JSON.stringify(option.value||[]));newValue.forEach(function(item,index){item.transformType=_this.setTransformType({fromType:outputType,toType:item.structureType,valuesLength:newValue.length,currValueIndex:index});});_this.updatePropsOptions({value:newValue},function(item){if(item.type===option.type&&item.name===option.name){item.outputType=outputType;}});};_this.onDragOver=function(event){event.preventDefault();var dragPosition=_this.state.dragPosition;var _this$props2=_this.props,dragDataModel=_this$props2.dragDataModel,option=_this$props2.option;var outputTypeRequired=option.outputTypeRequired;var structure=dragDataModel&&dragDataModel.structure||{};if(!(dragDataModel&&dragDataModel.isParam)){return;}if(!(0,dataType/* isCanDataTypeTransform */._V)(outputTypeRequired,structure.type)){return;}if(dragPosition!=='in'&&dragDataModel&&!(_this.sortDragItem||_this.sortDragItem===0)){_this.setState({dragPosition:'in'});}};_this.setOutputType=function(type){var outputTypes=_this.getOutputTypeRequired();var changeTypes={'string':'number','number':'string','[string]':'[number]','[number]':'[string]','text':'string'};if(outputTypes.indexOf(type)>=0){return type;}else if(changeTypes[type]&&outputTypes.indexOf(changeTypes[type])>=0){return changeTypes[type];}return outputTypes[0];};_this.setTransformType=function(_ref2){var fromType=_ref2.fromType,toType=_ref2.toType,_ref2$valuesLength=_ref2.valuesLength,valuesLength=_ref2$valuesLength===void 0?0:_ref2$valuesLength,currValueIndex=_ref2.currValueIndex;var typesData=(0,dataType/* getTransformTypes */.kx)({fromType:fromType,toType:toType});var transformType={};var types=typesData.types;if((valuesLength===1||valuesLength>2)&&types.indexOf('join')>=0){transformType.join=',';}else if(valuesLength===2&&types.indexOf('index')>=0){transformType.index=currValueIndex;}return transformType;};_this.onDrop=function(event){var _this$props3=_this.props,dragDataModel=_this$props3.dragDataModel,option=_this$props3.option;var dragPosition=_this.state.dragPosition;if(!dragPosition){return;}event.preventDefault();_this.updatePropsOptions(_this.getPropOptionsValue(),function(item){var structure=dragDataModel&&dragDataModel.structure||{};var enumOptions=structure.enumOptions||[];if(item.type==='label'){var structureTitle=structure&&dragDataModel.structure.title;if(structureTitle){item.value=structureTitle;}}if(item.type===option.type&&item.name===option.name&&(!option.value||!(option.value&&option.value.length))){item.outputType=_this.setOutputType(structure.type);}if(enumOptions.length&&item.type==='dimension'){var newDimensionValueItem=JSON.parse(JSON.stringify(item.value[0]||{}));newDimensionValueItem.dimensions=enumOptions;newDimensionValueItem.autoDimensions=false;item.value=[newDimensionValueItem];}});if(dragPosition!==""){_this.setState({dragPosition:""});}};_this.pushDefaultValue=function(keyName,data){var _this$props4=_this.props,option=_this$props4.option,relations=_this$props4.relations,selectedComponentConfig=_this$props4.selectedComponentConfig,dispatchEditModel=_this$props4.dispatchEditModel;var currRelation=relations&&relations[selectedComponentConfig&&selectedComponentConfig.nodeId]||{};var newDefaultValueConfig=ParamItem_extends({},currRelation.defaultValueConfig);if(data.ruleType&&data.ruleValue){newDefaultValueConfig[keyName]=data;}else if(!data.ruleType&&newDefaultValueConfig[keyName]){delete newDefaultValueConfig[keyName];}dispatchEditModel("updateRelations",{nodeId:selectedComponentConfig.nodeId,defaultValueConfig:newDefaultValueConfig});_this.props.dispatch({type:"".concat(_this.props.myModelName,"/pushDefaultValue"),payload:{propsOption:option,propsOptionValue:option.value,nodeId:selectedComponentConfig.nodeId,currRelation:relations[selectedComponentConfig.nodeId]}});var values=option.value;if(values&&values.length){values.forEach(function(valueItem){_this.triggerRequest(valueItem.serviceName,valueItem.nodeId);});}};_this.triggerRequest=function(name,nodeId,options){var _this$props5=_this.props,relations=_this$props5.relations,dataModels=_this$props5.dataModels,myModelName=_this$props5.myModelName,dispatch=_this$props5.dispatch;dispatch({type:"".concat(myModelName,"/request"),payload:ParamItem_objectSpread({myModelName:myModelName,dataModal:dataModels[name],currRelation:relations[nodeId],serviceName:name},options||{})});};_this.getOutputTypeRequired=function(){var _this$props$option=_this.props.option,option=_this$props$option===void 0?{}:_this$props$option;return option.outputTypeRequired||['string'];};_this.getCurrOutputType=function(){var _this$props$option2=_this.props.option,option=_this$props$option2===void 0?{}:_this$props$option2;var outputTypes=_this.getOutputTypeRequired();return option.outputType||outputTypes[0];};_this.getOrderFields=function(){var _this$props6=_this.props,relations=_this$props6.relations,selectedComponentConfig=_this$props6.selectedComponentConfig,dataModels=_this$props6.dataModels;var propsOptions=selectedComponentConfig.propsOptions||[];var orderFields=[];propsOptions.forEach(function(item){if(item.type==='data'&&item.value&&item.value.length){item.value.forEach(function(valueItem){orderFields.push({label:valueItem.title,value:valueItem.keyName});});}});return orderFields;};return _this;}ParamItem_createClass(Item,[{key:"render",value:function render(){var _this2=this;var _this$props7=this.props,_this$props7$option=_this$props7.option,option=_this$props7$option===void 0?{}:_this$props7$option,relations=_this$props7.relations,selectedComponentConfig=_this$props7.selectedComponentConfig,currItem=_this$props7.currItem;var dragPosition=this.state.dragPosition;var values=option.value&&option.value.length?option.value:[];var length=option.length||100;var currRelation=relations&&relations[selectedComponentConfig&&selectedComponentConfig.nodeId]||{};var defaultValueConfig=currRelation.defaultValueConfig&&currRelation.defaultValueConfig[option.name]||{};var outputTypes=this.getOutputTypeRequired();var currOutputType=this.getCurrOutputType();return/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.viewParamItem," ").concat(option.isCloseTop?ViewParamItems_index_module.closeTop:"")},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitleV,style:{position:"relative"}},/*#__PURE__*/index_js_default().createElement("label",{style:{paddingLeft:"10px"}},option.label,"(\u53C2\u6570\u9879)"),/*#__PURE__*/index_js_default().createElement("div",{style:{position:"absolute",right:"0",top:"0"}},defaultValueConfig.ruleType&&defaultValueConfig.ruleValue?/*#__PURE__*/index_js_default().createElement(tag/* default */.Z,{color:"lime",style:{lineHeight:'16px'}},"\u9ED8\u8BA4\u503C"):null,/*#__PURE__*/index_js_default().createElement(MenuDrop/* default */.Z,{style:{width:"110px"},type:"iconmore",desibledChecked:true,menus:[{label:"设置默认值",callback:function callback(){_this2.setState({isShowParamEditModal:true,paramEditModalKeyName:option.name,paramEditModalData:{type:currOutputType,defaultValueConfig:defaultValueConfig}});}}]})),/*#__PURE__*/index_js_default().createElement("div",{className:ParamItem_index_module.inpubBox},/*#__PURE__*/index_js_default().createElement("div",{className:ParamItem_index_module.label},"\u8F93\u51FA\u7C7B\u578B:"),/*#__PURE__*/index_js_default().createElement("div",{className:ParamItem_index_module.content},/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{bordered:false,size:"small",popupClassName:ParamItem_index_module.popupClassName,showArrow:outputTypes.length===1?false:true,value:currOutputType,options:outputTypes.map(function(item){return{label:item,value:item};}),onChange:function onChange(value){_this2.updateOutputType(value);}}))),/*#__PURE__*/index_js_default().createElement("div",{style:{padding:'0px 5px 6px 5px'}},values.map(function(item,index){var transformType=item.transformType||{};var transformData=(0,dataType/* getTransformTypes */.kx)({fromType:currOutputType,toType:item.structureType});var typesOptions=transformData.typesOptions||[];var typesLabel='';var typesMenu=typesOptions.map(function(typeItem){var typeValue=typeItem.value||{};var isChecked=transformType.join&&transformType.join===typeValue.join||(0,utils/* isValue */.w)(transformType.index)&&transformType.index===typeValue.index;if(isChecked){typesLabel=typeItem.label;}return{label:typeItem.label,isChecked:isChecked,callback:function callback(){_this2.updateTransformType({valueIndex:index,transformType:typeValue});}};});return/*#__PURE__*/index_js_default().createElement("div",{key:index,style:{marginBottom:"3px"}},/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataItemValueBox," ").concat(ViewParamItems_index_module.greenBox)},/*#__PURE__*/index_js_default().createElement("span",{className:ViewParamItems_index_module.dataItemValue},item.isTriggerRequest?/*#__PURE__*/index_js_default().createElement(tag/* default */.Z,null,"API"):null,typesLabel?/*#__PURE__*/index_js_default().createElement(tag/* default */.Z,null,typesLabel):null,item.title),/*#__PURE__*/index_js_default().createElement("span",{className:ViewParamItems_index_module.dataItemDelect},/*#__PURE__*/index_js_default().createElement(MenuDrop/* default */.Z,{style:{width:"130px"},type:"iconmore",menus:[{label:"触发API",isChecked:item.isTriggerRequest,callback:function callback(){_this2.updatePropsOptions(_this2.getPropOptionsValue(item.keyName,{isTriggerRequest:!item.isTriggerRequest}));}},{label:"移除",callback:function callback(){_this2.updatePropsOptions(_this2.getPropOptionsValue(index));}}].concat(typesMenu.length?[{type:"line"}]:[],typesMenu)}))));}),length>values.length?/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataItem," ").concat(dragPosition?ViewParamItems_index_module.dataItemSelected:""),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop,style:{margin:"5px 5px 0 5px"}}):null)),/*#__PURE__*/index_js_default().createElement(ParamEditModal/* default */.Z,{title:"\u8BBE\u7F6E\u9ED8\u8BA4\u503C",isComponentField:true//outputTypeRequired={option.outputTypeRequired || ['string']}
,visible:this.state.isShowParamEditModal,showStaticItem:currItem,data:this.state.paramEditModalData,orderFields:this.getOrderFields(),contentType:'request',dataModels:this.props.dataModels,relations:this.props.relations,onCancel:function onCancel(){_this2.setState({paramEditModalData:null,paramEditModalKeyName:null,isShowParamEditModal:false});},onOk:function onOk(data){_this2.pushDefaultValue(_this2.state.paramEditModalKeyName,data.defaultValueConfig||{});_this2.setState({paramEditModalData:null,paramEditModalKeyName:null,isShowParamEditModal:false});}}));}}]);return Item;}(Base);/* harmony default export */ const ParamItem = (ParamItem_Item);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/PlusCircleOutlined.js + 1 modules
var PlusCircleOutlined = __webpack_require__(57881);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/DataItem/index.jsx
function DataItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){DataItem_typeof=function _typeof(obj){return typeof obj;};}else{DataItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return DataItem_typeof(obj);}function DataItem_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function DataItem_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){DataItem_ownKeys(Object(source),true).forEach(function(key){DataItem_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{DataItem_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function DataItem_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function DataItem_extends(){DataItem_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return DataItem_extends.apply(this,arguments);}function DataItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function DataItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function DataItem_createClass(Constructor,protoProps,staticProps){if(protoProps)DataItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)DataItem_defineProperties(Constructor,staticProps);return Constructor;}function DataItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)DataItem_setPrototypeOf(subClass,superClass);}function DataItem_setPrototypeOf(o,p){DataItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return DataItem_setPrototypeOf(o,p);}function DataItem_createSuper(Derived){var hasNativeReflectConstruct=DataItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=DataItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=DataItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return DataItem_possibleConstructorReturn(this,result);};}function DataItem_possibleConstructorReturn(self,call){if(call&&(DataItem_typeof(call)==="object"||typeof call==="function")){return call;}return DataItem_assertThisInitialized(self);}function DataItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function DataItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function DataItem_getPrototypeOf(o){DataItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return DataItem_getPrototypeOf(o);}/**
 * DataItem
 * @author tianyanrong
 * @date 2021/7/5 下午5:21:43
 */// import ParamEditModal from "../../ParamEditModal";
var DataItem_Item=/*#__PURE__*/function(_Base){DataItem_inherits(Item,_Base);var _super=DataItem_createSuper(Item);function Item(){var _this;DataItem_classCallCheck(this,Item);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.getDimensions=function(keyName,data){var _this$props=_this.props,dragDataModel=_this$props.dragDataModel,option=_this$props.option,relations=_this$props.relations,selectedComponentConfig=_this$props.selectedComponentConfig;var values=DataItem_extends([],option.value||[]);var nodeId=selectedComponentConfig.nodeId;var relation=relations[nodeId]||{};var dataSourceType=relation.dataSourceType;if(typeof keyName==="number"){values.splice(keyName,1);}else if(!keyName&&data){values.push(DataItem_objectSpread({},data));}else if(keyName&&data){values.forEach(function(value,index){if(value.keyName===keyName){values[index]=DataItem_objectSpread(DataItem_objectSpread({},value),data);}});}else{var structureKeyName=dragDataModel.structure.keyName;var structureKeyTitle=dragDataModel.structure.title;var structureType=dragDataModel.structure.type;var isHadItem=false;values.forEach(function(item){if(item.keyName===structureKeyName){isHadItem=true;}});if(!isHadItem){values.push({keyName:structureKeyName,title:structureKeyTitle,structureType:structureType});}}return{staticProps:DataItem_extends({},option.staticProps||{},{serviceName:dataSourceType==="api"?relation.dataSourceName:""}),value:values};};_this.onDrop=function(event){var dragPosition=_this.state.dragPosition;if(!dragPosition){return;}event.preventDefault();_this.updatePropsOptions(_this.getDimensions());_this.setState({dragPosition:""});};_this.onSortDrop=function(event,index){var option=_this.props.option;var sortDragPosition=_this.state.sortDragPosition;if(!sortDragPosition&&sortDragPosition!==0){return;}event.preventDefault();var newValue=[];option.value.forEach(function(item,index){if(index===sortDragPosition){newValue.push(DataItem_extends({},option.value[_this.sortDragItem]));}if(index!==_this.sortDragItem){newValue.push(item);}});if(sortDragPosition===option.value.length){newValue.push(option.value[_this.sortDragItem]);}_this.updatePropsOptions({value:newValue,staticProps:option.staticProps});_this.setState({sortDragPosition:""});_this.sortDragItem=null;};_this.getCurrDataModelName=function(){var _this$props2=_this.props,relations=_this$props2.relations,selectedComponentConfig=_this$props2.selectedComponentConfig;var nodeId=selectedComponentConfig.nodeId;return relations&&relations[nodeId]&&relations[nodeId].dataSourceType==="api"&&relations[nodeId].dataSourceName?relations[nodeId].dataSourceName:"";};_this.getCurrDataModel=function(){var dataModels=_this.props.dataModels;var dataModelName=_this.getCurrDataModelName();return dataModels[dataModelName]||{};};_this.getCurrApiData=function(){var dataModel=_this.getCurrDataModel();var apiData=dataModel.apiData||{};return apiData;};_this.updateRelationsApiData=function(data){var _this$props3=_this.props,dispatchEditModel=_this$props3.dispatchEditModel,dataModels=_this$props3.dataModels;var keyName=data.keyName,formatConfig=data.formatConfig;var apiData=_this.getCurrApiData();apiData=DataItem_extends({},apiData||{});apiData[keyName]={formatConfig:formatConfig};var dataModelName=_this.getCurrDataModelName();if(!(dataModelName&&dataModels[dataModelName])){return;}dataModels[dataModelName].apiData=apiData;dispatchEditModel("setState",{dataModels:dataModels});};_this.removeRelationsApiData=function(keyName){var _this$props4=_this.props,dispatchEditModel=_this$props4.dispatchEditModel,dataModels=_this$props4.dataModels;var apiData=_this.getCurrApiData();apiData=DataItem_extends({},apiData||{});if(apiData[keyName]){delete apiData[keyName];}var dataModelName=_this.getCurrDataModelName();if(!(dataModelName&&dataModels[dataModelName])){return;}dataModels[dataModelName].apiData=apiData;dispatchEditModel("setState",{dataModels:dataModels});};_this.removeRenderComponent=function(nodeId){var dispatchEditModel=_this.props.dispatchEditModel;dispatchEditModel("removeComponentConfig",{nodeId:nodeId});};_this.getSortDropContainer=function(index){var sortDragPosition=_this.state.sortDragPosition;return/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dropContainer," ").concat(sortDragPosition>=0&&sortDragPosition===index?ViewParamItems_index_module.dropContainerSelect:""),onDragOver:function onDragOver(event){event.preventDefault();if(!_this.sortDragItem&&_this.sortDragItem!==0||index===_this.sortDragItem||_this.sortDragItem+1===index){return;}_this.setState({sortDragPosition:index});},onDragLeave:function onDragLeave(event){event.preventDefault();if(!_this.sortDragItem&&_this.sortDragItem!==0){return;}_this.setState({sortDragPosition:""});},onDrop:function onDrop(event){_this.onSortDrop(event,index);}});};_this.removeItem=function(item,index){if(item.isRender){_this.updatePropsOptions(_this.getDimensions(index));_this.removeRelationsApiData(item.keyName);_this.removeRenderComponent(item.keyName);}else{_this.updatePropsOptions(_this.getDimensions(index));_this.removeRelationsApiData(item.keyName);}};_this.getTools=function(_ref,dataModels){var isFormatConfig=_ref.isFormatConfig,formatConfig=_ref.formatConfig,item=_ref.item,index=_ref.index;var dataModelName=_this.getCurrDataModelName();var tools=[];// if(!item.isRender && dataModelName) {
//   tools.push({
//     label: "格式化数据",
//     isChecked: isFormatConfig,
//     callback: () => {
//       const dataModel = dataModels[dataModelName];
//       const responseStructures = dataModel.responseStructures || [];
//       const fields = [];
//       responseStructures.forEach(fielditem => {
//         fields.push({
//           label: fielditem.keyName,
//           value: fielditem.keyName,
//           type: fielditem.type,
//           ...(item.keyName === fielditem.keyName ? {
//             role: 'current',
//           }: {})
//         })
//       })
//       this.setState({
//         paramEditModalData: {
//           text: "格式化数据",
//           ...item,
//           type: item.structureType,
//           formatConfig,
//           requiredValue: item.keyName,
//         },
//         paramEditModalFields: fields,
//         isShowParamEditModal: true,
//       });
//     },
//   });
//   tools.push({
//     type: "line",
//   });
// }
tools.push({label:"移除",callback:function callback(){_this.removeItem(item,index);}});return tools;};return _this;}DataItem_createClass(Item,[{key:"render",value:function render(){var _this2=this;var _this$props5=this.props,_this$props5$option=_this$props5.option,option=_this$props5$option===void 0?{}:_this$props5$option,model=_this$props5.model,promiseConfig=_this$props5.promiseConfig,relations=_this$props5.relations,selectedComponentConfig=_this$props5.selectedComponentConfig;var dragPosition=this.state.dragPosition;var values=option.value&&option.value.length?option.value:[];var optionChildren=option.children||[];var apiData=this.getCurrApiData();// 当显示动态数据模型时，维度可以删除/编辑
var isShowDataModel=promiseConfig&&promiseConfig.isShowDataModel;var sorts=option.sorts||[];var description=option.description;if(sorts.length){description="".concat(description).concat(description?'\n':'')+'数据顺序为: \n'+JSON.stringify(sorts);}return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItem},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitleV},/*#__PURE__*/index_js_default().createElement("label",null,description?/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:description},option.label+"(数据项) ",/*#__PURE__*/index_js_default().createElement(QuestionCircleOutlined/* default */.Z,null)):option.label+"(数据项)",option.isCanAdd?/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.labelButtons,onClick:function onClick(){_this2.updatePropsOptions(_this2.getDimensions(null,{isRender:true}));}},/*#__PURE__*/index_js_default().createElement(PlusCircleOutlined/* default */.Z,null)):null),/*#__PURE__*/index_js_default().createElement("div",null,values.map(function(item,index){var currentApiData=apiData[item.keyName]||{};var formatConfig=currentApiData.formatConfig||{};var isFormatConfig=Object.values(formatConfig)&&Object.values(formatConfig).length;return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,_this2.getSortDropContainer(index),/*#__PURE__*/index_js_default().createElement("div",{title:sorts[index]||'',key:index,className:optionChildren&&optionChildren.length?ViewParamItems_index_module.dataItemChildrenBox:"",draggable:true,onDragStart:function onDragStart(event){_this2.sortDragItem=index;},onDragEnd:function onDragEnd(event){_this2.sortDragItem=null;}},/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataItemValueBox," ").concat(ViewParamItems_index_module.greenBox)},/*#__PURE__*/index_js_default().createElement("span",{className:ViewParamItems_index_module.dataItemValue,title:"\u53CC\u51FB\u4FEE\u6539\u540D\u79F0",style:{cursor:'pointer'},onDoubleClick:function onDoubleClick(){_this2.setState({isEditTitle:item.keyName});}},_this2.state.isEditTitle===item.keyName?/*#__PURE__*/index_js_default().createElement(ViewParamItems_StringItem,{className:ViewParamItems_index_module.childrenTop,option:{name:"title",label:"列标题",value:item.title||""},onlyInput:true,inputClassName:ViewParamItems_index_module.dataItemStringInput,updatePropsOptions:function updatePropsOptions(keyName,data){_this2.updatePropsOptions(_this2.getDimensions(keyName,data));_this2.setState({isEditTitle:false});},parentKeyName:item.keyName,dispatchEditModel:_this2.props.dispatchEditModel,dragDataModel:_this2.props.dragDataModel||{},dataModels:_this2.props.dataModels,selectedComponentConfig:_this2.props.selectedComponentConfig||{}}):/*#__PURE__*/index_js_default().createElement("span",{style:{width:'100%',overflow:'hidden',textOverflow:"ellipsis",whiteSpace:'nowrap',display:'inline-block',verticalAlign:'middle'}},item.title)),/*#__PURE__*/index_js_default().createElement("span",{className:ViewParamItems_index_module.dataItemDelect},isShowDataModel?/*#__PURE__*/index_js_default().createElement(MenuDrop/* default */.Z,{style:{width:"150px"},type:"iconmore",menus:_this2.getTools({isFormatConfig:isFormatConfig,formatConfig:formatConfig,item:item,index:index},_this2.props.dataModels),value:item.keyName}):null)),/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.childrenBox},optionChildren.length?optionChildren.map(function(child,childIndex){var itemProps={option:DataItem_objectSpread(DataItem_objectSpread({},child),{},{value:item[child.name]}),parentKeyName:item.keyName,updatePropsOptions:function updatePropsOptions(keyName,data){_this2.updatePropsOptions(_this2.getDimensions(keyName,data));},key:"".concat(child.type,"_").concat(childIndex),dispatchEditModel:_this2.props.dispatchEditModel,dragDataModel:_this2.props.dragDataModel||{},dataModels:_this2.props.dataModels,selectedComponentConfig:_this2.props.selectedComponentConfig||{},optionIndex:index};if(child.type==="string"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_StringItem,itemProps);}else if(child.type==="boolean"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_BooleanItem,itemProps);}else if(child.type==="select"){return/*#__PURE__*/index_js_default().createElement(SelectItem,itemProps);}else if(child.type==="number"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_NumberItem,itemProps);}return null;}):null)));}),values&&values.length?this.getSortDropContainer(values.length):null,sorts.length>0&&values.length>=sorts.length?null:/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataItem," ").concat(dragPosition?ViewParamItems_index_module.dataItemSelected:""),onDragOver:function onDragOver(event){if(_this2.sortDragItem||_this2.sortDragItem===0){return;}_this2.onDragOver(event);},onDragLeave:this.onDragLeave,onDrop:this.onDrop},sorts[values.length]||'')))));}}]);return Item;}(Base);/* harmony default export */ const DataItem = (DataItem_Item);
// EXTERNAL MODULE: ../my-designer/src/components/UploadImg/index.jsx
var UploadImg = __webpack_require__(28405);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/ImgItem/index.jsx
function ImgItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){ImgItem_typeof=function _typeof(obj){return typeof obj;};}else{ImgItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return ImgItem_typeof(obj);}function ImgItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ImgItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function ImgItem_createClass(Constructor,protoProps,staticProps){if(protoProps)ImgItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)ImgItem_defineProperties(Constructor,staticProps);return Constructor;}function ImgItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)ImgItem_setPrototypeOf(subClass,superClass);}function ImgItem_setPrototypeOf(o,p){ImgItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return ImgItem_setPrototypeOf(o,p);}function ImgItem_createSuper(Derived){var hasNativeReflectConstruct=ImgItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=ImgItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=ImgItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return ImgItem_possibleConstructorReturn(this,result);};}function ImgItem_possibleConstructorReturn(self,call){if(call&&(ImgItem_typeof(call)==="object"||typeof call==="function")){return call;}return ImgItem_assertThisInitialized(self);}function ImgItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function ImgItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ImgItem_getPrototypeOf(o){ImgItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return ImgItem_getPrototypeOf(o);}/**
 * StringItem
 * @author tianyanrong
 * @date 2021/6/8 下午4:36:17
 */var ImgItem=/*#__PURE__*/function(_Base){ImgItem_inherits(ImgItem,_Base);var _super=ImgItem_createSuper(ImgItem);function ImgItem(){var _this;ImgItem_classCallCheck(this,ImgItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};return _this;}ImgItem_createClass(ImgItem,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,_this$props$option=_this$props.option,option=_this$props$option===void 0?{}:_this$props$option,className=_this$props.className;var value=option.value||'';if(!this.getIsShow()){return null;}return/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.viewParamItem," ").concat(className)},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitle},/*#__PURE__*/index_js_default().createElement("label",null,/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:option.description},option.label)),/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement(UploadImg/* default */.Z,{value:option.value||'',onChange:function onChange(urls){_this2.updatePropsOptions({value:urls});},maxLength:option.maxLength}))));}}]);return ImgItem;}(Base);/* harmony default export */ const ViewParamItems_ImgItem = (ImgItem);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/JavascriptItem/index.jsx
function JavascriptItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){JavascriptItem_typeof=function _typeof(obj){return typeof obj;};}else{JavascriptItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return JavascriptItem_typeof(obj);}function JavascriptItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function JavascriptItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function JavascriptItem_createClass(Constructor,protoProps,staticProps){if(protoProps)JavascriptItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)JavascriptItem_defineProperties(Constructor,staticProps);return Constructor;}function JavascriptItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)JavascriptItem_setPrototypeOf(subClass,superClass);}function JavascriptItem_setPrototypeOf(o,p){JavascriptItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return JavascriptItem_setPrototypeOf(o,p);}function JavascriptItem_createSuper(Derived){var hasNativeReflectConstruct=JavascriptItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=JavascriptItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=JavascriptItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return JavascriptItem_possibleConstructorReturn(this,result);};}function JavascriptItem_possibleConstructorReturn(self,call){if(call&&(JavascriptItem_typeof(call)==="object"||typeof call==="function")){return call;}return JavascriptItem_assertThisInitialized(self);}function JavascriptItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function JavascriptItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function JavascriptItem_getPrototypeOf(o){JavascriptItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return JavascriptItem_getPrototypeOf(o);}/**
 * JavascriptItem
 * @author tianyanrong
 * @date 2021/7/5 下午5:09:04
 */// import 'monaco-editor/esm/vs/basic-languages/javascript/javascript.contribution';
var JavasctiptItem=/*#__PURE__*/function(_Base){JavascriptItem_inherits(JavasctiptItem,_Base);var _super=JavascriptItem_createSuper(JavasctiptItem);function JavasctiptItem(){var _this;JavascriptItem_classCallCheck(this,JavasctiptItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.monacoInstance=null;return _this;}JavascriptItem_createClass(JavasctiptItem,[{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.monacoInstance){this.monacoInstance.dispose();}}},{key:"componentDidUpdate",value:function componentDidUpdate(){var _this$props=this.props,nodeName=_this$props.nodeName,_this$props$option=_this$props.option,option=_this$props$option===void 0?{}:_this$props$option;if(nodeName&&nodeName!==this.preNodeName&&this.monacoInstance){this.monacoInstance.setValue(option.value||'');this.preNodeName=nodeName;}}},{key:"render",value:function render(){var _this2=this;var _this$props2=this.props,_this$props2$option=_this$props2.option,option=_this$props2$option===void 0?{}:_this$props2$option,className=_this$props2.className;var value=option.value||'';var visible=this.state.visible;if(!this.getIsShow()){return null;}return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.viewParamItem," ").concat(className)},/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:"small",style:{width:'95%',margin:'5px auto',display:'block'},onClick:function onClick(){_this2.setState({visible:true});}},option.label)),/*#__PURE__*/index_js_default().createElement(drawer/* default */.Z,{title:/*#__PURE__*/index_js_default().createElement("div",{style:{fontSize:'12px'}},option.label),placement:"right",okText:"\u5BFC\u5165",visible:visible,onClose:function onClose(){_this2.setState({visible:false});},maskStyle:{opacity:0},contentWrapperStyle:{width:'553px'},headerStyle:{padding:'5px 10px'},bodyStyle:{padding:'0px'},extra:/*#__PURE__*/index_js_default().createElement(space/* default */.Z,null,/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:'small',onClick:function onClick(){_this2.setState({isModalVisible:true,isCopyUrl:true});}},"\u4E0A\u4F20\u56FE\u7247"),/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:'small',onClick:function onClick(){_this2.setState({visible:false});}},"\u5173\u95ED"),/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:'small',type:"primary",onClick:function onClick(){var newValue=_this2.monacoInstance.getValue();var isRight=false;try{var callback=new Function("return "+(newValue||"").replace(/\/\/\s*.*(\r|\n)/g,'').replace(/\s+/g," ").replace(/\r+/g," "))();callback([]);isRight=true;}catch(e){console.log('javascript submit error=',e);isRight=false;message/* default.error */.ZP.error('代码无法应用，执行不通过，请检查代码语法逻辑');}if(isRight){_this2.updatePropsOptions({value:"".concat(newValue)});}}},"\u5E94\u7528"))},visible?/*#__PURE__*/index_js_default().createElement("div",{ref:function ref(node){if(!_this2.monacoInstance){_this2.monacoInstance=editor_api.editor.create(node,{value:value,language:"javascript",theme:'vs-dark',autoDetectHighContrast:true,automaticLayout:true});// this.monacoInstance.layout(); // 重新调整编辑器窗口大小
}},style:{height:'100%'}}):null),/*#__PURE__*/index_js_default().createElement(IconItem_IconModal,{visible:this.state.isModalVisible,isComponentEdit:this.props.isComponentEdit,isCopyUrl:this.state.isCopyUrl,onOk:function onOk(data){_this2.setState({isModalVisible:false,isCopyUrl:false});},onCancel:function onCancel(){_this2.setState({isModalVisible:false,isCopyUrl:false});}}));}}]);return JavasctiptItem;}(Base);/* harmony default export */ const JavascriptItem = (JavasctiptItem);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/CloseCircleOutlined.js + 1 modules
var CloseCircleOutlined = __webpack_require__(56972);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/DataValueItem/index.jsx
function DataValueItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){DataValueItem_typeof=function _typeof(obj){return typeof obj;};}else{DataValueItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return DataValueItem_typeof(obj);}function DataValueItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function DataValueItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function DataValueItem_createClass(Constructor,protoProps,staticProps){if(protoProps)DataValueItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)DataValueItem_defineProperties(Constructor,staticProps);return Constructor;}function DataValueItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)DataValueItem_setPrototypeOf(subClass,superClass);}function DataValueItem_setPrototypeOf(o,p){DataValueItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return DataValueItem_setPrototypeOf(o,p);}function DataValueItem_createSuper(Derived){var hasNativeReflectConstruct=DataValueItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=DataValueItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=DataValueItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return DataValueItem_possibleConstructorReturn(this,result);};}function DataValueItem_possibleConstructorReturn(self,call){if(call&&(DataValueItem_typeof(call)==="object"||typeof call==="function")){return call;}return DataValueItem_assertThisInitialized(self);}function DataValueItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function DataValueItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function DataValueItem_getPrototypeOf(o){DataValueItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return DataValueItem_getPrototypeOf(o);}/**
 * DataValueItem
 * @author tianyanrong
 * @date 2021/6/15 下午3:41:26
 */var DataValueItem=/*#__PURE__*/function(_Base){DataValueItem_inherits(DataValueItem,_Base);var _super=DataValueItem_createSuper(DataValueItem);function DataValueItem(){var _this;DataValueItem_classCallCheck(this,DataValueItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={value:''};_this.getValue=function(){};_this.onDrop=function(event){var dragPosition=_this.state.dragPosition;if(!dragPosition){return;}event.preventDefault();var _this$props=_this.props,model=_this$props.model,option=_this$props.option;var dragServiceData=model.dragServiceData;var dragService=model.dragService;_this.updatePropsOptions(_this.getValue());if(dragPosition!==''){_this.setState({dragPosition:''});}};_this.preValue=null;return _this;}DataValueItem_createClass(DataValueItem,[{key:"render",value:function render(){var _this2=this;var _this$props2=this.props,_this$props2$option=_this$props2.option,option=_this$props2$option===void 0?{}:_this$props2$option,value=_this$props2.value;var dragPosition=this.state.dragPosition;var stateValue=this.state.value;if(this.preValue===null){this.preValue=stateValue;}if(!this.getIsShow()){return null;}return/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItem},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitle},/*#__PURE__*/index_js_default().createElement("label",null,/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:option.description},option.label)),/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataItem," ").concat(ViewParamItems_index_module.dataStrintItem," ").concat(dragPosition?ViewParamItems_index_module.dataItemSelected:''),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},value?/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataItemValueBox," ").concat(ViewParamItems_index_module.titleItemValueBox)},/*#__PURE__*/index_js_default().createElement("span",{className:ViewParamItems_index_module.dataItemValue},/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:value},value)),/*#__PURE__*/index_js_default().createElement("span",{className:ViewParamItems_index_module.dataItemDelect,onClick:function onClick(){_this2.setState({value:''});_this2.updatePropsOptions({value:''});}},/*#__PURE__*/index_js_default().createElement(CloseCircleOutlined/* default */.Z,null))):/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataStringItemInput," ").concat(!stateValue?ViewParamItems_index_module.dataStringItemInputWidth:'')},/*#__PURE__*/index_js_default().createElement("input",{onChange:function onChange(e){var value=e.target.value;_this2.setState({value:value});}}),stateValue?/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataStringItemOkBtn,"\n                      ").concat(stateValue!==this.preValue?ViewParamItems_index_module.dataStringItemOkBtnSelected:'',"\n                      "),onClick:function onClick(){_this2.preValue=stateValue;_this2.updatePropsOptions({value:stateValue});}},/*#__PURE__*/index_js_default().createElement(CheckOutlined/* default */.Z,null)):null)))));}}]);return DataValueItem;}(Base);/* harmony default export */ const ViewParamItems_DataValueItem = (DataValueItem);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/ColorItem/index.jsx
function ColorItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){ColorItem_typeof=function _typeof(obj){return typeof obj;};}else{ColorItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return ColorItem_typeof(obj);}function ColorItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ColorItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function ColorItem_createClass(Constructor,protoProps,staticProps){if(protoProps)ColorItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)ColorItem_defineProperties(Constructor,staticProps);return Constructor;}function ColorItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)ColorItem_setPrototypeOf(subClass,superClass);}function ColorItem_setPrototypeOf(o,p){ColorItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return ColorItem_setPrototypeOf(o,p);}function ColorItem_createSuper(Derived){var hasNativeReflectConstruct=ColorItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=ColorItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=ColorItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return ColorItem_possibleConstructorReturn(this,result);};}function ColorItem_possibleConstructorReturn(self,call){if(call&&(ColorItem_typeof(call)==="object"||typeof call==="function")){return call;}return ColorItem_assertThisInitialized(self);}function ColorItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function ColorItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ColorItem_getPrototypeOf(o){ColorItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return ColorItem_getPrototypeOf(o);}/**
 * StringItem
 * @author tianyanrong
 * @date 2021/6/8 下午4:36:17
 */var ColorItem=/*#__PURE__*/function(_Base){ColorItem_inherits(ColorItem,_Base);var _super=ColorItem_createSuper(ColorItem);function ColorItem(){var _this;ColorItem_classCallCheck(this,ColorItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};return _this;}ColorItem_createClass(ColorItem,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,_this$props$option=_this$props.option,option=_this$props$option===void 0?{}:_this$props$option,className=_this$props.className,onlyInput=_this$props.onlyInput,inputClassName=_this$props.inputClassName,_this$props$global=_this$props.global,global=_this$props$global===void 0?{}:_this$props$global;var value=option.value||'';if(!this.getIsShow()){return null;}var color=/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:'block'},value:value,global:global,isShowPresetColors:option.isHaveVariableColors?true:false,onChange:function onChange(value){_this2.updatePropsOptions({value:value});}});return onlyInput?color:/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.viewParamItem," ").concat(className)},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitle},/*#__PURE__*/index_js_default().createElement("label",null,/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:option.description},option.label)),/*#__PURE__*/index_js_default().createElement("div",null,color)));}}]);return ColorItem;}(Base);/* harmony default export */ const ViewParamItems_ColorItem = (ColorItem);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/ObjectItem/index.jsx
function ObjectItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){ObjectItem_typeof=function _typeof(obj){return typeof obj;};}else{ObjectItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return ObjectItem_typeof(obj);}function ObjectItem_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function ObjectItem_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ObjectItem_ownKeys(Object(source),true).forEach(function(key){ObjectItem_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ObjectItem_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function ObjectItem_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function ObjectItem_extends(){ObjectItem_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return ObjectItem_extends.apply(this,arguments);}function ObjectItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ObjectItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function ObjectItem_createClass(Constructor,protoProps,staticProps){if(protoProps)ObjectItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)ObjectItem_defineProperties(Constructor,staticProps);return Constructor;}function ObjectItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)ObjectItem_setPrototypeOf(subClass,superClass);}function ObjectItem_setPrototypeOf(o,p){ObjectItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return ObjectItem_setPrototypeOf(o,p);}function ObjectItem_createSuper(Derived){var hasNativeReflectConstruct=ObjectItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=ObjectItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=ObjectItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return ObjectItem_possibleConstructorReturn(this,result);};}function ObjectItem_possibleConstructorReturn(self,call){if(call&&(ObjectItem_typeof(call)==="object"||typeof call==="function")){return call;}return ObjectItem_assertThisInitialized(self);}function ObjectItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function ObjectItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ObjectItem_getPrototypeOf(o){ObjectItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return ObjectItem_getPrototypeOf(o);}/**
 * DataItem
 * @author tianyanrong
 * @date 2021/7/5 下午5:21:43
 */var renderIndex=0;var ObjectItem_Item=/*#__PURE__*/function(_Base){ObjectItem_inherits(Item,_Base);var _super=ObjectItem_createSuper(Item);function Item(){var _this;ObjectItem_classCallCheck(this,Item);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.getDimensions=function(keyName,data){var option=_this.props.option;var newValue=option.value||{};if(!keyName&&data){newValue=ObjectItem_extends({},newValue,data);}newValue=ObjectItem_objectSpread(ObjectItem_objectSpread({},_this.globalValue),newValue);return{value:newValue};};_this.globalValue={};return _this;}ObjectItem_createClass(Item,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,_this$props$option=_this$props.option,option=_this$props$option===void 0?{}:_this$props$option,value=_this$props.value,dispatchEditModel=_this$props.dispatchEditModel,global=_this$props.global;var values=value;var objectOptions=option.objectOptions||[];if(!values&&option.defaultValueSource==='global'){values={};option.objectOptions.forEach(function(item){values[item.name]=global[item.name];});this.globalValue=values;}values=values||{};return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.viewParamItem)},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitleV},/*#__PURE__*/index_js_default().createElement("label",null,option.description?/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:option.description},option.label):option.label),/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.objectItems},objectOptions.map(function(item){var itemProps={option:ObjectItem_objectSpread(ObjectItem_objectSpread({},item),{},{value:values[item.name]}),value:values[item.name],updatePropsOptions:function updatePropsOptions(keyName,data){_this2.updatePropsOptions(_this2.getDimensions(keyName,data));},key:"".concat(item.name),dispatchEditModel:_this2.props.dispatchEditModel,dragDataModel:_this2.props.dragDataModel||{},dataModels:_this2.props.dataModels,global:_this2.props.global,selectedComponentConfig:_this2.props.selectedComponentConfig||{}};if(item.type==='number'){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_NumberItem,itemProps);}if(item.type==='select'){return/*#__PURE__*/index_js_default().createElement(SelectItem,itemProps);}else if(item.type==='color'){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_ColorItem,itemProps);}else if(item.type==='boolean'){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_BooleanItem,itemProps);}else{return/*#__PURE__*/index_js_default().createElement(ViewParamItems_StringItem,itemProps);}})))));}}]);return Item;}(Base);/* harmony default export */ const ObjectItem = (ObjectItem_Item);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/dropdown/style/index.js + 1 modules
var dropdown_style = __webpack_require__(66294);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/dropdown/index.js + 2 modules
var dropdown = __webpack_require__(79525);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/slider/style/index.js + 1 modules
var slider_style = __webpack_require__(59199);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/slider/index.js + 1 modules
var slider = __webpack_require__(17119);
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/colors/dist/index.esm.js
var index_esm = __webpack_require__(97413);
// EXTERNAL MODULE: ../my-cli/node_modules/@ctrl/tinycolor/dist/module/index.js
var dist_module = __webpack_require__(36560);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/ColorsItem/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const ColorsItem_index_module = ({"colorsBox":"_-my-designer-src-components-ViewParamItems-ColorsItem-index-module__colorsBox","colorsBoxLink":"_-my-designer-src-components-ViewParamItems-ColorsItem-index-module__colorsBoxLink","colorsItemSlider":"_-my-designer-src-components-ViewParamItems-ColorsItem-index-module__colorsItemSlider"});
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/ColorsItem/index.jsx
function ColorsItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){ColorsItem_typeof=function _typeof(obj){return typeof obj;};}else{ColorsItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return ColorsItem_typeof(obj);}function ColorsItem_extends(){ColorsItem_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return ColorsItem_extends.apply(this,arguments);}function ColorsItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ColorsItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function ColorsItem_createClass(Constructor,protoProps,staticProps){if(protoProps)ColorsItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)ColorsItem_defineProperties(Constructor,staticProps);return Constructor;}function ColorsItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)ColorsItem_setPrototypeOf(subClass,superClass);}function ColorsItem_setPrototypeOf(o,p){ColorsItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return ColorsItem_setPrototypeOf(o,p);}function ColorsItem_createSuper(Derived){var hasNativeReflectConstruct=ColorsItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=ColorsItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=ColorsItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return ColorsItem_possibleConstructorReturn(this,result);};}function ColorsItem_possibleConstructorReturn(self,call){if(call&&(ColorsItem_typeof(call)==="object"||typeof call==="function")){return call;}return ColorsItem_assertThisInitialized(self);}function ColorsItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function ColorsItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ColorsItem_getPrototypeOf(o){ColorsItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return ColorsItem_getPrototypeOf(o);}/**
 * ColorsItem
 * @author tianyanrong
 * @date 2022/7/5 下午5:21:43
 */var ColorsItem=/*#__PURE__*/function(_Base){ColorsItem_inherits(ColorsItem,_Base);var _super=ColorsItem_createSuper(ColorsItem);function ColorsItem(){var _this;ColorsItem_classCallCheck(this,ColorsItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={presetPalettes:[],//不同色色卡
colorOption:{s:85,v:85,hType:'strong'// stronger、strong、hOrder、vOrder
}};_this.getDimensions=function(keyName,data){var option=_this.props.option;var newValue=option.value||{};if(!keyName&&data){newValue=ColorsItem_extends({},newValue,data);}return{value:newValue};};_this.getHValues=function(hStart,type){var values=[hStart];var splitNum=30;if(hStart+splitNum<360&&(!type||type==='next')){var nextValues=_this.getHValues(hStart+splitNum,'next');values=[].concat(values,nextValues);}if(hStart-splitNum>=0&&(!type||type==='prev')){var prevValues=_this.getHValues(hStart-splitNum,'prev');values=[].concat(values,prevValues);}return values;};_this.colorContrast={stronger:[0,3,6,9,1,11,4,7,10,2,5,8],strong:[0,1,8,2,3,10,4,9,6,7,11,5],hOrder:[0,1,2,3,4,5,6,7,8,9,10,11]};_this.getColorOptions=function(option){var colorItem=_this.props.option;var startColor=_this.getStartColor();var colorOption=_this.state.colorOption;var newOption=ColorsItem_extends({},colorOption,option||{});var hStart=startColor?new dist_module/* TinyColor */.C(startColor).toHsv().h:180;//.toHsv
var hValues=_this.getHValues(hStart);var presetPalettes=[];var colorContrast=_this.colorContrast;var putIndex=colorContrast.stronger;if(newOption.hType!=='vOrder'&&colorContrast[newOption.hType]){putIndex=colorContrast[newOption.hType];}// colorValues 相同色色卡
var colorValues=hValues.map(function(item,index){var value="hsv(".concat(item,", ").concat(newOption.s,"%, ").concat(newOption.v,"%)");var baseColor=new dist_module/* TinyColor */.C(value);var colors=(0,index_esm/* generate */.R_)(baseColor.toRgbString());colors.forEach(function(subItem,subIndex){var newIndex=putIndex[index];presetPalettes[subIndex]=presetPalettes[subIndex]||['','','','','','','','','','','',''];presetPalettes[subIndex][newIndex]=subItem;});return colors;});// 如果没有初始值，设置初始值
if(!(colorItem.value&&colorItem.value.length)){_this.setValue(presetPalettes[5]);}_this.setState({presetPalettes:newOption.hType==='vOrder'?colorValues:presetPalettes,colorOption:newOption});};_this.selectOptions=[{label:'色阶强对比',value:'stronger'},{label:'色阶弱对比',value:'strong'},{label:'色阶顺序',value:'hOrder'}// {label: '明暗顺序', value: 'vOrder'}
];_this.setValue=function(value){var _this$props=_this.props,dispatchEditModel=_this$props.dispatchEditModel,global=_this$props.global,option=_this$props.option;_this.updatePropsOptions({value:value});// if(option.isUpdateGlobal) {
//   dispatchEditModel('setState', {
//     global: {
//       ...global,
//       chartColors: value,
//     }
//   })
// }
};_this.getStartColor=function(){var startColor=_this.props.startColor;return startColor||'#1890ff';};_this.handleVisibleChange=function(flag){_this.setState({visible:flag});};_this.preStartColor=null;return _this;}ColorsItem_createClass(ColorsItem,[{key:"componentDidMount",value:function componentDidMount(){this.getColorOptions();}},{key:"render",value:function render(){var _this2=this;var _this$props2=this.props,_this$props2$option=_this$props2.option,option=_this$props2$option===void 0?{}:_this$props2$option,global=_this$props2.global,startColor=_this$props2.startColor;var _this$state=this.state,presetPalettes=_this$state.presetPalettes,colorOption=_this$state.colorOption,visible=_this$state.visible;var values=option.value||[];if(!this.getIsShow()){return null;}// let values = (option.defaultValueSource === 'global' ? global[option.name] : option.value) || [];
if(!(values&&values.length)&&option.defaultValueSource==='global'){values=global[option.name];}var currStartColor=startColor;if(this.preStartColor!==currStartColor){this.getColorOptions();this.preStartColor=currStartColor;}return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.viewParamItem)},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitleV},/*#__PURE__*/index_js_default().createElement("label",null,option.description?/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:option.description},option.label):option.label),/*#__PURE__*/index_js_default().createElement(dropdown/* default */.Z,{onVisibleChange:this.handleVisibleChange,visible:visible,trigger:"click",overlayStyle:{background:'#fff',border:'1px solid #ddd',borderRadius:'2px',padding:'10px 5px',boxShadow:'0 0px 5px 3px rgba(0,0,0,0.15)'},overlay:/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement("div",{className:ColorsItem_index_module.colorsItemSlider},/*#__PURE__*/index_js_default().createElement("span",null,"\u8272\u9636\u5BF9\u6BD4"),/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{size:"small",value:colorOption.hType,onChange:function onChange(value){_this2.getColorOptions({hType:value});}},this.selectOptions.map(function(item){return/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:item.value},item.label);})))),/*#__PURE__*/index_js_default().createElement("div",{className:ColorsItem_index_module.colorsItemSlider},/*#__PURE__*/index_js_default().createElement("span",null,"\u9971\u5408\u5EA6"),/*#__PURE__*/index_js_default().createElement(slider/* default */.Z,{min:1,max:100,value:colorOption.s,onChange:function onChange(value){_this2.getColorOptions({s:value});}})),/*#__PURE__*/index_js_default().createElement("div",{className:ColorsItem_index_module.colorsItemSlider},/*#__PURE__*/index_js_default().createElement("span",null,"\u660E\u5EA6"),/*#__PURE__*/index_js_default().createElement(slider/* default */.Z,{min:1,max:100,value:colorOption.v,onChange:function onChange(value){_this2.getColorOptions({v:value});}})),presetPalettes.map(function(itemArray){return/*#__PURE__*/index_js_default().createElement("ul",{className:"".concat(ColorsItem_index_module.colorsBox," ").concat(ColorsItem_index_module.colorsBoxLink),onClick:function onClick(event){_this2.setValue(itemArray);}},(itemArray||[]).map(function(item){return/*#__PURE__*/index_js_default().createElement("li",{style:{background:"".concat(item)}});}));}))},/*#__PURE__*/index_js_default().createElement("div",{style:{cursor:'pointer'}},/*#__PURE__*/index_js_default().createElement("ul",{className:ColorsItem_index_module.colorsBox},(values||[]).map(function(item){return/*#__PURE__*/index_js_default().createElement("li",{style:{background:"".concat(item)}});})))))));}}]);return ColorsItem;}(Base);/* harmony default export */ const ViewParamItems_ColorsItem = (ColorsItem);
// EXTERNAL MODULE: ../my-designer/src/utils/paramsUtils.js
var paramsUtils = __webpack_require__(51891);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/SortItem/index.jsx
function SortItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){SortItem_typeof=function _typeof(obj){return typeof obj;};}else{SortItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return SortItem_typeof(obj);}function SortItem_extends(){SortItem_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return SortItem_extends.apply(this,arguments);}function SortItem_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function SortItem_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){SortItem_ownKeys(Object(source),true).forEach(function(key){SortItem_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{SortItem_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function SortItem_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function SortItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function SortItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function SortItem_createClass(Constructor,protoProps,staticProps){if(protoProps)SortItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)SortItem_defineProperties(Constructor,staticProps);return Constructor;}function SortItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)SortItem_setPrototypeOf(subClass,superClass);}function SortItem_setPrototypeOf(o,p){SortItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return SortItem_setPrototypeOf(o,p);}function SortItem_createSuper(Derived){var hasNativeReflectConstruct=SortItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=SortItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=SortItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return SortItem_possibleConstructorReturn(this,result);};}function SortItem_possibleConstructorReturn(self,call){if(call&&(SortItem_typeof(call)==="object"||typeof call==="function")){return call;}return SortItem_assertThisInitialized(self);}function SortItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function SortItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function SortItem_getPrototypeOf(o){SortItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return SortItem_getPrototypeOf(o);}/**
 * PaginationItem
 * @author tianyanrong
 * @date 2022/1/8 下午4:37:02
 */var SortItem=/*#__PURE__*/function(_Base){SortItem_inherits(SortItem,_Base);var _super=SortItem_createSuper(SortItem);function SortItem(){var _this;SortItem_classCallCheck(this,SortItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.updatePropsOptions=function(_ref){var _ref$value=_ref.value,value=_ref$value===void 0?'':_ref$value,_ref$valueResult=_ref.valueResult,valueResult=_ref$valueResult===void 0?'':_ref$valueResult,_ref$staticProps=_ref.staticProps,staticProps=_ref$staticProps===void 0?{}:_ref$staticProps,extendValues=_ref.extendValues;var _this$props=_this.props,option=_this$props.option,dataModels=_this$props.dataModels,relations=_this$props.relations,dispatchEditModel=_this$props.dispatchEditModel,parentKeyName=_this$props.parentKeyName,updatePropsOptions=_this$props.updatePropsOptions,selectedComponentConfig=_this$props.selectedComponentConfig;// 更新父DataItem
if(updatePropsOptions&&typeof updatePropsOptions==='function'){updatePropsOptions(parentKeyName,SortItem_objectSpread(SortItem_defineProperty({},option.name,valueResult||value),staticProps));return;}//
var propsOptions=selectedComponentConfig.propsOptions;var newPropsOptions=[];propsOptions.map(function(item,index){if(item.name===option.name){newPropsOptions.push(SortItem_objectSpread(SortItem_objectSpread({},item),{},{value:value,valueResult:valueResult,staticProps:staticProps,extendValues:extendValues}));}else{newPropsOptions.push(SortItem_objectSpread({},item));}return null;});newPropsOptions=(0,paramsUtils/* getNewPropsOptionsForKey */.XY)({propsOptions:newPropsOptions,nodeId:selectedComponentConfig.nodeId,currRelation:relations[selectedComponentConfig.nodeId],dataModels:dataModels,value:value,isForSort:true});dispatchEditModel('updateComponentConfigPropsOptions',{componentName:selectedComponentConfig.componentName,nodeId:selectedComponentConfig.nodeId,newPropsOptions:newPropsOptions});};_this.getDisabled=function(){var _this$props2=_this.props,option=_this$props2.option,dataModels=_this$props2.dataModels,relations=_this$props2.relations,dispatchEditModel=_this$props2.dispatchEditModel,parentKeyName=_this$props2.parentKeyName,updatePropsOptions=_this$props2.updatePropsOptions,selectedComponentConfig=_this$props2.selectedComponentConfig;var currRelation=relations[selectedComponentConfig.nodeId];var disabled=true;if(currRelation.dataSourceType==="api"&&currRelation.dataSourceName){var dataModel=dataModels[currRelation.dataSourceName];var requestStructures=dataModel.requestStructures;requestStructures.forEach(function(item){if(["order","orderKey",'orderType'].indexOf(item.key)>=0){disabled=false;}});}return disabled;};return _this;}SortItem_createClass(SortItem,[{key:"render",value:function render(){var _this2=this;var _this$props$option=this.props.option,option=_this$props$option===void 0?{}:_this$props$option;var valueProps=option.value||option.value===false?{checked:option.value}:{};if(!this.getIsShow()){return null;}return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItem},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitle},/*#__PURE__*/index_js_default().createElement("label",null,"\u5F00\u542F\u6392\u5E8F"),/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement(es_switch/* default */.Z,SortItem_extends({size:"small"//  disabled={this.getDisabled()}
},valueProps,{onChange:function onChange(checked){_this2.updatePropsOptions({value:checked});}}))))));}}]);return SortItem;}(Base);/* harmony default export */ const ViewParamItems_SortItem = (SortItem);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/PaginationItem/index.jsx
function PaginationItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){PaginationItem_typeof=function _typeof(obj){return typeof obj;};}else{PaginationItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return PaginationItem_typeof(obj);}function PaginationItem_extends(){PaginationItem_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return PaginationItem_extends.apply(this,arguments);}function PaginationItem_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function PaginationItem_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){PaginationItem_ownKeys(Object(source),true).forEach(function(key){PaginationItem_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{PaginationItem_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function PaginationItem_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function PaginationItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function PaginationItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function PaginationItem_createClass(Constructor,protoProps,staticProps){if(protoProps)PaginationItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)PaginationItem_defineProperties(Constructor,staticProps);return Constructor;}function PaginationItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)PaginationItem_setPrototypeOf(subClass,superClass);}function PaginationItem_setPrototypeOf(o,p){PaginationItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return PaginationItem_setPrototypeOf(o,p);}function PaginationItem_createSuper(Derived){var hasNativeReflectConstruct=PaginationItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=PaginationItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=PaginationItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return PaginationItem_possibleConstructorReturn(this,result);};}function PaginationItem_possibleConstructorReturn(self,call){if(call&&(PaginationItem_typeof(call)==="object"||typeof call==="function")){return call;}return PaginationItem_assertThisInitialized(self);}function PaginationItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function PaginationItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function PaginationItem_getPrototypeOf(o){PaginationItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return PaginationItem_getPrototypeOf(o);}/**
 * PaginationItem
 * @author tianyanrong
 * @date 2022/1/8 下午4:37:02
 */var PaginationItem=/*#__PURE__*/function(_Base){PaginationItem_inherits(PaginationItem,_Base);var _super=PaginationItem_createSuper(PaginationItem);function PaginationItem(){var _this;PaginationItem_classCallCheck(this,PaginationItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.updatePropsOptions=function(_ref){var _ref$value=_ref.value,value=_ref$value===void 0?'':_ref$value,_ref$valueResult=_ref.valueResult,valueResult=_ref$valueResult===void 0?'':_ref$valueResult,_ref$staticProps=_ref.staticProps,staticProps=_ref$staticProps===void 0?{}:_ref$staticProps,extendValues=_ref.extendValues;var _this$props=_this.props,option=_this$props.option,dataModels=_this$props.dataModels,relations=_this$props.relations,dispatchEditModel=_this$props.dispatchEditModel,parentKeyName=_this$props.parentKeyName,updatePropsOptions=_this$props.updatePropsOptions,selectedComponentConfig=_this$props.selectedComponentConfig;// 更新父DataItem
if(updatePropsOptions&&typeof updatePropsOptions==='function'){updatePropsOptions(parentKeyName,PaginationItem_objectSpread(PaginationItem_defineProperty({},option.name,valueResult||value),staticProps));return;}//
var propsOptions=selectedComponentConfig.propsOptions;var newPropsOptions=[];propsOptions.map(function(item,index){if(item.name===option.name){newPropsOptions.push(PaginationItem_objectSpread(PaginationItem_objectSpread({},item),{},{value:value,valueResult:valueResult,staticProps:staticProps,extendValues:extendValues}));}else{newPropsOptions.push(PaginationItem_objectSpread({},item));}return null;});newPropsOptions=(0,paramsUtils/* getNewPropsOptionsForKey */.XY)({propsOptions:newPropsOptions,nodeId:selectedComponentConfig.nodeId,currRelation:relations[selectedComponentConfig.nodeId],dataModels:dataModels,// value,
isForPagination:true});dispatchEditModel('updateComponentConfigPropsOptions',{componentName:selectedComponentConfig.componentName,nodeId:selectedComponentConfig.nodeId,newPropsOptions:newPropsOptions});};_this.getDisabled=function(){var _this$props2=_this.props,option=_this$props2.option,dataModels=_this$props2.dataModels,relations=_this$props2.relations,dispatchEditModel=_this$props2.dispatchEditModel,parentKeyName=_this$props2.parentKeyName,updatePropsOptions=_this$props2.updatePropsOptions,selectedComponentConfig=_this$props2.selectedComponentConfig;var currRelation=relations[selectedComponentConfig.nodeId];var disabled=true;if(currRelation.dataSourceType==="api"&&currRelation.dataSourceName){var dataModel=dataModels[currRelation.dataSourceName];var requestStructures=dataModel.requestStructures;requestStructures.forEach(function(item){if(["limit","offset"].indexOf(item.key)>=0){disabled=false;}});}return disabled;};return _this;}PaginationItem_createClass(PaginationItem,[{key:"render",value:function render(){var _this2=this;var _this$props$option=this.props.option,option=_this$props$option===void 0?{}:_this$props$option;var valueProps=option.value||option.value===false?{checked:option.value}:{};if(!this.getIsShow()){return null;}return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItem},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitle},/*#__PURE__*/index_js_default().createElement("label",null,"\u5F00\u542F\u5206\u9875"),/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement(es_switch/* default */.Z,PaginationItem_extends({size:"small"},valueProps,{// disabled={this.getDisabled()}
onChange:function onChange(checked){_this2.updatePropsOptions({value:checked});}}))))));}}]);return PaginationItem;}(Base);/* harmony default export */ const ViewParamItems_PaginationItem = (PaginationItem);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/ModalItem/index.jsx
function ModalItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){ModalItem_typeof=function _typeof(obj){return typeof obj;};}else{ModalItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return ModalItem_typeof(obj);}function ModalItem_extends(){ModalItem_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return ModalItem_extends.apply(this,arguments);}function ModalItem_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function ModalItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ModalItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function ModalItem_createClass(Constructor,protoProps,staticProps){if(protoProps)ModalItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)ModalItem_defineProperties(Constructor,staticProps);return Constructor;}function ModalItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)ModalItem_setPrototypeOf(subClass,superClass);}function ModalItem_setPrototypeOf(o,p){ModalItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return ModalItem_setPrototypeOf(o,p);}function ModalItem_createSuper(Derived){var hasNativeReflectConstruct=ModalItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=ModalItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=ModalItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return ModalItem_possibleConstructorReturn(this,result);};}function ModalItem_possibleConstructorReturn(self,call){if(call&&(ModalItem_typeof(call)==="object"||typeof call==="function")){return call;}return ModalItem_assertThisInitialized(self);}function ModalItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function ModalItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ModalItem_getPrototypeOf(o){ModalItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return ModalItem_getPrototypeOf(o);}/**
 * BooleanItem
 * @author tianyanrong
 * @date 2021/6/8 下午4:37:02
 */var ModalItem_BooleanItem=/*#__PURE__*/function(_Base){ModalItem_inherits(BooleanItem,_Base);var _super=ModalItem_createSuper(BooleanItem);function BooleanItem(){var _this;ModalItem_classCallCheck(this,BooleanItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.triggerRequest=function(value){var _this$props=_this.props,myModelName=_this$props.myModelName,dispatch=_this$props.dispatch,selectedComponentConfig=_this$props.selectedComponentConfig;var nodeId=selectedComponentConfig.nodeId;dispatch({type:"".concat(myModelName,"/setState"),payload:ModalItem_defineProperty({},"".concat(nodeId,"Modal"),value)});};return _this;}ModalItem_createClass(BooleanItem,[{key:"render",value:function render(){var _this2=this;var _this$props$option=this.props.option,option=_this$props$option===void 0?{}:_this$props$option;var valueProps=option.value||option.value===false?{checked:option.value}:{};if(!this.getIsShow()){return null;}return/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItem},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitle},/*#__PURE__*/index_js_default().createElement("label",null,/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:option.description||""},option.label)),/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement(es_switch/* default */.Z,ModalItem_extends({size:"small"},valueProps,{onChange:function onChange(checked){_this2.updatePropsOptions({value:checked});_this2.triggerRequest(checked);}})))));}}]);return BooleanItem;}(Base);/* harmony default export */ const ModalItem = (ModalItem_BooleanItem);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/IconItem/index.jsx
function IconItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){IconItem_typeof=function _typeof(obj){return typeof obj;};}else{IconItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return IconItem_typeof(obj);}function IconItem_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function IconItem_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){IconItem_ownKeys(Object(source),true).forEach(function(key){IconItem_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{IconItem_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function IconItem_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function IconItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function IconItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function IconItem_createClass(Constructor,protoProps,staticProps){if(protoProps)IconItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)IconItem_defineProperties(Constructor,staticProps);return Constructor;}function IconItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)IconItem_setPrototypeOf(subClass,superClass);}function IconItem_setPrototypeOf(o,p){IconItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return IconItem_setPrototypeOf(o,p);}function IconItem_createSuper(Derived){var hasNativeReflectConstruct=IconItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=IconItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=IconItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return IconItem_possibleConstructorReturn(this,result);};}function IconItem_possibleConstructorReturn(self,call){if(call&&(IconItem_typeof(call)==="object"||typeof call==="function")){return call;}return IconItem_assertThisInitialized(self);}function IconItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function IconItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function IconItem_getPrototypeOf(o){IconItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return IconItem_getPrototypeOf(o);}/**
 * StringItem
 * @author tianyanrong
 * @date 2021/6/8 下午4:36:17
 */// import UploadImg from '../../UploadImg';
// import {getIcon} from './service';
// const { TabPane } = Tabs;
var IconItem=/*#__PURE__*/function(_Base){IconItem_inherits(IconItem,_Base);var _super=IconItem_createSuper(IconItem);function IconItem(){var _this;IconItem_classCallCheck(this,IconItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isModalVisible:false};return _this;}IconItem_createClass(IconItem,[{key:"componentDidMount",value:function componentDidMount(){}},{key:"render",value:function render(){var _this2=this;var _this$props=this.props,_this$props$option=_this$props.option,option=_this$props$option===void 0?{}:_this$props$option,className=_this$props.className,isComponentEdit=_this$props.isComponentEdit;var isModalVisible=this.state.isModalVisible;var value=option.value||{};if(!this.getIsShow()){return null;}var isSvgSrc=(value.src||'').match(/\.svg$/)?true:false;return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.viewParamItem," ").concat(className)},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitle},/*#__PURE__*/index_js_default().createElement("label",null,/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:option.description},option.label)),/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement(IconItem_IconBtn,{src:value.src,setState:function setState(options){_this2.setState(options);},onClear:function onClear(){_this2.updatePropsOptions({value:''});}})))),isSvgSrc?/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.viewParamItem," ").concat(className),style:{marginTop:'-5px',borderTop:'none'}},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitle},/*#__PURE__*/index_js_default().createElement("label",null,"\u8DDF\u968F\u6587\u5B57\u989C\u8272"),/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement(es_switch/* default */.Z,{checked:value.colorType?true:false,onChange:function onChange(checked){_this2.updatePropsOptions({value:IconItem_objectSpread(IconItem_objectSpread({},value),{},{colorType:checked?'autoStrokeFill':''})});}}))))):null,/*#__PURE__*/index_js_default().createElement(IconItem_IconModal,{visible:isModalVisible,isComponentEdit:isComponentEdit,onOk:function onOk(data){_this2.updatePropsOptions({value:IconItem_objectSpread(IconItem_objectSpread({},value),{},{src:data.value})});_this2.setState({isModalVisible:false});},onCancel:function onCancel(){_this2.setState({isModalVisible:false});}}));}}]);return IconItem;}(Base);/* harmony default export */ const ViewParamItems_IconItem = (IconItem);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/checkbox/style/index.js + 1 modules
var checkbox_style = __webpack_require__(75529);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/checkbox/index.js + 2 modules
var es_checkbox = __webpack_require__(20149);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/ThemeItem/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const ThemeItem_index_module = ({"box":"_-my-designer-src-components-ViewParamItems-ThemeItem-index-module__box","formItem":"_-my-designer-src-components-ViewParamItems-ThemeItem-index-module__formItem","content":"_-my-designer-src-components-ViewParamItems-ThemeItem-index-module__content","formItemY":"_-my-designer-src-components-ViewParamItems-ThemeItem-index-module__formItemY","chartColors":"_-my-designer-src-components-ViewParamItems-ThemeItem-index-module__chartColors","colorsBox":"_-my-designer-src-components-ViewParamItems-ThemeItem-index-module__colorsBox","colorsBoxLink":"_-my-designer-src-components-ViewParamItems-ThemeItem-index-module__colorsBoxLink","colorsItemSlider":"_-my-designer-src-components-ViewParamItems-ThemeItem-index-module__colorsItemSlider"});
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/ThemeItem/ChartColors.jsx
function ChartColors_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){ChartColors_typeof=function _typeof(obj){return typeof obj;};}else{ChartColors_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return ChartColors_typeof(obj);}function ChartColors_extends(){ChartColors_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return ChartColors_extends.apply(this,arguments);}function ChartColors_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ChartColors_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function ChartColors_createClass(Constructor,protoProps,staticProps){if(protoProps)ChartColors_defineProperties(Constructor.prototype,protoProps);if(staticProps)ChartColors_defineProperties(Constructor,staticProps);return Constructor;}function ChartColors_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)ChartColors_setPrototypeOf(subClass,superClass);}function ChartColors_setPrototypeOf(o,p){ChartColors_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return ChartColors_setPrototypeOf(o,p);}function ChartColors_createSuper(Derived){var hasNativeReflectConstruct=ChartColors_isNativeReflectConstruct();return function _createSuperInternal(){var Super=ChartColors_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=ChartColors_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return ChartColors_possibleConstructorReturn(this,result);};}function ChartColors_possibleConstructorReturn(self,call){if(call&&(ChartColors_typeof(call)==="object"||typeof call==="function")){return call;}return ChartColors_assertThisInitialized(self);}function ChartColors_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function ChartColors_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ChartColors_getPrototypeOf(o){ChartColors_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return ChartColors_getPrototypeOf(o);}/**
 * ColorsItem
 * @author tianyanrong
 * @date 2022/7/5 下午5:21:43
 */var ChartColors_ColorsItem=/*#__PURE__*/function(_Component){ChartColors_inherits(ColorsItem,_Component);var _super=ChartColors_createSuper(ColorsItem);function ColorsItem(){var _this;ChartColors_classCallCheck(this,ColorsItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={presetPalettes:[],//不同色色卡
colorOption:{s:85,v:85,hType:'strong'// stronger、strong、hOrder、vOrder
}};_this.getHValues=function(hStart,type){var values=[hStart];var splitNum=30;if(hStart+splitNum<360&&(!type||type==='next')){var nextValues=_this.getHValues(hStart+splitNum,'next');values=[].concat(values,nextValues);}if(hStart-splitNum>=0&&(!type||type==='prev')){var prevValues=_this.getHValues(hStart-splitNum,'prev');values=[].concat(values,prevValues);}return values;};_this.colorContrast={stronger:[0,3,6,9,1,11,4,7,10,2,5,8],strong:[0,1,8,2,3,10,4,9,6,7,11,5],hOrder:[0,1,2,3,4,5,6,7,8,9,10,11]};_this.getColorOptions=function(option){var startColor=_this.getStartColor();var colorOption=_this.state.colorOption;var newOption=ChartColors_extends({},colorOption,option||{});var hStart=startColor?new dist_module/* TinyColor */.C(startColor).toHsv().h:180;//.toHsv
var hValues=_this.getHValues(hStart);var presetPalettes=[];var colorContrast=_this.colorContrast;var putIndex=colorContrast.stronger;if(newOption.hType!=='vOrder'&&colorContrast[newOption.hType]){putIndex=colorContrast[newOption.hType];}// colorValues 相同色色卡
var colorValues=hValues.map(function(item,index){var value="hsv(".concat(item,", ").concat(newOption.s,"%, ").concat(newOption.v,"%)");var baseColor=new dist_module/* TinyColor */.C(value);var colors=(0,index_esm/* generate */.R_)(baseColor.toRgbString());colors.forEach(function(subItem,subIndex){var newIndex=putIndex[index];presetPalettes[subIndex]=presetPalettes[subIndex]||['','','','','','','','','','','',''];presetPalettes[subIndex][newIndex]=subItem;});return colors;});_this.setState({presetPalettes:newOption.hType==='vOrder'?colorValues:presetPalettes,colorOption:newOption});};_this.selectOptions=[{label:'色阶强对比',value:'stronger'},{label:'色阶弱对比',value:'strong'},{label:'色阶顺序',value:'hOrder'}// {label: '明暗顺序', value: 'vOrder'}
];_this.setValue=function(value){var onChange=_this.props.onChange;if(onChange&&typeof onChange==='function'){onChange(value);}};_this.getStartColor=function(){var startColor=_this.props.startColor;return startColor||'#1890ff';};_this.preStartColor=null;return _this;}ChartColors_createClass(ColorsItem,[{key:"componentDidMount",value:function componentDidMount(){this.getColorOptions();}},{key:"render",value:function render(){var _this2=this;var _this$props=this.props,_this$props$value=_this$props.value,value=_this$props$value===void 0?[]:_this$props$value,startColor=_this$props.startColor,_this$props$disabled=_this$props.disabled,disabled=_this$props$disabled===void 0?false:_this$props$disabled;var _this$state=this.state,presetPalettes=_this$state.presetPalettes,colorOption=_this$state.colorOption;var values=value.length?value:['','','','','','','','','',''];return/*#__PURE__*/index_js_default().createElement("div",{style:{display:'inline-block'}},/*#__PURE__*/index_js_default().createElement(dropdown/* default */.Z,{onVisibleChange:function onVisibleChange(flag){if(flag){_this2.getColorOptions();}},trigger:"click",overlayStyle:{background:'#fff',border:'1px solid #ddd',borderRadius:'2px',padding:'10px 5px',boxShadow:'0 0px 5px 3px rgba(0,0,0,0.15)'},disabled:disabled,overlay:/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.colorsItemSlider},/*#__PURE__*/index_js_default().createElement("span",null,"\u8272\u9636\u5BF9\u6BD4"),/*#__PURE__*/index_js_default().createElement("div",null,/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{size:"small",value:colorOption.hType,onChange:function onChange(value){_this2.getColorOptions({hType:value});}},this.selectOptions.map(function(item){return/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:item.value},item.label);})))),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.colorsItemSlider},/*#__PURE__*/index_js_default().createElement("span",null,"\u9971\u5408\u5EA6"),/*#__PURE__*/index_js_default().createElement(slider/* default */.Z,{min:1,max:100,value:colorOption.s,onChange:function onChange(value){_this2.getColorOptions({s:value});}})),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.colorsItemSlider},/*#__PURE__*/index_js_default().createElement("span",null,"\u660E\u5EA6"),/*#__PURE__*/index_js_default().createElement(slider/* default */.Z,{min:1,max:100,value:colorOption.v,onChange:function onChange(value){_this2.getColorOptions({v:value});}})),presetPalettes.map(function(itemArray){return/*#__PURE__*/index_js_default().createElement("ul",{className:"".concat(ThemeItem_index_module.colorsBox," ").concat(ThemeItem_index_module.colorsBoxLink),onClick:function onClick(event){_this2.setValue(itemArray);}},(itemArray||[]).map(function(item){return/*#__PURE__*/index_js_default().createElement("li",{style:{background:"".concat(item)}});}));}))},/*#__PURE__*/index_js_default().createElement("div",{style:disabled?{cursor:'not-allowed'}:{cursor:'pointer'}},/*#__PURE__*/index_js_default().createElement("ul",{className:ThemeItem_index_module.colorsBox},values.map(function(item){return/*#__PURE__*/index_js_default().createElement("li",{style:{background:"".concat(item)}});})))));}}]);return ColorsItem;}(index_js_.Component);/* harmony default export */ const ChartColors = (ChartColors_ColorsItem);
// EXTERNAL MODULE: ../my-designer/node_modules/@icode-run/default-theme/index.js
var default_theme = __webpack_require__(54369);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/ThemeItem/index.jsx
function ThemeItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){ThemeItem_typeof=function _typeof(obj){return typeof obj;};}else{ThemeItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return ThemeItem_typeof(obj);}function ThemeItem_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function ThemeItem_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ThemeItem_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){ThemeItem_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function ThemeItem_extends(){ThemeItem_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return ThemeItem_extends.apply(this,arguments);}function ThemeItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ThemeItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function ThemeItem_createClass(Constructor,protoProps,staticProps){if(protoProps)ThemeItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)ThemeItem_defineProperties(Constructor,staticProps);return Constructor;}function ThemeItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)ThemeItem_setPrototypeOf(subClass,superClass);}function ThemeItem_setPrototypeOf(o,p){ThemeItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return ThemeItem_setPrototypeOf(o,p);}function ThemeItem_createSuper(Derived){var hasNativeReflectConstruct=ThemeItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=ThemeItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=ThemeItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return ThemeItem_possibleConstructorReturn(this,result);};}function ThemeItem_possibleConstructorReturn(self,call){if(call&&(ThemeItem_typeof(call)==="object"||typeof call==="function")){return call;}return ThemeItem_assertThisInitialized(self);}function ThemeItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function ThemeItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ThemeItem_getPrototypeOf(o){ThemeItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return ThemeItem_getPrototypeOf(o);}var ThemeItem=/*#__PURE__*/function(_Component){ThemeItem_inherits(ThemeItem,_Component);var _super=ThemeItem_createSuper(ThemeItem);function ThemeItem(){var _this;ThemeItem_classCallCheck(this,ThemeItem);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.setGlobal=function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _this$props=_this.props,dispatchEditModel=_this$props.dispatchEditModel,global=_this$props.global;if(options.themeMode&&options.themeMode!==global.themeMode){options=ThemeItem_extends({},_this.defalutTheme[options.themeMode],options);}dispatchEditModel("setGlobal",options);};_this.setUserAppTheme=/*#__PURE__*/function(){var _ref=ThemeItem_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee(checked){var dispatchEditModel;return regenerator_default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatchEditModel=_this.props.dispatchEditModel;_context.next=3;return dispatchEditModel("getTheme",{isAppTheme:checked});case 3:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.defalutTheme=default_theme/* default */.Z;return _this;}ThemeItem_createClass(ThemeItem,[{key:"render",value:function render(){var _this2=this;var _this$props2=this.props,global=_this$props2.global,isComponentEdit=_this$props2.isComponentEdit;this.defalutTheme[global.themeMode]=global;return/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.box},isComponentEdit?null:/*#__PURE__*/index_js_default().createElement("div",{style:{padding:'0 0 10px 0'}},/*#__PURE__*/index_js_default().createElement(es_checkbox/* default */.Z,{value:global.isAppTheme,onChange:function onChange(event){var checked=event.target.checked;if(checked){_this2.setUserAppTheme(checked);}else{_this2.setGlobal({isAppTheme:checked});}}},"\u4F7F\u7528\u6B64\u5E94\u7528\u7684\u4E3B\u9898\u914D\u7F6E")),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.formItem},/*#__PURE__*/index_js_default().createElement("label",null,"\u4E3B\u9898\u6A21\u5F0F"),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.content},/*#__PURE__*/index_js_default().createElement(es_radio/* default.Group */.ZP.Group,{size:"small",buttonStyle:"solid",disabled:global.isAppTheme,value:global.themeMode,onChange:function onChange(event){var value=event.target.value;_this2.setGlobal({themeMode:value});}},/*#__PURE__*/index_js_default().createElement(es_radio/* default.Button */.ZP.Button,{size:"small",value:"light"},"Light"),/*#__PURE__*/index_js_default().createElement(es_radio/* default.Button */.ZP.Button,{size:"small",value:"dark"},"Dark")))),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.formItem},/*#__PURE__*/index_js_default().createElement("label",null,"\u4E3B\u8981\u989C\u8272"),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.content},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:"inline-block"},isShowPresetColors:false,disabled:global.isAppTheme,value:global.primaryColor,onChange:function onChange(value){_this2.setGlobal({primaryColor:value});}}))),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.formItem},/*#__PURE__*/index_js_default().createElement("label",null,"\u80CC\u666F\u989C\u8272"),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.content},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:"block"},isShowPresetColors:false,disabled:global.isAppTheme,value:global.backgroundColor,onChange:function onChange(value){_this2.setGlobal({backgroundColor:value});}}))),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.formItem},/*#__PURE__*/index_js_default().createElement("label",null,"\u5185\u5BB9\u5B57\u4F53\u989C\u8272"),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.content},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:"block"},isShowPresetColors:false,disabled:global.isAppTheme,value:global.textColor,onChange:function onChange(value){_this2.setGlobal({textColor:value});}}))),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.formItem},/*#__PURE__*/index_js_default().createElement("label",null,"H1\u5B57\u4F53\u989C\u8272"),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.content},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:"block"},isShowPresetColors:false,disabled:global.isAppTheme,value:global.h1Color,onChange:function onChange(value){_this2.setGlobal({h1Color:value});}}))),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.formItem},/*#__PURE__*/index_js_default().createElement("label",null,"H2\u5B57\u4F53\u989C\u8272"),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.content},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:"block"},isShowPresetColors:false,disabled:global.isAppTheme,value:global.h2Color,onChange:function onChange(value){_this2.setGlobal({h2Color:value});}}))),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.formItem},/*#__PURE__*/index_js_default().createElement("label",null,"\u8FB9\u6846\u989C\u8272"),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.content},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:"block"},isShowPresetColors:false,disabled:global.isAppTheme,value:global.borderColor,onChange:function onChange(value){_this2.setGlobal({borderColor:value});}}))),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.formItem},/*#__PURE__*/index_js_default().createElement("label",null,"\u9519\u8BEF\u989C\u8272"),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.content},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:"block"},isShowPresetColors:false,disabled:global.isAppTheme,value:global.errorColor,onChange:function onChange(value){_this2.setGlobal({errorColor:value});}}))),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.formItem},/*#__PURE__*/index_js_default().createElement("label",null,"\u63D0\u9192\u989C\u8272"),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.content},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:"block"},isShowPresetColors:false,disabled:global.isAppTheme,value:global.warningColor,onChange:function onChange(value){_this2.setGlobal({warningColor:value});}}))),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.formItem},/*#__PURE__*/index_js_default().createElement("label",null,"\u6210\u529F\u989C\u8272"),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.content},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:"block"},isShowPresetColors:false,disabled:global.isAppTheme,value:global.successColor,onChange:function onChange(value){_this2.setGlobal({successColor:value});}}))),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.formItem},/*#__PURE__*/index_js_default().createElement("label",null,"\u63D0\u793A\u6761\u80CC\u666F"),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.content},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:"block"},isShowPresetColors:false,disabled:global.isAppTheme,value:global.tooltipBackgroundColor,onChange:function onChange(value){_this2.setGlobal({tooltipBackgroundColor:value});}}))),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.formItem},/*#__PURE__*/index_js_default().createElement("label",null,"\u63D0\u793A\u6761\u6587\u5B57"),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.content},/*#__PURE__*/index_js_default().createElement(src/* default */.Z,{style:{display:"block"},isShowPresetColors:false,disabled:global.isAppTheme,value:global.tooltipTextColor,onChange:function onChange(value){_this2.setGlobal({tooltipTextColor:value});}}))),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.formItemY},/*#__PURE__*/index_js_default().createElement("label",null,"\u56FE\u8868\u8272\u5361"),/*#__PURE__*/index_js_default().createElement("div",{className:ThemeItem_index_module.content},/*#__PURE__*/index_js_default().createElement(ChartColors,{disabled:global.isAppTheme?true:false,value:global.chartColors,onChange:function onChange(value){_this2.setGlobal({chartColors:value});},startColor:global.primaryColor}))));}}]);return ThemeItem;}(index_js_.Component);/* harmony default export */ const ViewParamItems_ThemeItem = (ThemeItem);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/popconfirm/style/index.js + 3 modules
var popconfirm_style = __webpack_require__(15165);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/popconfirm/index.js + 3 modules
var popconfirm = __webpack_require__(74757);
// EXTERNAL MODULE: ../my-designer/src/components/View/utils.js
var View_utils = __webpack_require__(74812);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamItems/TextItem/index.jsx
function TextItem_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){TextItem_typeof=function _typeof(obj){return typeof obj;};}else{TextItem_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return TextItem_typeof(obj);}function TextItem_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function TextItem_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){TextItem_ownKeys(Object(source),true).forEach(function(key){TextItem_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{TextItem_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function TextItem_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function TextItem_extends(){TextItem_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return TextItem_extends.apply(this,arguments);}function TextItem_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function TextItem_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function TextItem_createClass(Constructor,protoProps,staticProps){if(protoProps)TextItem_defineProperties(Constructor.prototype,protoProps);if(staticProps)TextItem_defineProperties(Constructor,staticProps);return Constructor;}function TextItem_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)TextItem_setPrototypeOf(subClass,superClass);}function TextItem_setPrototypeOf(o,p){TextItem_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return TextItem_setPrototypeOf(o,p);}function TextItem_createSuper(Derived){var hasNativeReflectConstruct=TextItem_isNativeReflectConstruct();return function _createSuperInternal(){var Super=TextItem_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=TextItem_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return TextItem_possibleConstructorReturn(this,result);};}function TextItem_possibleConstructorReturn(self,call){if(call&&(TextItem_typeof(call)==="object"||typeof call==="function")){return call;}return TextItem_assertThisInitialized(self);}function TextItem_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function TextItem_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function TextItem_getPrototypeOf(o){TextItem_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return TextItem_getPrototypeOf(o);}/**
 * DataItem
 * @author tianyanrong
 * @date 2021/7/5 下午5:21:43
 */// import ReactQuill from 'react-quill';
// import 'react-quill/dist/quill.snow.css';
var TextItem_renderIndex=0;var TextItem_Item=/*#__PURE__*/function(_Base){TextItem_inherits(Item,_Base);var _super=TextItem_createSuper(Item);function Item(){var _this;TextItem_classCallCheck(this,Item);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.getDimensions=function(keyName,data){var _this$props=_this.props,dragDataModel=_this$props.dragDataModel,option=_this$props.option,relations=_this$props.relations,selectedComponentConfig=_this$props.selectedComponentConfig;var values=TextItem_extends([],option.value||[]);var nodeId=selectedComponentConfig.nodeId;var relation=relations[nodeId]||{};var dataSourceType=relation.dataSourceType;if(typeof keyName==="number"){values.splice(keyName,1);}else if(!keyName&&data){values.push(TextItem_objectSpread({},data));}else if(keyName&&data){values.forEach(function(value,index){if(value.keyName===keyName){values[index]=TextItem_objectSpread(TextItem_objectSpread({},value),data);}});}else{var structureKeyName=dragDataModel.structure.keyName;var structureKeyTitle=dragDataModel.structure.title;var structureType=dragDataModel.structure.type;var isHadItem=false;values.forEach(function(item){if(item.keyName===structureKeyName){isHadItem=true;}});if(!isHadItem){values.push({keyName:structureKeyName,title:structureKeyTitle,structureType:structureType});}}return{staticProps:TextItem_extends({},option.staticProps||{},{serviceName:dataSourceType==="api"?relation.dataSourceName:""}),value:values};};_this.onDrop=function(event){var dragPosition=_this.state.dragPosition;if(!dragPosition){return;}event.preventDefault();_this.updatePropsOptions(_this.getDimensions());_this.setState({dragPosition:""});};_this.onSortDrop=function(event,index){var option=_this.props.option;var sortDragPosition=_this.state.sortDragPosition;if(!sortDragPosition&&sortDragPosition!==0){return;}event.preventDefault();var newValue=[];option.value.forEach(function(item,index){if(index===sortDragPosition){newValue.push(TextItem_extends({},option.value[_this.sortDragItem]));}if(index!==_this.sortDragItem){newValue.push(item);}});if(sortDragPosition===option.value.length){newValue.push(option.value[_this.sortDragItem]);}_this.updatePropsOptions({value:newValue,staticProps:option.staticProps});_this.setState({sortDragPosition:""});_this.sortDragItem=null;};_this.getCurrDataModelName=function(){var _this$props2=_this.props,relations=_this$props2.relations,selectedComponentConfig=_this$props2.selectedComponentConfig;var nodeId=selectedComponentConfig.nodeId;return relations&&relations[nodeId]&&relations[nodeId].dataSourceType==="api"&&relations[nodeId].dataSourceName?relations[nodeId].dataSourceName:"";};_this.getCurrDataModel=function(){var dataModels=_this.props.dataModels;var dataModelName=_this.getCurrDataModelName();return dataModels[dataModelName]||{};};_this.getCurrApiData=function(){var dataModel=_this.getCurrDataModel();var apiData=dataModel.apiData||{};return apiData;};_this.updateRelationsApiData=function(data){var _this$props3=_this.props,dispatchEditModel=_this$props3.dispatchEditModel,dataModels=_this$props3.dataModels;var keyName=data.keyName,formatConfig=data.formatConfig;var apiData=_this.getCurrApiData();apiData=TextItem_extends({},apiData||{});apiData[keyName]={formatConfig:formatConfig};var dataModelName=_this.getCurrDataModelName();if(!(dataModelName&&dataModels[dataModelName])){return;}dataModels[dataModelName].apiData=apiData;dispatchEditModel("setState",{dataModels:dataModels});};_this.removeRelationsApiData=function(keyName){var _this$props4=_this.props,dispatchEditModel=_this$props4.dispatchEditModel,dataModels=_this$props4.dataModels;var apiData=_this.getCurrApiData();apiData=TextItem_extends({},apiData||{});if(apiData[keyName]){delete apiData[keyName];}var dataModelName=_this.getCurrDataModelName();if(!(dataModelName&&dataModels[dataModelName])){return;}dataModels[dataModelName].apiData=apiData;dispatchEditModel("setState",{dataModels:dataModels});};_this.removeRenderComponent=function(nodeId){var dispatchEditModel=_this.props.dispatchEditModel;dispatchEditModel("removeComponentConfig",{nodeId:nodeId});};_this.getSortDropContainer=function(index){var sortDragPosition=_this.state.sortDragPosition;return/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dropContainer," ").concat(sortDragPosition>=0&&sortDragPosition===index?ViewParamItems_index_module.dropContainerSelect:""),onDragOver:function onDragOver(event){event.preventDefault();if(!_this.sortDragItem&&_this.sortDragItem!==0||index===_this.sortDragItem||_this.sortDragItem+1===index){return;}_this.setState({sortDragPosition:index});},onDragLeave:function onDragLeave(event){event.preventDefault();if(!_this.sortDragItem&&_this.sortDragItem!==0){return;}_this.setState({sortDragPosition:""});},onDrop:function onDrop(event){_this.onSortDrop(event,index);}});};return _this;}TextItem_createClass(Item,[{key:"render",value:function render(){var _this2=this;var _this$props5=this.props,_this$props5$option=_this$props5.option,option=_this$props5$option===void 0?{}:_this$props5$option,model=_this$props5.model,promiseConfig=_this$props5.promiseConfig,relations=_this$props5.relations,selectedComponentConfig=_this$props5.selectedComponentConfig;var dragPosition=this.state.dragPosition;var values=option.value&&option.value.length?option.value:[];var content=(0,View_utils/* getTextContent */.FB)(option);var optionChildren=option.children||[];var apiData=this.getCurrApiData();// 当显示动态数据模型时，维度可以删除/编辑
var isShowDataModel=promiseConfig&&promiseConfig.isShowDataModel;return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItem},/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.viewParamItemTitleV},/*#__PURE__*/index_js_default().createElement("label",null,option.description?/*#__PURE__*/index_js_default().createElement(tooltip/* default */.Z,{title:option.description},option.label+"(数据项)"):option.label+"(数据项)",option.isCanAdd?/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.labelButtons,onClick:function onClick(){_this2.updatePropsOptions(_this2.getDimensions(null,{isRender:true}));}},/*#__PURE__*/index_js_default().createElement(PlusCircleOutlined/* default */.Z,null)):null),/*#__PURE__*/index_js_default().createElement("div",null,values.map(function(item,index){var currentApiData=apiData[item.keyName]||{};var formatConfig=currentApiData.formatConfig||{};var isFormatConfig=Object.values(formatConfig)&&Object.values(formatConfig).length;var titleOption={name:"title",label:"列标题",value:item.title||""};return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,_this2.getSortDropContainer(index),/*#__PURE__*/index_js_default().createElement("div",{key:index,className:optionChildren&&optionChildren.length?ViewParamItems_index_module.dataItemChildrenBox:"",draggable:true,onDragStart:function onDragStart(event){_this2.sortDragItem=index;},onDragEnd:function onDragEnd(event){_this2.sortDragItem=null;}},/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataItemValueBox," ").concat(ViewParamItems_index_module.greenBox)},/*#__PURE__*/index_js_default().createElement("span",{className:ViewParamItems_index_module.dataItemValue},item.isRender?/*#__PURE__*/index_js_default().createElement(ViewParamItems_StringItem,{className:ViewParamItems_index_module.childrenTop,option:titleOption,onlyInput:true,inputClassName:ViewParamItems_index_module.dataItemStringInput,updatePropsOptions:function updatePropsOptions(keyName,data){_this2.updatePropsOptions(_this2.getDimensions(keyName,data));},parentKeyName:item.keyName,dispatchEditModel:_this2.props.dispatchEditModel,dragDataModel:_this2.props.dragDataModel||{},dataModels:_this2.props.dataModels,selectedComponentConfig:_this2.props.selectedComponentConfig||{}}):/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,isFormatConfig?/*#__PURE__*/index_js_default().createElement(tag/* default */.Z,{color:"green"},"\u683C\u5F0F\u5316"):null,item.title)),/*#__PURE__*/index_js_default().createElement("span",{className:ViewParamItems_index_module.dataItemDelect},isShowDataModel?/*#__PURE__*/index_js_default().createElement(MenuDrop/* default */.Z,{style:{width:"150px"},type:"iconmore",menus:item.isRender?[{label:"移除",callback:function callback(){_this2.updatePropsOptions(_this2.getDimensions(index));_this2.removeRelationsApiData(item.keyName);_this2.removeRenderComponent(item.keyName);}}]:[{label:"格式化数据",isChecked:isFormatConfig,callback:function callback(){_this2.setState({paramEditModalData:TextItem_objectSpread(TextItem_objectSpread({text:"格式化数据"},item),{},{type:item.structureType,formatConfig:formatConfig}),isShowParamEditModal:true});}},{type:"line"},{label:"移除",callback:function callback(){_this2.updatePropsOptions(_this2.getDimensions(index));_this2.removeRelationsApiData(item.keyName);}}],value:item.keyName}):null)),/*#__PURE__*/index_js_default().createElement("div",{className:ViewParamItems_index_module.childrenBox},optionChildren.length?optionChildren.map(function(child,childIndex){var itemProps={option:TextItem_objectSpread(TextItem_objectSpread({},child),{},{value:item[child.name]}),parentKeyName:item.keyName,updatePropsOptions:function updatePropsOptions(keyName,data){_this2.updatePropsOptions(_this2.getDimensions(keyName,data));},key:"".concat(child.type,"_").concat(childIndex),dispatchEditModel:_this2.props.dispatchEditModel,dragDataModel:_this2.props.dragDataModel||{},dataModels:_this2.props.dataModels,selectedComponentConfig:_this2.props.selectedComponentConfig||{},optionIndex:index};if(child.type==="string"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_StringItem,itemProps);}else if(child.type==="boolean"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_BooleanItem,itemProps);}else if(child.type==="select"){return/*#__PURE__*/index_js_default().createElement(SelectItem,itemProps);}else if(child.type==="number"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_NumberItem,itemProps);}return null;}):null)));}),values&&values.length?this.getSortDropContainer(values.length):null,/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(ViewParamItems_index_module.dataItem," ").concat(dragPosition?ViewParamItems_index_module.dataItemSelected:""),onDragOver:function onDragOver(event){if(_this2.sortDragItem||_this2.sortDragItem===0){return;}_this2.onDragOver(event);},onDragLeave:this.onDragLeave,onDrop:this.onDrop}))),/*#__PURE__*/index_js_default().createElement("div",{style:{margin:'0 5px 5px 5px'}},option.extendValues&&option.extendValues.isRichText?/*#__PURE__*/index_js_default().createElement(popconfirm/* default */.Z,{title:"\u786E\u5B9A\u53BB\u9664\u5BCC\u6587\u672C\u5185\u5BB9\u5417\uFF0C\u5BCC\u6587\u672C\u5185\u5BB9\u5C06\u4F1A\u4E22\u5931!\uFF1F",onConfirm:function onConfirm(){var checked=false;_this2.updatePropsOptions({value:option.value,valueResult:option.valueResult,staticProps:option.staticProps,extendValues:{content:content,isRichText:checked,// 是否为富文本内容
isRichTextEdit:checked// 是否处于富文本编辑状态
}});},onCancel:function onCancel(){}},/*#__PURE__*/index_js_default().createElement(es_checkbox/* default */.Z,{checked:option.extendValues&&option.extendValues.isRichText},"\u5BCC\u6587\u672C\u7F16\u8F91")):/*#__PURE__*/index_js_default().createElement(es_checkbox/* default */.Z,{checked:option.extendValues&&option.extendValues.isRichText,onChange:function onChange(e){var checked=e.target.checked;_this2.updatePropsOptions({value:option.value,valueResult:option.valueResult,staticProps:option.staticProps,extendValues:{content:content,isRichText:checked,// 是否为富文本内容
isRichTextEdit:checked// 是否处于富文本编辑状态
}});}},"\u5BCC\u6587\u672C\u7F16\u8F91")),/*#__PURE__*/index_js_default().createElement("div",{style:{margin:'0 5px 5px 5px'}},option.extendValues&&option.extendValues.isRichText?/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{type:option.extendValues&&option.extendValues.isRichTextEdit?'primary':'default',size:"small",onClick:function onClick(e){_this2.updatePropsOptions({value:option.value,valueResult:option.valueResult,staticProps:option.staticProps,extendValues:{content:content,isRichText:true,isRichTextEdit:!(option.extendValues&&option.extendValues.isRichTextEdit)}});}},option.extendValues&&option.extendValues.isRichTextEdit?'完成':'编辑'):/*#__PURE__*/index_js_default().createElement(input/* default.TextArea */.Z.TextArea,{value:content||'',onChange:function onChange(e){var content=e.target.value||'';var dataValues=content.match(/\[\d+\]/g)||[];var isError=false;dataValues.forEach(function(itemValue){var itemIndex=parseInt(itemValue.replace('[','').replace(']',''));if(!values[itemIndex]){isError=itemValue;}});if(isError){message/* default.error */.ZP.error("\"".concat(isError,"\"\u6570\u636E\u7D22\u5F15\u6709\u8BEF\uFF0C\u6570\u636E\u7D22\u5F15\u503C\u6700\u5927\u4E3A").concat(values.length-1,"\uFF01"));return;}_this2.updatePropsOptions({value:option.value,valueResult:option.valueResult,staticProps:option.staticProps,extendValues:{content:content,isRichText:false,isRichTextEdit:false}});}})),/*#__PURE__*/index_js_default().createElement("div",{style:{margin:'0 5px 5px 5px'}})),/*#__PURE__*/index_js_default().createElement(ParamEditModal/* default */.Z,{title:"".concat(this.state.paramEditModalData&&this.state.paramEditModalData.text||""),aliasTitles:['成员','(转化成)显示别名'],isShowDefaultValue:false,isShowFormatValue:true,visible:this.state.isShowParamEditModal,data:this.state.paramEditModalData,dataModels:this.props.dataModels,relations:this.props.relations,isOnlyEditData:true,onCancel:function onCancel(){_this2.setState({isShowParamEditModal:false});},onOk:function onOk(data){_this2.updateRelationsApiData(data);_this2.setState({isShowParamEditModal:false});}}));}}]);return Item;}(Base);/* harmony default export */ const TextItem = (TextItem_Item);
;// CONCATENATED MODULE: ../my-designer/src/components/ViewParamsBar/index.jsx
function ViewParamsBar_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){ViewParamsBar_typeof=function _typeof(obj){return typeof obj;};}else{ViewParamsBar_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return ViewParamsBar_typeof(obj);}function ViewParamsBar_extends(){ViewParamsBar_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return ViewParamsBar_extends.apply(this,arguments);}function ViewParamsBar_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ViewParamsBar_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function ViewParamsBar_createClass(Constructor,protoProps,staticProps){if(protoProps)ViewParamsBar_defineProperties(Constructor.prototype,protoProps);if(staticProps)ViewParamsBar_defineProperties(Constructor,staticProps);return Constructor;}function ViewParamsBar_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)ViewParamsBar_setPrototypeOf(subClass,superClass);}function ViewParamsBar_setPrototypeOf(o,p){ViewParamsBar_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return ViewParamsBar_setPrototypeOf(o,p);}function ViewParamsBar_createSuper(Derived){var hasNativeReflectConstruct=ViewParamsBar_isNativeReflectConstruct();return function _createSuperInternal(){var Super=ViewParamsBar_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=ViewParamsBar_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return ViewParamsBar_possibleConstructorReturn(this,result);};}function ViewParamsBar_possibleConstructorReturn(self,call){if(call&&(ViewParamsBar_typeof(call)==="object"||typeof call==="function")){return call;}return ViewParamsBar_assertThisInitialized(self);}function ViewParamsBar_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function ViewParamsBar_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function ViewParamsBar_getPrototypeOf(o){ViewParamsBar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return ViewParamsBar_getPrototypeOf(o);}/**
 * ViewParamsBar
 * @author tianyanrong
 * @date 2021/7/5 下午6:29:04
 */var getSelectedComponent=function getSelectedComponent(model){return model&&model.selectedComponentConfig?model.selectedComponentConfig:{};};var ViewParamsBar=/*#__PURE__*/function(_Component){ViewParamsBar_inherits(ViewParamsBar,_Component);var _super=ViewParamsBar_createSuper(ViewParamsBar);function ViewParamsBar(){var _this;ViewParamsBar_classCallCheck(this,ViewParamsBar);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={paneType:"data",// data、style
selectedComponent:{}};_this.nameEditInput=function(nodeId,nodeName){var isEditName=_this.state.isEditName;var nodeAliasName;return/*#__PURE__*/index_js_default().createElement("div",{className:index_module.viewParamsBarNameEdit,onDoubleClick:function onDoubleClick(){_this.setState({isEditName:true});}},isEditName?/*#__PURE__*/index_js_default().createElement("div",{className:index_module.nameEditInput},/*#__PURE__*/index_js_default().createElement("input",{placeholder:nodeName,onChange:function onChange(e){var value=e.target.value;nodeAliasName=value;}}),/*#__PURE__*/index_js_default().createElement(CheckOutlined/* default */.Z,{onClick:function onClick(){_this.props.dispatchEditModel("changeComponentName",{nodeAliasName:nodeAliasName,nodeId:nodeId});_this.setState({isEditName:false});}})):nodeName);};return _this;}ViewParamsBar_createClass(ViewParamsBar,[{key:"render",value://preSelectedComponent = {};
function render(){var _this2=this;var _this$props=this.props,_this$props$model=_this$props.model,model=_this$props$model===void 0?{}:_this$props$model,isComponentEdit=_this$props.isComponentEdit;var _this$state=this.state,selectedComponent=_this$state.selectedComponent,paneType=_this$state.paneType;var selectedData=selectedComponent;var propsOptions=selectedData.propsOptions||[];var isInputItem=0;// 获取propsOptions中设置的value
var propsOptionsValue={};var i=0,j=0,propsOptionsLength=propsOptions.length;while(i<propsOptionsLength){j=0;if(propsOptions[i]&&propsOptions[i].children&&propsOptions[i].children.length){// while (j < propsOptions[i].children.length) {
//   const childValue = (propsOptions[i].value && propsOptions[i].value[j]) || {};
//   const childValueKeys = Object.keys(childValue);
//   const childItem = propsOptions[i].children[j];
//   if (childItem) {
//     const childName = childItem.name;
//     propsOptionsValue[childName] =
//     childValueKeys.indexOf(childName) >= 0 ? childValue[childName] : childItem.value;
//   }
//   j++;
// }
}else if(propsOptions[i]){propsOptionsValue[propsOptions[i].name]=propsOptions[i].value;if(propsOptions[i].type==='param'||propsOptions[i].type==='data'){isInputItem=isInputItem+1;propsOptionsValue[propsOptions[i].name]=propsOptions[i];}}i++;}isInputItem=isInputItem===1?true:false;var nodeName=selectedData.nodeAliasName||selectedData.nodeId||"";var isHadParamItem=false;return/*#__PURE__*/index_js_default().createElement(Bar/* default */.Z,{className:index_module.viewParamsBar},/*#__PURE__*/index_js_default().createElement("div",{className:index_module.viewParamsBarName},"\u9875\u9762\u914D\u7F6E",nodeName?": ":"",nodeName?this.nameEditInput(selectedData.parentNodeId,nodeName):null),/*#__PURE__*/index_js_default().createElement("ul",{className:index_module.viewParamsBarTitle},/*#__PURE__*/index_js_default().createElement("li",{className:paneType==="data"?index_module.active:"",onClick:function onClick(){_this2.setState({paneType:"data"});}},"\u5C5E\u6027"),/*#__PURE__*/index_js_default().createElement("li",{className:paneType==="style"?index_module.active:"",onClick:function onClick(){_this2.setState({paneType:"style"});}},"\u6837\u5F0F"),/*#__PURE__*/index_js_default().createElement("li",{className:paneType==="logic"?index_module.active:"",onClick:function onClick(){_this2.setState({paneType:"logic"});}},"\u4EA4\u4E92")),/*#__PURE__*/index_js_default().createElement("div",{className:index_module.barContent,style:{display:paneType==="style"&&nodeName?"":"none"}},/*#__PURE__*/index_js_default().createElement(components_StyleParamsBox,this.props)),/*#__PURE__*/index_js_default().createElement("div",{className:index_module.barContent,style:{display:paneType==="data"&&nodeName?"":"none"}},!propsOptions||propsOptions.length===1&&propsOptions[0].type==='container'?/*#__PURE__*/index_js_default().createElement("div",{style:{height:'100%',textAlign:'center',color:'#999',lineHeight:'250px',fontSize:'14px'}},"\u65E0\u9700\u914D\u7F6E\u5C5E\u6027"):null,propsOptions.map(function(option,index){var itemProps={option:option,value:option.value,allValueObj:propsOptionsValue,key:"".concat(option.type,"_").concat(index),nodeName:selectedData.nodeName,dispatchEditModel:_this2.props.dispatchEditModel,dragDataModel:model.dragDataModel||{},dataModels:model.dataModels,relations:model.relations,selectedComponentConfig:model.selectedComponentConfig||{},promiseConfig:model.promiseConfig,myModelName:model.myModelName,global:model.global,isHadParamItem:isHadParamItem,isComponentEdit:isComponentEdit};// if(option.defaultValueSource === 'global') {
//   itemProps.key = `${itemProps.key}${+new Date()}`;
// }
if(option.type==="param"){isHadParamItem=true;}// props编辑器以不同类型展显
option.label=option.label||option.name;if(option.type==="string"||option.type==="label"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_StringItem,itemProps);}else if(option.type==="boolean"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_BooleanItem,itemProps);}else if(option.type==="pagination"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_PaginationItem,itemProps);}else if(option.type==="sort"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_SortItem,itemProps);}else if(option.type==="data"){return/*#__PURE__*/index_js_default().createElement(DataItem,itemProps);}else if(option.type==="text"){return/*#__PURE__*/index_js_default().createElement(TextItem,itemProps);}else if(option.type==="number"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_NumberItem,itemProps);}else if(option.type==="param"){return/*#__PURE__*/index_js_default().createElement(ParamItem,ViewParamsBar_extends({},itemProps,{dispatch:_this2.props.dispatch,currItem:isInputItem?selectedComponent:null}));}else if(option.type==="select"){return/*#__PURE__*/index_js_default().createElement(SelectItem,itemProps);}else if(option.type==="dimension"){return/*#__PURE__*/index_js_default().createElement(DimensionItem,itemProps);}else if(option.type==="measure"){return/*#__PURE__*/index_js_default().createElement(MeasureItem,ViewParamsBar_extends({},itemProps,{key:+new Date()}));}else if(option.type==="img"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_ImgItem,itemProps);}else if(option.type==="icon"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_IconItem,itemProps);}else if(option.type==="javascript"){return/*#__PURE__*/index_js_default().createElement(JavascriptItem,itemProps);}else if(option.type==="dataValue"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_DataValueItem,itemProps);}else if(option.type==="object"){return/*#__PURE__*/index_js_default().createElement(ObjectItem,itemProps);}else if(option.type==="colors"){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_ColorsItem,ViewParamsBar_extends({},itemProps,{startColor:model.global.primaryColor}));}else if(option.type==="modal"){return/*#__PURE__*/index_js_default().createElement(ModalItem,ViewParamsBar_extends({},itemProps,{dispatch:_this2.props.dispatch}));}else if(option.type==='theme'){return/*#__PURE__*/index_js_default().createElement(ViewParamItems_ThemeItem,itemProps);}return null;// if (this[`build${option.type}`]) {
//   return this[`build${option.type}`](option, index, selectedData);
// }
// return this[`buildstring`](option, index, selectedData);
})),/*#__PURE__*/index_js_default().createElement("div",{className:index_module.barContent,style:{display:paneType==="logic"&&nodeName?"":"none"}},selectedData&&selectedData.nodeId?/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement(ControlItem,{model:model,dispatchEditModel:this.props.dispatchEditModel}),/*#__PURE__*/index_js_default().createElement(EventItem,{model:model,dispatchEditModel:this.props.dispatchEditModel}),/*#__PURE__*/index_js_default().createElement(LogicItem,{model:model,dispatchEditModel:this.props.dispatchEditModel})):null));}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var model=nextProps.model;var selectedComponent=getSelectedComponent(model)||{};var _ref=selectedComponent.viewEditorConfig||{},defaultActiveTabPane=_ref.defaultActiveTabPane;if(selectedComponent.nodeId!==prevState.selectedComponent.nodeId&&defaultActiveTabPane==="style"||defaultActiveTabPane==="data"){return{selectedComponent:selectedComponent,paneType:defaultActiveTabPane};}return{selectedComponent:selectedComponent};}}]);return ViewParamsBar;}(index_js_.Component);/* harmony default export */ const components_ViewParamsBar = (ViewParamsBar);

/***/ }),

/***/ 53028:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ src)
});

// EXTERNAL MODULE: ../my-designer/src/DesignerEdit.jsx
var DesignerEdit = __webpack_require__(41073);
// EXTERNAL MODULE: ../my-designer/src/DesignerView.jsx
var DesignerView = __webpack_require__(420);
// EXTERNAL MODULE: ../my-designer/src/ComponentEdit.jsx
var ComponentEdit = __webpack_require__(43167);
// EXTERNAL MODULE: ../my-cli/node_modules/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__(92910);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);
// EXTERNAL MODULE: ../my-web/src/utils/request.js
var utils_request = __webpack_require__(32478);
;// CONCATENATED MODULE: ../my-designer/src/service.js
function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function buildView(_x){return _buildView.apply(this,arguments);}function _buildView(){_buildView=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(params){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",request({url:'/lowcodeApi/auth/buildPreview',method:'POST',body:params}));case 1:case"end":return _context.stop();}}},_callee);}));return _buildView.apply(this,arguments);}function releaseView(_x2){return _releaseView.apply(this,arguments);}function _releaseView(){_releaseView=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(params){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",request({url:'/lowcodeApi/auth/buildRelease',method:'POST',body:params}));case 1:case"end":return _context2.stop();}}},_callee2);}));return _releaseView.apply(this,arguments);}function saveView(_x3){return _saveView.apply(this,arguments);}function _saveView(){_saveView=_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee3(params){return regenerator_default().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",(0,utils_request/* default */.Z)({method:'POST',url:'/lowcodeApi/auth/page/save',type:'json',body:params}));case 1:case"end":return _context3.stop();}}},_callee3);}));return _saveView.apply(this,arguments);}function saveComponent(_x4){return _saveComponent.apply(this,arguments);}function _saveComponent(){_saveComponent=_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee4(params){return regenerator_default().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",(0,utils_request/* default */.Z)({method:'POST',url:'/lowcodeApi/auth/component/save',type:'json',body:params}));case 1:case"end":return _context4.stop();}}},_callee4);}));return _saveComponent.apply(this,arguments);}function copyView(_x5){return _copyView.apply(this,arguments);}function _copyView(){_copyView=_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee5(params){return regenerator_default().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:return _context5.abrupt("return",(0,utils_request/* default */.Z)({method:'POST',url:'/lowcodeApi/auth/pages/copy',type:'json',body:params}));case 1:case"end":return _context5.stop();}}},_callee5);}));return _copyView.apply(this,arguments);}function service_saveApiDoc(_x6){return _saveApiDoc.apply(this,arguments);}function _saveApiDoc(){_saveApiDoc=_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee6(params){return regenerator_default().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:return _context6.abrupt("return",(0,utils_request/* default */.Z)({method:'POST',url:'/lowcodeApi/auth/api/doc/save',type:'json',body:params}));case 1:case"end":return _context6.stop();}}},_callee6);}));return _saveApiDoc.apply(this,arguments);}function service_queryApiDoc(_x7){return _queryApiDoc.apply(this,arguments);}function _queryApiDoc(){_queryApiDoc=_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee7(params){return regenerator_default().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:return _context7.abrupt("return",(0,utils_request/* default */.Z)({method:'POST',url:'/lowcodeApi/auth/api/doc/query',type:'json',body:params}));case 1:case"end":return _context7.stop();}}},_callee7);}));return _queryApiDoc.apply(this,arguments);}function service_getTheme(_x8){return _getTheme.apply(this,arguments);}function _getTheme(){_getTheme=_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee8(params){return regenerator_default().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:return _context8.abrupt("return",(0,utils_request/* default */.Z)({method:'POST',url:'/lowcodeApi/auth/theme/get',type:'json',body:params}));case 1:case"end":return _context8.stop();}}},_callee8);}));return _getTheme.apply(this,arguments);};
// EXTERNAL MODULE: ../my-designer/src/utils/lessToJson.js
var lessToJson = __webpack_require__(2723);
// EXTERNAL MODULE: ../my-designer/src/utils/parseStaticData.js
var parseStaticData = __webpack_require__(77920);
// EXTERNAL MODULE: ../my-cli/node_modules/lodash/lodash.js
var lodash = __webpack_require__(77982);
var lodash_default = /*#__PURE__*/__webpack_require__.n(lodash);
// EXTERNAL MODULE: ../my-designer/src/utils/paramsUtils.js
var paramsUtils = __webpack_require__(51891);
// EXTERNAL MODULE: ../my-designer/src/utils/getServiceName.js
var getServiceName = __webpack_require__(88289);
;// CONCATENATED MODULE: ../my-designer/src/utils/componentUtils.js
function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}var nodeNameCount={};var setNodeId=function setNodeId(componentName){nodeNameCount[componentName]=(nodeNameCount[componentName]||0)+1;// return `${componentName}${nodeNameCount[componentName]}`;
return"".concat(componentName).concat(+new Date()).concat(nodeNameCount[componentName]).concat(window.accountCode||'');};// 获取组件的描术文件数据
var getDefaultConfigs=function getDefaultConfigs(){var defaultConfigs={};try{defaultConfigs=window.componentDefaultConfigs;}catch(e){}return defaultConfigs;};var newEmptyContainer=function newEmptyContainer(children,props){var nodeId=setNodeId("EmptyContainer");var data={componentName:"EmptyContainer",nodeId:nodeId,//Symbol('nodeId'),
nodeName:nodeId,children:children?[children]:null};if(props){data.props=props;}return data;};var getComponentConfigProps=function getComponentConfigProps(propsOptions){var props={};var staticProps={};propsOptions.forEach(function(item){if(!(item.type==="contenteditable"||item.type==="container")){props[item.name]=item.valueResult||item.value||item.defaultValue;staticProps=_extends({},staticProps,item.staticProps||{});if(item.value&&item.value.dataKeyName){staticProps.serviceName=item.value.dataKeyName;}}if(item.type==='param'&&item.outputTypeRequired&&item.outputTypeRequired[0]){item.outputType=item.outputType||item.outputTypeRequired[0];}});return _extends({},props,staticProps);};var getComponentConfig=function getComponentConfig(packageName,subChildren){var defaultConfigs=getDefaultConfigs()||{};var defaultConfig=defaultConfigs[packageName]&&defaultConfigs[packageName].config||{};var packageInfo=defaultConfig.packageInfo||{};var staticData=lodash_default().clone(defaultConfig.staticData||[]);var propsOptions=lodash_default().clone(defaultConfig.propsOptions||[]);var viewEditorConfig=_extends({},defaultConfig.viewEditorConfig);var defaultStyle=_extends({},defaultConfig.defaultStyle);var componentName=packageInfo.component;if(!propsOptions.length){return{componentName:componentName};}var children=null;propsOptions.map(function(item){if(item.type==="contenteditable"){children={componentName:"ContentEditable",props:item.props};}else if(item.type==="container"){children=newEmptyContainer(subChildren,item.props);}//  else if (item.defaultValue) {
//   props[item.name] = item.defaultValue;
// } else if (item.value) {
//   props[item.name] = item.value;
// }
});if(staticData){propsOptions=(0,parseStaticData/* parseStaticDataForProps */.pG)(propsOptions,staticData);}var props=getComponentConfigProps(propsOptions);var nodeId=setNodeId(componentName);return{nodeId:nodeId,nodeName:nodeId,nodeAliasName:"".concat(packageInfo.name,"_").concat(nodeNameCount[componentName]),componentName:componentName,props:props,children:children?[children]:null,propsOptions:propsOptions,viewEditorConfig:viewEditorConfig,defaultStyle:defaultStyle,//staticData,
packageName:packageInfo.packageName,remoteAppName:packageInfo.remoteAppName||'',remoteEntryPath:packageInfo.remoteEntryPath,version:packageInfo.version};};var componentUtils_addComponentConfig=function addComponentConfig(item,packageName,dragPosition,newComponent){newComponent=newComponent||getComponentConfig(packageName,null);//if (dragPosition) {}
var parentComponent=newEmptyContainer(newComponent,{isParent:true,viewEditorConfig:newComponent.viewEditorConfig||{}});item.children=item.children||[];item.children.splice(item.children.length||0,0,parentComponent);return parentComponent;};/**
 * 修改组件页面配置(componentConfigData)数据
 * @param {*} data 现有的配置信息
 * @param {*} targetNodeId 目标容器id
 * @param {} callback 回调函数
 */var setCurrentComponent=function setCurrentComponent(data,targetNodeId,callback,parent){var newItem;if(data&&data.length){var isFinish=false;data.map(function(item,index){if(item.nodeId===targetNodeId){var result=callback(item,index,parent);if(result){newItem=result;isFinish=true;}}else if(item.children&&item.children.length&&!isFinish){newItem=setCurrentComponent(item.children,targetNodeId,callback,item);}});}return newItem;};/**
 * 获取选中的组件propsOptions数据，去配置他的props属性。
 * @param {*} data 现有的配置信息
 * @param {*} parentNodeId 被选中的父容器nodeId
 */var getSelectedComponentConfig=function getSelectedComponentConfig(data,parentNodeId,relations,scopeNodeIds,stateNodeIds){var selectComponentConfig=null;if(data&&data.length){data.forEach(function(item){if(item.nodeId===parentNodeId){// relationsIdByNodeName 为了兼容老数据
var relationsIdByNodeName=item.children&&item.children[0]&&item.children[0].nodeName;var relationsIdByNodeId=item.children&&item.children[0]&&item.children[0].nodeId;var currentRelations=relations?relations[relationsIdByNodeId]||relations[relationsIdByNodeName]||{}:{};var component=item.children&&item.children[0]?item.children[0]:{};stateNodeIds=[].concat(stateNodeIds||[]);if(currentRelations&&currentRelations.stateNodeId&&(stateNodeIds||[]).indexOf(currentRelations.stateNodeId)===-1){stateNodeIds.push(currentRelations.stateNodeId);}selectComponentConfig={nodeId:component.nodeId,nodeName:component.nodeName,nodeAliasName:component.nodeAliasName,componentName:component.componentName||"",propsOptions:component.propsOptions||[],style:component.style,css:component.css,parentNodeId:parentNodeId,viewEditorConfig:component.viewEditorConfig,relation:currentRelations,//staticData: currentRelations.staticData || component.staticData,
scopeNodeIds:scopeNodeIds,stateNodeIds:stateNodeIds,remoteAppName:component.remoteAppName};}else if(item.children&&item.children.length&&!selectComponentConfig){var relation=relations[item.nodeId];var newScopeNodeIds=scopeNodeIds;if(relation&&relation.isRenderChildren){if(relation.dataSourceType==="api"&&relation.dataSourceName){newScopeNodeIds=[].concat(scopeNodeIds||[],[item.nodeId]);}else if(relation.dataSourceType==="static"&&relation.staticDataModel){newScopeNodeIds=[].concat(scopeNodeIds||[],[item.nodeId]);}}if(relation&&relation.stateNodeId&&(stateNodeIds||[]).indexOf(relation.stateNodeId)===-1){stateNodeIds=[].concat(stateNodeIds||[],[relation.stateNodeId]);}selectComponentConfig=getSelectedComponentConfig(item.children,parentNodeId,relations,newScopeNodeIds,stateNodeIds);}});}return selectComponentConfig;};/**
 * 主题变化，更新默认样式
 * @param {*} data // 组件组合数据
 * @param {*} themeMode // 主题
 */var changeGlobalThemeMode=function changeGlobalThemeMode(data){var themeMode=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"light";if(data&&data.length){data.map(function(item,index){if(item.componentName==="EmptyContainer"&&item.children&&item.children.length===1&&item.children[0].componentName!=="EmptyContainer"&&item.children[0].defaultStyle&&item.children[0].defaultStyle[themeMode]){item.style=_extends({},item.children[0].defaultStyle[themeMode],item.style);item.children[0].style=item.style;}if(item.children&&item.children.length){changeGlobalThemeMode(item.children,themeMode);}});}};/**
 * 过滤配置数据
 * @param {*} data 配置数据
 * @param {*} isNew 粘贴的时候isNew为true,nodeAliasName重新定义, 
 * isNew为false时，是每次刷新编辑器的动作，会主动更新新的propsConfig
 */var addModules=function addModules(data,isNew,_ref){var _ref$relations=_ref.relations,relations=_ref$relations===void 0?{}:_ref$relations,dataModels=_ref.dataModels,callBack=_ref.callBack;(data||[]).forEach(function(item){if(item.componentName){var nodeId;var defaultConfigs=getDefaultConfigs();var defaultConfig=defaultConfigs[item.packageName]&&defaultConfigs[item.packageName].config||{};if(isNew){if(item.componentName!=="EmptyContainer"){item.nodeAliasName="".concat(item.nodeAliasName||defaultConfig.packageInfo&&defaultConfig.packageInfo.name||item.componentName,"_").concat(nodeNameCount[item.componentName]);if(relations&&relations[item.nodeId]){relations[item.nodeId].nodeAliasName=item.nodeAliasName;}}}else{nodeId=item.nodeId;nodeNameCount[item.componentName]=(nodeNameCount[item.componentName]||0)+1;// 更新propsOptions
if(item.componentName!=="EmptyContainer"){var defaultPropsOptions=defaultConfig.propsOptions||[];var packageInfo=defaultConfig.packageInfo||{};var newPropsOptions=[];var oldPropsOptions={};var isAddPropsOptions=false;item.remoteEntryPath=packageInfo.remoteEntryPath;(item.propsOptions||[]).forEach(function(option){oldPropsOptions[option.name]=option;if(option.children&&option.children.length){option.children.forEach(function(child){oldPropsOptions["".concat(option.name,"-").concat(child.name)]=child;});}});defaultPropsOptions.forEach(function(option){var newOption=JSON.parse(JSON.stringify(oldPropsOptions[option.name]?oldPropsOptions[option.name]:option));if(option.children&&option.children.length){newOption.children=[];option.children.forEach(function(child){if(oldPropsOptions["".concat(option.name,"-").concat(child.name)]){newOption.children.push(oldPropsOptions["".concat(option.name,"-").concat(child.name)]);}else{newOption.children.push(child);}});}newPropsOptions.push(newOption);if(option.type==='pagination'||option.type==='sort'){isAddPropsOptions=true;}});// 翻页和排顺类型的特殊处理(与后端接口key相连)
if(isAddPropsOptions&&relations&&relations[nodeId]){newPropsOptions=(0,paramsUtils/* getNewPropsOptionsForKey */.XY)({propsOptions:newPropsOptions,nodeId:nodeId,currRelation:relations[nodeId],dataModels:dataModels,isForPagination:true,isForSort:true});}item.propsOptions=newPropsOptions;if(callBack&&typeof callBack==='function'){callBack(item.propsOptions,relations[nodeId]);}}}}if(item.children&&item.children.length){addModules(item.children,isNew,{relations:relations,dataModels:dataModels,callBack:callBack});}});};var getCurrentComponentFromParent=function getCurrentComponentFromParent(currentParentNode){return currentParentNode[0]&&currentParentNode[0].children&&currentParentNode[0].children[0]&&currentParentNode[0].children[0];};var getChildrenNodes=function getChildrenNodes(item){var childrenNodes=[item.nodeId];if(item.children&&item.children.length){var nodes=[];item.children.forEach(function(childItem){nodes=[].concat(nodes,getChildrenNodes(childItem));});childrenNodes=[].concat(childrenNodes,nodes);}return childrenNodes;};var setInitComponentConfig=function setInitComponentConfig(){return[// 组件配置
{componentName:"EmptyContainer",children:[getComponentConfig("@icode-run/theme")],nodeId:"EmptyContainer_0",props:{isParent:true,viewEditorConfig:{disabledHeightStyle:true}},style:{flex:"auto"}}];};var copyConponent=function copyConponent(_ref2){var _ref2$container=_ref2.container,container=_ref2$container===void 0?[]:_ref2$container,currIndex=_ref2.currIndex,state=_ref2.state;var oldRelation={};var oldDataModel={};var oldNodeIds=getChildrenNodes(container[currIndex]);var nodeString=JSON.stringify(container[currIndex]);(oldNodeIds||[]).forEach(function(nodeId){if(state.relations[nodeId]){oldRelation[nodeId]=state.relations[nodeId];var dataSourceName=oldRelation[nodeId].dataSourceName;var submitDataModelName=oldRelation[nodeId].submitDataModelName;var dataSourceType=oldRelation[nodeId].dataSourceType;var stateNodeId=oldRelation[nodeId].stateNodeId;var scopeNodeId=oldRelation[nodeId].scopeNodeId;if(dataSourceType==="api"&&dataSourceName&&state.dataModels[dataSourceName]){oldDataModel[dataSourceName]=state.dataModels[dataSourceName];}else if(dataSourceType==='state'&&stateNodeId&&!nodeString.match(new RegExp(stateNodeId,'g'))){var stateNodeRelation=state.relations[stateNodeId]||{};var stateNodelDataModel=stateNodeRelation.dataSourceName?state.dataModels[stateNodeRelation.dataSourceName]:null;if(stateNodeRelation.dataSourceType==='api'&&stateNodeRelation.dataSourceName&&stateNodelDataModel){stateNodelDataModel=JSON.parse(JSON.stringify(stateNodelDataModel));stateNodelDataModel.nodeId=nodeId;var newDataSourceName=(0,getServiceName/* default */.Z)(nodeId,stateNodelDataModel);oldDataModel[newDataSourceName];oldRelation[nodeId].dataSourceType==='api';oldRelation[nodeId].dataSourceName=newDataSourceName;}}else if(dataSourceType==='event'&&stateNodeId&&!nodeString.match(new RegExp(stateNodeId,'g'))||dataSourceType==='scope'&&scopeNodeId&&!nodeString.match(new RegExp(scopeNodeId,'g'))){oldRelation[nodeId].dataSourceType===oldRelation[nodeId].staticData?'static':'';oldRelation[nodeId].dataSourceName='';}if(submitDataModelName&&state.dataModels[submitDataModelName]){oldDataModel[submitDataModelName]=state.dataModels[dataSourceName];}}});return{currentNode:[JSON.parse(nodeString)],relations:JSON.parse(JSON.stringify(oldRelation)),dataModels:JSON.parse(JSON.stringify(oldDataModel)),fileName:state.pageInfo.fileName};};var pasteComponent=function pasteComponent(_ref3){var container=_ref3.container,_ref3$copyData=_ref3.copyData,copyData=_ref3$copyData===void 0?{}:_ref3$copyData,_ref3$state=_ref3.state,state=_ref3$state===void 0?{}:_ref3$state,currIndex=_ref3.currIndex;var currentNodeString=JSON.stringify(copyData.currentNode);var nodeIds=currentNodeString.match(/\"nodeId\"\:\"\w+\"/g)||[];nodeIds=nodeIds.map(function(nodeIdValue){return nodeIdValue.replace(/^\"nodeId\"\:\"/,'').replace(/\"$/,'');});var copyDataString=JSON.stringify(copyData);nodeIds.forEach(function(nodeId){var componentName=nodeId.match(/^[A-Za-z]+/)&&nodeId.match(/^[A-Za-z]+/)[0];var newNodeId=setNodeId(componentName);copyDataString=copyDataString.replace(new RegExp(nodeId,'g'),newNodeId);});copyData=JSON.parse(copyDataString);addModules(copyData.currentNode,true,{relations:copyData.relations});// 找到父元素执行复制
if(container){if(currIndex||currIndex===0){container.splice(currIndex+1,0,copyData.currentNode[0]);}else{container.splice(0,0,copyData.currentNode[0]);}}state.dataModels=_objectSpread(_objectSpread({},state.dataModels),copyData.dataModels||{});state.relations=_objectSpread(_objectSpread({},state.relations),copyData.relations||{});var parentNodeId=copyData.currentNode[0].nodeId;nodeIds=null;copyData=null;container=null;return parentNodeId;};
;// CONCATENATED MODULE: ../my-designer/src/model.js
function model_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function model_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){model_ownKeys(Object(source),true).forEach(function(key){model_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{model_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function model_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function model_extends(){model_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return model_extends.apply(this,arguments);}/* harmony default export */ const model = ({namespace:"myDesignerPageModel",state:{global:{},//视图内容的全局变量 (themeMode: dark 深色模式)/
currentScreenCalc:100,// 视图屏幕放大、缩小
applianceOptions:[{// 视图屏幕类型
value:"pc",label:"pc端",style:{width:"100vw",height:"100vh"}},{value:"h5",label:"h5移动端",style:{width:"375px",height:"667px"}},{value:"",label:"auto",style:{}}],currentAppliance:window.localStorage.getItem("viz-designer-currentAppliance"),// 视图屏幕类型
isShowDataSourcePage:false,nodeIdByDrag:null,//当前拖动到哪个node下
dragComponentName:null,// 拖动的组件
selectedEmptyContainerByNodeId:null,stateOptionsConfig:[],// 用于视图配置中的选择state
selectedComponentConfig:null,// 当前选中的容器
currentDataModel:"shippingOrderListQuery",// 视图中当前的数据
dragDataModel:null,// 拖动的数据
componentList:[],// 组件
componentConfig:[],pageInfo:{fileName:"",pageName:""},dataModels:{},// 数据模型
relations:{}// 组件与数据的关联
},effects:{getTheme:/*#__PURE__*/regenerator_default().mark(function getTheme(_ref,_ref2){var payload,put,call,select,res;return regenerator_default().wrap(function getTheme$(_context){while(1){switch(_context.prev=_context.next){case 0:payload=_ref.payload;put=_ref2.put,call=_ref2.call,select=_ref2.select;_context.next=4;return service_getTheme();case 4:res=_context.sent;if(!(res.data&&res.result==='success')){_context.next=8;break;}_context.next=8;return put({type:"setGlobal",payload:model_extends({},res.data,payload)});case 8:return _context.abrupt("return",res);case 9:case"end":return _context.stop();}}},getTheme);}),getComponentData:/*#__PURE__*/regenerator_default().mark(function getComponentData(_ref3,_ref4){var payload,put,call,select,data;return regenerator_default().wrap(function getComponentData$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=_ref3.payload;put=_ref4.put,call=_ref4.call,select=_ref4.select;_context2.next=4;return select(function(state){return state[payload.myModelName]["".concat(payload.serviceName,"Data")];});case 4:data=_context2.sent;return _context2.abrupt("return",data);case 6:case"end":return _context2.stop();}}},getComponentData);}),onBuildView:/*#__PURE__*/regenerator_default().mark(function onBuildView(_ref5,_ref6){var payload,put,call,select,model,pageInfo,timing,content;return regenerator_default().wrap(function onBuildView$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:payload=_ref5.payload;put=_ref6.put,call=_ref6.call,select=_ref6.select;//const pageInfo = yield select(state => state);
model=payload.model||{};pageInfo=model.pageInfo||{};timing=+new Date();content=JSON.stringify({pageName:pageInfo.fileName||"test".concat(timing),pageTitle:pageInfo.pageName||"test".concat(timing),componentConfig:model.componentConfig,dataModels:model.dataModels,globalState:model.global,relations:model.relations});localStorage.setItem("build_cache_data",content);model.handleBuildPreview({content:content,pagesId:pageInfo.pagesId});case 8:case"end":return _context3.stop();}}},onBuildView);}),onReleaseView:/*#__PURE__*/regenerator_default().mark(function onReleaseView(_ref7,_ref8){var payload,put,call,select,model,pageInfo,content;return regenerator_default().wrap(function onReleaseView$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:payload=_ref7.payload;put=_ref8.put,call=_ref8.call,select=_ref8.select;//const pageInfo = yield select(state => state);
model=payload.model||{};pageInfo=model.pageInfo||{};content=JSON.stringify({pageName:pageInfo.fileName,pageTitle:pageInfo.pageName,componentConfig:model.componentConfig,dataModels:model.dataModels,globalState:model.global,relations:model.relations});localStorage.setItem("build_cache_data",content);model.handleBuildRelease({fileName:pageInfo.fileName});case 7:case"end":return _context4.stop();}}},onReleaseView);}),onSaveView:/*#__PURE__*/regenerator_default().mark(function onSaveView(_ref9,_ref10){var payload,put,call,model,pageInfo,options,fileName,pageName,content,contentString,res;return regenerator_default().wrap(function onSaveView$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:payload=_ref9.payload;put=_ref10.put,call=_ref10.call;model=payload.model||{};pageInfo=model.pageInfo||{};options=payload.options||{};fileName=options.fileName||pageInfo.fileName;pageName=options.pageName||pageInfo.pageName;content={pageName:fileName,pageTitle:pageName,componentConfig:model.componentConfig,dataModels:model.dataModels,globalState:model.global,relations:model.relations};contentString=JSON.stringify(content);// console.log('---------save', content);
localStorage.setItem("build_cache_data",contentString);_context5.next=12;return saveView(model_objectSpread(model_objectSpread({pageId:pageInfo.pageId||""},options),{},{content:contentString}));case 12:res=_context5.sent;if(!(res.result==='success'&&res.data)){_context5.next=16;break;}_context5.next=16;return put({type:"setState",payload:{pageInfo:res.data}});case 16:return _context5.abrupt("return",res);case 17:case"end":return _context5.stop();}}},onSaveView);}),saveApiDoc:/*#__PURE__*/regenerator_default().mark(function saveApiDoc(_ref11,_ref12){var payload,put,call,dataModel,res;return regenerator_default().wrap(function saveApiDoc$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:payload=_ref11.payload;put=_ref12.put,call=_ref12.call;dataModel=payload.dataModel||{};_context6.next=5;return service_saveApiDoc(dataModel);case 5:res=_context6.sent;return _context6.abrupt("return",res);case 7:case"end":return _context6.stop();}}},saveApiDoc);}),queryApiDoc:/*#__PURE__*/regenerator_default().mark(function queryApiDoc(_ref13,_ref14){var payload,put,call,res;return regenerator_default().wrap(function queryApiDoc$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:payload=_ref13.payload;put=_ref14.put,call=_ref14.call;_context7.next=4;return service_queryApiDoc(payload.options);case 4:res=_context7.sent;return _context7.abrupt("return",res);case 6:case"end":return _context7.stop();}}},queryApiDoc);}),onCopyView:/*#__PURE__*/regenerator_default().mark(function onCopyView(_ref15,_ref16){var payload,put,call,model,pageInfo,res;return regenerator_default().wrap(function onCopyView$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:payload=_ref15.payload;put=_ref16.put,call=_ref16.call;model=payload.model||{};pageInfo=model.pageInfo||{};_context8.next=6;return copyView(model_objectSpread(model_objectSpread({},payload.options),{},{copyPageId:pageInfo.pageId}));case 6:res=_context8.sent;return _context8.abrupt("return",res);case 8:case"end":return _context8.stop();}}},onCopyView);}),onSaveComponent:/*#__PURE__*/regenerator_default().mark(function onSaveComponent(_ref17,_ref18){var payload,put,call,state,selectedComponentConfig,nodeId,copyData,res;return regenerator_default().wrap(function onSaveComponent$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:payload=_ref17.payload;put=_ref18.put,call=_ref18.call;state=payload.model||{};selectedComponentConfig=state.selectedComponentConfig;nodeId=selectedComponentConfig.nodeId;copyData={};setCurrentComponent(state.componentConfig,nodeId,function(item,itemIndex,parent){copyData=copyConponent({container:[parent],currIndex:0,state:state});return null;});_context9.next=9;return saveComponent(model_objectSpread(model_objectSpread({},payload.options),{},{config:JSON.stringify(copyData)}));case 9:res=_context9.sent;return _context9.abrupt("return",res);case 11:case"end":return _context9.stop();}}},onSaveComponent);})// *onClearBuildView({ payload }, { put, call }) {
//   localStorage.setItem("build_cache_data", "{}");
//   yield put({
//     type: "setState",
//     payload: {
//       componentConfig: setInitComponentConfig(),
//     },
//   });
// },
},reducers:{// 设置全局属性，如深色模式、h5模式等
setGlobal:function setGlobal(state,_ref19){var payload=_ref19.payload;state.global=model_extends({},state.global,payload);// changeGlobalThemeMode(state.componentConfig, state.global.themeMode);
// const selectedNodeId = state.selectedEmptyContainerByNodeId;
// const selectedComponentConfig = getSelectedComponentConfig(
//   state.componentConfig,
//   selectedNodeId,
//   state.relations
// );
return model_objectSpread({},state);},setState:function setState(state,_ref20){var payload=_ref20.payload;return model_objectSpread(model_objectSpread({},state),payload);},//
setModalName:function setModalName(state,_ref21){var payload=_ref21.payload;var modalNames=state.modalNames||[];if(payload.modalName&&!(modalNames.indexOf(payload.modalName)>=0)){modalNames.push(payload.modalName);}return model_objectSpread(model_objectSpread({},state),{},{modalNames:modalNames});},setRenderConfig:function setRenderConfig(state,_ref22){var payload=_ref22.payload;var componentConfig=state.componentConfig;componentConfig.push(payload.renderConfigItem);return model_objectSpread(model_objectSpread({},state),{},{componentConfig:componentConfig});},// 设置选中的Dom图层
changeSelectedEmptyContainer:function changeSelectedEmptyContainer(state,_ref23){var payload=_ref23.payload;var selectedNodeId=payload.selectedEmptyContainerByNodeId;var selectedComponentConfig=getSelectedComponentConfig(state.componentConfig,selectedNodeId,state.relations);return model_objectSpread(model_objectSpread(model_objectSpread({},state),payload),{},{selectedComponentConfig:selectedComponentConfig});},// 新建Dom图层
addComponentConfig:function addComponentConfig(state,_ref24){var payload=_ref24.payload;if(!payload.nodeId||!payload.dragPosition||!state.dragComponentName){return state;}var dragPackageName=state.dragComponentName;var propsConfig=state.propsConfigs&&state.propsConfigs[dragPackageName]||{};var componentType=propsConfig.type;// 插入新组件到componentConfig中
var parentNodeId;setCurrentComponent(state.componentConfig,// 已有配置信息
payload.nodeId,// 目标容器元素ID
function(item,itemIndex,parent){if(item.componentName==="EmptyContainer"){if(componentType==='module'){item.children=item.children||[];parentNodeId=pasteComponent({copyData:propsConfig.config,state:state,container:item.children,currIndex:item.children.length-1});}else if(componentType==='element'){var parentContainer=componentUtils_addComponentConfig(item,dragPackageName,payload.dragPosition);parentNodeId=parentContainer.nodeId;// 新增relations关联数据逻辑
var newItem=parentContainer.children&&parentContainer.children[0];var propsConfigs=state.propsConfigs||{};var _propsConfig=propsConfigs[newItem.packageName]&&propsConfigs[newItem.packageName].config||{};var staticRelationOptions=_propsConfig.staticData?{dataSourceType:"static",dataSourceName:'',staticDataModel:(0,parseStaticData/* getStaticDataModel */.kS)(_propsConfig.staticData),staticData:_propsConfig.staticData}:{};state.relations[newItem.nodeId]=model_objectSpread({isControlNode:_propsConfig.isControlNode||false,nodeAliasName:newItem.nodeAliasName||newItem.nodeId,nodeId:newItem.nodeId},staticRelationOptions);}}return null;});// 选中新搜入后的组件
var selectedComponentConfig=getSelectedComponentConfig(state.componentConfig,parentNodeId,state.relations)||{};// 添加主题时，设置themeMode
var global=state.global;if(selectedComponentConfig.viewEditorConfig&&selectedComponentConfig.viewEditorConfig.themeMode==="dark"){global.themeMode="dark";}changeGlobalThemeMode(state.componentConfig,global.themeMode);return model_objectSpread(model_objectSpread({},state),{},{global:global,dragComponentName:null,selectedComponentConfig:selectedComponentConfig,selectedEmptyContainerByNodeId:parentNodeId});},// 删除Dom图层
removeComponentConfig:function removeComponentConfig(state,_ref25){var payload=_ref25.payload;var oldState=JSON.parse(JSON.stringify(state));var nodeId=payload.nodeId;var removeNodes=[];setCurrentComponent(state.componentConfig,// 已有配置信息
nodeId,// 目标容器元素ID
function(item,itemIndex,parent){if(item.componentName==="EmptyContainer"&&parent&&parent.children[itemIndex]&&parent.children[itemIndex].nodeId===nodeId){parent.children.splice(itemIndex,1);if(parent.children&&!parent.children.length){parent.children=null;}removeNodes=getChildrenNodes(item);}return item;});// 删除关联的relation, 得到关联的dataModels
var removeDataModelNames=[],useDataModelNames=[];(removeNodes||[]).forEach(function(nodeId){var relation=state.relations&&state.relations[nodeId];if(relation){if(relation.dataSourceType==='api'&&relation.dataSourceName||relation.submitDataModelName){removeDataModelNames.push(relation.dataSourceName);}else if(removeNodes.indexOf(relation.scopeNodeId)>=0){useDataModelNames.push({nodeId:relation.scopeNodeId,nodeAliasName:oldState.relations&&oldState.relations[relation.scopeNodeId]&&oldState.relations[relation.scopeNodeId].nodeAliasName});}else if(removeNodes.indexOf(relation.stateNodeId)>=0){useDataModelNames.push({nodeId:relation.stateNodeId,nodeAliasName:oldState.relations&&oldState.relations[relation.stateNodeId]&&oldState.relations[relation.stateNodeId].nodeAliasName});}delete state.relations[nodeId];}});// 删除关联的dataModels
removeDataModelNames.forEach(function(name){if(state.dataModels&&state.dataModels[name]){delete state.dataModels[name];}});if(useDataModelNames.length){return{};}return model_objectSpread(model_objectSpread({},state),{},{selectedEmptyContainerByNodeId:null,selectedComponentConfig:null});},// 移动组件位置
changeComponentPosition:function changeComponentPosition(state,_ref26){var payload=_ref26.payload;var dragNodeId=payload.dragNodeId;var targetNodeId=payload.targetNodeId;var dropPosition=payload.dropPosition;var targetIndex=payload.targetIndex;var currentNode=null;var currentParent=null;setCurrentComponent(state.componentConfig,// 已有配置信息
targetNodeId,// 目标容器元素ID
function(item,itemIndex,parent){// 找到父元素
if(item.nodeId===targetNodeId&&dropPosition==="in"&&item.componentName==="EmptyContainer"){if(item.children&&item.children[0]&&item.children[0].children&&item.children[0].children[0]&&item.children[0].children[0].componentName==="EmptyContainer"){item.children[0].children[0].children=item.children[0].children[0].children||[];currentParent=item.children[0].children[0].children;}else{dropPosition="after";parent.children=parent.children||[];currentParent=parent.children;}}else if((dropPosition==="before"||dropPosition==="after")&&item.nodeId===targetNodeId&&parent.componentName==="EmptyContainer"){parent.children=parent.children||[];currentParent=parent.children;}return null;});// 在父元素中更新移动元素，并删除原来的移动元素
if(currentParent){setCurrentComponent(state.componentConfig,// 已有配置信息
dragNodeId,// 目标容器元素ID
function(item,itemIndex,parent){// 找到移动元素, 并删除元素
if(item.componentName==="EmptyContainer"&&parent&&parent.componentName==="EmptyContainer"&&parent.children[itemIndex]&&parent.children[itemIndex].nodeId===dragNodeId){currentNode=model_extends({},parent.children[itemIndex]);parent.children.splice(itemIndex,1);if(parent.children&&!parent.children.length){parent.children=null;}}else{item.children=null;}// 更新移动元素新位置
if(dropPosition==="in"){currentParent.splice(0,0,currentNode);}else if(dropPosition==="after"){currentParent.splice(targetIndex+1,0,currentNode);}else if(dropPosition==="before"){currentParent.splice(targetIndex,0,currentNode);}return item;});}return model_objectSpread({},state);},// 复制组件
copyComponent:function copyComponent(state,_ref27){var payload=_ref27.payload;var nodeId=payload.nodeId;setCurrentComponent(state.componentConfig,// 已有配置信息
nodeId,// 目标容器元素ID
function(item,itemIndex,parent){var copyData=copyConponent({container:parent.children,currIndex:itemIndex,state:state});pasteComponent({copyData:copyData,state:state,container:parent.children,currIndex:itemIndex});return null;});return model_objectSpread({},state);},// 跨页复制组件
copyComponentToStorage:function copyComponentToStorage(state,_ref28){var payload=_ref28.payload;var nodeId=payload.nodeId;setCurrentComponent(state.componentConfig,nodeId,function(item,itemIndex,parent){var copyData=copyConponent({container:parent.children,currIndex:itemIndex,state:state});localStorage.setItem("copy_page_component",JSON.stringify(copyData));return null;});return model_objectSpread({},state);},// 跨页粘贴组件
pasteComponentFromStorage:function pasteComponentFromStorage(state,_ref29){var payload=_ref29.payload;var nodeId=payload.nodeId;setCurrentComponent(state.componentConfig,nodeId,function(item,itemIndex,parent){var copyData=localStorage.getItem("copy_page_component");if(copyData){var container;var currIndex;if(item.componentName==="EmptyContainer"&&item.children&&item.children[0]&&item.children[0].children&&item.children[0].children[0]&&item.children[0].children[0].componentName==="EmptyContainer"){item.children[0].children[0].children=item.children[0].children[0].children||[];container=item.children[0].children[0].children;}else{parent.children=parent.children||[];container=parent.children;currIndex=itemIndex;}copyData=JSON.parse(copyData);pasteComponent({copyData:copyData,state:state,container:container,currIndex:currIndex});localStorage.setItem("copy_page_component","");}return null;});return model_objectSpread({},state);},// 给Dom图层设置样式
setComponentStyle:function setComponentStyle(state,_ref30){var payload=_ref30.payload;//给选中的组件设置样式
setCurrentComponent(state.componentConfig,// 已有配置信息
payload.nodeId,// 目标容器元素ID
function(item,itemIndex,parent){var componentItem=item.children&&item.children[0];var cssContent=componentItem.css;var lessStyle=(0,lessToJson/* lessToJson */.b5)(cssContent)||{};var currStyle=model_extends({},lessStyle['&'],payload.style);cssContent=(0,lessToJson/* jsonToLess */.l8)(currStyle,cssContent);componentItem.css=cssContent;var newStyle=model_extends({},currStyle);item.style=newStyle;return item;});var selectedComponentConfig=getSelectedComponentConfig(state.componentConfig,payload.nodeId,state.relations);return model_objectSpread(model_objectSpread({},state),{},{selectedComponentConfig:selectedComponentConfig,dragServiceParam:null,dragServiceData:null,dragService:null});},// 给Dom图层设置css(自定义内容)
setComponentCss:function setComponentCss(state,_ref31){var payload=_ref31.payload;//给选中的组件设置样式
setCurrentComponent(state.componentConfig,// 已有配置信息
payload.nodeId,// 目标容器元素ID
function(item,itemIndex,parent){var componentItem=item.children&&item.children[0];componentItem.css=payload.css||"";//item.css = payload.css || "";
return item;});var selectedComponentConfig=getSelectedComponentConfig(state.componentConfig,payload.nodeId,state.relations);return model_objectSpread(model_objectSpread({},state),{},{selectedComponentConfig:selectedComponentConfig,dragServiceParam:null,dragServiceData:null,dragService:null});},// 更新Dom图层名称，图层名称显示逻辑:nodeAliasName || nodeName
changeComponentName:function changeComponentName(state,_ref32){var payload=_ref32.payload;//给选中的组件设置样式
var relations=state.relations;setCurrentComponent(state.componentConfig,// 已有配置信息
payload.nodeId,// 目标容器元素ID
function(item,itemIndex,parent){var componentItem=item.children&&item.children[0];componentItem.nodeAliasName=payload.nodeAliasName;if(relations[componentItem.nodeId]){relations[componentItem.nodeId].nodeAliasName=payload.nodeAliasName;}return item;});var selectedComponentConfig=getSelectedComponentConfig(state.componentConfig,payload.nodeId,state.relations);return model_objectSpread(model_objectSpread({},state),{},{relations:relations,selectedComponentConfig:selectedComponentConfig,dragServiceParam:null,dragServiceData:null,dragService:null});},// 更新图层与数据的关系
updateRelations:function updateRelations(state,_ref33){var payload=_ref33.payload;//给选中的组件设置样式
var relations=state.relations||{};var selectedComponentConfig=state.selectedComponentConfig;relations[payload.nodeId]=model_extends({},relations[payload.nodeId],payload);// if(!relations[payload.nodeId].nodeAliasName) {
//   relations[payload.nodeId].nodeAliasName = selectedComponentConfig.nodeAliasName || selectedComponentConfig.nodeId;
// }
// payload.dataSourceType 数据源类型
selectedComponentConfig.relation=relations[payload.nodeId],selectedComponentConfig.staticData=relations[payload.nodeId].staticData||selectedComponentConfig.staticData;return model_objectSpread(model_objectSpread({},state),{},{relations:relations});},updateRighTextContent:function updateRighTextContent(state,_ref34){var payload=_ref34.payload;//给选中的组件设置样式 
setCurrentComponent(state.componentConfig,// 已有配置信息
payload.nodeId,// 目标容器元素ID
function(item,itemIndex,parent){var componentItem=item.children&&item.children[0];var content=payload.content;var propsOptions=componentItem.propsOptions;propsOptions.forEach(function(option){if(option.type==='text'&&option.extendValues&&option.extendValues.isRichText){option.extendValues.content=content;}});componentItem.propsOptions=propsOptions;return item;});var selectedComponentConfig=getSelectedComponentConfig(state.componentConfig,payload.nodeId,state.relations);return model_objectSpread(model_objectSpread({},state),{},{selectedComponentConfig:selectedComponentConfig});},// 更新图层的props配置信息
updateComponentConfigPropsOptions:function updateComponentConfigPropsOptions(state,_ref35){var payload=_ref35.payload;// 生成data中的render组件数据
var children=[];var global=state.global;var newGlobal=model_extends({},global);var newPropsOptions=JSON.parse(JSON.stringify(payload.newPropsOptions));newPropsOptions.forEach(function(item){var isRenderChildren=false;if(item.beforeValue&&item.value&&item.beforeValue.length===item.value.length){delete item.beforeValue;}if(item.type==="data"&&item.value&&item.value.length){item.value.forEach(function(subItem){if(subItem.isRender){isRenderChildren=true;if(!subItem.keyName){var newContainer=newEmptyContainer(null,{isDisabledColSelected:true});newContainer.type="Column";subItem.keyName=newContainer.nodeId;children.push(newContainer);}}});state.relations[payload.nodeId].isRenderChildren=isRenderChildren;}});setCurrentComponent(state.componentConfig,// 已有配置信息
payload.nodeId,// 目标容器元素ID
function(item,itemIndex,parent){item.propsOptions=newPropsOptions;item.props=getComponentConfigProps(item.propsOptions);item.children=(item.children||[]).concat(children);var richText=payload.richText||{};if(richText.isRichText){parent.props=model_extends({},parent.props,richText);}return item;});var selectedComponentConfig=state.selectedComponentConfig;selectedComponentConfig.propsOptions=newPropsOptions;return model_objectSpread(model_objectSpread({},state),{},{global:newGlobal,selectedComponentConfig:selectedComponentConfig,dragServiceParam:null,dragServiceData:null,dragService:null// dataModels,
});}// addService(state, { payload }) {
//   let serviceConfig = state.serviceConfig;
//   serviceConfig = modelUtils.updateService(serviceConfig, {
//     serviceType: payload.serviceType,
//     parentServiceName: payload.parentServiceName,
//   });
//   return {
//     ...state,
//     serviceConfig,
//   };
// },
// updateServiceConfig(state, { payload }) {
//   let serviceConfig = state.serviceConfig;
//   const serviceConfigPosition = payload.serviceConfigPosition;
//   if (payload.type === "updateParam") {
//     serviceConfig = modelUtils.updateServiceParam(
//       serviceConfig,
//       serviceConfigPosition,
//       state.dragDataModel
//     );
//     const { serviceIndex } = serviceConfigPosition;
//     if (!serviceConfig[serviceIndex].dataModelId) {
//       serviceConfig = modelUtils.updateService(serviceConfig, {
//         serviceIndex: serviceIndex,
//         dataTableName: state.dragDataModel.dataTableName,
//         dataModelId: state.dragDataModel.dataModelId,
//       });
//     }
//   } else if (payload.type === "updateParamLogic") {
//     serviceConfig = modelUtils.updateServiceParamLogic(
//       serviceConfig,
//       payload.serviceConfigPosition,
//       payload.keyName,
//       payload.logic
//     );
//   } else if (payload.type === "removeParam") {
//     serviceConfig = modelUtils.removeServiceParam(
//       serviceConfig,
//       serviceConfigPosition
//     );
//   } else if (payload.type === "updateResponse") {
//     serviceConfig = modelUtils.updateServiceResponse(
//       serviceConfig,
//       serviceConfigPosition,
//       state.dragDataModel
//     );
//     const { serviceIndex } = serviceConfigPosition;
//     if (!serviceConfig[serviceIndex].dataModelId) {
//       serviceConfig = modelUtils.updateService(serviceConfig, {
//         serviceIndex: serviceIndex,
//         dataTableName: state.dragDataModel.dataTableName,
//         dataModelId: state.dragDataModel.dataModelId,
//       });
//     }
//   } else if (payload.type === "updateParamDefaultValue") {
//     const { serviceIndex, paramOptionIndex, value } = serviceConfigPosition;
//     serviceConfig[serviceIndex].paramsOptions[paramOptionIndex].value =
//       value;
//   } else if (payload.type === "updateParamIsUpdateParam") {
//     const { serviceIndex, paramOptionIndex, isUpdateParam } =
//       serviceConfigPosition;
//     serviceConfig[serviceIndex].paramsOptions[
//       paramOptionIndex
//     ].isUpdateParam = isUpdateParam;
//   }
//   return {
//     ...state,
//     serviceConfig,
//     dragDataModel: null,
//   };
// },
}});
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/message/style/index.js + 1 modules
var style = __webpack_require__(35735);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/message/index.js + 3 modules
var message = __webpack_require__(96213);
// EXTERNAL MODULE: ./packages/utils/es/utils.js
var utils = __webpack_require__(562);
// EXTERNAL MODULE: ./packages/utils/es/dataType.js
var dataType = __webpack_require__(61204);
;// CONCATENATED MODULE: ../my-designer/src/myModel.js
function myModel_extends(){myModel_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return myModel_extends.apply(this,arguments);}function myModel_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function myModel_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){myModel_ownKeys(Object(source),true).forEach(function(key){myModel_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{myModel_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function myModel_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}/* harmony default export */ const myModel = ({namespace:"myModel",state:{currentIndex:1},effects:{updateParams:/*#__PURE__*/regenerator_default().mark(function updateParams(_ref,_ref2){var payload,put,select,call;return regenerator_default().wrap(function updateParams$(_context){while(1){switch(_context.prev=_context.next){case 0:payload=_ref.payload;put=_ref2.put,select=_ref2.select,call=_ref2.call;_context.next=4;return put({type:"setState",payload:myModel_objectSpread({},payload)});case 4:return _context.abrupt("return",'success');case 5:case"end":return _context.stop();}}},updateParams);}),request:/*#__PURE__*/regenerator_default().mark(function request(_ref3,_ref4){var payload,put,select,call,_ref5,url,method,_ref5$requestStructur,requestStructures,responseHandle,type,_ref5$apiParams,apiParams,currRelation,serviceName,requestParam,defaultValueParams,structureTypes,state,cacheParams,requestBody,keyName,res,_payload2,_objectSpread3,modelName,modelState,needUpdateStateParams;return regenerator_default().wrap(function request$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:payload=_ref3.payload;put=_ref4.put,select=_ref4.select,call=_ref4.call;_ref5=payload.dataModal||{},url=_ref5.url,method=_ref5.method,_ref5$requestStructur=_ref5.requestStructures,requestStructures=_ref5$requestStructur===void 0?[]:_ref5$requestStructur,responseHandle=_ref5.responseHandle,type=_ref5.type,_ref5$apiParams=_ref5.apiParams,apiParams=_ref5$apiParams===void 0?{}:_ref5$apiParams;currRelation=payload.currRelation,serviceName=payload.serviceName;if(payload&&payload.isDisabledLoading){_context2.next=7;break;}_context2.next=7;return put({type:"setState",payload:myModel_defineProperty({},serviceName+"Loading",true)});case 7:// 计算请求参数: dataModel < state < payload.params
requestParam={},defaultValueParams={},structureTypes={};_context2.next=10;return select(function(state){return state[payload.myModelName];});case 10:state=_context2.sent;// 动态参数数据：在运行时，触发界面元素，引起的参数变化（如：按钮组合组件进行状态搜索）
cacheParams=myModel_extends({},state["".concat(serviceName,"Params")],payload.params);// 处理payload.params参数中的值类型
requestStructures.map(function(item){var defaultValueConfig=apiParams[item.keyName]&&apiParams[item.keyName].defaultValueConfig;var value=(0,paramsUtils/* getDefalutParamValue */.U2)({configInRelation:currRelation.defaultValueConfig&&currRelation.defaultValueConfig[item.keyName],configInDataModel:defaultValueConfig,state:state});if((0,utils/* isValue */.w)(value)){defaultValueParams[item.keyName]=value;}structureTypes[item.keyName]=item.type;return null;});requestParam=myModel_extends({},defaultValueParams,cacheParams);// 修改api的参数默认值时，参数为更新更改的默认值(不受参数动态变化影响)
if(payload.paramAddModelChange){requestParam=myModel_objectSpread(myModel_objectSpread({},requestParam),{},myModel_defineProperty({},payload.paramAddModelChange,defaultValueParams[payload.paramAddModelChange]));}// 参数进行格式化
requestBody=myModel_extends({},requestParam);for(keyName in requestBody){if(apiParams[keyName]&&(0,utils/* isValue */.w)(apiParams[keyName].formatConfig)){requestBody[keyName]=(0,paramsUtils/* getParseValue */.CG)(keyName,apiParams,requestBody[keyName],requestBody);}requestBody[keyName]=(0,dataType/* getOutputValue */.jG)({outputType:structureTypes[keyName],value:requestBody[keyName]});}// 发送请求
_context2.next=19;return (0,utils_request/* default */.Z)({url:url,method:method,type:"json",body:requestBody});case 19:res=_context2.sent;if(responseHandle){try{res=new Function("return ".concat(responseHandle))()(res,message/* default */.ZP,function(){console.log("event for logout");},function(){console.log("event for push");});}catch(e){}}if(!(type==="update")){_context2.next=30;break;}if(!(res&&res.code===0||res.code===200||res.result==="success")){_context2.next=27;break;}_context2.next=25;return put({type:"setState",payload:(_payload2={},myModel_defineProperty(_payload2,"".concat(serviceName,"Params"),{}),myModel_defineProperty(_payload2,serviceName+"Loading",false),myModel_defineProperty(_payload2,"currentIndex",+new Date()),_payload2)});case 25:_context2.next=29;break;case 27:_context2.next=29;return put({type:"setState",payload:myModel_defineProperty({},serviceName+"Loading",false)});case 29:return _context2.abrupt("return",res);case 30:if(!(res.code===0||res.code===200||res.result==="success")){_context2.next=40;break;}// 接口成功后，修改相关联此接口的参数默认值
modelName=state.modelName;_context2.next=34;return select(function(state){return state[modelName];});case 34:modelState=_context2.sent;needUpdateStateParams=(0,paramsUtils/* updateRelationParams */.Ai)(serviceName,res.data,modelState);_context2.next=38;return put({type:"setState",payload:myModel_objectSpread(myModel_objectSpread({},needUpdateStateParams),{},(_objectSpread3={},myModel_defineProperty(_objectSpread3,"".concat(serviceName,"Count"),res.count),myModel_defineProperty(_objectSpread3,"".concat(serviceName,"Data"),res.data),myModel_defineProperty(_objectSpread3,"".concat(serviceName,"Params"),myModel_extends({},requestParam)),myModel_defineProperty(_objectSpread3,serviceName+"Loading",false),_objectSpread3))});case 38:_context2.next=42;break;case 40:_context2.next=42;return put({type:"setState",payload:myModel_defineProperty({},serviceName+"Loading",false)});case 42:return _context2.abrupt("return",res);case 43:case"end":return _context2.stop();}}},request);})},reducers:{setState:function setState(state,_ref6){var payload=_ref6.payload;var payloadArray=Object.keys(payload);var currState=state[payloadArray[0]];if(payloadArray.length===1&&currState&&currState.constructor===Object){payload[payloadArray[0]]=myModel_objectSpread(myModel_objectSpread({},currState||{}),payload[payloadArray[0]]||{});}return myModel_objectSpread(myModel_objectSpread({},state),payload);},pushDefaultValue:function pushDefaultValue(state,_ref7){var payload=_ref7.payload;var propsOption=payload.propsOption,propsOptionValue=payload.propsOptionValue,nodeId=payload.nodeId,currRelation=payload.currRelation;var newState=(0,paramsUtils/* pushDefaultValueToMyModel */.YJ)(state,{propsOption:propsOption,propsOptionValue:propsOptionValue,nodeId:nodeId,currRelation:currRelation});return myModel_objectSpread({},newState);}},subscriptions:{}});
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/config-provider/style/index.js + 1 modules
var config_provider_style = __webpack_require__(83553);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/config-provider/index.js + 4 modules
var config_provider = __webpack_require__(50528);
// EXTERNAL MODULE: consume shared module (default) react@^16.14.0 (singleton) (fallback: ../my-cli/node_modules/react/index.js)
var index_js_ = __webpack_require__(93121);
var index_js_default = /*#__PURE__*/__webpack_require__.n(index_js_);
;// CONCATENATED MODULE: ../my-designer/src/components/View/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const index_module = ({"view":"_-my-designer-src-components-View-index-module__view","viewDark":"_-my-designer-src-components-View-index-module__viewDark","viewContentMain":"_-my-designer-src-components-View-index-module__viewContentMain"});
// EXTERNAL MODULE: ../dom-container/src/components/DomContainer/index.jsx + 4 modules
var DomContainer = __webpack_require__(53013);
// EXTERNAL MODULE: ./packages/utils/es/index.js + 2 modules
var es = __webpack_require__(6369);
// EXTERNAL MODULE: ../my-designer/src/components/View/utils.js
var View_utils = __webpack_require__(74812);
// EXTERNAL MODULE: ../my-cli/node_modules/@emotion/css/dist/emotion-css.esm.js + 8 modules
var emotion_css_esm = __webpack_require__(51497);
// EXTERNAL MODULE: ../my-cli/node_modules/import-remote-module/index.js
var import_remote_module = __webpack_require__(89056);
;// CONCATENATED MODULE: ../my-designer/src/components/View/index.jsx
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}var _templateObject;function View_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function View_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){View_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){View_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0);}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}));}function View_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function View_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){View_ownKeys(Object(source),true).forEach(function(key){View_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{View_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function View_extends(){View_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return View_extends.apply(this,arguments);}function View_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}/**
 * 设计器中的渲染器
 * @author tianyanrong
 * @date 2021/10/8 上午09:22:23
 */var components={};var View=/*#__PURE__*/function(_Component){_inherits(View,_Component);var _super=_createSuper(View);function View(){var _this;_classCallCheck(this,View);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.hadRequestService={};_this.setHeight=function(){if(_this.node){setTimeout(function(){if(_this.node&&_this.node.parentNode){_this.node.parentNode.style.minHeight=_this.node.clientHeight+'px';}});}};_this.showComponents=function(componentConfig,props,scopeData,isFormItem){var model=props.model,myModel=props.myModel,dispatch=props.dispatch,dispatchEditModel=props.dispatchEditModel,_props$importComponen=props.importComponents,importComponents=_props$importComponen===void 0?{}:_props$importComponen;var modelName=model.modelName;var myModelName=model.myModelName;var relations=model.relations;var dataModels=model.dataModels;var hadRequestService=_this.hadRequestService||{};if(!(componentConfig&&componentConfig.length)){return null;}return componentConfig.map(function(item,index){if(item.remoteEntryPath&&item.remoteAppName){(0,import_remote_module/* setRemoteConfig */.xl)(View_defineProperty({},item.remoteAppName,"".concat(item.remoteEntryPath,"?v=").concat(+new Date())));}var MyComponent=item.componentName==="EmptyContainer"?DomContainer/* default */.Z:components[item.packageName]||importComponents[item.packageName]||(0,import_remote_module/* default */.ZP)("".concat(item.remoteAppName,"/").concat(item.componentName));components[item.packageName||'EmptyContainer']=MyComponent;var defaultProps=View_extends({},item.props);var emptyContainerProps={};// EmptyContainer的props
var componentProps={};// 组件的props
var currRelation=relations[item.nodeId]||{};var dataSourceName=currRelation.dataSourceName;var childrens=[];// 子元素
var isCanRenderChildren=item.componentName==="EmptyContainer"?true:false;// 是否能渲染的子元素
var dataSourceType=currRelation.dataSourceType;var isFormContainer=item.componentName==="Form";// 是否为Form表单容器
var textContent={};(item.propsOptions||[]).forEach(function(propsOption){//this.propsOptionsObj[item.nodeId] = this.propsOptionsObj[item.nodeId] || {};
//this.propsOptionsObj[item.nodeId][propsOption.name] = propsOption;
if(propsOption.type==="javascript"){componentProps[propsOption.name]=(0,View_utils/* setJavascriptProps */.NJ)(propsOption)[propsOption.name];componentProps.javascriptString=propsOption.value;}else if(propsOption.type==="icon"){componentProps[propsOption.name]=(0,View_utils/* getIconProps */.L1)(propsOption.value);}else if(propsOption.type==="param"){componentProps[propsOption.name]=(0,View_utils/* setParamProps */.cN)(propsOption,item.nodeId,{myModel:myModel,myModelName:myModelName,modelName:modelName,model:model,relations:relations,dispatch:dispatch,isFormItem:isFormItem});}else if(propsOption.type==="text"){textContent={name:propsOption.name,values:propsOption.value,content:(0,View_utils/* getTextContent */.FB)(propsOption)};}else if(propsOption.type==="data"&&propsOption.value&&propsOption.value.length){componentProps[propsOption.name]=(0,View_utils/* setDataChildrenProps */.nP)(propsOption,{children:item.children,renderCallback:function renderCallback(currentContainer,data){var scopeName="".concat(currRelation.nodeId);return _this.showComponents(currentContainer,props,View_objectSpread(View_objectSpread({},scopeData),{},View_defineProperty({},scopeName,data)));}})[propsOption.name];componentProps.dataCount=myModel["".concat(dataSourceName,"Count")];}else if(propsOption.type==="container"){isCanRenderChildren=true;}else if(propsOption.type==="modal"){componentProps[propsOption.name]=(0,View_utils/* setModalProps */.So)(item.nodeId,{myModel:myModel,myModelName:myModelName,dispatch:dispatch,currRelation:currRelation});}});// 渲染子元素
if(isCanRenderChildren&&item.children&&item.children.length){childrens=_this.showComponents(item.children,props,scopeData,isFormItem||isFormContainer);}//let ItemCss = 
if(item.componentName==="EmptyContainer"){emptyContainerProps.levelIndex=index;emptyContainerProps.dispatchEditModel=dispatchEditModel;emptyContainerProps.model=model;// style
var isParent=item.props&&item.props.isParent;if(isParent){var childCss=item.children&&item.children[0]&&item.children[0].css;if(childCss){emptyContainerProps.style=(0,lessToJson/* getPartCss */.mP)(childCss,true);}}}else{if(item.css){var cssContent=(0,lessToJson/* getPartCss */.mP)(item.css,false)||'';componentProps.className=(0,emotion_css_esm/* css */.iv)(_templateObject||(_templateObject=_taggedTemplateLiteral(["",""])),cssContent);}// componentProps.setGlobalState = (payload) => {
//   const newGlobal = Object.assign({}, model.global, payload);
//   dispatchEditModel("setState", {
//     global: newGlobal,
//   });
//   const selectedComponentConfig = model.selectedComponentConfig;
//   if (
//     selectedComponentConfig &&
//     selectedComponentConfig.componentName === "Theme"
//   ) {
//     const newPropsOptions = JSON.parse(
//       JSON.stringify(model.selectedComponentConfig.propsOptions)
//     );
//     newPropsOptions.forEach((propOption) => {
//       if (propOption.defaultValueSource === "global") {
//         if (propOption.objectOptions) {
//           const currValue = {};
//           propOption.objectOptions.map((optionItem) => {
//             if (newGlobal[optionItem.name]) {
//               currValue[optionItem.name] = newGlobal[optionItem.name];
//             }
//           });
//           propOption.value = currValue;
//         } else if (newGlobal[propOption.name]) {
//           propOption.value = newGlobal[propOption.name];
//         }
//       }
//     });
//     dispatchEditModel("updateComponentConfigPropsOptions", {
//       componentName: selectedComponentConfig.componentName,
//       nodeId: selectedComponentConfig.nodeId,
//       newPropsOptions,
//     });
//   }
// };
if(dataSourceType==="scope"&&currRelation.scopeNodeId){var scopeName="".concat(currRelation.scopeNodeId);var currScopeData=scopeData[scopeName];var newScopeData=(0,es/* parseApiData */.Xe)(currScopeData,(0,View_utils/* getCurrApiData */.k)(currRelation.scopeNodeId,relations,dataModels),null,null);componentProps.data=newScopeData||[];}else if(dataSourceType==="state"&&dataSourceName){componentProps.data=myModel["".concat(dataSourceName,"Data")]||[];}else if(dataSourceType==="event"&&currRelation.stateNodeId){componentProps.data=myModel["".concat(currRelation.stateNodeId,"EventData")]||[];}else if(dataSourceType==="static"){componentProps.data=(0,parseStaticData/* getStaticData */.rp)(currRelation.staticData);}else if(dataSourceType==="api"&&dataSourceName){var data=myModel["".concat(dataSourceName,"Data")];var currDataModel=dataModels[dataSourceName];var dimensionKeyName=defaultProps.dimensionConfig&&defaultProps.dimensionConfig[0]&&defaultProps.dimensionConfig[0].keyName;componentProps.onFetch=/*#__PURE__*/function(){var _ref=View_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee(payload,isDisabledLoading){return regenerator_default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch({type:"".concat(myModelName,"/request"),payload:{myModelName:myModelName,dataModal:currDataModel,currRelation:currRelation,serviceName:dataSourceName,params:payload,isDisabledLoading:isDisabledLoading}});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();var componentData=(0,es/* parseApiData */.Xe)(data,(0,View_utils/* getCurrApiData */.k)(item.nodeId,relations,dataModels),dimensionKeyName,defaultProps.measureConfig);componentProps.data=componentData||[];componentProps.isLoading=myModel["".concat(dataSourceName,"Loading")]||false;// 触发初始API请求
if(!hadRequestService["".concat(dataSourceName).concat(currDataModel&&currDataModel.dynamicName||'')]&&(0,View_utils/* getCanInitRequest */.gQ)(currDataModel)){hadRequestService["".concat(dataSourceName).concat(currDataModel&&currDataModel.dynamicName||'')]=true;dispatch({type:"".concat(myModelName,"/request"),payload:{myModelName:myModelName,dataModal:currDataModel,currRelation:currRelation,serviceName:dataSourceName}});}}}// 显示逻辑渲染
var isDisplay=true;var displayLogic=currRelation.displayLogic||{};if(displayLogic.dataFrom&&displayLogic.targetValues){var dataFrom=displayLogic.dataFrom;var targetValues=displayLogic.targetValues||[];if(dataFrom&&dataFrom[0]==='state'&&dataFrom[1]&&dataFrom[2]){var stateName="".concat(dataFrom[1],"DefaultValue");var logicValue=myModel[stateName]&&myModel[stateName][dataFrom[2]];isDisplay=targetValues.indexOf(logicValue)>=0;}}if(item.componentName==="EmptyContainer"&&item.props&&item.props.isParent&&!(childrens&&childrens[0])){isDisplay=false;}if(!isDisplay){return null;}// 绑定事件解析
var currentSubmitApiEvents={};var currentEvents={};if(currRelation.events&&currRelation.events.length){currRelation.events.map(function(item){if(item.eventName&&item.eventType&&item.eventContent){currentEvents[item.eventName]=currentEvents[item.eventName]||[];currentEvents[item.eventName].push(item);}});var key;componentProps.events=componentProps.events||{};for(key in currentEvents){var callback=(0,View_utils/* getEventCallBack */.te)(currentEvents[key],{model:model,scopeData:scopeData,relations:relations,dataModels:dataModels,myModelName:myModelName,modelName:modelName,dispatch:dispatch});if(["submitSuccess","submitError","submitComplete"].indexOf(key)>=0){currentSubmitApiEvents[key]=callback;}else{componentProps.events[key]=callback;}}}// 设置onSubmit属性
if(currRelation.submitDataModelName){componentProps.submitData=myModel["".concat(currRelation.submitDataModelName,"Params")];componentProps.onSubmit=/*#__PURE__*/View_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee2(){var res;return regenerator_default().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return dispatch({type:"".concat(myModelName,"/request"),payload:{myModelName:myModelName,dataModal:dataModels[currRelation.submitDataModelName],currRelation:currRelation,serviceName:currRelation.submitDataModelName}});case 2:res=_context2.sent;if(res.code===200&&currentSubmitApiEvents.submitSuccess&&typeof currentSubmitApiEvents.submitSuccess==="function"){currentSubmitApiEvents.submitSuccess(res.msg||"");}else if(res.code!==200&&currentSubmitApiEvents.submitError&&typeof currentSubmitApiEvents.submitError==="function"){currentSubmitApiEvents.submitError(res.msg||"");}if(currentSubmitApiEvents.submitComplete&&typeof currentSubmitApiEvents.submitComplete==="function"){currentSubmitApiEvents.submitComplete(res.msg||"");}return _context2.abrupt("return",res);case 6:case"end":return _context2.stop();}}},_callee2);}));}if(textContent&&textContent.content){componentProps[textContent.name]=(0,View_utils/* getTextContentData */.$Y)(componentProps.data,textContent)||'';}else if(textContent.name){componentProps[textContent.name]='';}try{return/*#__PURE__*/index_js_default().createElement(MyComponent,View_extends({nodeName:item.nodeId,key:item.componentName==="EmptyContainer"&&scopeData?"".concat(item.nodeId,"_").concat(model.dragComponentName,"_").concat(model.selectedEmptyContainerByNodeId):item.nodeId,nodeId:item.nodeId},defaultProps,emptyContainerProps,componentProps,{global:model.global,isEditor:true}),childrens&&childrens.length?childrens:null);}catch(e){return null;}});};_this.dataValue={};_this.preData={};_this.childrenContent=[];return _this;}_createClass(View,[{key:"componentDidMount",value:function componentDidMount(){this.setHeight();}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.setHeight();}},{key:"render",value:function render(){var _this2=this;var _this$props=this.props,model=_this$props.model,myModel=_this$props.myModel,dispatchEditModel=_this$props.dispatchEditModel;console.log('-------myModel',myModel);console.log('-------model',model);var componentConfig=model.componentConfig||[];var childrenContent=this.showComponents([componentConfig[0]],this.props);var isDark=model.global&&model.global.themeMode==="dark";return/*#__PURE__*/index_js_default().createElement("div",{className:isDark?"".concat(index_module.view," ").concat(index_module.viewDark):index_module.view,ref:function ref(node){return _this2.node=node;},nodetype:"column",onClick:function onClick(){// dispatchEditModel("setState", {
//   selectedEmptyContainerByNodeId: "",
//   selectedComponentConfig: null,
// });
}},/*#__PURE__*/index_js_default().createElement(config_provider/* default */.ZP,{prefixCls:"custom"},childrenContent));}}]);return View;}(index_js_.Component);/* harmony default export */ const components_View = (View);
;// CONCATENATED MODULE: ../my-designer/src/index.js
function src_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){src_typeof=function _typeof(obj){return typeof obj;};}else{src_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return src_typeof(obj);}function src_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function src_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){src_ownKeys(Object(source),true).forEach(function(key){src_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{src_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function src_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function src_extends(){src_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return src_extends.apply(this,arguments);}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key];}}return target;}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}return target;}function src_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function src_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function src_createClass(Constructor,protoProps,staticProps){if(protoProps)src_defineProperties(Constructor.prototype,protoProps);if(staticProps)src_defineProperties(Constructor,staticProps);return Constructor;}function src_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)src_setPrototypeOf(subClass,superClass);}function src_setPrototypeOf(o,p){src_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return src_setPrototypeOf(o,p);}function src_createSuper(Derived){var hasNativeReflectConstruct=src_isNativeReflectConstruct();return function _createSuperInternal(){var Super=src_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=src_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return src_possibleConstructorReturn(this,result);};}function src_possibleConstructorReturn(self,call){if(call&&(src_typeof(call)==="object"||typeof call==="function")){return call;}return src_assertThisInitialized(self);}function src_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function src_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function src_getPrototypeOf(o){src_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return src_getPrototypeOf(o);}/**
 * 设计器模块
 * @param importComponents 依赖的组件
 * @param singleComponentName 单个组件显示时，组件名称
 * @param componentList 组件列表，当singleComponentName有值时，这个可以为数组
 * @param componentDefaultConfigs 依赖的组件的描述文件数据
 * @param dataModels 数据模型
 * @author tianyanrong
 */var Designer=/*#__PURE__*/function(_Component){src_inherits(Designer,_Component);var _super=src_createSuper(Designer);function Designer(){var _this;src_classCallCheck(this,Designer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.models=[];return _this;}src_createClass(Designer,[{key:"componentDidMount",value:function componentDidMount(){var _this$props=this.props,connect=_this$props.connect,app=_this$props.app,importComponents=_this$props.importComponents,singleComponentName=_this$props.singleComponentName,componentList=_this$props.componentList,componentObj=_this$props.componentObj,componentDefaultConfigs=_this$props.componentDefaultConfigs,dataModels=_this$props.dataModels,designer=_this$props.designer,componentConfig=_this$props.componentConfig,_this$props$globalSta=_this$props.globalState,globalState=_this$props$globalSta===void 0?{}:_this$props$globalSta,promiseConfig=_this$props.promiseConfig,type=_this$props.type,_this$props$relations=_this$props.relations,relations=_this$props$relations===void 0?{}:_this$props$relations,_this$props$pageInfo=_this$props.pageInfo,pageInfo=_this$props$pageInfo===void 0?{}:_this$props$pageInfo,handleBuildPreview=_this$props.handleBuildPreview,handleBuildRelease=_this$props.handleBuildRelease,queryPages=_this$props.queryPages,handleCopyPage=_this$props.handleCopyPage,_this$props$userInfo=_this$props.userInfo,userInfo=_this$props$userInfo===void 0?{}:_this$props$userInfo,reat=_objectWithoutProperties(_this$props,["connect","app","importComponents","singleComponentName","componentList","componentObj","componentDefaultConfigs","dataModels","designer","componentConfig","globalState","promiseConfig","type","relations","pageInfo","handleBuildPreview","handleBuildRelease","queryPages","handleCopyPage","userInfo"]);// if(!auth()) {
//   return;
// }
window.componentDefaultConfigs=componentDefaultConfigs;window.accountCode=userInfo.accountCode||'';var vizDesignerModelName="vizDesignerModel".concat(designer||'');var renderViewModelName="renderViewModel".concat(designer||'');// 修改页面时，初始化myModel中的state数据
var myModelDefaultValueState={};if(componentConfig&&componentConfig.length){addModules(componentConfig,false,{relations:relations,dataModels:dataModels,callBack:function callBack(propsOptions,currentRelation){var defaultValueConfig=currentRelation&&currentRelation.defaultValueConfig||{};if(Object.keys(defaultValueConfig).length){var propsOptionsObj={};propsOptions.forEach(function(item){propsOptionsObj[item.name]=item;});var key;for(key in defaultValueConfig){if(defaultValueConfig[key]&&propsOptionsObj[key]&&propsOptionsObj[key].type==='param'){myModelDefaultValueState=src_extends({},myModelDefaultValueState,(0,paramsUtils/* pushDefaultValueToMyModel */.YJ)(myModelDefaultValueState,{propsOption:propsOptionsObj[key],propsOptionValue:propsOptionsObj[key]&&propsOptionsObj[key].value,nodeId:currentRelation.nodeId,currRelation:currentRelation}));}}}}});}var newVizDesignerModel=src_extends({},model,src_objectSpread({namespace:vizDesignerModelName,state:src_extends({},model.state,src_objectSpread(src_objectSpread(src_objectSpread({propsConfigs:componentDefaultConfigs,componentList:componentList,//isStaticData: isStaticData,
type:type,dataModels:dataModels||{},relations:relations},pageInfo&&pageInfo.fileName?{pageInfo:pageInfo}:{}),{},{myModelName:renderViewModelName,modelName:vizDesignerModelName,promiseConfig:promiseConfig||{isShowComponentList:true,isCanRemoveComponent:true,isShowDataModel:true},componentConfig:componentConfig&&componentConfig.length?componentConfig:setInitComponentConfig()},globalState?{global:globalState}:{}),{},{handleBuildPreview:handleBuildPreview,handleBuildRelease:handleBuildRelease,queryPages:queryPages,handleCopyPage:handleCopyPage,userInfo:userInfo}))},singleComponentName?{}:{subscriptions:{setup:function setup(_ref){var history=_ref.history,dispatch=_ref.dispatch;//当页面还没有主题，或页面主题继承应用主题时，设置主题为应用主题
if(!Object.keys(globalState).length||globalState&&globalState.isAppTheme){dispatch({type:'getTheme'});}}}}));var newRenderViewModel=src_extends({},myModel,{namespace:renderViewModelName,state:src_objectSpread(src_objectSpread({},myModelDefaultValueState),{},{modelName:vizDesignerModelName})});app.model(newVizDesignerModel);app.model(newRenderViewModel);this.models.push(newVizDesignerModel);this.models.push(newRenderViewModel);var Component;if(type==='view'){Component=DesignerView/* default */.Z;}else if(singleComponentName){Component=ComponentEdit/* default */.Z;}else{Component=DesignerEdit/* default */.Z;}var newVizDesigner=connect(function(model){return{model:model[vizDesignerModelName],modelName:vizDesignerModelName,renderViewModelName:renderViewModelName,component:src_objectSpread({importComponents:importComponents,singleComponentName:singleComponentName,componentList:componentList},reat)};})(Component);var newRenderView=connect(function(model){return{myModel:model[renderViewModelName],myModelName:renderViewModelName,modelName:vizDesignerModelName,component:src_objectSpread({importComponents:importComponents,singleComponentName:singleComponentName},reat)};})(components_View);this.setState({myComponent:/*#__PURE__*/(0,index_js_.createElement)(newVizDesigner,{style:this.props.style,app:app,renderView:function renderView(props){return/*#__PURE__*/(0,index_js_.createElement)(newRenderView,src_objectSpread(src_objectSpread({},props),{},{app:app}));}})});}},{key:"componentWillUnmount",value:function componentWillUnmount(){var app=this.props.app;if(this.models&&this.models.length){this.models.forEach(function(model){app.unmodel(model.namespace);});}}},{key:"render",value:function render(){var _ref2=this.state||{},myComponent=_ref2.myComponent;return myComponent?/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,myComponent):null;}}]);return Designer;}(index_js_.Component);/* harmony default export */ const src = (Designer);

/***/ }),

/***/ 12530:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ language)
});

;// CONCATENATED MODULE: ../my-designer/src/language/chinese.js
/* harmony default export */ const chinese = ({sumTypes:{total:'总和',average:'平均值',count:'计数',countDifferent:'计数(不同)'}});
;// CONCATENATED MODULE: ../my-designer/src/language/index.js
/* harmony default export */ const language = (chinese);

/***/ }),

/***/ 88289:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (function(nodeId,dataModel){return"".concat(dataModel.type).concat(nodeId);});

/***/ }),

/***/ 2723:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "b5": () => (/* binding */ lessToJson),
/* harmony export */   "l8": () => (/* binding */ jsonToLess),
/* harmony export */   "mP": () => (/* binding */ getPartCss)
/* harmony export */ });
var lessToJson=function lessToJson(){var content=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';if(!content){return{};}// 类名加上引号
var newContent=content.replace(/[a-zA-Z0-Z&-_> ]+\:*[a-zA-Z0-Z&-_]*\s*{/g,function(value){var newValue=value.replace(/\{+/,'');newValue=newValue.replace(/\:/g,'|');return"\"".concat(newValue,"\"{");});// 样式的value加上引号
newContent=newContent.replace(/\:(.(?!(;|{)))*.(\;|\n|\})/g,function(value){var newValue=value.replace(/\:\s*/g,': "');newValue=newValue.replace(/\;/g,'",');newValue=newValue.replace(/\n/g,'"\n');newValue=newValue.replace(/\}/g,'" }');return newValue;});// 样式属性碰到双单词，由“-”换在大写
newContent=newContent.replace(/\w+\-\w+\s*\:/g,function(value){return value.replace(/\-\w/,function(subValue){return subValue.replace(/\-/,'').toUpperCase();});});newContent=newContent.replace(/\{/g,': {');newContent=newContent.replace(/\}/g,'},');return new Function("return {".concat(newContent,"}"))();};var beforeNames=['margin','padding','border','background','font'];var jsonToLess=function jsonToLess(styleJson){var lessContent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var selfStyle='';beforeNames.forEach(function(name){if(styleJson[name]&&styleJson[name]){var newName=name.replace(/[A-Z]/g,function(value){return'-'+value.toLowerCase();});selfStyle+="    ".concat(newName,": ").concat(styleJson[name],";\n");}});Object.keys(styleJson).forEach(function(name){if(beforeNames.indexOf(name)===-1&&styleJson[name]){var newName=name.replace(/[A-Z]/g,function(value){return'-'+value.toLowerCase();});selfStyle+="    ".concat(newName,": ").concat(styleJson[name],";\n");}});var selfCss="&{\n".concat(selfStyle,"\n}");var newContent=lessContent;if(lessContent.indexOf('&{')>=0||lessContent.indexOf('& {')>=0){var selfEndIndex=lessContent.indexOf('}');newContent=newContent.substring(selfEndIndex+1);}newContent="".concat(selfCss,"\n").concat(newContent);return newContent.replace(/\n+/g,'\n');};var parentStyleName=["width","height","marginLeft","marginTop","marginRight","marginBottom","margin","flex","position","top","left","right","bottom"];var getPartCss=function getPartCss(content,isParent){var lessStyle=lessToJson(content);var parentStyle={};var itemStyle={};var currStyle=lessStyle['&']||{};var itemCss='';Object.keys(currStyle).forEach(function(name){if(parentStyleName.indexOf(name)>=0){parentStyle[name]=currStyle[name];}else{itemStyle[name]=currStyle[name];}});if(!isParent){itemCss=jsonToLess(itemStyle,content);itemStyle=null;lessStyle=null;currStyle=null;return itemCss;}else{itemStyle=null;lessStyle=null;currStyle=null;return parentStyle;}};

/***/ }),

/***/ 51891:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Ai": () => (/* binding */ updateRelationParams),
/* harmony export */   "CG": () => (/* binding */ getParseValue),
/* harmony export */   "Rq": () => (/* binding */ getIsDataParams),
/* harmony export */   "U2": () => (/* binding */ getDefalutParamValue),
/* harmony export */   "XY": () => (/* binding */ getNewPropsOptionsForKey),
/* harmony export */   "YJ": () => (/* binding */ pushDefaultValueToMyModel)
/* harmony export */ });
/* unused harmony exports setApiDefaultValue, setEventDefaultValue */
/* harmony import */ var _icode_run_utils_es___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6369);
/* harmony import */ var _icode_run_utils_es_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(562);
/* harmony import */ var _icode_run_utils_es_dataType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(61204);
function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}// 判断是否为绑定数据字段属性
var getIsDataParams=function getIsDataParams(item){return item.type==="data"||item.type==="dimension"||item.type==="measure"||item.type==="param"||item.type==="text";};// 为参数的默认值为“api反回数据类型”设置值
var setApiDefaultValue=function setApiDefaultValue(){var defaultValueConfig=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var state=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var ruleValue=defaultValueConfig.ruleValue;if(defaultValueConfig.ruleType==="api"&&ruleValue&&ruleValue[0]&&ruleValue[1]){var targetParams={};if(state){targetParams=state["".concat(ruleValue[0],"Data")];}var value=targetParams&&targetParams[0]&&targetParams[0][ruleValue[1]];return _objectSpread(_objectSpread({},defaultValueConfig),{},{value:value});}return defaultValueConfig;};// 为参数的默认值为“event”设置值
var setEventDefaultValue=function setEventDefaultValue(){var defaultValueConfig=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var state=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var ruleValue=defaultValueConfig.ruleValue;if(defaultValueConfig.ruleType==="event"&&ruleValue&&ruleValue[0]&&ruleValue[1]){var targetParams={};targetParams=state["".concat(ruleValue[0],"EventData")];var value=targetParams&&targetParams[0]&&targetParams[0][ruleValue[1]];return _objectSpread(_objectSpread({},defaultValueConfig),{},{value:value});}return defaultValueConfig;};// 获取请求参数的值
// export const getParamDefaultValue = (defaultValueConfig) => {
//   let newValue = "";
//   if (defaultValueConfig) {
//     const defaultValueRuleType = defaultValueConfig.ruleType;
//     const defaultValueRuleValue = defaultValueConfig.ruleValue;
//     if (defaultValueRuleType === "static") {
//       newValue = defaultValueRuleValue;
//     } else if (defaultValueRuleType === "cookie") {
//       newValue = getDefaultValue("cookie", defaultValueRuleValue);
//     } else if (defaultValueRuleType === "global") {
//       newValue = getDefaultValue("global", defaultValueRuleValue);
//     } else if (defaultValueRuleType === "dynamic") {
//       newValue = getDefaultValue("dynamic", defaultValueRuleValue);
//     } else if (defaultValueRuleType === "api" || defaultValueRuleType === "event") {
//       newValue = defaultValueConfig.value;
//     }
//   }
//   return newValue;
// };
// 获取请求参数的值
var getDefalutParamValue=function getDefalutParamValue(_ref){var _ref$configInDataMode=_ref.configInDataModel,configInDataModel=_ref$configInDataMode===void 0?{}:_ref$configInDataMode,_ref$configInRelation=_ref.configInRelation,configInRelation=_ref$configInRelation===void 0?{}:_ref$configInRelation,_ref$state=_ref.state,state=_ref$state===void 0?{}:_ref$state;var value;var defaultValueConfig=configInRelation.ruleType&&(0,_icode_run_utils_es_utils__WEBPACK_IMPORTED_MODULE_2__/* .isValue */ .w)(configInRelation.ruleValue)?configInRelation:configInDataModel;// 设置参数值：为默认值类型为“api”设置它的值
defaultValueConfig=setApiDefaultValue(defaultValueConfig,state);// 为参数的默认值为“event”设置值
defaultValueConfig=setEventDefaultValue(defaultValueConfig,state);if(defaultValueConfig){value=(0,_icode_run_utils_es___WEBPACK_IMPORTED_MODULE_0__/* .getParamDefaultValue */ .Cn)(defaultValueConfig);}return value;};// 获取格式化后的数据
var getParseValue=function getParseValue(keyName,currRelationApiParams,value,data){var newValue=(0,_icode_run_utils_es_utils__WEBPACK_IMPORTED_MODULE_2__/* .isValue */ .w)(value)?value:"";var keyValueObj=currRelationApiParams[keyName]||{};var formatConfig=keyValueObj.formatConfig;if(formatConfig){var key;for(key in formatConfig){var formatRuleType=key;var formatRuleValue=formatConfig[key];newValue=(0,_icode_run_utils_es___WEBPACK_IMPORTED_MODULE_0__/* .getValueFormat */ .Cf)(newValue,formatRuleType,formatRuleValue,keyName,data);}}return newValue;};var getNewPropsOptionsForKey=function getNewPropsOptionsForKey(_ref2){var propsOptions=_ref2.propsOptions,nodeId=_ref2.nodeId,currRelation=_ref2.currRelation,dataModels=_ref2.dataModels,isForPagination=_ref2.isForPagination,isForSort=_ref2.isForSort,callback=_ref2.callback;var newPropsOptions=[];var currIndex={};var keyLables=_objectSpread(_objectSpread({},isForPagination?{limit:"每页条数",offset:"当页位置"}:{}),isForSort?{orderKey:"排序字段",orderType:"排序方式",order:'排序'}:{});var typeKeys=_objectSpread(_objectSpread({},isForPagination?{pagination:["limit","offset"]}:{}),isForSort?{sort:["order"]}:{});var paginationValues={};if((currRelation.dataSourceType==="api"||currRelation.dataSourceType==="state")&&currRelation.dataSourceName){var dataModel=dataModels[currRelation.dataSourceName];var requestStructures=dataModel.requestStructures;requestStructures.forEach(function(item){if(item.key&&Object.keys(keyLables).indexOf(item.key)>=0){paginationValues[item.key]=[{keyName:item.keyName,title:item.title,structureType:item.type,nodeId:nodeId,serviceName:currRelation.dataSourceName,isTriggerRequest:true}];}if(isForSort&&['orderKey','orderType'].indexOf(item.key)>=0){paginationValues['order']=paginationValues['order']||[];paginationValues['order'].push({keyName:item.keyName,title:item.title,structureType:item.type,nodeId:nodeId,serviceName:currRelation.dataSourceName,isTriggerRequest:true,transformType:{index:paginationValues['order'].length}});typeKeys.sort=['order'];keyLables.order='排序';}if(isForSort&&item.key==='order'){paginationValues['order']=[{keyName:item.keyName,title:item.title,structureType:item.type,nodeId:nodeId,serviceName:currRelation.dataSourceName,isTriggerRequest:true}];typeKeys.sort=['order'];keyLables.order='排序';}});}propsOptions.forEach(function(item,index){if(Object.keys(keyLables).indexOf(item.name)===-1){newPropsOptions.push(item);}if(Object.keys(typeKeys).indexOf(item.type)>=0){if(item.value){typeKeys[item.type].forEach(function(keyName){var options={};if(keyName==='order'){options.outputTypeRequired=['[orderKey, orderType]','[[orderKey, orderType]]'];options.outputType='[orderKey, orderType]';}else if(["limit","offset"].indexOf(keyName)>=0){options.outputTypeRequired=['number'];options.outputType='number';}else{options.outputTypeRequired=['string'];options.outputType='string';}//if(paginationValues[keyName]) {
var newPropItem=_objectSpread(_objectSpread({name:keyName,label:keyLables[keyName],type:"param",length:keyName==='order'?2:1,isCloseTop:true},options),paginationValues[keyName]?{value:paginationValues[keyName]}:{});newPropsOptions.push(newPropItem);if(callback&&typeof callback==="function"){callback(_extends({},newPropItem));}//}
});}}});return newPropsOptions;};var pushDefaultValueToMyModel=function pushDefaultValueToMyModel(state,_ref3){var propsOption=_ref3.propsOption,propsOptionValue=_ref3.propsOptionValue,nodeId=_ref3.nodeId,currRelation=_ref3.currRelation;if(propsOption.type!=="param"){return _objectSpread({},state);}var newState=_extends({},state);var defaultValueConfig=currRelation.defaultValueConfig||{};var currDefaultValueconfig=defaultValueConfig[propsOption.name];var isHadDefaultValue=currDefaultValueconfig&&currDefaultValueconfig.ruleType&&(0,_icode_run_utils_es_utils__WEBPACK_IMPORTED_MODULE_2__/* .isValue */ .w)(currDefaultValueconfig.ruleValue);// 初始化DefaultValue的默认值
var defaultValueStateName="".concat(nodeId,"DefaultValue");var newDefaultValue=newState[defaultValueStateName]||{};if(isHadDefaultValue){// 设置参数值：给默认值类型是“api”设置它的值
if(currDefaultValueconfig.ruleType==="api"){currDefaultValueconfig=setApiDefaultValue(currDefaultValueconfig,state);}newDefaultValue[propsOption.name]=(0,_icode_run_utils_es___WEBPACK_IMPORTED_MODULE_0__/* .getParamDefaultValue */ .Cn)(currDefaultValueconfig);}else if(newDefaultValue[propsOption.name]){delete newDefaultValue[propsOption.name];}newState[defaultValueStateName]=newDefaultValue;// 初始化Params的默认值
if(propsOptionValue&&propsOptionValue.length){propsOptionValue.forEach(function(valueItem){var serviceName=valueItem.serviceName;if(isHadDefaultValue){// 设置参数值：给默认值类型是“api”设置它的值
if(currDefaultValueconfig.ruleType==="api"){currDefaultValueconfig=setApiDefaultValue(currDefaultValueconfig,state);}// 参数值根据组件的默认值转译成需要的格式
var paramValue=(0,_icode_run_utils_es_dataType__WEBPACK_IMPORTED_MODULE_1__/* .getOutputValue */ .jG)({outputType:valueItem.structureType,value:(0,_icode_run_utils_es___WEBPACK_IMPORTED_MODULE_0__/* .getParamDefaultValue */ .Cn)(currDefaultValueconfig),targetIndex:valueItem.transformType&&(0,_icode_run_utils_es_utils__WEBPACK_IMPORTED_MODULE_2__/* .isValue */ .w)(valueItem.transformType.index)?valueItem.transformType.index:null,valueSplit:valueItem.transformType&&valueItem.transformType.join?valueItem.transformType.join:''});newState["".concat(serviceName,"Params")]=newState["".concat(serviceName,"Params")]||{};newState["".concat(serviceName,"Params")][valueItem.keyName]=paramValue;}else if(newState["".concat(serviceName,"Params")]&&newState["".concat(serviceName,"Params")][valueItem.keyName]){delete newState["".concat(serviceName,"Params")][valueItem.keyName];}});}return newState;};var updateRelationParams=function updateRelationParams(serviceName,resData,modelState){var needUpdateParams={};var dataModels=modelState.dataModels;Object.keys(dataModels).forEach(function(dataModelName){var dataModel=dataModels[dataModelName]||{};var apiParams=dataModel.apiParams||{};Object.keys(apiParams).forEach(function(keyName){var defaultValueConfig=apiParams[keyName]&&apiParams[keyName].defaultValueConfig||{};if(defaultValueConfig.ruleType==='api'&&defaultValueConfig.ruleValue&&defaultValueConfig.ruleValue[0]===serviceName){var data=resData&&resData[0]||{};needUpdateParams["".concat(dataModelName,"Params")]=_extends(_defineProperty({},defaultValueConfig.ruleValue[1],data[defaultValueConfig.ruleValue[1]]),needUpdateParams["".concat(dataModelName,"Params")]);}});});return needUpdateParams;};

/***/ }),

/***/ 77920:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "fL": () => (/* binding */ parselistData),
/* harmony export */   "kS": () => (/* binding */ getStaticDataModel),
/* harmony export */   "pG": () => (/* binding */ parseStaticDataForProps),
/* harmony export */   "rp": () => (/* binding */ getStaticData)
/* harmony export */ });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(77982);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(18231);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var parselistData=function parselistData(dataDescription,rowMax){var data=[];var newRowMax=rowMax||dataDescription.length-1;var rowIndex=0;var _loop=function _loop(){var rowItem={key:rowIndex};var rowData=dataDescription[rowIndex+1];(rowData||[]).forEach(function(colData,colIndex){rowItem[colIndex]=colData||'';});data.push(rowItem);rowIndex++;};while(rowIndex<newRowMax){_loop();}return{titles:dataDescription&&dataDescription[0]||[],data:data};};var _getStaticDataModel=function _getStaticDataModel(dataDescription){var responseStructures=[];var dimensionStructures=[];var measureStructures=[];var dataTitles=dataDescription&&dataDescription[0];var dataContent=dataDescription&&dataDescription[1];if(dataTitles&&dataContent&&dataContent.length&&dataContent.length===dataTitles.length){dataContent.forEach(function(value,index){var item={keyName:index+'',title:dataTitles[index]};if(Number(value)==value){item.type='number';measureStructures.push(item);}else if(moment__WEBPACK_IMPORTED_MODULE_1___default()(value).valueOf()){item.type='date';dimensionStructures.push(item);}else{item.type='string';dimensionStructures.push(item);}responseStructures.push(item);});}return{requestStructures:[].concat(dimensionStructures,measureStructures),responseStructures:responseStructures,title:'静态数据'};};var _getStaticData=function _getStaticData(dataDescription){var staticData=[];dataDescription.forEach(function(rowData,rowIndex){if(rowIndex>0){var rowItem={};(rowData||[]).map(function(colData,colIndex){rowItem[colIndex+'']=colData;});staticData.push(rowItem);}});return staticData;};var getStaticDataModel=_getStaticDataModel;var getStaticData=_getStaticData;var parseStaticDataForProps=function parseStaticDataForProps(propsOptions,dataDescription){var staticDataModel=_getStaticDataModel(dataDescription);var dataPropsValue=[];var measurePropsValue=[];var dimensionPropsValue=[{autoDimensions:true,structureType:'string',keyName:0+'',title:'维度'}];(staticDataModel.responseStructures||[]).map(function(item){var newItem={keyName:item.keyName,title:item.title,structureType:item.type};dataPropsValue.push(newItem);if(item.type==='number'){measurePropsValue.push(_objectSpread(_objectSpread({},newItem),{},{collectType:'总和',chartType:'bar'}));}});return propsOptions.map(function(item){if(item.type==='data'||item.type==='text'){item.value=dataPropsValue;}else if(item.type==='measure'){item.value=measurePropsValue;}else if(item.type==='dimension'){item.value=dimensionPropsValue;}return item;});};

/***/ }),

/***/ 19512:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ apiDoc)
});

// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/result/style/index.js + 1 modules
var style = __webpack_require__(68315);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/result/index.js + 5 modules
var result = __webpack_require__(4305);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/space/style/index.js + 1 modules
var space_style = __webpack_require__(2544);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/space/index.js + 1 modules
var space = __webpack_require__(55700);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/button/style/index.js + 1 modules
var button_style = __webpack_require__(85793);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/button/index.js
var es_button = __webpack_require__(31481);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/message/style/index.js + 1 modules
var message_style = __webpack_require__(35735);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/message/index.js + 3 modules
var message = __webpack_require__(96213);
// EXTERNAL MODULE: ../my-cli/node_modules/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__(92910);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);
// EXTERNAL MODULE: consume shared module (default) react@^16.14.0 (singleton) (fallback: ../my-cli/node_modules/react/index.js)
var index_js_ = __webpack_require__(93121);
var index_js_default = /*#__PURE__*/__webpack_require__.n(index_js_);
;// CONCATENATED MODULE: ../my-web/src/pages/apiDoc/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const index_module = ({"page":"_-my-web-src-pages-apiDoc-index-module__page","sidebar":"_-my-web-src-pages-apiDoc-index-module__sidebar","content":"_-my-web-src-pages-apiDoc-index-module__content","topTools":"_-my-web-src-pages-apiDoc-index-module__topTools","btnItems":"_-my-web-src-pages-apiDoc-index-module__btnItems","btnItem":"_-my-web-src-pages-apiDoc-index-module__btnItem","flex":"_-my-web-src-pages-apiDoc-index-module__flex","reverseLayout":"_-my-web-src-pages-apiDoc-index-module__reverseLayout"});
// EXTERNAL MODULE: ../my-web/src/utils/request.js
var utils_request = __webpack_require__(32478);
;// CONCATENATED MODULE: ../my-web/src/pages/apiDoc/service.js
/**
 * Service
 * @author
 */var queryAipDoc=function queryAipDoc(options){return new Promise(function(resolve,reject){(0,utils_request/* default */.Z)({method:'POST',url:'/lowcodeApi/auth/apiDoc/query',type:'json',body:options}).then(function(res){resolve(res);});});};var saveAipDoc=function saveAipDoc(options){return new Promise(function(resolve,reject){(0,utils_request/* default */.Z)({method:'POST',url:'/lowcodeApi/auth/apiDoc/save',type:'json',body:options}).then(function(res){resolve(res);});});};var removeAipDoc=function removeAipDoc(options){return new Promise(function(resolve,reject){(0,utils_request/* default */.Z)({method:'POST',url:'/lowcodeApi/auth/apiDoc/remove',type:'json',body:options}).then(function(res){resolve(res);});});};var changeAuthor=function changeAuthor(options){return new Promise(function(resolve,reject){request({method:'POST',url:'/lowcodeApi/auth/apiDoc/changeAuthor',type:'json',body:options}).then(function(res){resolve(res);});});};
// EXTERNAL MODULE: ../my-cli/node_modules/react-redux/es/index.js + 19 modules
var es = __webpack_require__(15238);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/tree/style/index.js + 1 modules
var tree_style = __webpack_require__(61489);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/tree/index.js + 22 modules
var tree = __webpack_require__(64119);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/modal/style/index.js + 1 modules
var modal_style = __webpack_require__(84389);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/modal/index.js + 16 modules
var modal = __webpack_require__(88217);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/input/style/index.js + 1 modules
var input_style = __webpack_require__(60418);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/input/index.js + 29 modules
var input = __webpack_require__(40704);
;// CONCATENATED MODULE: ../my-web/src/pages/apiDoc/SideBar/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const SideBar_index_module = ({"leftSiderTree":"_-my-web-src-pages-apiDoc-SideBar-index-module__leftSiderTree","title":"_-my-web-src-pages-apiDoc-SideBar-index-module__title","search":"_-my-web-src-pages-apiDoc-SideBar-index-module__search","treeBox":"_-my-web-src-pages-apiDoc-SideBar-index-module__treeBox","li":"_-my-web-src-pages-apiDoc-SideBar-index-module__li","liTitle":"_-my-web-src-pages-apiDoc-SideBar-index-module__liTitle"});
// EXTERNAL MODULE: ../my-cli/node_modules/@ant-design/icons/es/icons/ExclamationCircleOutlined.js + 1 modules
var ExclamationCircleOutlined = __webpack_require__(16874);
// EXTERNAL MODULE: ../my-designer/src/components/MenuDrop/index.jsx + 1 modules
var MenuDrop = __webpack_require__(48482);
;// CONCATENATED MODULE: ../my-web/src/pages/apiDoc/SideBar/index.jsx
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}var Search=input/* default.Search */.Z.Search;var SideBar_confirm=modal/* default.confirm */.Z.confirm;var LeftSider=/*#__PURE__*/function(_Component){_inherits(LeftSider,_Component);var _super=_createSuper(LeftSider);function LeftSider(){var _this;_classCallCheck(this,LeftSider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.getTreeData=function(){var data=_this.props.data;var dataObj={};data.forEach(function(item,index){dataObj[item.moduleName]=dataObj[item.moduleName]||{key:item.moduleName,title:item.moduleName,url:'',children:[]};dataObj[item.moduleName].children.push({key:item.apiDocId,title:item.title,url:item.url,apiDocId:item.apiDocId});});return{treeData:Object.values(dataObj),expandedKeys:Object.keys(dataObj)};};_this.onSelect=function(selectedId){var onSelect=_this.props.onSelect;if(onSelect&&typeof onSelect==='function'){onSelect(selectedId);}};return _this;}_createClass(LeftSider,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,selectedKeys=_this$props.selectedKeys,onNew=_this$props.onNew,onCopy=_this$props.onCopy,onEdit=_this$props.onEdit,onRemove=_this$props.onRemove,isEdit=_this$props.isEdit;var _this$getTreeData=this.getTreeData(),_this$getTreeData$tre=_this$getTreeData.treeData,treeData=_this$getTreeData$tre===void 0?[]:_this$getTreeData$tre,_this$getTreeData$exp=_this$getTreeData.expandedKeys,expandedKeys=_this$getTreeData$exp===void 0?[]:_this$getTreeData$exp;return/*#__PURE__*/index_js_default().createElement("div",{className:SideBar_index_module.leftSiderTree},/*#__PURE__*/index_js_default().createElement("div",{className:SideBar_index_module.treeBox},/*#__PURE__*/index_js_default().createElement(tree/* default */.Z,{key:expandedKeys.join(','),showLine:{showLeafIcon:false},showIcon:false,defaultExpandAll:true,autoExpandParent:true,selectedKeys:selectedKeys||[],blockNode:true,titleRender:function titleRender(nodeData){var menus=[{label:'修改',callback:function callback(e){if(onEdit&&typeof onEdit==='function'){onEdit(nodeData.apiDocId);}}}];menus=[].concat(menus,[{label:'复制',callback:function callback(e){if(onCopy&&typeof onCopy==='function'){onCopy(nodeData.apiDocId);}}},{label:'删除',callback:function callback(){if(onRemove&&typeof onRemove==='function'){SideBar_confirm({title:'是否删除此接口?',icon:/*#__PURE__*/index_js_default().createElement(ExclamationCircleOutlined/* default */.Z,null),content:"\u63A5\u53E3\u540D\u79F0\uFF1A".concat(nodeData.title),onOk:function onOk(){onRemove(nodeData.apiDocId);},onCancel:function onCancel(){}});}}}]);return/*#__PURE__*/index_js_default().createElement(MenuDrop/* default */.Z,{style:{width:'110px',marginLeft:'110px'},type:"iconmore",bindContextmenu:true,desibledChecked:true,showDropCallback:function showDropCallback(e){_this2.onSelect(nodeData.apiDocId);},menus:menus},/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(SideBar_index_module.li," ").concat(nodeData.url?'':SideBar_index_module.liTitle)},/*#__PURE__*/index_js_default().createElement("h3",null,nodeData.title),nodeData.url?/*#__PURE__*/index_js_default().createElement("h4",null,nodeData.url):null));},treeData:treeData,onSelect:function onSelect(selectedKeys,e){_this2.onSelect(selectedKeys[0]);}})));}}]);return LeftSider;}(index_js_.Component);/* harmony default export */ const SideBar = (LeftSider);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/tag/style/index.js + 1 modules
var tag_style = __webpack_require__(18431);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/tag/index.js + 1 modules
var tag = __webpack_require__(55207);
;// CONCATENATED MODULE: ../my-web/src/pages/apiDoc/Detail/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const Detail_index_module = ({"detail":"_-my-web-src-pages-apiDoc-Detail-index-module__detail","table":"_-my-web-src-pages-apiDoc-Detail-index-module__table","subTr":"_-my-web-src-pages-apiDoc-Detail-index-module__subTr","subItem":"_-my-web-src-pages-apiDoc-Detail-index-module__subItem","requied":"_-my-web-src-pages-apiDoc-Detail-index-module__requied"});
;// CONCATENATED MODULE: ../my-web/src/pages/apiDoc/Detail/index.jsx
function Detail_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){Detail_typeof=function _typeof(obj){return typeof obj;};}else{Detail_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return Detail_typeof(obj);}function Detail_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function Detail_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function Detail_createClass(Constructor,protoProps,staticProps){if(protoProps)Detail_defineProperties(Constructor.prototype,protoProps);if(staticProps)Detail_defineProperties(Constructor,staticProps);return Constructor;}function Detail_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)Detail_setPrototypeOf(subClass,superClass);}function Detail_setPrototypeOf(o,p){Detail_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return Detail_setPrototypeOf(o,p);}function Detail_createSuper(Derived){var hasNativeReflectConstruct=Detail_isNativeReflectConstruct();return function _createSuperInternal(){var Super=Detail_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=Detail_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return Detail_possibleConstructorReturn(this,result);};}function Detail_possibleConstructorReturn(self,call){if(call&&(Detail_typeof(call)==="object"||typeof call==="function")){return call;}return Detail_assertThisInitialized(self);}function Detail_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function Detail_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function Detail_getPrototypeOf(o){Detail_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return Detail_getPrototypeOf(o);}/**
 * apps
 * @author tianyanrong
 * @date 2022/6/15 下午3:22:25
 */var Detail=/*#__PURE__*/function(_Component){Detail_inherits(Detail,_Component);var _super=Detail_createSuper(Detail);function Detail(){var _this;Detail_classCallCheck(this,Detail);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};return _this;}Detail_createClass(Detail,[{key:"render",value:function render(){var _this$props$detail=this.props.detail,detail=_this$props$detail===void 0?{}:_this$props$detail;return/*#__PURE__*/index_js_default().createElement("div",{className:Detail_index_module.detail},/*#__PURE__*/index_js_default().createElement("h2",null,detail.title),/*#__PURE__*/index_js_default().createElement("p",null,/*#__PURE__*/index_js_default().createElement("span",null,"Url:"),detail.url),/*#__PURE__*/index_js_default().createElement("p",null,/*#__PURE__*/index_js_default().createElement("span",null,"Method:"),detail.method),/*#__PURE__*/index_js_default().createElement("p",null,/*#__PURE__*/index_js_default().createElement("span",null,"Headers:"),/*#__PURE__*/index_js_default().createElement("table",{className:Detail_index_module.table},/*#__PURE__*/index_js_default().createElement("tr",null,/*#__PURE__*/index_js_default().createElement("th",{style:{width:'20%'}},"KeyName"),/*#__PURE__*/index_js_default().createElement("th",null,"Value")),Object.keys(detail.headers||{}).map(function(key){return/*#__PURE__*/index_js_default().createElement("tr",null,/*#__PURE__*/index_js_default().createElement("td",null,key),/*#__PURE__*/index_js_default().createElement("td",null,detail.headers[key]));}))),/*#__PURE__*/index_js_default().createElement("p",null,/*#__PURE__*/index_js_default().createElement("span",null,"Request Param:"),/*#__PURE__*/index_js_default().createElement("table",{className:Detail_index_module.table},/*#__PURE__*/index_js_default().createElement("tr",null,/*#__PURE__*/index_js_default().createElement("th",{style:{width:'20%'}},"KeyName"),/*#__PURE__*/index_js_default().createElement("th",{style:{width:'10%'}},"Type"),/*#__PURE__*/index_js_default().createElement("th",{style:{width:'5%'}},"IsRequied"),/*#__PURE__*/index_js_default().createElement("th",null,"Comment")),(detail.requestStructures||[]).map(function(item){if(item.keyName==='manager'){item.type='[]';item.children=[{keyName:'aaa',type:'string',title:'名称'}];}return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("tr",null,/*#__PURE__*/index_js_default().createElement("td",null,item.keyName,item.key?/*#__PURE__*/index_js_default().createElement(tag/* default */.Z,{style:{marginLeft:'10px',lineHeight:'16px'},color:"gold"},item.key):null),/*#__PURE__*/index_js_default().createElement("td",null,item.type),/*#__PURE__*/index_js_default().createElement("td",{align:"center"},item.isRequied?/*#__PURE__*/index_js_default().createElement("span",{className:Detail_index_module.requied},"*"):''),/*#__PURE__*/index_js_default().createElement("td",null,item.title)),item.children&&item.children.length?item.children.map(function(subItem){return/*#__PURE__*/index_js_default().createElement("tr",{className:Detail_index_module.subTr},/*#__PURE__*/index_js_default().createElement("td",null,/*#__PURE__*/index_js_default().createElement("span",{className:Detail_index_module.subItem}),subItem.keyName,subItem.key?/*#__PURE__*/index_js_default().createElement(tag/* default */.Z,{style:{marginLeft:'10px',lineHeight:'16px'},color:"gold"},subItem.key):null),/*#__PURE__*/index_js_default().createElement("td",null,subItem.type),/*#__PURE__*/index_js_default().createElement("td",null,subItem.isRequied?/*#__PURE__*/index_js_default().createElement("span",{className:Detail_index_module.requied},"*"):''),/*#__PURE__*/index_js_default().createElement("td",null,subItem.title));}):null);}))),/*#__PURE__*/index_js_default().createElement("p",null,/*#__PURE__*/index_js_default().createElement("span",null,"Response Data:"),/*#__PURE__*/index_js_default().createElement("table",{className:Detail_index_module.table},/*#__PURE__*/index_js_default().createElement("tr",null,/*#__PURE__*/index_js_default().createElement("th",{style:{width:'20%'}},"KeyName"),/*#__PURE__*/index_js_default().createElement("th",{style:{width:'10%'}},"Type"),/*#__PURE__*/index_js_default().createElement("th",null,"Comment")),(detail.responseStructures||[]).map(function(item){if(item.keyName==='manager'){item.type==='[]';item.children=[{keyName:'name',type:'string',title:'名称'},{keyName:'age',type:'string',title:'年龄'}];}return/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("tr",null,/*#__PURE__*/index_js_default().createElement("td",null,item.keyName),/*#__PURE__*/index_js_default().createElement("td",null,item.type),/*#__PURE__*/index_js_default().createElement("td",null,item.title)),item.children&&item.children.length?item.children.map(function(subItem){return/*#__PURE__*/index_js_default().createElement("tr",{className:Detail_index_module.subTr},/*#__PURE__*/index_js_default().createElement("td",null,/*#__PURE__*/index_js_default().createElement("span",{className:Detail_index_module.subItem}),subItem.keyName),/*#__PURE__*/index_js_default().createElement("td",null,subItem.type),/*#__PURE__*/index_js_default().createElement("td",null,subItem.title));}):null);}))));}}]);return Detail;}(index_js_.Component);/* harmony default export */ const apiDoc_Detail = ((/* unused pure expression or super */ null && (Detail)));
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/select/style/index.js + 1 modules
var select_style = __webpack_require__(94289);
// EXTERNAL MODULE: ../my-cli/node_modules/antd/es/select/index.js
var es_select = __webpack_require__(4213);
// EXTERNAL MODULE: ./packages/postman/src/index.jsx + 6 modules
var src = __webpack_require__(92306);
;// CONCATENATED MODULE: ../my-web/src/pages/apiDoc/NewApiDocByPostman/index.module.less
// extracted by mini-css-extract-plugin
/* harmony default export */ const NewApiDocByPostman_index_module = ({"newBox":"_-my-web-src-pages-apiDoc-NewApiDocByPostman-index-module__newBox","detail":"_-my-web-src-pages-apiDoc-NewApiDocByPostman-index-module__detail","tools":"_-my-web-src-pages-apiDoc-NewApiDocByPostman-index-module__tools","helpBox":"_-my-web-src-pages-apiDoc-NewApiDocByPostman-index-module__helpBox","text":"_-my-web-src-pages-apiDoc-NewApiDocByPostman-index-module__text"});
;// CONCATENATED MODULE: ../my-web/src/pages/apiDoc/NewApiDocByPostman/index.jsx
function NewApiDocByPostman_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){NewApiDocByPostman_typeof=function _typeof(obj){return typeof obj;};}else{NewApiDocByPostman_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return NewApiDocByPostman_typeof(obj);}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function NewApiDocByPostman_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function NewApiDocByPostman_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function NewApiDocByPostman_createClass(Constructor,protoProps,staticProps){if(protoProps)NewApiDocByPostman_defineProperties(Constructor.prototype,protoProps);if(staticProps)NewApiDocByPostman_defineProperties(Constructor,staticProps);return Constructor;}function NewApiDocByPostman_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)NewApiDocByPostman_setPrototypeOf(subClass,superClass);}function NewApiDocByPostman_setPrototypeOf(o,p){NewApiDocByPostman_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return NewApiDocByPostman_setPrototypeOf(o,p);}function NewApiDocByPostman_createSuper(Derived){var hasNativeReflectConstruct=NewApiDocByPostman_isNativeReflectConstruct();return function _createSuperInternal(){var Super=NewApiDocByPostman_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=NewApiDocByPostman_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return NewApiDocByPostman_possibleConstructorReturn(this,result);};}function NewApiDocByPostman_possibleConstructorReturn(self,call){if(call&&(NewApiDocByPostman_typeof(call)==="object"||typeof call==="function")){return call;}return NewApiDocByPostman_assertThisInitialized(self);}function NewApiDocByPostman_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function NewApiDocByPostman_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function NewApiDocByPostman_getPrototypeOf(o){NewApiDocByPostman_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return NewApiDocByPostman_getPrototypeOf(o);}/**
 * ImportDataModel
 * @author tianyanrong
 * @date 2021/6/22 下午3:56:51
 * monaco-editor实例: https://microsoft.github.io/monaco-editor/playground.html
 */var NewApiDoc=/*#__PURE__*/function(_Component){NewApiDocByPostman_inherits(NewApiDoc,_Component);var _super=NewApiDocByPostman_createSuper(NewApiDoc);function NewApiDoc(){var _this;NewApiDocByPostman_classCallCheck(this,NewApiDoc);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.node=null;_this.monacoInstance=null;_this.keyNames=['title','url','method','headers','requestStructures','responseStructures'];_this.valideStructures=function(structures,name){var errors='';if(structures&&structures.length){structures.forEach(function(item){if(!(item.keyName&&item.type&&item.title)&&!errors){errors="\u8BF7\u5B8C\u6210\u201C".concat(name,"\u201D \u4E2D ").concat(!item.keyName?'keyName、':''," ").concat(!item.type?'type、':''," ").concat(!item.title?'title、':''," \u7684\u6570\u636E");}else if(['string','number','date','[]','string[]','number[]'].indexOf(item.type)===-1&&!errors){errors="\u8BF7\u51C6\u786E\u5B9A\u4E49\u201C".concat(name,"\u201D \u4E2D \u201C").concat(item.keyName,"\u201D \u7684 \u201Ctype\u201D \u7C7B\u578B");}if(item.key&&!errors&&['offset','limit','orderKey','orderType'].indexOf(item.key)===-1){errors="\u8BF7\u51C6\u786E\u5B9A\u4E49\u201C".concat(name,"\u201D \u4E2D \u201C").concat(item.keyName,"\u201D \u7684 \u201Ckey\u201D \u7C7B\u578B");}if(item.children&&item.children.length&&!errors){errors=_this.valideStructures(item.children,name);}});}return errors;};_this.hanldeOk=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee(){var onOk,data,newData,requieds,isRequied,errorNames,errors;return regenerator_default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:onOk=_this.props.onOk;data=_this.state.data;newData=_objectSpread(_objectSpread({},data),{},{method:(data.method||'').toUpperCase()});requieds=['type','moduleName','title','url','method','headers'];isRequied=true;errorNames=[];requieds.forEach(function(name){if(!newData[name]){isRequied=false;var errorName=name;if(name==='type'){errorName='使用场景';}if(name==='moduleName'){errorName='模块名称';}errorNames.push(errorName);}});if(isRequied){_context.next=10;break;}message/* default.error */.ZP.error("\u8BF7\u5B8C\u6210\u7F3A\u5931\u7684\u6570\u636E\uFF1A".concat(errorNames.join('、')));return _context.abrupt("return");case 10:if(newData.method==='POST'||newData.method==='GET'){_context.next=13;break;}message/* default.error */.ZP.error("\u8BF7\u4FEE\u6539method\u7684\u503C\u4E3A\uFF1A\u201CPOST\u201D \u6216 \u201CGET\u201D");return _context.abrupt("return");case 13:errors=_this.valideStructures(newData.requestStructures,'requestStructures');if(!errors){_context.next=17;break;}message/* default.error */.ZP.error(errors);return _context.abrupt("return");case 17:errors=_this.valideStructures(newData.responseStructures,'responseStructures');if(!errors){_context.next=21;break;}message/* default.error */.ZP.error(errors);return _context.abrupt("return");case 21:if(onOk&&typeof onOk==="function"){onOk(newData);}case 22:case"end":return _context.stop();}}},_callee);}));return _this;}NewApiDocByPostman_createClass(NewApiDoc,[{key:"render",value:function render(){var _this2=this;var data=this.state.data;var _this$props=this.props,onCancel=_this$props.onCancel,acceptTypes=_this$props.acceptTypes;return/*#__PURE__*/index_js_default().createElement("div",{className:NewApiDocByPostman_index_module.newBox},/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(NewApiDocByPostman_index_module.tools)},/*#__PURE__*/index_js_default().createElement("div",{style:{flex:'auto'}},/*#__PURE__*/index_js_default().createElement(es_select/* default */.Z,{value:data.type||null,placeholder:"\u4F7F\u7528\u573A\u666F...",size:"small",style:{width:'140px',marginRight:'15px'},onChange:function onChange(value){_this2.setState({data:_objectSpread(_objectSpread({},data),{},{type:value})});}},acceptTypes.indexOf('query')>=0?/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"query"},"Query(\u5217\u8868\u6570\u636E)"):null,acceptTypes.indexOf('get')>=0?/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"get"},"Get(\u8BE6\u60C5\u6570\u636E)"):null,acceptTypes.indexOf('update')>=0?/*#__PURE__*/index_js_default().createElement(es_select/* default.Option */.Z.Option,{value:"update"},"Update(\u63D0\u4EA4\u4FEE\u6539\u6570\u636E)"):null),/*#__PURE__*/index_js_default().createElement(input/* default */.Z,{value:data.moduleName||'',onChange:function onChange(e){var value=e.target.value;_this2.setState({data:_objectSpread(_objectSpread({},data),{},{moduleName:value})});},size:"small",addonBefore:"\u6A21\u5757\u540D\u79F0:",style:{width:'250px'}})),/*#__PURE__*/index_js_default().createElement("div",{style:{textAlign:'right'}},/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:"small",type:'default',style:{marginRight:'15px'},onClick:function onClick(){if(onCancel&&typeof onCancel==='function'){onCancel();}}},"\u53D6\u6D88"),/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:"small",type:'primary',style:{width:'100px'},onClick:function onClick(){_this2.hanldeOk();}},data&&data.apiDocId?'保存修改':'新增接口'))),/*#__PURE__*/index_js_default().createElement("div",{className:NewApiDocByPostman_index_module.detail},/*#__PURE__*/index_js_default().createElement(src["default"],{outputValue:{value:data,onChange:function onChange(value){_this2.setState({data:value});}}})));}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var detail=nextProps.detail;var prevDataString=JSON.stringify(detail);if(prevDataString!==prevState.prevDataString){return{data:nextProps.detail,prevDataString:prevDataString};}return null;}}]);return NewApiDoc;}(index_js_.Component);/* harmony default export */ const NewApiDocByPostman = (NewApiDoc);
// EXTERNAL MODULE: ../data-source/index.js + 32 modules
var data_source = __webpack_require__(38636);
;// CONCATENATED MODULE: ../my-web/src/pages/apiDoc/index.jsx
function apiDoc_typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){apiDoc_typeof=function _typeof(obj){return typeof obj;};}else{apiDoc_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return apiDoc_typeof(obj);}function apiDoc_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function apiDoc_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){apiDoc_ownKeys(Object(source),true).forEach(function(key){apiDoc_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{apiDoc_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function apiDoc_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function apiDoc_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function apiDoc_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){apiDoc_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){apiDoc_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function apiDoc_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function apiDoc_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function apiDoc_createClass(Constructor,protoProps,staticProps){if(protoProps)apiDoc_defineProperties(Constructor.prototype,protoProps);if(staticProps)apiDoc_defineProperties(Constructor,staticProps);return Constructor;}function apiDoc_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)apiDoc_setPrototypeOf(subClass,superClass);}function apiDoc_setPrototypeOf(o,p){apiDoc_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return apiDoc_setPrototypeOf(o,p);}function apiDoc_createSuper(Derived){var hasNativeReflectConstruct=apiDoc_isNativeReflectConstruct();return function _createSuperInternal(){var Super=apiDoc_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=apiDoc_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return apiDoc_possibleConstructorReturn(this,result);};}function apiDoc_possibleConstructorReturn(self,call){if(call&&(apiDoc_typeof(call)==="object"||typeof call==="function")){return call;}return apiDoc_assertThisInitialized(self);}function apiDoc_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function apiDoc_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function apiDoc_getPrototypeOf(o){apiDoc_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return apiDoc_getPrototypeOf(o);}/**
 * apps
 * @author tianyanrong
 * @date 2021/6/15 下午3:22:25
 */var Page=/*#__PURE__*/function(_Component){apiDoc_inherits(Page,_Component);var _super=apiDoc_createSuper(Page);function Page(){var _this;apiDoc_classCallCheck(this,Page);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.saveAipDoc=/*#__PURE__*/function(){var _ref=apiDoc_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee(options){var _this$state$detail,detail,onSelect,res,data,_dataObj,_url,currItem;return regenerator_default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state$detail=_this.state.detail,detail=_this$state$detail===void 0?{}:_this$state$detail;onSelect=_this.props.onSelect;if(detail.apiDocId){options.apiDocId=detail.apiDocId;}_context.next=5;return saveAipDoc(apiDoc_objectSpread({},options));case 5:res=_context.sent;if(!(res.result==='success')){_context.next=15;break;}message/* default.success */.ZP.success('保存成功！');_context.next=10;return _this.getData();case 10:data=_context.sent;if(detail.apiDocId){_this.setState({isEdit:false});}else{_dataObj={};(data||[]).map(function(item){_dataObj[item.url]=item;});_url=options.url;currItem=_dataObj[_url]||{};_this.setState({isEdit:false,detail:currItem,selectedKeys:[currItem.apiDocId]});}if(onSelect&&typeof onSelect==='function'){onSelect(dataObj[url]);}_context.next=16;break;case 15:message/* default.error */.ZP.error(res&&res.message||'保存失败！');case 16:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.remove=/*#__PURE__*/function(){var _ref2=apiDoc_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee2(url){var res;return regenerator_default().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return removeAipDoc({url:url});case 2:res=_context2.sent;if(res.result==='success'){message/* default.success */.ZP.success('删除成功！');_this.getData();}else{message/* default.error */.ZP.error(res&&res.message||'删除失败！');}case 4:case"end":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.getData=/*#__PURE__*/apiDoc_asyncToGenerator(/*#__PURE__*/regenerator_default().mark(function _callee3(){var _this$props,_this$props$acceptTyp,acceptTypes,onSelect,_this$state$selectedK,selectedKeys,res,data,_dataObj2,currentId,selectItem;return regenerator_default().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$props=_this.props,_this$props$acceptTyp=_this$props.acceptTypes,acceptTypes=_this$props$acceptTyp===void 0?[]:_this$props$acceptTyp,onSelect=_this$props.onSelect;_this$state$selectedK=_this.state.selectedKeys,selectedKeys=_this$state$selectedK===void 0?[]:_this$state$selectedK;_this.setState({loading:true});_context3.next=5;return queryAipDoc({acceptTypes:acceptTypes,aaa:1});case 5:res=_context3.sent;data=res.data||[];if(!(res.result==='success')){_context3.next=15;break;}_dataObj2={};data.map(function(item){_dataObj2[item.apiDocId]=item;});currentId=selectedKeys[0];selectItem=currentId&&_dataObj2[currentId]?_dataObj2[currentId]:data[0]||{};_context3.next=14;return _this.setState({detail:selectItem,selectedKeys:selectItem.apiDocId?[selectItem.apiDocId]:[],data:res.data||[],dataObj:_dataObj2});case 14:if(onSelect&&typeof onSelect==='function'){onSelect(selectItem);}case 15:_context3.next=17;return _this.setState({loading:false});case 17:return _context3.abrupt("return",data);case 18:case"end":return _context3.stop();}}},_callee3);}));_this.acceptTypes=['get','query','update'];_this.onNew=function(){var onSelect=_this.props.onSelect;var isEdit=_this.state.isEdit;if(isEdit){return;}_this.setState({isEdit:true,detail:{},selectedKeys:[]});if(onSelect&&typeof onSelect==='function'){onSelect();}};return _this;}apiDoc_createClass(Page,[{key:"componentDidMount",value:function componentDidMount(){this.getData();}},{key:"render",value:function render(){var _this2=this;var _this$state=this.state,_this$state$data=_this$state.data,data=_this$state$data===void 0?[]:_this$state$data,_this$state$dataObj=_this$state.dataObj,dataObj=_this$state$dataObj===void 0?{}:_this$state$dataObj,_this$state$detail2=_this$state.detail,detail=_this$state$detail2===void 0?{}:_this$state$detail2,_this$state$isEdit=_this$state.isEdit,isEdit=_this$state$isEdit===void 0?false:_this$state$isEdit,isNewDataSource=_this$state.isNewDataSource,isCopy=_this$state.isCopy,_this$state$selectedK2=_this$state.selectedKeys,selectedKeys=_this$state$selectedK2===void 0?[]:_this$state$selectedK2;var _this$props2=this.props,_this$props2$reverseL=_this$props2.reverseLayout,reverseLayout=_this$props2$reverseL===void 0?true:_this$props2$reverseL,_onSelect=_this$props2.onSelect,onCancel=_this$props2.onCancel,onOk=_this$props2.onOk;var isHadData=data&&data.length||isEdit;var isEditDataSource=isNewDataSource||isEdit&&detail.from==='dataModel';if(isEditDataSource){return/*#__PURE__*/index_js_default().createElement(data_source/* default */.Z,{app:this.props.app,basename:this.props.basename,history:this.props.history,currName:detail.name,isCopy:isCopy,onCancel:function onCancel(isSuccess){_this2.setState({isEdit:false,isNewDataSource:false});if(isSuccess){_this2.getData();}}});}return isEdit?/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(index_module.page)},/*#__PURE__*/index_js_default().createElement(NewApiDocByPostman,{acceptTypes:this.props.acceptTypes||this.acceptTypes,detail:detail,onCancel:function onCancel(){var currItem=selectedKeys[0]&&dataObj[selectedKeys[0]]?dataObj[selectedKeys[0]]:data[0];_this2.setState({isEdit:false,detail:currItem,selectedKeys:currItem&&currItem.apiDocId?[currItem.apiDocId]:[]});if(_onSelect&&typeof _onSelect==='function'){_onSelect(currItem);}},onOk:function onOk(value){_this2.saveAipDoc(value);}})):/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:index_module.topTools},/*#__PURE__*/index_js_default().createElement(space/* default */.Z,null,/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:"small",ghost:true,type:'primary',onClick:this.onNew},"\xA0\xA0\u6DFB\u52A0\u7B2C\u4E09\u65B9\u63A5\u53E3\xA0\xA0"),/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{size:"small",ghost:true,type:'primary',onClick:function onClick(){_this2.setState({isNewDataSource:true});}},"\xA0\xA0\u6DFB\u52A0MySql\u6570\u636E\u63A5\u53E3\xA0\xA0")),/*#__PURE__*/index_js_default().createElement("div",{style:{flex:'auto',textAlign:'right'}},onCancel?/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{onClick:function onClick(){onCancel();},size:"small",type:'default'},"\u53D6\u6D88"):null,onOk?/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{disabled:!isHadData,style:{width:'100px',marginLeft:'15px'},size:"small",type:'primary',onClick:function onClick(){onOk();}},"\u7ED1\u5B9A"):null)),/*#__PURE__*/index_js_default().createElement("div",{className:"".concat(index_module.page," ").concat(reverseLayout?index_module.reverseLayout:'')},isHadData?/*#__PURE__*/index_js_default().createElement((index_js_default()).Fragment,null,/*#__PURE__*/index_js_default().createElement("div",{className:index_module.sidebar,style:isEdit?{opacity:'0.5'}:{}},/*#__PURE__*/index_js_default().createElement(SideBar,{data:data,isEdit:isEdit,acceptTypes:this.props.acceptTypes||this.acceptTypes,onCopy:function onCopy(){if(isEdit){return;}var _this2$state$selected=_this2.state.selectedKeys,selectedKeys=_this2$state$selected===void 0?[]:_this2$state$selected;_this2.setState({isEdit:true,isCopy:true,detail:apiDoc_objectSpread(apiDoc_objectSpread({},dataObj[selectedKeys[0]]||{}),{},{apiDocId:''}),selectedKeys:[]});if(_onSelect&&typeof _onSelect==='function'){_onSelect();}},onEdit:function onEdit(){_this2.setState({isEdit:true});if(_onSelect&&typeof _onSelect==='function'){_onSelect();}},onRemove:function onRemove(){var _this2$state$selected2=_this2.state.selectedKeys,selectedKeys=_this2$state$selected2===void 0?[]:_this2$state$selected2;_this2.remove(dataObj[selectedKeys[0]]&&dataObj[selectedKeys[0]].url);if(_onSelect&&typeof _onSelect==='function'){_onSelect();}},onNew:this.onNew,selectedKeys:selectedKeys,onSelect:function onSelect(selectUrl){if(isEdit){return;}_this2.setState({isEdit:false,detail:dataObj[selectUrl],selectedKeys:[selectUrl]});if(_onSelect&&typeof _onSelect==='function'){_onSelect(dataObj[selectUrl]);}}})),/*#__PURE__*/index_js_default().createElement("div",{className:index_module.content},/*#__PURE__*/index_js_default().createElement(src["default"],{readOnly:true,outputValue:{value:detail}}))):/*#__PURE__*/index_js_default().createElement("div",{style:{width:'100%',paddingTop:'100px'}},/*#__PURE__*/index_js_default().createElement(result/* default */.ZP,{title:"\u6CA1\u6709\u76F8\u5173\u63A5\u53E3\u6587\u6863",extra:/*#__PURE__*/index_js_default().createElement(es_button/* default */.Z,{ghost:true,type:"primary",onClick:function onClick(){if(isEdit){return;}_this2.setState({isEdit:true,detail:{},selectedKeys:[]});if(_onSelect&&typeof _onSelect==='function'){_onSelect();}}},"\u65B0\u589E")}))));}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var apiDocId=nextProps.apiDocId||'';if(apiDocId&&apiDocId!==prevState.apiDocId){var _dataObj3=prevState.dataObj||{};return{apiDocId:apiDocId,detail:_dataObj3[apiDocId]||{},selectedKeys:[apiDocId]};}else if(apiDocId!==prevState.apiDocId){return{apiDocId:apiDocId};}return null;}}]);return Page;}(index_js_.Component);/* harmony default export */ const apiDoc = ((0,es/* connect */.$j)(function(_ref4){var globalModel=_ref4.globalModel;return{globalModel:globalModel};})(Page));

/***/ }),

/***/ 32478:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92910);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62897);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(77982);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(96853);
/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_3__);
function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}//import { message } from 'antd';
axios__WEBPACK_IMPORTED_MODULE_1___default().create({timeout:10000,headers:{'X-Requested-With':'XMLHttpRequest'}});var trimParams=function trimParams(params){if((0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(params)&&!Array.isArray(params)){Object.keys(params).forEach(function(key){if(typeof params[key]==='string'){params[key]=params[key].replace(/(^\s+)|(\s+$)/g,'');}});}else if(typeof params==='string'&&params.indexOf('=')>0){var newParams=qs__WEBPACK_IMPORTED_MODULE_3___default().parse(params);params=trimParams(newParams);params=qs__WEBPACK_IMPORTED_MODULE_3___default().stringify(params);}return params;};var parseData=function parseData(res){if(res.result==='success'||res.code===200){return _objectSpread(_objectSpread({},res),{},{result:res.result,data:res.data,count:res.count,msg:res.msg,code:200});}else{return{result:res.result,data:[],count:0,msg:res.msg,code:500};}};axios__WEBPACK_IMPORTED_MODULE_1___default().interceptors.response.use(function(response){if(response.status===401&&response.data&&response.data.data&&response.data.data.match(/^http/)){var href=encodeURIComponent(window.location.href);window.location.href="".concat(response.data.data,"?redirectUrl=").concat(href);}return parseData(response.data);},function(error){//
});var request=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee(config){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config.method=config.method||'POST';config.headers=config.headers||{};if(config.type==='json'){config.headers['Content-Type']='application/json;charset=UTF-8';}else{config.headers['Content-Type']='application/x-www-form-urlencoded';}_context.prev=3;if(config.body){if(config.method==='GET'&&Object.keys(config.body).length){config.url="".concat(config.url,"?").concat(qs__WEBPACK_IMPORTED_MODULE_3___default().stringify(config.body));}else if((0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(config.body)&&!Array.isArray(config.body)&&config.headers&&config.headers['Content-Type']&&config.headers['Content-Type'].indexOf('application/x-www-form-urlencoded')>=0){config.body=qs__WEBPACK_IMPORTED_MODULE_3___default().stringify(config.body);}config.body=trimParams(config.body);}_context.next=7;return axios__WEBPACK_IMPORTED_MODULE_1___default()(_objectSpread(_objectSpread({},config),{},{data:config.body,validateStatus:function validateStatus(status){var href=window.location.href;var loginUrl="".concat("https://icode-run.github.io/icodeRun/".replace(/\/$/,''),"/login");if(status===401&&href.indexOf(loginUrl)<0){window.location.href=loginUrl;}return status>=200&&status<300;// default
}}));case 7:return _context.abrupt("return",_context.sent);case 10:_context.prev=10;_context.t0=_context["catch"](3);case 12:case"end":return _context.stop();}}},_callee,null,[[3,10]]);}));return function request(_x){return _ref.apply(this,arguments);};}();/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (request);

/***/ }),

/***/ 4389:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
// extracted by mini-css-extract-plugin
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"onlyViewPage":"_-my-designer-src-index-module__onlyViewPage","buildPage":"_-my-designer-src-index-module__buildPage","toolsBarBox":"_-my-designer-src-index-module__toolsBarBox","buildPageContent":"_-my-designer-src-index-module__buildPageContent"});

/***/ })

}]);